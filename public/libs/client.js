/*
 * client.js - v0.3.3
 * Compiled Mon Feb 25 2019 17:20:25 GMT+0800 (GMT+08:00)
 * Copyright (c) 2019 www.hightopo.com
 */

var hteditor=function(){"use strict";function B(B,a,j){j.style.cursor="ew-resize";var E=j.innerHTML.charAt(0),$=a.querySelector("input.color_"+E),H=function(a){a.preventDefault();var j=("A"===E?parseFloat($.value):parseInt($.value))||0,H=ht.Default.getClientPoint(a).x,K=function(a){a.preventDefault();var K=ht.Default.getClientPoint(a).x-H,C=void 0;"A"===E?(C=j+.01*K,C>1&&(C=1),C<0&&(C=0),$.value=C.toFixed(2)):(C=j+1*K,C>255&&(C=255),C<0&&(C=0),$.value=C),B.updateInputChange()};window.addEventListener("mousemove",K,!1),window.addEventListener("touchmove",K,!1);var C=function(B){B.preventDefault(),window.removeEventListener("mousemove",K,!1),window.removeEventListener("touchmove",K,!1),window.removeEventListener("mouseup",C,!1),window.removeEventListener("touchend",C,!1)};window.addEventListener("mouseup",C,!1),window.addEventListener("touchend",C,!1)};j.addEventListener("mousedown",H,!1),j.addEventListener("touchstart",H,!1)}function a(B){var a=new RegExp("(^|&)"+B+"=([^&]*)(&|$)"),j=window.location.search.substr(1).match(a);return null!=j?decodeURIComponent(j[2]):null}function j(B){return ht.Default.clone(B)}function E(B){return parseFloat(B.toFixed(ht.Default.numberDigits))}function H(B,a){if(null!=B)return a||!Ra.config.traceMissingI18n||Ra.customStrings[B]||Ra.strings[B]||console.log("i18n missing:["+B+"]"),a?Ra.customStrings[B]||Ra.strings[B]:Ra.customStrings[B]||Ra.strings[B]||B}function K(B,a){var j=B.indexOf(a);j>=0&&B.splice(j,1)}function C(B){return ht.Default.isEmptyObject(B)}function Z(B){return B?kB(B)?B:B.__ht__||B.toString():""}function h(B){var a=Z(B),j=a.indexOf("{")+1,E=a.lastIndexOf("}");for(a=a.substring(j,E);a.startsWith("\n");)a=a.substr(1);for(;a.endsWith("\n");)a=a.substring(0,a.length-1);return a}function m(B){var a=B.indexOf("function");if(B&&!(a<0)){var j=void 0,E=B.indexOf("{")+1,$=B.lastIndexOf("}"),H=B.indexOf("(")+1,K=B.indexOf(")");return E&&$&&H&&K&&(j=new Function(B.substring(H,K),B.substring(E,$)),j.__ht__=B.substr(a)),j}}function J(B,a){if("s"===B)return function(B){return B.s(a)};if("a"===B)return function(B){return B.a(a)};if("p"===B){var j=function(){var B=ht.Default.getter(a);return{v:function(a){if(a[B])return a[B]()}}}();if("object"==typeof j)return j.v}}function O(B,a){if("s"===B)return function(B,j){return B.s(a,j)};if("a"===B)return function(B,j){return B.a(a,j)};if("p"===B){var j=function(){var B=ht.Default.setter(a);return{v:function(a,j){if(a[B])return a[B](j)}}}();if("object"==typeof j)return j.v}}function k(B){return 37===B.keyCode}function s(B){return 38===B.keyCode}function z(B){return 39===B.keyCode}function o(B){return 40===B.keyCode}function c(B){return 13===B.keyCode}function U(B){return 27===B.keyCode}function I(B){return ht.Default.isDelete(B)}function X(B){return ht.Default.isLeftButton(B)}function F(B){return ht.Default.isDoubleClick(B)}function V(B,a){ht.Default.startDragging(B,a)}function w(B){return ht.Default.getClientPoint(B)}function P(B){return ht.Default.getTargetElement(B)}function _(B){return ht.Default.getPagePoint(B)}function l(){return ht.Default.getWindowInfo()}function e(B,a){return ht.Default.getDistance(B,a)}function n(){return ht.Default.unionPoint.apply(this,arguments)}function b(B){return ht.Default.getImageMap()[B]?(delete ht.Default.getImageMap()[B],!0):!!ht.Default.getCompTypeMap()[B]&&(delete ht.Default.getCompTypeMap()[B],!0)}function S(B,a,j){return ht.Default.getPosition(B,a,j)}function v(B,a){return ht.Default.stringify(B,a)}function g(B){return ht.Default.parse(B)}function i(B){if(!B)return"";var a=B.lastIndexOf(".");return a===-1?B:B.substr(0,a)}function p(B){return B=B.replace(/^.*[\\\/]/,""),i(B)}function d(B,a,j,E,$){ht.Default.layout(B,a,j,E,$)}function x(B,a,j,E){ht.Default.setCanvas(B,a,j,E)}function W(B){ht.Default.removeHTML(B)}function t(B,a,j){ht.Default.xhrLoad(B,a,j)}function r(B){return ht.Default.isShiftDown(B)}function G(B){return ht.Default.isCtrlDown(B)}function f(B,a){return ht.Default.createView(B,a)}function y(B){return ht.Default.createCanvas(B)}function Y(B,a){return ht.Default.createDiv(a,B)}function R(B,a){return ht.Default.unionRect(B,a)}function N(B,a,j,E,$,H,K,C,Z,h){return ht.Default.drawText(B,a,j,E,$,H,K,C,Z,h)}function M(B,a,j,E,$,H,K,C,Z,h){ht.Default.drawStretchImage(B,a,j,E,$,H,K,C,Z,h)}function Q(B,a,j,E,$,H,K){ht.Default.drawBorder(B,a,j,E,$,H,K)}function u(B,a,j,E,$,H){var K=B.getContext("2d");return K.save(),a=a||0,j=j||0,E=E||1,H=H||ht.Default.devicePixelRatio,K.translate(a*H,j*H),E*=H,1!==E&&K.scale(E,E),$&&(K.beginPath(),K.rect($.x,$.y,$.width,$.height),K.clip(),K.clearRect($.x,$.y,$.width,$.height)),K}function q(B,a){var j=B.prototype,E=ht.Default.getMSMap();for(var $ in a)E[$]&&E.hasOwnProperty($)?E[$](j,a):j[$]=a[$]}function D(B,a){a[B._id]=B,B.eachChild(function(B){a[B._id]=B,D(B,a)})}function A(B){ht.Default.preventDefault(B)}function T(B){return/^displays/.test(B)}function L(B){return/^symbols/.test(B)}function BB(B){return/^components/.test(B)}function aB(B){return/^scenes/.test(B)}function jB(B){return/^models/.test(B)}function EB(B){return/^assets/.test(B)}function $B(B){return/\.(png|jpg|gif|jpeg|bmp|svg|dxf|mp4|mp3|ttf|otf)$/i.test(B)}function HB(B){return/\.json$/i.test(B)}function KB(B){return/\.mp3$/i.test(B)}function CB(B){return/\.mp4$/i.test(B)}function ZB(B){return/\.svg$/i.test(B)}function hB(B){return/\.dxf$/i.test(B)}function mB(B){return/\.ttf$/i.test(B)}function JB(B){return/\.otf$/i.test(B)}function OB(B){return B.substring(0,B.length-5)+".png"}function kB(B){return"string"==typeof B||B instanceof String}function sB(B){return B&&"object"==typeof B}function zB(B){return"function"==typeof B}function oB(B){return B instanceof Array}function cB(B,a){var j=B.getPosition().x,E=B.getPosition().y,$=B.getWidth(),H=B.getHeight(),K=[j-$*B.getAnchor().x,E-H*B.getAnchor().y,$,H],C=B.a("rect");_B(a,"rect",C,K,void 0)}function UB(B,a){var j=B.getRotation(),E=B.a("rotation");_B(a,"rotation",E,j,0)}function IB(B,a){var j=B.getAnchor().x,E=B.a("anchorX");_B(a,"anchorX",E,j,.5),j=B.getAnchor().y,E=B.a("anchorY"),_B(a,"anchorY",E,j,.5)}function XB(B,a){var j=B.getScale().x,E=B.a("scaleX");_B(a,"scaleX",E,j,1),j=B.getScale().y,E=B.a("scaleY"),_B(a,"scaleY",E,j,1)}function FB(B,a){var j=B.isClosePath(),E=B.a("closePath");_B(a,"closePath",E,j,!1)}function VB(B,a,E,$,H){4===arguments.length&&(H=ht.Style[E]);var K=j(B.s(E)),C=B.a(E);_B(a,$,C,K,H)}function wB(B,a){var j=B.getDisplayName(),E=B.a("displayName");_B(a,"displayName",E,j,void 0)}function PB(B,a){if(oB(B)&&oB(a)){if(B.length===a.length){for(var j=0;j<B.length;j++)if(!PB(B[j],a[j]))return!1;return!0}return!1}if(sB(B)&&sB(a)){var E=Object.keys(B);if(E.length===Object.keys(a).length){for(var $=0;$<E.length;$++){var H=E[$];if(!PB(B[H],a[H]))return!1}return!0}return!1}return B===a}function _B(B,a,j,E,$){j?B[a]={func:j,value:E}:PB(E,$)||void 0===E||(B[a]=E)}function lB(B,a,j,E){nB(B,"2d.visible",a.visible),nB(B,"2d.selectable",a.selectable),nB(B,"2d.movable",a.movable),nB(B,"2d.editable",a.editable),nB(B,"pixelPerfect",a.pixelPerfect,!1),nB(B,"opacity",a.opacity,1),nB(B,"clip.percentage",a.clipPercentage,1),nB(B,"clip.direction",a.clipDirection,"top"),nB(B,"layout.h",a.layoutH),nB(B,"layout.v",a.layoutV),nB(B,"prefix",a.prefix),B instanceof ht.Text||(nB(B,"shadow",a.shadow,!1),nB(B,"select.color",a.shadowColor,ht.Color.highlight),nB(B,"shadow.blur",a.shadowBlur,6),nB(B,"shadow.offset.x",a.shadowOffsetX,3),nB(B,"shadow.offset.y",a.shadowOffsetY,3)),bB(B,a),vB(B,a),gB(B,a),SB(B,a),B instanceof ht.Shape&&!a.rect||pB(B,a,j,E);var $=ba.customProperties.comp;$&&$.length&&$.forEach(function(j){nB(B,j.property,a[j.property],j.defaultValue)}),Na.forEach(function(j){B.a(j,a[j])}),B.a("renderHTML",a.renderHTML)}function eB(B,a){VB(B,a,"2d.visible","visible"),VB(B,a,"2d.selectable","selectable"),VB(B,a,"2d.movable","movable"),VB(B,a,"2d.editable","editable"),VB(B,a,"pixelPerfect","pixelPerfect",!1),VB(B,a,"opacity","opacity",1),VB(B,a,"clip.percentage","clipPercentage",1),VB(B,a,"clip.direction","clipDirection","top"),VB(B,a,"layout.h","layoutH"),VB(B,a,"layout.v","layoutV"),VB(B,a,"prefix","prefix"),B instanceof ht.Text||(VB(B,a,"shadow","shadow",!1),VB(B,a,"select.color","shadowColor",ht.Color.highlight),VB(B,a,"shadow.blur","shadowBlur",6),VB(B,a,"shadow.offset.x","shadowOffsetX",3),VB(B,a,"shadow.offset.y","shadowOffsetY",3)),wB(B,a),IB(B,a),XB(B,a),UB(B,a),B instanceof ht.Shape&&!B.a("rect")||cB(B,a);var j=ba.customProperties.comp,E=!!ba.saveCompCustomPropertyDefaultValue;j&&j.length&&j.forEach(function(j){E?VB(B,a,j.property,j.property):VB(B,a,j.property,j.property,j.defaultValue)}),Na.forEach(function(j){B.a(j)&&(a[j]=B.a(j))}),B.a("renderHTML")&&(a.renderHTML=B.a("renderHTML"))}function nB(B,a,E,$){3===arguments.length&&($=ht.Style[a]);var H=dB(E);void 0===H&&(H=$),B.s(a,j(H)),B.a(a,xB(E))}function bB(B,a){B.setDisplayName(dB(a.displayName),void 0),B.a("displayName",xB(a.displayName))}function SB(B,a){B.setRotation(dB(a.rotation,0)),B.a("rotation",xB(a.rotation))}function vB(B,a){var j=dB(a.anchorX,.5),E=dB(a.anchorY,.5);.5===j&&.5===E||B.setAnchor(j,E),B.a("anchorX",xB(a.anchorX)),B.a("anchorY",xB(a.anchorY))}function gB(B,a){var j=dB(a.scaleX,1),E=dB(a.scaleY,1);B.setScale(j,E),B.a("scaleX",xB(a.scaleX)),B.a("scaleY",xB(a.scaleY))}function iB(B,a){B.setClosePath(dB(a.closePath,!1)),B.a("closePath",xB(a.closePath))}function pB(B,a,j,E){var $=dB(a.rect),H=dB(a.relative);$||($=[0,0,j,E],H=!1);var K=$.length;if(4===K)$={x:$[0],y:$[1],width:$[2],height:$[3]},H&&($.x*=j,$.y*=E,$.width*=j,$.height*=E);else if(3===K){var C=$[0];$={width:$[1],height:$[2]},H&&($.width*=j,$.height*=E),"object"==typeof C?C.length&&(C={x:C[0],y:C[1]}):C=S(C,{x:0,y:0,width:j,height:E},$),$.x=C.x-$.width*B.getAnchor().x,$.y=C.y-$.height*B.getAnchor().y}var Z=dB(a.offsetX);Z&&($.x+=Z),Z=dB(a.offsetY),Z&&($.y+=Z),$.width<0||$.height<0?B.p($.x,$.y):B.setRect($),B.a("rect",xB(a.rect))}function dB(B,a){var j=void 0;return j=sB(B)&&B.func?B.value:B,void 0===j&&(j=a),j}function xB(B){if(sB(B)&&B.func)return B.func}function WB(B){if(oB(B)){for(var a=new ht.List,j=B.length,E=0;E<j;E+=2)a.add({x:B[E],y:B[E+1]});B=a}return B}function tB(B){if(B instanceof ht.List&&(B=B.toArray()),oB(B)){for(var a=[],j=0;j<B.length;j++){var E=B[j];a.push(E.x,E.y)}B=a}return B}function rB(B){var a=16;return{width:a,height:a,comps:[{type:function(j,E,$,H,K){var C=ht.Default.getImage(B.graphView.getImage(H));if(C&&C.snapshotURL)C=ht.Default.getImage(C.snapshotURL),C&&M(j,C,"uniform",E.x,E.y,E.width,E.height,H,K);else{var Z=C&&C.boundExtend?H.getRect():B.graphView.getDataUIBounds(H);if(Z&&Z.width&&Z.height){j.save();var h=Math.min(1,a/Math.max(Z.width,Z.height));j.translate(-Z.x*h+(a-Z.width*h)/2,-Z.y*h+(a-Z.height*h)/2),j.scale(h,h),B.graphView.drawData(j,H),j.restore()}}}}]}}function GB(B,a){var j=16,E=B.graphView.getEdgeInfo(a);if(!E)return hj;var $=E.edgeTypeInfo,H=void 0,K=void 0;if(!E.type||E.points){E.sourcePoint.x,E.sourcePoint.y,E.targetPoint.x,E.targetPoint.y;E.type?(H=new ht.List(E.sourcePoint),H.addAll(E.points),H.add(E.targetPoint),K=E.segments):E.looped?(H=Jj,K=Oj):H=E.center?[E.c1,E.sourcePoint,E.targetPoint,E.c2]:[E.sourcePoint,E.targetPoint]}else $&&(H=$.points,K=$.segments);var C=n(H);if(!C||!C.width&&!C.height)return hj;var Z=function(){var B=Math.max(1,Math.max(C.width,C.height)/j),a=[],$=(j-C.width/B)/2,Z=(j-C.height/B)/2;H instanceof ht.List&&(H=H.toArray()),H.forEach(function(j){a.push((j.x-C.x)/B+$,(j.y-C.y)/B+Z)});var h=K?K.toArray():null;return{v:{width:j,height:j,comps:[{type:"shape",points:a,segments:h,borderWidth:1,borderColor:E.color,borderCap:E.cap,borderJoin:E.join}]}}}();return"object"==typeof Z?Z.v:void 0}function fB(B){var a=16,j=n(B.getPoints());if(j&&(j.width||j.height)){var E=function(){var E=Math.max(1,Math.max(j.width,j.height)/a),$=[],H=(a-j.width/E)/2,K=(a-j.height/E)/2;B.getPoints().each(function(B){$.push((B.x-j.x)/E+H,(B.y-j.y)/E+K)});var C=B.getSegments()?B.getSegments().toArray():null;return{v:{width:a,height:a,comps:[{type:"shape",points:$,segments:C,rotation:B.getRotation(),background:B.s("shape.background"),repeatImage:B.s("shape.repeat.image"),borderWidth:B.s("shape.border.width")?1:0,borderColor:B.s("shape.border.color"),borderCap:B.s("shape.border.cap"),borderJoin:B.s("shape.border.join"),gradient:B.s("shape.gradient"),gradientColor:B.s("shape.gradient.color"),closePath:B.isClosePath()}]}}}();if("object"==typeof E)return E.v}return hj}function yB(B){return ht.Default.isInput(B)}function YB(B,a){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},E=j.nullable,$=void 0===E||E,K=j.trim,C=void 0!==K&&K,Z=j.cancellable,h=void 0===Z||Z,m=j.width,J=void 0===m?300:m,O=j.height,k=void 0===O?120:O,s=j.maxLength,z=void 0===s?-1:s,o=j.checkFunc,c=void 0===o?void 0:o,U=arguments[3],I=new ya;I.addRow([{id:"input",textField:{text:a}}],[.1]);var X=new fa,F=[],V=null,w=null;V=function(){var B=I.v("input");return C&&B&&B.trim(),$!==!1||B?z>0&&B&&B.length>z?void RB(null,H("editor.inputmax"),function(){}):c&&!(B=c(B))?void RB(null,H("editor.invalidinput"),function(){}):(U(B,"ok"),void X.hide()):void RB(null,H("editor.inputempty"),function(){})},F.push({label:H("editor.ok"),action:V}),h&&(w=function(){U(a,"cancel"),X.hide()},F.push({label:H("editor.cancel"),action:w})),X.setConfig({title:B,draggable:!0,width:J,height:k,contentPadding:10,content:I,buttons:F,buttonsAlign:"right"}),X.$49$=w,X.$48$=V,X.show(),I.getViewById("input").getElement()._ignore=!0,I.getViewById("input").setFocus()}function RB(B,a,j,E){var $=arguments.length>4&&void 0!==arguments[4]?arguments[4]:300,K=[],C=void 0,Z=void 0;j&&(C=function(){h.hide(),j()},K.push({label:H("editor.ok"),action:C})),E&&(Z=function(){h.hide(),E()},K.push({label:H("editor.cancel"),action:Z}));var h=new fa({title:B||H("editor.prompt"),contentPadding:20,width:$,draggable:!0,content:"<p>"+a+"</p>",buttons:K});h.$49$=Z||C,h.$48$=C,h.show()}function NB(B,a,j,E){var $={unfocusable:!0,id:B,toolTip:a},H=ht.Default.getImage(j),K=H?H.width:16,C=H?H.height:16;return $.icon={width:K+8,height:C+8,fitSize:!!H&&H.fitSize,comps:[{type:"rect",background:{func:function(B,a){return a.getCurrentItem()===$?Ra.config.color_hover:null}},rect:[0,0,K+8,C+8]},{type:"image",name:j,color:{func:function(B,a){return E&&E()?Ra.config.color_select:Ra.config.color_dark}},rect:[4,4,K,C]}]},$}function MB(B,a){var j=ht.Default.createDiv(!0);return j.style.font=ht.Default.labelFont,j.style.color=ht.Default.labelColor,j.style.paddingLeft="4px",j.style.lineHeight=ht.Default.widgetRowHeight+"px",j.style.whiteSpace="nowrap",j.innerHTML=B,a&&(j.style.textAlign=a),j}function QB(B,a,j,E){var $=new ht.widget.Button;return $.setLabel(B),$.setLabelColor(ht.Default.labelColor),$.setLabelSelectColor(Ra.config.color_select),$.setIcon(j),$.setBackground(null),$.setBorderColor(null),E&&($.onClicked=E),a&&($.setToolTip(a),$.enableToolTip()),$.getCurrentBackground=function(){return this._hover||this.isPressed()?Ra.config.color_hover:null},$.getCurrentBorderColor=function(){return this.isSelected()?Ra.config.color_select:null},$.getView().addEventListener("mouseenter",function(){$.isDisabled()||($._hover=!0,$.iv())},!1),$.getView().addEventListener("mouseleave",function(){$.isDisabled()||($._hover=!1,$.iv())},!1),$}function uB(B,a){var j=ht.Default.getImage(B);if(!j)throw B;var E={width:j.width,height:j.height,fitSize:j.fitSize,comps:[{type:"image",name:B,color:{func:function(){return a&&a()?Ra.config.color_select:Ra.config.color_dark}}}]},$=B+".state";return ht.Default.setImage($,E),$}function qB(B,a,j){var E=new FileReader;E.onloadend=function(B){a(B.target.result)},j?E.readAsDataURL(B):E.readAsText(B)}function DB(B,a){a&&!function(){a===document.body&&(document.title=H("editor.title"),document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"),a.appendChild(B.getView());var j=B.getView().style;j.left="0px",j.top="0px",setInterval(function(){if(B.getView()!==(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)){var E=void 0,$=void 0;a===document.body?(E=document.documentElement.clientWidth,window.innerWidth&&window.innerWidth<E&&(E=window.innerWidth),$=document.documentElement.clientHeight,window.innerHeight&&window.innerHeight<$&&($=window.innerHeight)):(E=a.clientWidth,$=a.clientHeight),E===B._oldWidth&&$===B._oldHeight||(B._oldWidth=E,B._oldHeight=$,j.width=E+"px",j.height=$+"px",B.iv())}},500)}()}function AB(B){if(B)for(var a=0;a<B.length;a++)null==B[a]&&(B[a]=0)}function TB(B){if(B)for(var a=ht.Color.chart,j=0;j<B.length;j++)null==B[j]&&(B[j]=a[j%a.length])}function LB(B,a){a=void 0===a?B?B.length:0:a;for(var j=new Array(a),E=0;E<a;E++)j[E]=B?B[E]:void 0;return j}function Ba(B){if(B instanceof ht.graph.GraphView){var a=B.getContentRect(),j=Math.max(a.width,a.height),E=Math.min(1,Ra.config.imageSize/j);return j<3&&(E=Ra.config.imageSize/j),B.toDataURL(void 0,void 0,E)}var $=ht.Default.getImage(B),H=Math.max($.width,$.height),K=Math.min(1,Ra.config.imageSize/H);return ht.Default.toCanvas(B,$.width*K,$.height*K).toDataURL("image/png",1)}function aa(B,a,j){if(B instanceof Array)for(var E=0,$=B.length;E<$;E++)aa(B[E],a,j);else if(B instanceof Object)for(var H in B)if(B.hasOwnProperty(H)){var K=B[H];if(!sB(K))continue;if(kB(K.func)&&Kj.test(K.func)){var C=K.func.slice(5);a&&void 0===a[C]&&(a[C]=H),j&&void 0===j[C]&&(j[C]=K.value)}else aa(K,a,j)}}function ja(){var B=ht.Default.getClass(Ra.config.codeEditorClass)||Ya;return new B}function Ea(B){var a={clazz:this.getClass(),name:this.getName(),displayName:this.getDisplayName(),toolTip:this.getToolTip(),tag:this.getTag(),icon:this.getIcon(),layer:this.getLayer(),parent:B.$58$(this.getParent()),a:{},s:{},dataBindings:this.getDataBindings()?v(this.getDataBindings()):null},E=this.getStyleMap();for(var $ in E)a.s[$]=j(this.s($));var H=this.getAttrObject();for(var K in H)a.a[K]=j(this.a(K));return a}function $a(B,a){var E=new B.clazz;if(Ra.config.cloneName&&E.setName(B.name),Ra.config.cloneDisplayName&&E.setDisplayName(B.displayName),Ra.config.cloneToolTip&&E.setToolTip(B.toolTip),Ra.config.cloneTag&&E.setTag(B.tag),Ra.config.cloneIcon&&E.setIcon(B.icon),Ra.config.cloneLayer&&E.setLayer(B.layer),Ra.config.cloneStyle)for(var $ in B.s)E.s($,j(B.s[$]));if(Ra.config.cloneAttr)for(var H in B.a)E.a(H,j(B.a[H]));return Ra.config.cloneDataBindings&&B.dataBindings&&E.setDataBindings(g(B.dataBindings)),E}function Ha(B,a,j){var E=Ra.config.cloneParent?a.$50$(B.parent,j):void 0;this.setParent(E?E:a.getCurrentSubGraph())}function Ka(B){var a=Ea.call(this,B);return a.rotation=this.getRotation(),a.position=this.p(),a.size={width:this._width,height:this._height},a.scale=this.getScale(),a.anchor=this.getAnchor(),a.image=this.getImage(),a.host=B.$58$(this.getHost()),a}function Ca(B,a){var j=$a(B,a);return Ra.config.cloneRotation&&j.setRotation(B.rotation),Ra.config.clonePosition&&j.setPosition(B.position),Ra.config.cloneSize&&j.setSize(B.size),Ra.config.cloneScale&&j.setScale(B.scale),.5===B.anchor.x&&.5===B.anchor.y||Ra.config.cloneAnchor&&j.setAnchor(B.anchor),Ra.config.cloneImage&&j.setImage(B.image),j}function Za(B,a,j){Ha.call(this,B,a,j),Ra.config.cloneHost&&this.setHost(a.$50$(B.host,j))}function ha(B){var a=Ea.call(this,B);return a.source=B.$58$(this.getSource()),a.target=B.$58$(this.getTarget()),a}function ma(B,a){var j=$a(B,a);return j}function Ja(B,a,j){Ha.call(this,B,a,j),Ra.config.cloneSource&&this.setSource(a.$50$(B.source,j)),Ra.config.cloneTarget&&this.setTarget(a.$50$(B.target,j))}function Oa(B){var a=Ka.call(this,B);return a.expanded=this.isExpanded(),a}function ka(B,a){var j=Ca(B,a);return Ra.config.cloneExpanded&&j.setExpanded(B.expanded),j}function sa(B){var a=Ka.call(this,B);return a.points=j(this.getPoints()),a.segments=j(this.getSegments()),a.thickness=this.getThickness(),a.closePath=this.isClosePath(),a}function za(B,a){var E=Ca(B,a);return Ra.config.clonePoints&&E.setPoints(j(B.points)),Ra.config.cloneSegments&&E.setSegments(j(B.segments)),Ra.config.cloneThickness&&E.setThickness(B.thickness),Ra.config.cloneClosePath&&E.setClosePath(B.closePath),E}function oa(B){var a=Ka.call(this,B);return a.clickThroughEnabled=this.isClickThroughEnabled(),a.syncSize=this.isSyncSize(),a}function ca(B,a){var j=Ca(B,a);return Ra.config.cloneClickThroughEnabled&&j.setClickThroughEnabled(B.clickThroughEnabled),Ra.config.cloneSyncSize&&j.setSyncSize(B.syncSize),j}function Ua(B){var a=oa.call(this,B);return a.ref=this.getRef(),a}function Ia(B,a){var j=ca(B,a);return Ra.config.cloneRef&&j.setRef(B.ref),j}function Xa(B){if(!(B instanceof ht.Node))return null;if(B instanceof ht.Group||B instanceof ht.Grid||B instanceof ht.Block)return null;var a=void 0;if(B instanceof Ij)a={type:"clip",points:j(B.getPoints()),segments:j(B.getSegments()),closePath:B.isClosePath()};else if(B instanceof Xj)a={type:"restore"};else if(B instanceof ht.Shape)a={type:"shape",points:j(B.getPoints()),segments:j(B.getSegments()),closePath:B.isClosePath()};else if(B instanceof ht.Text)a={type:"text",text:B.s("text"),align:B.s("text.align"),vAlign:B.s("text.vAlign"),color:B.s("text.color"),font:B.s("text.font"),shadow:B.s("text.shadow"),shadowColor:B.s("text.shadow.color"),shadowBlur:B.s("text.shadow.blur"),shadowOffsetX:B.s("text.shadow.offset.x"),shadowOffsetY:B.s("text.shadow.offset.y")};else if(B instanceof ht.Node){var E=B.s("shape");E?(a={type:"node_shape",shape:B.s("shape")},"rect"===E?a.depth=B.s("shape.depth"):"roundRect"===E?a.polygonSide=B.s("shape.corner.radius"):"polygon"===E?a.polygonSide=B.s("shape.polygon.side"):"arc"===E&&(a.arcFrom=B.s("shape.arc.from"),a.arcTo=B.s("shape.arc.to"),a.arcClose=B.s("shape.arc.close"),a.arcOval=B.s("shape.arc.oval"))):B.getImage()&&(a={type:"node_image",image:B.getImage(),stretch:B.s("image.stretch"),color:B.s("body.color")})}return a&&(a.visible=B.s("2d.visible"),a.displayName=B.getDisplayName(),a.x=B.getPosition().x,a.y=B.getPosition().y,a.anchorX=B.getAnchor().x,a.anchorY=B.getAnchor().y,a.scaleX=B.getScale().x,a.scaleY=B.getScale().y,a.rotation=B.getRotation(),a.width=B._width,a.height=B._height,a.opacity=B.s("opacity"),"shape"!==a.type&&"node_shape"!==a.type||(a.background=B.s("shape.background"),a.repeatImage=B.s("shape.repeat.image"),a.borderWidth=B.s("shape.border.width"),a.borderColor=B.s("shape.border.color"),a.border3d=B.s("shape.border.3d"),a.border3dColor=B.s("shape.border.3d.color"),a.border3dAccuracy=B.s("shape.border.3d.accuracy"),a.borderCap=B.s("shape.border.cap"),a.borderJoin=B.s("shape.border.join"),a.borderPattern=B.s("shape.border.pattern"),a.gradient=B.s("shape.gradient"),a.gradientColor=B.s("shape.gradient.color"),a.dash=B.s("shape.dash"),a.dashPattern=B.s("shape.dash.pattern"),a.dashOffset=B.s("shape.dash.offset"),a.dashColor=B.s("shape.dash.color"),a.dashWidth=B.s("shape.dash.width"),a.dash3d=B.s("shape.dash.3d"),a.dash3dColor=B.s("shape.dash.3d.color"),a.dash3dAccuracy=B.s("shape.dash.3d.accuracy"),a.fillRule=B.s("shape.fill.rule"),a.fillClipDirection=B.s("shape.fill.clip.direction"),a.fillClipPercentage=B.s("shape.fill.clip.percentage"),a.gradientPack=j(B.s("shape.gradient.pack")),a.borderWidthAbsolute=B.s("shape.border.width.absolute"))),a}function Fa(B,a){var E=void 0;if("clip"===B.type)a&&(E=new Ij,E.s("type","clip"),E.setPoints(B.points),E.setSegments(B.segments));else if("restore"===B.type)a&&(E=new Xj,E.s("type","restore"));else if("shape"===B.type)E=a?new oj:new ht.Shape,E.s("type","shape"),E.setPoints(B.points),E.setSegments(B.segments),E.setClosePath(B.closePath);else if("node_shape"===B.type){E=a?new zj:new ht.Node;var $=B.shape;E.s("shape",$),"rect"===$?E.s("shape.depth",B.depth):"roundRect"===$?E.s("shape.corner.radius",B.polygonSide):"polygon"===$?E.s("shape.polygon.side",B.polygonSide):"arc"===$&&(E.s("shape.arc.from",B.arcFrom),E.s("shape.arc.to",B.arcTo),E.s("shape.arc.close",B.arcClose),E.s("shape.arc.oval",B.arcOval))}else"node_image"===B.type?(a?(E=new cj,E.s("type","image"),E.s("image",B.image)):(E=new ht.Node,E.setImage(B.image)),E.s("body.color",B.color)):"text"===B.type&&(E=a?new Uj:new ht.Text,E.s("type","text"),E.s("text",B.text),E.s("text.align",B.align),E.s("text.vAlign",B.vAlign),E.s("text.color",B.color),E.s("text.font",B.font),E.s("text.shadow",B.shadow),E.s("text.shadow.color",B.shadowColor),E.s("text.shadow.blur",B.shadowBlur),E.s("text.shadow.offset.x",B.shadowOffsetX),E.s("text.shadow.offset.y",B.shadowOffsetY));return E?(E.s("2d.visible",B.visible),E.setDisplayName(B.displayName),E.setPosition(B.x,B.y),.5===B.anchorX&&.5===B.anchorY||E.setAnchor(B.anchorX,B.anchorY),E.setScale(B.scaleX,B.scaleY),E.setRotation(B.rotation),E.setSize(B.width,B.height),E.s("opacity",B.opacity),"shape"!==B.type&&"node_shape"!==B.type||(E.s("shape.background",B.background),E.s("shape.repeat.image",B.repeatImage),E.s("shape.border.width",B.borderWidth),E.s("shape.border.color",B.borderColor),E.s("shape.border.3d",B.border3d),E.s("shape.border.3d.color",B.border3dColor),E.s("shape.border.3d.accuracy",B.border3dAccuracy),E.s("shape.border.cap",B.borderCap),E.s("shape.border.join",B.borderJoin),E.s("shape.border.pattern",B.borderPattern),E.s("shape.gradient",B.gradient),E.s("shape.gradient.color",B.gradientColor),E.s("shape.dash",B.dash),E.s("shape.dash.pattern",B.dashPattern),E.s("shape.dash.offset",B.dashOffset),E.s("shape.dash.color",B.dashColor),E.s("shape.dash.width",B.dashWidth),E.s("shape.dash.3d",B.dash3d),E.s("shape.dash.3d.color",B.dash3dColor),E.s("shape.dash.3d.accuracy",B.dash3dAccuracy),E.s("shape.fill.rule",B.fillRule),E.s("shape.fill.clip.direction",B.fillClipDirection),E.s("shape.fill.clip.percentage",B.fillClipPercentage),E.s("shape.gradient.pack",j(B.gradientPack)),E.s("shape.border.width.absolute",B.borderWidthAbsolute)),E):null}function Va(B,a){var j=void 0,E=a?a.dm:null,$=E?E.a("width"):100,H=E?E.a("height"):100,K=dB(B.type);if(kB(K)){var C=oE[K];C?j=new C(B,$,H):HB(K)&&(j=new Tj(B,$,H))}else j=new zE(B,$,H);return j&&a&&a.addData(j,!0),j}function wa(B,a){B.s("chart.series")||B.s("chart.series",[]);var j=B.s("chart.series");j[0]||(j[0]={});var E=j[0];return E.values||(E.values=[]),E.colors||(E.colors=[]),E[a]}function Pa(B,a){return dB(wa(B,a))}function _a(B,a){return xB(wa(B,a))}function la(){var B=Ra.config.customProperties.display;B&&B.length&&B.forEach(function(B){var a=(B.accessType||"a")+":"+B.property;mj.display[a]=!0}),B=Ra.config.customProperties.data,B&&B.length&&B.forEach(function(B){var a=(B.accessType||"a")+":"+B.property;mj.data[a]=!0}),B=Ra.config.customProperties.symbol,B&&B.length&&B.forEach(function(B){mj.symbol[B.property]=!0}),B=Ra.config.customProperties.comp,B&&B.length&&B.forEach(function(B){mj.comp[B.property]=!0})}function ea(){var B=Ra.config,a=Ra.consts,j=function(a,j){void 0===B.valueTypes[a]&&(j.name="editor.valuetype."+a.toLowerCase(),B.valueTypes[a]=j)};j("String",{type:"string"}),j("Image",{type:"image"}),j("URL",{type:"url"}),j("Multiline",{type:"multiline",rows:1}),j("Font",{type:"font"}),j("Angle",{type:"number",angle:!0}),j("Int",{type:"int",step:1}),j("PositiveNumber",{type:"number",step:1,min:0}),j("Number",{type:"number",step:1}),j("Color",{type:"color"}),j("Boolean",{type:"boolean"}),j("Function",{type:"function"}),j("Object",{type:"object"}),j("ObjectArray",{type:"objectArray",rows:3}),j("StringArray",{type:"stringArray",rows:3}),j("NumberArray",{type:"numberArray",rows:3}),j("ColorArray",{type:"colorArray",rows:3}),j("Opacity",{type:"number",min:0,max:1,step:.01}),j("Percentage",{type:"number",min:0,max:1,step:.01}),j("Gradient",{type:"enum",values:B.gradients,icons:B.gradientIcons,dropDownWidth:140}),j("FillRule",{type:"enum",values:a.fillRules,labels:a.fillRuleLabels}),j("ClipDirection",{type:"enum",values:a.clipDirections,labels:a.clipDirectionLabels}),j("CapStyle",{type:"enum",values:a.caps,labels:a.capLabels}),j("JoinStyle",{type:"enum",values:a.joins,labels:a.joinLabels}),j("Align",{type:"enum",values:a.aligns,labels:a.alignLabels}),j("VAlign",{type:"enum",values:a.vAligns,labels:a.vAlignLabels}),j("Stretch",{type:"enum",values:a.stretchs,labels:a.stretchLabels}),j("Direction",{type:"enum",values:a.directions,labels:a.directionLabels}),j("Orientation",{type:"enum",values:a.orientations,labels:a.orientationLabels}),j("ColumnChart",{type:"enum",values:a.columnChartTypes,labels:a.columnChartTypeLabels}),a.valueTypes=[],a.valueTypeLabels=[];var E=function(B){var j=Ra.config.valueTypes[B];j.type&&(a.valueTypes.push(B),a.valueTypeLabels.push(H(j.name)||H(B)),"enum"===j.type&&j.i18nLabels&&!j.labels&&(j.labels=[],j.i18nLabels.forEach(function(B){j.labels.push(H(B))})))};for(var $ in Ra.config.valueTypes)E($)}function na(){var B=Ra.consts={};B.edgeTypes=[void 0,"points"].concat(Object.keys(ht.Default.getEdgeTypeMap())),B.aligns=["left","center","right"],B.alignLabels=[H("editor.align.left"),H("editor.align.center"),H("editor.align.right")],B.vAligns=["top","middle","bottom"],B.vAlignLabels=[H("editor.valign.top"),H("editor.valign.middle"),H("editor.valign.bottom")],B.stretchs=["fill","uniform","centerUniform"],B.stretchLabels=[H("editor.stretch.fill"),H("editor.stretch.uniform"),H("editor.stretch.centeruniform")],B.fillRules=["nonzero","evenodd"],B.fillRuleLabels=[H("editor.nonzero"),H("editor.evenodd")],B.clipDirections=["top","bottom","left","right"],B.clipDirectionLabels=[H("editor.clipdirection.top"),H("editor.clipdirection.bottom"),H("editor.clipdirection.left"),H("editor.clipdirection.right")],B.caps=["butt","round","square"],B.capLabels=[H("editor.cap.butt"),H("editor.cap.round"),H("editor.cap.square")],B.joins=["bevel","round","miter"],B.joinLabels=[H("editor.join.bevel"),H("editor.join.round"),H("editor.join.miter")],B.directions=["h","v"],B.directionLabels=[H("editor.direction.h"),H("editor.direction.v")],B.orientations=["top","right","bottom","left"],B.orientationLabels=[H("editor.orientation.top"),H("editor.orientation.right"),H("editor.orientation.bottom"),H("editor.orientation.left")],B.columnChartTypes=["columnChart","stackedColumnChart","percentageColumnChart"],B.columnChartTypeLabels=[H("editor.columncharttype.columnchart"),H("editor.columncharttype.stackedcolumnchart"),H("editor.columncharttype.percentagecolumnchart")],B.gradients=Ra.config.gradients,B.shapes=[void 0,"rect","circle","oval","roundRect","star","pentagram","triangle","hexagon","pentagon","diamond","rightTriangle","parallelogram","trapezoid","polygon","arc"],B.shapeLabels=[],B.shapeIcons=[],B.shapes.forEach(function(a){a?(B.shapeLabels.push(H("editor.comptype."+a.toLowerCase())),B.shapeIcons.push({width:16,height:16,comps:[{type:a,rect:[2,4,12,8],borderWidth:1,borderColor:Ra.config.color_dark}]})):(B.shapeLabels.push(""),B.shapeIcons.push({width:16,height:16,comps:[]}))}),B.selectTypes=["shadow","rect","circle","oval","roundRect"],B.selectTypeLabels=[],B.selectTypeIcons=[],B.selectTypes.forEach(function(a){"shadow"===a?(B.selectTypeLabels.push(H("editor.shadow")),B.selectTypeIcons.push({width:16,height:16,comps:[]})):(B.selectTypeLabels.push(H("editor.comptype."+a.toLowerCase())),B.selectTypeIcons.push({width:16,height:16,comps:[{type:a,rect:[2,4,12,8],borderWidth:1,borderColor:Ra.config.color_dark}]}))}),B.displayConnectActionTypes=Ra.config.displayConnectActionTypes,B.displayConnectActionTypeLabels=[],B.displayConnectActionTypes.forEach(function(a){var j=a?a.toLowerCase():"none";B.displayConnectActionTypeLabels.push(H("editor.connectactiontype."+j,!0)||H(a))}),B.symbolConnectActionTypes=Ra.config.symbolConnectActionTypes,B.symbolConnectActionTypeLabels=[],B.symbolConnectActionTypes.forEach(function(a){var j=a?a.toLowerCase():"none";B.symbolConnectActionTypeLabels.push(H("editor.connectactiontype."+j,!0)||H(a))}),B.vLayoutValues=[void 0,"top","bottom","topbottom","center","scale"],B.vLayoutLabels=[H("editor.layout.none"),H("editor.layout.top"),H("editor.layout.bottom"),H("editor.layout.topbottom"),H("editor.layout.center"),H("editor.layout.scale")],B.hLayoutValues=[void 0,"left","right","leftright","center","scale"],
B.hLayoutLabels=[H("editor.layout.none"),H("editor.layout.left"),H("editor.layout.right"),H("editor.layout.leftright"),H("editor.layout.center"),H("editor.layout.scale")],B.fullscreenValues=[void 0,"fill","uniform"],B.fullscreenLabels=[H("editor.layout.none"),H("editor.stretch.fill"),H("editor.stretch.uniform")],B.fullscreenLockValues=[!1,"h","v"],B.fullscreenLockLabels=[H("editor.layout.none"),H("editor.direction.h"),H("editor.direction.v")]}String.prototype.startsWith||(String.prototype.startsWith=function(B,a){return a=a||0,this.substr(a,B.length)===B}),String.prototype.endsWith||(String.prototype.endsWith=function(B,a){var j=this.toString();("number"!=typeof a||!isFinite(a)||Math.floor(a)!==a||a>j.length)&&(a=j.length),a-=B.length;var E=j.lastIndexOf(B,a);return E!==-1&&E===a});var ba=window.hteditor_config||{},Sa=function(B,a){void 0===ba[B]&&(ba[B]=a)};Sa("color_select","#45C4F9"),Sa("color_select_dark","#39B0E4"),Sa("color_pane","#FCFCFC"),Sa("color_pane_dark","#F7F7F7"),Sa("color_line","#E4E4E4"),Sa("color_dark","#2C2C2C"),Sa("color_light","white"),Sa("color_data_border","#979797"),Sa("color_data_background","#D8D8D8"),Sa("color_transparent","rgba(70,70,70,0.4)"),Sa("color_disabled","#8C8C8C"),Sa("color_guide","red"),Sa("color_hover","rgba(184,184,184,0.18)"),Sa("color_mask","rgba(84,110,125,0.30)");var va=function(){var B=navigator.userAgent;return B.indexOf("compatible")>-1&&B.indexOf("MSIE")>-1||B.indexOf("Trident")>-1&&B.indexOf("rv:11.0")>-1}();if(Sa("host",window.location.hostname),Sa("port",window.location.port),Sa("locale","en"),Sa("serviceClass",void 0),Sa("maxUndoRedoSteps",200),Sa("inspectorTitleHeight",void 0),Sa("smallFont","10px arial, sans-serif"),Sa("boldFont","bold 12px arial, sans-serif"),Sa("leftSplitViewPosition",260),Sa("rightSplitViewPosition",-300),Sa("mainSplitViewPosition",-320),Sa("explorerSplitViewPosition",.4),Sa("requestDelay",100),Sa("imageSize",200),Sa("fileSize",50),Sa("maxFileSize",200),Sa("dragImageSize",50),Sa("dragImageOpacity",.7),Sa("animate",!0),Sa("fitPadding",20),Sa("fitContentForDisplayView",!0),Sa("fitContentForSymbolView",!0),Sa("rulerSize",16),Sa("edgeLoop",!0),Sa("pasteOffset",5),Sa("continuousLayout",!0),Sa("maxZoom",50),Sa("minZoom",.01),Sa("detailFilter",{}),Sa("compactFilter",{}),Sa("customProperties",{}),Sa("rulerEnabled",!0),Sa("gridEnabled",!1),Sa("displayGridBlockSize",40),Sa("displayGridThickLinesEvery",10),Sa("displayGridThickColor","rgb(191, 191, 191)"),Sa("displayGridLightColor","rgba(191, 191, 191, 0.4)"),Sa("displayGridAngle",Math.PI/2),Sa("displayGridRotation",0),Sa("displayGridZoomThreshold",.25),Sa("displayGridAlignmentGuideColor",ba.color_guide),Sa("symbolGridBlockSize",1),Sa("symbolGridThickLinesEvery",20),Sa("symbolGridThickColor","rgb(191, 191, 191)"),Sa("symbolGridLightColor","rgba(191, 191, 191, 0.2)"),Sa("symbolGridAngle",Math.PI/2),Sa("symbolGridRotation",0),Sa("symbolGridZoomThreshold",.25),Sa("symbolGridAlignmentGuideColor",ba.color_guide),Sa("maxStringLength",1e6),Sa("maxFileNameLength",100),Sa("traceMissingI18n",!1),Sa("container",void 0),Sa("continuousCreating",!1),Sa("valueTypes",{}),Sa("indent","zh"===ba.locale?90:110),Sa("indent2",70),Sa("clearDataBindingsBeforeImporting",!0),Sa("insertDisplayViewAsRefGraph",!1),Sa("displayPreviewURL","display.html"),Sa("symbolPreviewURL","symbol.html"),Sa("removeFileByKeyboardEnabled",!1),Sa("locateFileEnabled",!0),Sa("promptBeforeClosing",!0),Sa("displaysVisible",!0),Sa("symbolsVisible",!0),Sa("componentsVisible",!0),Sa("scenesVisible",!1),Sa("modelsVisible",!1),Sa("assetsVisible",!0),Sa("displaysEditable",!0),Sa("symbolsEditable",!0),Sa("componentsEditable",!0),Sa("scenesEditable",!0),Sa("modelsEditable",!0),Sa("assetsEditable",!0),Sa("settingDefaultValueBeforeSaving",!1),Sa("svgSegments",20),Sa("importConfirm",!0),Sa("newIfFailToOpen",!0),Sa("dataBindings",{}),Sa("dataBindingsForSymbol",{}),Sa("useCodeEditor",!va),Sa("codeEditorClass",void 0),Sa("fontPreview","Hightopo"),Sa("checkForFileChanges",!0),Sa("checkForFileChangesInterval",3e3),Sa("rotateAsClock",!1),Sa("cloneAttr",!0),Sa("cloneStyle",!0),Sa("cloneName",!0),Sa("cloneDisplayName",!0),Sa("cloneToolTip",!0),Sa("cloneTag",!1),Sa("cloneIcon",!0),Sa("cloneLayer",!0),Sa("cloneParent",!0),Sa("cloneDataBindings",!0),Sa("cloneSource",!0),Sa("cloneTarget",!0),Sa("cloneExpanded",!0),Sa("cloneClickThroughEnabled",!0),Sa("cloneSyncSize",!0),Sa("cloneRef",!0),Sa("clonePoints",!0),Sa("cloneSegments",!0),Sa("cloneThickness",!0),Sa("cloneClosePath",!0),Sa("cloneRotation",!0),Sa("clonePosition",!0),Sa("cloneSize",!0),Sa("cloneScale",!0),Sa("cloneAnchor",!0),Sa("cloneImage",!0),Sa("cloneHost",!0),Sa("isOpenable",null),Sa("dialogTitleBackground",null),Sa("componentViewSize",{width:700,height:500}),Sa("eventViewSize",{width:560,height:400}),Sa("fontViewSize",{width:500,height:400}),Sa("functionViewSize",{width:500,height:400}),Sa("objectViewSize",{width:500,height:400}),Sa("textViewSize",{width:500,height:400}),Sa("attachPointsViewSize",{width:700,height:500}),Sa("drawAccordionTitle",null),Sa("accordionMutex",!1),Sa("importDataBindingsButtonVisible",!0),Sa("saveSymbolCustomPropertyDefaultValue",!1),Sa("saveCompCustomPropertyDefaultValue",!1),Sa("deleteFileConfirm",!0),Sa("mixMaskAndBackground",!0),Sa("uploadExpandName",null),Sa("createFileTreeSortFunc",function(B){var a=B.explorer.rootDir,j=a+"/ht",E=a+"/htdesign";return function(a,$){var H=a.url,K=$.url;return H===K?0:H===j?-1:K===j?1:H===E?-1:K===E?1:ht.Default.sortFunc(B.getLabel(a),B.getLabel($))}}),Sa("explorerMode","treeList"),Sa("filterDisplayViewEnabled",!1),Sa("filterSymbolViewEnabled",!1),Sa("isDataBound",function(B,a,j){var E=B.getDataBindings();return E&&E[a]&&E[a][j]}),Sa("checkFileName",function(B,a){return!!B&&(B=B.trim(),!!B&&(!/[!@?#$%^&*\/]/.test(B)&&B))}),Sa("paletteColors",[["rgb(51,153,255)","#60ACFC","#32D3EB","rgb(93,217,174)","rgb(125,195,125)","rgb(255,235,195)","rgb(226,250,87)"],["#FEB64D","#FF7C7C","rgb(241,125,164)","rgb(204,104,166)","rgb(135,144,204)","rgb(145,115,205)","rgb(124,145,155)"],["rgb(48,242,120)","rgb(0,199,7)","rgb(242,83,75)","rgb(212,0,0)","rgb(240,225,19)","rgb(247,247,247)","rgb(61,61,61)"]]),Sa("gradients",[null,"linear.southwest","linear.southeast","linear.northwest","linear.northeast","linear.north","linear.south","linear.west","linear.east","radial.center","radial.southwest","radial.southeast","radial.northwest","radial.northeast","radial.north","radial.south","radial.west","radial.east","spread.horizontal","spread.vertical","spread.diagonal","spread.antidiagonal","spread.north","spread.south","spread.west","spread.east"]),ba.gradientIcons||(ba.gradientIcons=[],ba.gradients.forEach(function(B){B?ba.gradientIcons.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:B,gradientColor:ba.color_line,background:ba.color_dark}]}):ba.gradientIcons.push({width:20,height:14,comps:[]})})),Sa("fontList",["SimSun","NSimSun","FangSong","KaiTi","FangSong_GB2312","Microsoft YaHei","cursive","monospace","serif","sans-serif","fantasy","Arial","Arial Black","Arial Narrow","Arial Rounded MT Bold","Bookman Old Style","Bradley Hand ITC","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Georgia","Gentium","Impact","King","Lucida Console","Lalit","Modena","Monotype Corsiva","Papyrus","Tahoma","TeX","Times","Times New Roman","Trebuchet MS","Verdana","Verona","PingFangSC-Thin"]),Sa("expandedTitles",{}),["TitleBasic","TitleCustom","TitleBackground","TitleBorder","TitleText","TitleImage","TitleNode","TitleGroupBasic","TitleEdgeBasic","TitleArc","TitleDataBinding","TitleComponent","TitleShapeBackground","TitleShapeBorder","TitleGroupTitle","TitleEditingPoint","TitleChart","TitleLayout","TitleNodeLayout"].forEach(function(B){null==ba.expandedTitles[B]&&(ba.expandedTitles[B]=!0)}),ht.Default.handleUnfoundImage=function(B,a){return ht.Default.getImage("editor.unknown")},Sa("displayConnectActionType",null),Sa("symbolConnectActionType",null),Sa("displayConnectActionTypes",[null,"copyStyle","host","parent"]),Sa("symbolConnectActionTypes",[null,"copyStyle"]),Sa("appendDisplayConnectActionTypes",null),Sa("appendSymbolConnectActionTypes",null),Sa("appendConnectActions",null),Sa("connectActions",{copyStyle:{action:function(B,a,E){if(E){var $=E.getStyleMap();for(var H in $)"shape"!==H&&"label"!==H&&"label2"!==H&&"note"!==H&&"note2"!==H&&"text"!==H&&a.s(H,j($[H]))}},extraInfo:{visible:function(B){return!0}}},host:{action:function(B,a,j){a instanceof ht.Node&&j instanceof ht.Node&&a.setHost(j)},extraInfo:{delete:{visible:function(B){return B.sm().ld()instanceof ht.Node&&B.sm().ld().getHost()},action:function(B,a){a instanceof ht.Node&&a.setHost(void 0)}},visible:function(B){return B.sm().ld()instanceof ht.Node}}},parent:{action:function(B,a,j){j&&a.setParent(j)},extraInfo:{delete:{visible:function(B){return B.sm().ld().getParent()},action:function(B,a){a.setParent(void 0)}},visible:function(B){return!0}}}}),ba.appendDisplayConnectActionTypes&&ba.appendDisplayConnectActionTypes.forEach(function(B){ba.displayConnectActionTypes.push(B)}),ba.appendSymbolConnectActionTypes&&ba.appendSymbolConnectActionTypes.forEach(function(B){ba.symbolConnectActionTypes.push(B)}),ba.appendConnectActions)for(var ga in ba.appendConnectActions)ba.connectActions[ga]=ba.appendConnectActions[ga];for(var ia in ba.connectActions){var pa=ba.connectActions[ia];ht.Default.setConnectAction(ia,pa.action,pa.extraInfo)}var da=ht.Default.getToolTipDiv();da.style.color=ba.color_dark,da.style.background=ba.color_pane,ht.widget.ColorPicker.prototype._paletteColors=ba.paletteColors,ht.graph.GraphView.prototype._scrollBarColor=ba.color_transparent,ht.graph.GraphView.prototype._rectSelectBackground=ba.color_transparent,ht.graph.GraphView.prototype._rectSelectBorderColor=ba.color_select,ht.graph.GraphView.prototype.isLabelVisible=function(){return!0},ht.widget.ListView.prototype._scrollBarColor=ba.color_transparent,ht.widget.TreeView.prototype._scrollBarColor=ba.color_transparent,ht.widget.TableView.prototype._scrollBarColor=ba.color_transparent,ht.widget.TreeTableView.prototype._scrollBarColor=ba.color_transparent,ht.widget.PropertyView.prototype._scrollBarColor=ba.color_transparent,ht.widget.FormPane.prototype._scrollBarColor=ba.color_transparent,ht.widget.SplitView.prototype._dividerBackground=ba.color_line,ht.widget.SplitView.prototype._continuousLayout=ba.continuousLayout,ht.widget.ListView.prototype._selectBackground=ba.color_select,ht.widget.TreeView.prototype._selectBackground=ba.color_select,ht.widget.TableView.prototype._selectBackground=ba.color_select,ht.widget.TreeTableView.prototype._selectBackground=ba.color_select,ht.widget.TableHeader.prototype._columnLineColor=ba.color_line,ht.widget.TableHeader.prototype._insertColor=ba.color_select_dark,ht.widget.TableView.prototype._columnLineColor=ba.color_line,ht.widget.Toolbar.prototype._separatorColor=ba.color_line,ht.widget.Toolbar.prototype._itemGap=4,ht.widget.Button.prototype._labelColor=ba.color_light,ht.widget.Button.prototype._borderColor=null,ht.widget.Button.prototype._background=ba.color_select,ht.widget.Button.prototype._selectBackground=ba.color_select_dark,ht.widget.CheckBox.prototype._pressBackground=ba.color_pane_dark,ht.widget.ComboBox.prototype._selectBackground=ba.color_select,ht.widget.TabView.prototype._insertColor=ba.color_select_dark,ht.widget.TabView.prototype._selectWidth=0,ht.widget.TabView.prototype._selectBackground=ba.color_select,ht.widget.TabView.prototype._tabBackground=ba.color_dark;var xa=ht.widget.TabView.prototype.drawTab;ht.widget.TabView.prototype.drawTab=function(B,a,j,E,$,H,K){return K=a==this.getCurrentTab()?ba.color_select:ba.color_dark,xa.call(this,B,a,j,E,$,H,K)},ht.widget.FormPane.prototype._hPadding=4,ht.widget.FormPane.prototype._vPadding=4,ht.widget.FormPane.prototype._hGap=4,ht.widget.FormPane.prototype._vGap=4,ht.widget.Slider.prototype._background=ba.color_dark,ht.widget.Slider.prototype._leftBackground=ba.color_select,ht.widget.Slider.prototype._button={width:14,height:14,comps:[{type:"circle",rect:[0,0,14,14],borderWidth:1,borderColor:ba.color_dark,background:ba.color_pane_dark}]},ht.widget.ComboBox.prototype._dropDownIcon=ht.widget.MultiComboBox.prototype._dropDownIcon={width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:ba.color_dark}]},ht.Default.comboBoxBorderColor=ba.color_line,ht.Default.textFieldBorderColor=ba.color_line,ht.Default.contextMenuHoverBackground=ba.color_select,ht.Default.contextMenuSeparatorColor=ba.color_line,ht.Default.dialogTitleBackground=ba.dialogTitleBackground||ba.color_dark,ht.Default.dialogButtonBackground=ba.color_select,ht.Default.dialogButtonSelectBackground=ba.color_select_dark,ht.Default.dialogHeaderBackground=ba.color_pane_dark,ht.Default.toolbarBackground=ba.color_pane_dark,ht.Default.tableHeaderBackground=ba.color_pane_dark,ht.Default.contextMenuLabelFont=ht.Default.labelFont,ht.Default.contextMenuBorderRadius=0,ht.Default.contextMenuBorderColor=ba.color_line,ht.Default.contextMenuSubmenuMark=">&nbsp;",ht.Default.contextMenuCheckIcon={width:16,height:16,comps:[{type:"shape",points:[13,3,7,12,4,8],borderWidth:1,borderColor:ba.color_dark}]},ht.Default.setImage("radioOn",{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:ht.Color.widgetIconBorder,background:"#FFF"},{type:"circle",rect:[4,4,8,8],background:ba.color_select}]}),ht.Default.setImage("expandIcon",{width:16,height:16,comps:[{type:"shape",points:[13,6,8,12,3,6],segments:[1,2,2],borderWidth:1,borderColor:ba.color_dark}]}),ht.Default.setImage("collapseIcon",{width:16,height:16,comps:[{type:"shape",points:[6,3,12,8,6,13],segments:[1,2,2],borderWidth:1,borderColor:ba.color_dark}]}),ht.widget.TreeView.prototype._expandIcon="expandIcon",ht.widget.TreeView.prototype._collapseIcon="collapseIcon",ht.widget.TreeTableView.prototype._expandIcon="expandIcon",ht.widget.TreeTableView.prototype._collapseIcon="collapseIcon",ht.widget.TextField.prototype.setEditable=ht.widget.TextArea.prototype.setEditable=function(B){var a=this._element;B?(a.removeAttribute("readonly"),a.style.color=ht.Default.labelColor):(a.setAttribute("readonly",!0),a.style.color=ba.color_disabled)},ht.Default.onElementCreated=function(B){("INPUT"===B.tagName&&"button"!==B.type||"TEXTAREA"===B.tagName)&&(B.style.border=ba.color_line+" solid 1px",B.style.outline=0,B.style.padding="2px","TEXTAREA"===B.tagName&&(B.style.whiteSpace="pre",B.setAttribute("spellcheck","false")),B.addEventListener("focus",function(a){B.oldBorder=B.style.border,B.style.border=ba.color_select+" solid 1px","INPUT"===B.tagName&&requestAnimationFrame(function(){B.select()}),"TEXTAREA"===B.tagName&&(B.style.zIndex="1")},!1),B.addEventListener("blur",function(a){B.style.border=B.oldBorder,"TEXTAREA"===B.tagName&&(B.style.zIndex="")},!1))},ht.Default.onWidgetColorPickerCreated=function(a){for(var j=ba.color_line+" solid 1px",E=a.getView(),$=E.querySelectorAll(".colorPalette"),H=0;H<$.length;H++)$[H].style.border=j;E.querySelector(".satval").style.border=j,E.querySelector(".hue_image").style.border=j,E.querySelector(".preview").style.border=j,$=E.querySelectorAll('input[type="button"]');for(var K=0;K<$.length;K++){var C=$[K];C.style.border=j,C.style.background="none",C.style.outline="none",C.style.width="30px",C.addEventListener("mouseover",function(B){B.target.style.background=ba.color_hover},!1),C.addEventListener("mouseout",function(){event.target.style.background="none"},!1)}$=E.querySelectorAll("span");for(var Z=0;Z<$.length;Z++)B(a,E,$[Z])},ht.Default.handleUnfoundImage=function(B,a){return ht.Default.getImage("editor.unknown")};var Wa=(function(){function B(B){this.value=B}function a(a){function j(B,a){return new Promise(function(j,$){var C={key:B,arg:a,resolve:j,reject:$,next:null};K?K=K.next=C:(H=K=C,E(B,a))})}function E(j,H){try{var K=a[j](H),C=K.value;C instanceof B?Promise.resolve(C.value).then(function(B){E("next",B)},function(B){E("throw",B)}):$(K.done?"return":"normal",K.value)}catch(B){$("throw",B)}}function $(B,a){switch(B){case"return":H.resolve({value:a,done:!0});break;case"throw":H.reject(a);break;default:H.resolve({value:a,done:!1})}H=H.next,H?E(H.key,H.arg):K=null}var H,K;this._invoke=j,"function"!=typeof a.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(a.prototype[Symbol.asyncIterator]=function(){return this}),a.prototype.next=function(B){return this._invoke("next",B)},a.prototype.throw=function(B){return this._invoke("throw",B)},a.prototype.return=function(B){return this._invoke("return",B)},{wrap:function(B){return function(){return new a(B.apply(this,arguments))}},await:function(a){return new B(a)}}}(),function(B,a){if(!(B instanceof a))throw new TypeError("Cannot call a class as a function")}),ta=function(){function B(B,a){for(var j=0;j<a.length;j++){var E=a[j];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(B,E.key,E)}}return function(a,j,E){return j&&B(a.prototype,j),E&&B(a,E),a}}(),ra=function(B,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);B.prototype=Object.create(a&&a.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(B,a):B.__proto__=a)},Ga=function(B,a){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?B:a},fa=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a.prototype.onShown=function(){Zj.push(this)},a.prototype.onHidden=function(){K(Zj,this)},a}(ht.widget.Dialog),ya=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this,j));return E.getView().style.background=Ra.config.color_pane,E}return ra(a,B),a.prototype.addLine=function(){this.addRow([],[.1],1.01,{background:Ra.config.color_line})},a.prototype.addTitle=function(B){var a=[{element:B,font:Ra.config.boldFont}],j={background:Ra.config.color_pane_dark};this.addRow(a,[.1],null,j)},a.prototype.getRowIndex=function(B){return this.getRows().indexOf(B)},a}(ht.widget.FormPane),Ya=function(){function B(a){Wa(this,B);var j=this._view=document.createElement("div"),E=this._editableLayer=document.createElement("div"),$=E.style;this.config=a,this._editable=!0,$.backgroundColor="rgba( 255, 255, 255, 0.3)",$.position="absolute",$.cursor="not-allow",$.top=0,$.right=0,$.bottom=0,$.left=0,Ra.config.useCodeEditor||(this._monacoEditor=new ht.widget.TextArea,this._view=this._monacoEditor.getView(),a&&a.value&&this._monacoEditor.setValue(a.value)),j.style.position="absolute"}return B.prototype.getView=function(){return this._view},B.prototype.setValue=function(B){void 0!==B&&null!==B||(B=""),this.monacoEditor&&this.monacoEditor.setValue(B)},B.prototype.getValue=function(){return this.monacoEditor&&this.monacoEditor.getValue()},B.prototype.layout=function(){this.monacoEditor&&this.monacoEditor.layout()},B.prototype.invalidate=function(){this.layoutLater()},B.prototype.iv=function(){this.invalidate()},B.prototype.layoutLater=function(B){var a=this;setTimeout(function(){a.layout()},B||300)},B.prototype.setEditable=function(B){var a=this;if(this._monacoEditor instanceof ht.widget.TextArea)return void this._monacoEditor.setEditable(B);if(this._editable!==B){this._timer&&(clearTimeout(this._timer),delete this._timer);var j=this._editableLayer;B?j.parentNode&&j.parentNode.removeChild(j):this._timer=setTimeout(function(){delete a._timer,a.getView().appendChild(j)},10),this._editable=B}},B.prototype.isEditable=function(){return this._monacoEditor instanceof ht.widget.TextArea?this._monacoEditor.isEditable():this._editable},ta(B,[{key:"monacoEditor",get:function(){return!this._monacoEditor&&window.monaco&&(this._monacoEditor=monaco.editor.create(this._view,this.config||{value:"",language:"javascript",minimap:{enabled:!1}})),this._monacoEditor}}]),B}(),Ra={strings:{},customStrings:{},config:ba},Na=["onClick","onDoubleClick","onContextMenu","onDown","onUp","onMove","onEnter","onHover","onLeave","onBeginDrag","onDrag","onEndDrag","onScroll"],Ma="unknow",Qa="root",ua="dir",qa="image",Da="symbol",Aa="display",Ta="component",La="model",Bj="scene",aj="tile",jj="list",Ej="accordion",$j="normal",Hj="error",Kj=/^attr@/,Cj=/firefox/.test(window.navigator.userAgent.toLowerCase()),Zj=[],hj={width:16,height:16,comps:[]},mj={display:{},symbol:{},data:{},comp:{}},Jj=new ht.List([{x:50,y:75},{x:25,y:75},{x:25,y:25},{x:75,y:25},{x:75,y:75},{x:65,y:60},{x:75,y:75},{x:85,y:60}]),Oj=new ht.List([1,2,2,2,2,2,1,2]),kj="0.3.3";ht.Default.setImage("check",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:Ra.config.color_line},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:{func:function(B,a){return B&&a&&a.getRowSize&&a.isSelected&&a.isSelected(B)?Ra.config.color_line:Ra.config.color_select}}}]}),ht.Default.setImage("uncheck",{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:Ra.config.color_line}]}),ht.Default.setImage("text_icon",{width:16,height:16,comps:[{type:"shape",points:[3,14,8,2,13,14,5,9,11,9],segments:[1,2,2,1,2],borderColor:Ra.config.color_dark,borderWidth:1}]}),ht.Default.setImage("refGraph_icon",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:Ra.config.color_dark,rotation:.7854,points:[12.90381,7.59615,12.90381,7.59615,12.90381,4.61619,12.90381,3.59619,12.90381,2.57619,11.72047,1.59619,10.40381,1.59619,9.08714,1.59619,7.90381,2.61619,7.90381,3.59619,7.90381,4.35799,7.90381,7.59615,7.90381,7.59615,7.90381,7.59615,7.90381,9.59619,10.40381,9.59619],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:Ra.config.color_dark,rotation:-2.35619,points:[8.21091,12.28904,8.21091,12.28904,8.21091,9.30909,8.21091,8.28909,8.21091,7.26909,7.02758,6.28909,5.71091,6.28909,4.39425,6.28909,3.21091,7.30909,3.21091,8.28909,3.21091,9.05088,3.21091,12.28904,3.21091,12.28904,3.21091,12.28904,3.21091,14.28909,5.71091,14.28909],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unknown",{width:50,height:50,fitSize:!0,comps:[{type:"shape",points:[5,5,45,45],segments:[1,2],borderWidth:1,borderColor:"red"},{type:"shape",points:[5,45,45,5],segments:[1,2],borderWidth:1,borderColor:"red"}]}),ht.Default.setImage("editor.root",{width:30,height:30,fitSize:!0,comps:[{type:"shape",points:[23,8,8,23],segments:[1,2],borderWidth:1,borderColor:"white"}]}),ht.Default.setImage("editor.display",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:Ra.config.color_light,rect:[6,1,4,4.00837]},{type:"circle",borderWidth:1,borderColor:Ra.config.color_light,rect:[11,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:Ra.config.color_light,points:[2.98235,11.0795,2.98235,8,7.89475,8,7.89475,5.00837,7.89475,8,13,8,13,11]},{type:"circle",borderWidth:1,borderColor:Ra.config.color_light,rect:[1,10.99163,4,4.00837]}]}),ht.Default.setImage("editor.symbol",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:Ra.config.color_light,rect:[0,2,10,8]},{type:"rect",borderWidth:1,borderColor:Ra.config.color_light,rect:[5,6,10,8]}]}),ht.Default.setImage("editor.filter",{background:"rgb(130,130,130)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",closePath:!0,points:[2,1.5,14,1.5,9.50949,5.5,9.50949,9.5,13,9.5,9.50949,9.5,9.50949,11.5,12,11.5,9.50949,11.5,9.50949,14.5,6.5335,12.5,6.5335,5.5,2,1.5]}]}),ht.Default.setImage("editor.bind",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"white",borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}]}),ht.Default.setImage("editor.unbind",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:.7854,points:[13.49999,7.03553,13.49999,7.03553,13.49999,5.05554,13.49999,4.03553,13.49999,3.01553,12.31666,2.03553,10.99999,2.03553,9.68333,2.03553,8.49999,3.05553,8.49999,4.03553,8.49999,5.01553,8.49999,7.03553,8.49999,7.03553],segments:[1,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.92699,points:[7.28554,13.25761,7.28554,13.25761,7.28554,11.27761,7.28554,10.2576,7.28554,9.23761,6.1022,8.25761,4.78554,8.25761,3.46887,8.25761,2.28554,9.2776,2.28554,10.2576,2.28554,11.2376,2.28554,13.25761,2.28554,13.25761],segments:[1,4,4,4,4]}]}),ht.Default.setImage("editor.dircollapsed",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,204,153)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14.5,14.5,.5,14.5,.5,1.50001,6.5,1.50001,7.5,3.50001,14.5,3.50001,14.5,14.5]},{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.5,5.50001,14.5,5.50001,14.5,14.50001,.5,14.50001,.5,5.50001]}]}),ht.Default.setImage("editor.direxpanded",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(51,153,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.35891,10.47175,3.3125,6.30284,15.5,6.30284,13.625,14.5,.5,14.5,.5,1.5,6.125,1.5,7.0625,3.2289,12.6875,3.2289,12.6875,6.30284]}]}),ht.Default.setImage("editor.dir",{background:"rgb(227,227,227)",width:20,height:20,fitSize:!0,comps:[{type:"shape",background:"#FFCC99",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[19,4,19,18,1,18,1,2,8.71429,2,10,4,19,4]},{type:"rect",shadow:!0,shadowColor:"rgba(0,0,0,0.4)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(255,255,255)",borderColor:"#979797",rotation:6.28319,rect:[2.98273,5.998,13.98346,9.99004]},{type:"shape",background:"rgba(255,255,153,0.3)",borderColor:"rgb(255,255,255)",borderCap:"round",points:[18,9,18,17,2,17,2,9,18,9]},{type:"rect",shadowColor:"rgb(0,0,0)",shadowBlur:2,shadowOffsetX:0,shadowOffsetY:1,background:"rgb(232,230,230)",borderColor:"#979797",rotation:6.28319,rect:[4,7,11.98532,1.06039]}]}),ht.Default.setImage("editor.dxf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[25.13334,60.62742,20.38001,60.62742,20.11302,60.62742,19.89504,60.41688,19.89504,60.15453,19.89504,43.31796,19.89504,43.05561,20.11302,42.84507,20.38001,42.84507,25.13334,42.84507,30.66329,42.84507,33.35167,45.67873,33.35167,51.50916,33.35167,57.47593,30.51009,60.62742,25.13334,60.62742,25.13334,60.62742,23.32783,57.5939,25.03463,57.5939,28.43349,57.5939,29.82018,55.90554,29.82018,51.77117,29.82018,47.64415,28.35946,45.88193,24.93627,45.88193,23.32783,45.88193,23.32783,57.5939,23.32783,57.5939],segments:[1,2,4,2,4,2,4,4,2,1,2,4,4,2,2,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[48.10416,60.62742,45.1488,60.62742,44.97846,60.62742,44.82286,60.54254,44.73581,60.40217,40.95446,54.3465,37.26771,60.39482,37.1786,60.53886,37.01957,60.62776,36.84889,60.62776,34.01657,60.62776,33.84041,60.62776,33.67761,60.53552,33.59227,60.38379,33.50693,60.2324,33.51275,60.04759,33.60735,59.89987,39.05608,51.53522,33.90312,43.56961,33.80853,43.42557,33.8027,43.24076,33.88804,43.08937,33.97338,42.93797,34.13618,42.8454,34.31235,42.8454,37.31706,42.8454,37.4874,42.8454,37.64677,42.93396,37.73382,43.078,41.14399,48.68284,44.48219,43.08168,44.56924,42.93396,44.72861,42.84507,44.90272,42.84507,47.73299,42.84507,47.91121,42.84507,48.074,42.93731,48.15729,43.08903,48.24434,43.24042,48.2368,43.42524,48.14221,43.56928,43.03826,51.48342,48.51339,59.89987,48.60798,60.04759,48.61552,60.2324,48.52847,60.38379,48.44518,60.53485,48.28238,60.62742,48.10416,60.62742,48.10416,60.62742],segments:[1,2,4,2,2,4,2,4,4,2,2,4,4,2,4,2,2,4,2,4,4,2,2,4,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",shadowColor:"#1ABC9C",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]}]}),ht.Default.setImage("editor.ttf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],
segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"shape",background:"#000000",points:[25.11617,60.62742,22.62692,60.62742,22.35788,60.62742,22.14196,60.41688,22.14196,60.15453,22.14196,42.84507,30.47192,42.84507,30.74096,42.84507,30.95688,43.05561,30.95688,43.31796,30.95688,45.40904,30.95688,45.67138,30.74096,45.88193,30.47192,45.88193,25.60148,45.88193,25.60148,60.1542,25.60148,60.41688,25.38522,60.62742,25.11617,60.62742,25.11617,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[17.50673,42.84507,22.657,42.84507,22.92604,42.84507,23.14196,43.05561,23.14196,43.31796,23.14196,45.40904,23.14196,45.67138,22.92604,45.88193,22.657,45.88193,17.50673,45.88193],segments:[1,2,4,2,4,2]}]}),ht.Default.setImage("editor.otf",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[53.17006,60.62742,50.68081,60.62742,50.41177,60.62742,50.19585,60.41688,50.19585,60.15453,50.19585,43.31796,50.19585,43.05561,50.41177,42.84507,50.68081,42.84507,60.09288,42.84507,60.36192,42.84507,60.57784,43.05561,60.57784,43.31796,60.57784,45.40904,60.57784,45.67138,60.36192,45.88193,60.09288,45.88193,53.65537,45.88193,53.65537,50.62587,59.22886,50.62587,59.4979,50.62587,59.71382,50.83642,59.71382,51.09876,59.71382,53.18984,59.71382,53.45219,59.4979,53.66273,59.22886,53.66273,53.65537,53.66273,53.65537,60.1542,53.65537,60.41688,53.43911,60.62742,53.17006,60.62742,53.17006,60.62742],segments:[1,2,4,2,4,2,4,2,4,2,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#000000",points:[41.52931,60.62742,39.04006,60.62742,38.77102,60.62742,38.5551,60.41688,38.5551,60.15453,38.5551,42.84507,46.88507,42.84507,47.15411,42.84507,47.37003,43.05561,47.37003,43.31796,47.37003,45.40904,47.37003,45.67138,47.15411,45.88193,46.88507,45.88193,42.01462,45.88193,42.01462,60.1542,42.01462,60.41688,41.79836,60.62742,41.52931,60.62742,41.52931,60.62742],segments:[1,2,4,2,2,4,2,4,2,2,4,2]},{type:"shape",background:"#000000",rotation:3.14159,points:[33.91988,42.84507,39.07014,42.84507,39.33918,42.84507,39.5551,43.05561,39.5551,43.31796,39.5551,45.40904,39.5551,45.67138,39.33918,45.88193,39.07014,45.88193,33.91988,45.88193],segments:[1,2,4,2,4,2]},{type:"oval",borderWidth:3.3,borderColor:"rgb(0,0,0)",rect:[18.97543,44.76232,11.82189,13.94784]}]}),ht.Default.setImage("editor.sound",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[29.93506,40.65719,29.93506,52.11129,29.99768,52.17391,38.01482,58.31199,38.01482,53.06642,38.01482,39.70982,38.01482,34.45641,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,29.93506,40.65719,44.44257,36.03797,44.44257,36.03797,43.87107,35.70912,43.69881,34.9732,44.02766,34.40163,44.37211,33.84573,45.10803,33.65787,45.66393,33.99448,47.80131,35.26287,49.59417,37.09491,50.81553,39.2714,52.01338,41.37743,52.71019,43.80448,52.71019,46.38028,52.71019,48.95608,52.01338,51.38313,50.81553,53.48924,49.59417,55.65789,47.80131,57.49777,45.66393,58.77392,45.10803,59.1262,44.37211,58.93834,44.02766,58.35901,43.69881,57.79528,43.87107,57.05152,44.44257,56.7305,46.24326,55.65789,47.71518,54.13119,48.7486,52.32266,49.73508,50.57675,50.30665,48.55685,50.30665,46.38812,50.30665,44.23514,49.72724,42.19948,48.7486,40.46141,47.71518,38.63721,46.23542,37.10275,44.44257,36.03797,44.44257,36.03797,44.44257,36.03797,28.49449,40.89991,28.49449,40.89991,23.62472,40.89991,23.62472,51.86073,28.49449,51.86073,28.49449,40.89991,28.49449,40.89991,28.49449,40.89991,28.80767,38.51197,28.80767,38.51197,38.42189,31.14469,38.64118,30.96459,38.91517,30.86286,39.21267,30.86286,39.88597,30.86286,40.41052,31.38741,40.41052,32.05287,40.41052,39.70982,40.41052,39.97605,41.53008,40.43014,42.47745,41.16606,43.21337,42.09776,44.14506,43.28777,44.7088,44.76753,44.7088,46.38812,44.7088,48.00879,44.1529,49.50414,43.21337,50.67856,42.50096,51.61017,41.53008,52.33834,40.41052,52.80027,40.41052,53.07426,40.41052,60.72336,40.41052,60.99743,40.32439,61.24015,40.1678,61.45936,39.76073,61.97607,39.01698,62.07788,38.50019,61.67073,28.82334,54.25651,22.46606,54.25651,22.43471,54.25651,21.77708,54.25651,21.23686,53.72412,21.23686,53.06642,21.23686,39.73333,21.23686,39.70982,21.23686,39.04435,21.76924,38.51197,22.43471,38.51197,28.80767,38.51197,28.80767,38.51197,28.80767,38.51197,40.40269,41.5497,40.40269,41.5497,40.40269,51.21878,41.06823,50.85858,41.62405,50.37322,42.08598,49.79381,42.8219,48.86219,43.26039,47.6721,43.26039,46.38812,43.26039,45.11197,42.81414,43.92196,42.08598,42.98243,41.62405,42.39526,41.06039,41.90982,40.40269,41.5497,40.40269,41.5497,40.40269,41.5497],segments:[1,2,2,2,2,2,2,2,2,2,2,1,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,1,2,2,2,2,2,2,2,1,2,2,4,4,2,2,4,4,4,4,2,2,4,4,2,2,2,4,2,2,4,2,2,2,1,2,2,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.video",{width:64,height:64,fitSize:!0,comps:[{type:"shape",background:"#000000",points:[56.21111,19.11398,40.59837,2.34525,40.23096,1.94622,39.70418,1.92216,39.15478,1.92216,8.11505,1.92216,7.04265,1.92216,6.07649,2.35795,6.07649,3.40366,6.07649,60.1542,6.07649,61.1999,7.04299,62.07784,8.11505,62.07784,13.93496,62.07784,15.00736,62.07784,15.87481,61.28546,15.87481,60.23975,15.87481,59.19405,15.00702,58.40166,13.93496,58.40166,9.84618,58.40166,9.84618,5.59867,35.20824,5.59867,35.20824,21.86677,35.20824,22.91248,36.27174,23.64538,37.3438,23.64538,52.6875,23.64538,52.6875,35.56255,52.6875,36.60826,53.67148,37.45412,54.74388,37.45412,55.81629,37.45412,56.80027,36.60793,56.80027,35.56255,56.80027,20.28301,56.80027,19.81747,56.52917,19.46155,56.21111,19.11398,56.21111,19.11398,39.32101,6.67546,51.68947,19.9692,39.32101,19.9692,39.32101,6.67546,39.32101,6.67546],segments:[1,2,4,2,4,2,4,2,4,4,2,2,2,2,4,2,2,4,4,2,4,2,1,2,2,2,2]},{type:"shape",background:"#231815",points:[34.79567,39.50193,35.8771,39.50193,36.86394,39.06777,37.56645,38.36518,38.28485,37.63888,38.7269,36.65212,38.7269,35.57851,38.7269,34.497,38.28485,33.51024,37.56645,32.80765,36.86394,32.08933,35.86927,31.6472,34.79567,31.6472,33.70626,31.6472,32.7274,32.08933,32.0169,32.80765,31.30641,33.51024,30.86435,34.497,30.86435,35.57851,30.86435,36.65212,31.30641,37.63888,32.0169,38.36518,32.7274,39.05987,33.71416,39.50193,34.79567,39.50193,34.79567,39.50193,34.79567,39.50193,33.03527,33.81021,33.03527,33.81021,33.47733,33.36816,34.10098,33.08399,34.79567,33.08399,35.48246,33.08399,36.0982,33.36816,36.54816,33.81021,36.99022,34.26807,37.27438,34.88382,37.27438,35.57061,37.27438,36.2574,36.99022,36.87315,36.54816,37.33101,36.0982,37.76524,35.48246,38.0494,34.79567,38.0494,34.10098,38.0494,33.47733,37.76524,33.03527,37.33101,32.59314,36.87315,32.31687,36.2574,32.31687,35.57061,32.31687,34.88382,32.59314,34.27598,33.03527,33.81021,33.03527,33.81021,33.03527,33.81021,38.719,42.35963,38.719,42.35963,39.05848,43.38583,39.77688,44.19107,40.6768,44.64103,42.60298,45.61989,44.97913,44.84625,45.95008,42.92007,46.40794,42.02015,46.53422,40.94655,46.17901,39.92027,45.86323,38.89408,45.14484,38.08884,44.23702,37.63888,43.33711,37.18892,42.2714,37.06264,41.24513,37.40995,40.21894,37.74943,39.39789,38.46775,38.95583,39.35984,38.49007,40.25185,38.3796,41.32546,38.719,42.35963,38.719,42.35963,38.719,42.35963,40.24257,40.02292,40.24257,40.02292,40.53471,39.44669,41.04781,38.99665,41.68726,38.77563,42.33454,38.5704,43.02923,38.64144,43.58184,38.93351,44.15808,39.22558,44.60803,39.72295,44.82124,40.38604,45.03436,41.03339,44.96332,41.70438,44.67907,42.28851,44.06341,43.50428,42.55557,43.98577,41.33198,43.3543,40.77937,43.07005,40.30578,42.56486,40.10048,41.9175,39.87945,41.25442,39.9663,40.58343,40.24257,40.02292,40.24257,40.02292,40.24257,40.02292,40.13209,46.26716,40.13209,46.26716,39.16114,46.10935,38.09543,46.33828,37.21915,46.96976,36.34286,47.61711,35.80606,48.54073,35.65607,49.5354,35.65607,49.5354,35.50608,50.53006,35.71929,51.57996,36.35076,52.46415,36.98231,53.33245,37.89803,53.86926,38.89269,54.02714,38.9243,54.02714,41.04781,54.38235,43.08447,52.8904,43.42395,50.76689,43.42395,50.75899,43.56604,49.76433,43.34501,48.71435,42.71346,47.84604,42.06618,46.96976,41.14256,46.42505,40.13209,46.26716,40.13209,46.26716,40.13209,46.26716,39.14533,52.60623,39.14533,52.60623,39.12953,52.59833,38.49797,52.49568,37.91384,52.1641,37.51912,51.61157,37.1244,51.05896,36.97441,50.38798,37.07706,49.75642,37.17181,49.13278,37.51912,48.54073,38.07172,48.13021,38.62433,47.73549,39.30322,47.60131,39.93469,47.69606,40.55044,47.79081,41.15046,48.13021,41.5451,48.69072,41.94772,49.24333,42.08981,49.91431,41.98724,50.53796,41.77403,51.87993,40.4794,52.81936,39.14533,52.60623,39.14533,52.60623,39.14533,52.60623,49.24984,57.84791,49.24984,57.84791,41.37939,57.84791,46.82629,55.31388,50.46553,49.76433,50.46553,43.63056,50.46553,39.30453,48.70514,35.38909,45.86323,32.54719,43.03714,29.72109,39.12162,27.9607,34.79567,27.9607,26.1594,27.9607,19.12572,34.99437,19.12572,43.63056,19.12572,47.94079,20.88612,51.87993,23.71222,54.69813,26.54622,57.54003,30.46963,59.30043,34.79567,59.30043,35.20611,59.30043,35.29296,59.30043,49.24984,59.30043,49.64456,59.30043,49.96816,58.96893,49.96816,58.57421,49.96816,58.17158,49.64456,57.84791,49.24984,57.84791,49.24984,57.84791,49.24984,57.84791,34.79567,56.88485,34.79567,56.88485,31.13271,56.88485,27.81723,55.39282,25.42528,53.00087,23.01761,50.5853,21.54138,47.28553,21.54138,43.62266,21.54138,36.34425,27.51725,30.36837,34.79567,30.36837,38.45064,30.36837,41.77403,31.8525,44.15808,34.25227,46.56583,36.64422,48.04206,39.96769,48.04206,43.62266,48.04206,47.28553,46.55793,50.6011,44.16598,53.00087,41.68726,55.48757,38.30856,56.88485,34.79567,56.88485,34.79567,56.88485,34.79567,56.88485,28.91446,44.64103,28.91446,44.64103,29.80655,44.18317,30.54067,43.38583,30.86435,42.35173,31.19593,41.32546,31.08538,40.25976,30.63542,39.35984,29.67237,37.44156,27.25672,36.66002,25.35424,37.63888,23.42015,38.62564,22.64651,41.00178,23.62545,42.92007,24.07541,43.81998,24.88057,44.53838,25.90684,44.86206,26.94884,45.20146,28.02245,45.09889,28.91446,44.64103,28.91446,44.64103,28.91446,44.64103,26.3647,43.51211,26.3647,43.51211,25.71735,43.29108,25.20425,42.82532,24.91218,42.28069,24.29643,41.0492,24.79373,39.54136,26.00942,38.92561,27.22519,38.30986,28.73294,38.79143,29.34869,40.02292,29.63286,40.59134,29.7118,41.25442,29.50658,41.90178,29.28555,42.54905,28.81979,43.06215,28.27509,43.34639,27.69877,43.63056,27.01198,43.71741,26.3647,43.51211,26.3647,43.51211,26.3647,43.51211,29.44344,46.26716,29.44344,46.26716,27.31195,46.59874,25.85153,48.61178,26.17521,50.72738,26.17521,50.75899,26.33309,51.75365,26.8778,52.69308,27.73828,53.32455,28.59876,53.9561,29.66447,54.17713,30.62752,54.02714,30.66703,54.01924,32.80634,53.67194,34.25886,51.66681,33.92728,49.52749,33.60361,47.39609,31.58275,45.94356,29.44344,46.26716,29.44344,46.26716,29.44344,46.26716,32.50637,49.75642,32.50637,49.75642,32.7274,51.1063,31.80378,52.39303,30.44593,52.60623,30.4223,52.61413,29.79865,52.7009,29.13557,52.55091,28.59086,52.14837,28.04616,51.75365,27.69877,51.15371,27.5962,50.53006,27.5962,50.50635,27.3909,49.17229,28.33032,47.90128,29.66447,47.69606,31.00644,47.48293,32.29317,48.40655,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,32.50637,49.75642,37.44808,43.63056,37.44808,43.63056,37.44808,42.89644,37.1481,42.22537,36.67444,41.75171,36.18497,41.27022,35.52189,40.96235,34.79567,40.96235,34.06147,40.96235,33.39048,41.27022,32.90891,41.75171,32.43525,42.23328,32.14318,42.89644,32.14318,43.63056,32.14318,44.36469,32.43525,45.02785,32.90891,45.50933,33.39838,45.983,34.06147,46.28297,34.79567,46.28297,36.25609,46.28297,37.44808,45.08308,37.44808,43.63056,37.44808,43.63056,37.44808,43.63056,34.79567,44.83835,34.79567,44.83835,34.45619,44.83835,34.14831,44.71207,33.93519,44.49104,33.71416,44.28574,33.5878,43.96997,33.5878,43.63846,33.5878,43.31479,33.71416,42.99901,33.93519,42.77798,34.14831,42.56486,34.45619,42.42277,34.79567,42.42277,35.11927,42.42277,35.42714,42.55695,35.64817,42.77798,35.86927,42.99901,36.01136,43.31479,36.01136,43.63846,36.01136,44.30155,35.46665,44.83835,34.79567,44.83835,34.79567,44.83835,34.79567,44.83835],segments:[1,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,2,4,4,2,4,2,4,4,2,2,1,2,2,4,4,4,4,4,4,4,2,2,1,2,2,4,4,4,4,4,4,2,2,2,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,1,2,4,2,4,4,2,4,4,2,2,2,1,2,4,4,4,4,4,4,4,2,2,1,2,4,4,4,4,4,4,4,2,2]}]}),ht.Default.setImage("editor.flipx",{width:16,height:16,comps:[{type:"shape",points:[8,1,8,14],segments:[1,2],borderWidth:1,borderColor:Ra.config.color_dark},{type:"shape",points:[6,3,6,13,2,13],background:Ra.config.color_dark},{type:"shape",points:[10,3,10,13,14,13],background:Ra.config.color_select}]}),ht.Default.setImage("editor.flipy",{width:16,height:16,comps:[{type:"shape",points:[2,8,15,8],segments:[1,2],borderWidth:1,borderColor:Ra.config.color_dark},{type:"shape",points:[3,6,13,6,3,2],background:Ra.config.color_dark},{type:"shape",points:[3,10,13,10,3,14],background:Ra.config.color_select}]}),ht.Default.setImage("editor.resetsize",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[8,1,8,6,6,3,8,1,10,3,8,10,8,15,6,13,8,15,10,13,1,8,6,8,3,6,1,8,3,10,10,8,15,8,13,6,15,8,13,10],segments:[1,2,1,2,2,1,2,1,2,2,1,2,1,2,2,1,2,1,2,2]}]}),ht.Default.setImage("editor.func",{width:16,height:16,comps:[{type:"border",rect:[0,0,16,16],width:1,color:"#E4E4E4"},{type:"text",rect:[0,0,16,16],text:"F",align:"center",color:"black"}]}),ht.Default.setImage("editor.comp",{fitSize:!0,comps:[{type:{func:function(B){return B.compType},isSafeFunc:!0}}]}),ht.Default.setImage("editor.oops",{width:128,height:128,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",background:"rgb(237,237,237)",borderColor:"#979797",points:[34.08079,87.52544,34.08079,87.52544,59.57908,97.75645,77.79215,90.58303,96.00522,83.40961,106.8249,68.87436,109.71641,51.69689,109.71641,51.69689,117.89865,74.48774,101.34821,87.52544,84.79777,100.56314,59.50721,102.27801,46.42474,94.29524],segments:[1,4,4,4,4]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,36.49467,28.49791,18.12387]},{type:"arc",background:"rgb(196,185,185)",borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,36.49467,28.49791,18.12387]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",points:[39.9814,51.13901,39.9814,51.13901,32.00842,57.90113,30.56723,66.4088,29.12604,74.91647,34.21664,85.16969,34.21664,85.16969,39.0516,89.44677,39.0516,89.44677,36.05169,79.68945,37.3999,70.48443,38.74811,61.27941,44.44444,52.62669,44.44444,52.62669,39.9814,51.13901,39.9814,51.13901],segments:[1,4,4,2,4,4,2,2]},{type:"shape",background:"rgb(149,224,245)",borderColor:"#979797",scaleX:-1,points:[97.67259,49.56003,97.67259,49.56003,89.6996,57.90113,88.25841,66.4088,86.81722,74.91647,91.8398,85.99598,91.8398,85.99598,96.74279,89.44677,96.74279,89.44677,93.74288,79.68945,95.09109,70.48443,96.4393,61.27941,102.44264,50.50641,102.44264,50.50641,97.67259,49.56003],segments:[1,4,4,2,4,4,2]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[59.61377,32.055,59.61377,32.055,61.61221,36.91182,59.19747,38.71578,56.78274,40.51974,34.08079,42.18493,34.08079,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[94.48806,32.055,94.48806,32.055,96.4865,36.91182,94.07177,38.71578,91.65703,40.51974,68.95508,42.18493,68.95508,42.18493],segments:[1,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[67.02409,33.58143,67.02409,33.58143,64.9426,37.74441,67.02409,39.68714],segments:[1,4]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[68.95508,40.07324,28.49791,11.89121]},{type:"arc",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(61,61,61)",arcTo:0,arcOval:!0,rotation:3.14159,rect:[32.3979,40.07323,28.49791,11.89121]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[60.89581,46.6003,56.70566,57.66949,39.6779,55.58118,39.6779,55.58118],segments:[1,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",scaleX:-1,points:[90.173,46.6003,85.98284,57.66949,68.95508,55.58118,68.95508,55.58118],segments:[1,4]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[40.88134,45.66533,40.88134,50.44931,49.68823,51.31913,49.03586,45.66533,40.99007,45.5566]},{type:"shape",background:"rgb(61,61,61)",borderColor:"#979797",points:[78.31735,45.66533,78.31735,50.44931,87.12423,51.31913,86.47187,45.66533,78.42607,45.5566]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[36.81151,80.08117,46.71402,84.60188,54.03326,76.42155,61.35251,85.46297,73.83828,76.20628,86.96987,83.95607,93.85858,76.85209,99.24038,80.08117]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",points:[95.58345,31.98512,95.58345,31.98512,104.33563,25.53184,105.97087,18.7394,107.6061,11.94695,113.65647,33.63444,105.97087,42.39888],segments:[1,4,4]},{type:"shape",background:"rgb(237,237,237)",borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[44.41276,23.77714,38.68944,23.77714,33.30496,20.23699,28.88983,14.5401,24.47469,8.84321,22.55729,35.68983,32.04166,40.72938],segments:[1,4,4]},{type:"oval",borderWidth:2,borderColor:"rgb(61,61,61)",rect:[21.53429,22.96531,88.8981,74.69064]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",points:[93.19422,30.5138,93.19422,30.5138,96.32695,28.82985,99.04364,25.51534,100.63358,23.57553,102.08422,21.24706,102.68792,18.7394,104.32316,11.94695,112.13179,31.92062,104.44618,40.68506],segments:[1,4,4,4]},{type:"shape",borderWidth:2,borderColor:"rgb(61,61,61)",borderCap:"round",rotation:.2618,points:[40.62881,26.14647,34.90549,26.14647,32.31798,22.75803,27.90285,17.06114,23.48771,11.36426,18.41848,35.24736,27.90285,40.28692],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[91.52207,49.98659,1.67215,3.35736]},{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",anchorX:.41176,anchorY:.88889,rect:[39.44815,49.46033,2.86639,3.35736]}]}),ht.Default.setImage("editor.block",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15,14.5,1,14.5,1,1.50001,7,1.50001,8,3.50001,15,3.50001,15,14.5]},{type:"rect",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[5.5,7.22625,6,5]},{type:"circle",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[2.5,4.72625,6,5]}]}),ht.Default.setImage("editor.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[2.82964,11.54111,13.17036,11.54111,13.17036,13.12467,13.17036,5.20688,2.82964,5.20688,2.82964,13.12467,13.17036,13.12467,7.26137,13.12467,5.78413,15.5,10.21588,15.5,8.84426,13.12467,13.17036,13.12467,13.17036,11.54111]}]}),ht.Default.setImage("editor.subgraph",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",background:"rgb(255,227,199)",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8.00001,2.80769,15.5,2.80769,15.5,15.5]},{type:"shape",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[4.90316,8.05737,4.90316,8.05737,4.30121,6.50546,5.25104,5.82166,6.20086,5.13787,7.09165,5.82166,7.09165,5.82166,7.09165,5.82166,7.76857,4.36921,9.6391,4.91013,11.50964,5.45106,11.09684,8.05737,11.09684,8.05737,11.09684,8.05737,12.482,8.53031,12.482,9.79106,12.482,10.86629,11.67411,11.63079,11.09684,11.63079,4.90316,11.63079,4.31315,11.63079,3.518,10.84732,3.518,9.79106,3.518,8.56402,4.90316,8.05737,4.90316,8.05737],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[13,13.5,8.02409,13.5,8,9,8.02409,13.5,3,13.5]}]}),ht.Default.setImage("editor.restore",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.add",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",rotation:3.14159,points:[9.47991,2.5,13.48953,7.4,9.47991,7.4,9.47991,2.5,2.48953,2.5,2.48953,13.5,13.48953,13.5,13.48953,7.4]}]}),ht.Default.setImage("editor.delete",{background:"rgb(89,89,89)",width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[5.5,5.57173,5.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.05685,5.57173,8.05685,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[10.5,5.57173,10.5,12.45709]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,3.18902,15,3.16996,5.32652,3.16021,6.32652,1.16021,9.32652,1.16021,10.32652,3.16021]},{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[3.33333,3.18902,9.33334,11.65078]}]}),ht.Default.setImage("editor.import",{background:"rgb(179,179,179)",width:16,height:16,comps:[{type:"triangle",borderColor:"rgb(255,255,255)",borderWidth:1,rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.top",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.86035,6.44002,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,4.58061,13.85824,4.51881]}]}),ht.Default.setImage("editor.up",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:2.35619,rect:[3.89924,6.05159,8.20153,8.2581]}]}),ht.Default.setImage("editor.down",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.89924,.69031,8.20153,8.2581]}]}),ht.Default.setImage("editor.bottom",{background:"rgb(145,145,145)",width:16,height:16,comps:[{type:"rightTriangle",borderWidth:1,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rotation:5.49779,rect:[3.93812,.69031,8.20153,8.2581]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",rotation:3.14159,points:[2.14176,10.85024,13.85824,10.78844]}]}),ht.Default.setImage("editor.menu",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[.93729,4,14.93729,4]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,8,15.06271,8]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.06271,12,15.06271,12]}]}),ht.Default.setImage("editor.undo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.redo",{background:"rgb(191,191,191)",width:16,height:16,comps:[{type:"shape",background:"rgb(255,255,255)",shadowColor:"#1ABC9C",scaleX:-1,points:[9.9945,5.006,6.0345,5.006,6.0345,3.527,6.0345,3.336,5.9255,3.162,5.7545,3.078,5.5825,2.994,5.3785,3.015,5.2275,3.132,2.4795,5.264,2.3575,5.359,2.2865,5.505,2.2865,5.659,2.2865,5.813,2.3575,5.959,2.4795,6.054,5.2275,8.186,5.3175,8.256,5.4255,8.292,5.5345,8.292,5.6095,8.292,5.6845,8.275,5.7545,8.241,5.9255,8.157,6.0345,7.983,6.0345,7.792,6.0345,6.006,9.9945,6.006,11.5445,6.006,12.7135,7.296,12.7135,9.006,12.7135,10.689,11.4815,12.006,9.9085,12.006,5.0345,12.006,4.7585,12.006,4.5345,12.23,4.5345,12.506,4.5345,12.782,4.7585,13.006,5.0345,13.006,9.9085,13.006,12.0425,13.006,13.7135,11.249,13.7135,9.006,13.7135,6.763,12.0795,5.006,9.9945,5.006,9.9945,5.006],segments:[1,2,2,4,4,2,4,4,2,4,4,4,2,2,4,4,2,4,4,2,4,4,2]}]}),ht.Default.setImage("editor.edit",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(51,153,255)",shadowColor:"#1ABC9C",rotation:5.49779,closePath:!0,points:[6,-.83884,.5,13.16116,6.04966,10.58206,11.5,13.16116,6,-.83884]}]}),ht.Default.setImage("editor.rulers",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[1.50517,1.5,1.5,4.49799,2.47337,4.49798,1.5,4.49799,1.50003,14.5,11.23413,14.48019,11.23413,13.48171,11.23413,14.47896,14.5,14.47897,4.00002,14.47899,4.00001,12.00001,1.50521,12.00002]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[14,6,14,14,6,14]}]}),ht.Default.setImage("editor.grid",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.49468,1.49999,4.5,14.49999,4.49468,11.53541,1.5,11.51432,14.5,11.51432,11.52105,11.53541,11.52105,14.49999,11.52105,1.49999,11.5,4.50429,14.5,4.50429,1.5,4.50429]}]}),ht.Default.setImage("editor.save",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[3.66183,14.5,14.5,14.5,14.5,4.83454,10.71984,1.5,3.66183,1.5,3.66183,6.18654,10.71984,6.18654,10.71984,1.5,1.5,1.5,1.5,14.5,3.66183,14.5,3.66183,9.03168,12.17213,9.03168,12.17213,14.5]}]}),ht.Default.setImage("editor.preview",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[1.9869,6.489,2,2,14,8,1.9869,14,2,9.555]}]}),ht.Default.setImage("editor.reload",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[7.5,1.71892,3,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:0,arcTo:4.7124,arcClose:!1,shadowColor:"#1ABC9C",rect:[2,2.78108,12,12]}]}),ht.Default.setImage("editor.zoomout",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8]}]}),ht.Default.setImage("editor.zoomin",{width:16,height:16,comps:[{type:"shape",borderWidth:1,borderColor:"white",points:[2,8,14,8,8,2,8,14],segments:[1,2,1,2]}]}),ht.Default.setImage("editor.zoomtofit",{background:"rgb(179,179,179)",gridLightColor:"rgba(0,0,0,0.20)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[8.00001,11.91764,8.00001,15]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-1.5708,rect:[9.75,7.24608,2,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-1.5708,points:[13.516,6.484,13.516,9.51599]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-3.14159,points:[8.00001,.99999,8.00001,4.08236]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:1.5708,points:[2.516,6.4801,2.516,9.51209]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[4.25,7.24608,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:3.14159,rect:[7.00001,4.5,2,1.5]},{type:"triangle",background:"rgb(138,138,138)",borderWidth:1,borderColor:"rgb(138,138,138)",
shadowColor:"#1ABC9C",rotation:6.28319,rect:[7,10,2,1.5]}]}),ht.Default.setImage("editor.toggleleft",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[3.49001,5.50001,3.51001,10.49999]}]}),ht.Default.setImage("editor.toggleboth",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.toggleright",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:1.5708,rect:[2.50002,1.00002,10.99995,13.99996]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[12.49999,5.50001,12.51999,10.49999]}]}),ht.Default.setImage("editor.layout.helper",ht.Default.parse(JSON.stringify({modified:"Mon Oct 29 2018 09:55:40 GMT+0800 (\u4e2d\u56fd\u6807\u51c6\u65f6\u95f4)",dataBindings:[{attr:"selectColor",valueType:"Color",defaultValue:"#60ACFC"},{attr:"layout.h",valueType:"String"},{attr:"layout.v",valueType:"String"}],width:100,height:100,interactive:!0,disableSelectedBorder:!0,pixelPerfect:!1,comps:[{type:"rect",borderColor:"#979797",displayName:"\u5de6\u4fa7\u4ea4\u4e92",rect:[5.51795,27.5,20.9641,44.5],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'left');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u53f3\u4fa7\u4ea4\u4e92",rect:[74.0359,27.5,20.9641,45],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.h', 'leftright');\n}\nelse {\n    data.a('layout.h', 'right');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0a\u4fa7\u4ea4\u4e92",rect:[27.5,6,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'top');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u4e0b\u4fa7\u4ea4\u4e92",rect:[27.5,74,45,20],onDown:"__ht__function(event, data, view, point, width, height) {\nif (ht.Default.isShiftDown()) {\n    data.a('layout.v', 'topbottom');\n}\nelse {\n    data.a('layout.v', 'bottom');\n}\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[28.22051,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u6a2a\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[55.77949,44,16,12],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,28,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderColor:"#979797",displayName:"\u7eb5\u5411\u4e2d\u5fc3\u4ea4\u4e92",rect:[44.22051,56,11.55897,16],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",rect:[5,5,90,90]},{type:"rect",borderWidth:1,borderColor:"#d4d4d4",borderPattern:[6,6],rect:[27.5,27.5,45,45]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'left' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D4D4D4"},borderColor:"#979797",rect:[8,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'right' || layoutH === 'leftright') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[76,48,16,4]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutH = data.a('layout.h');\nif (layoutH === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[34,48,32,4],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.h', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'bottom' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,76,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'top' || layoutV === 'topbottom') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,8,4,16]},{type:"rect",background:{func:"__ht__function(data, view) {\nvar layoutV = data.a('layout.v');\nif (layoutV === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,34,4,32],onDown:"__ht__function(event, data, view, point, width, height) {\ndata.a('layout.v', 'center');\n}"},{type:"rect",background:{func:"__ht__function(data, view) {\nif (data.a('layout.h') === 'center' || data.a('layout.v')  === 'center') {\n    return data.a('selectColor');\n}\nreturn '#d4d4d4';\n}",value:"#D8D8D8"},borderColor:"#979797",rect:[48,48,4,4]}]}))),ht.Default.setImage("editor.attachPoint",{width:10,height:10,boundExtend:1,comps:[{type:"shape",borderWidth:1,background:{func:"attr@selectColor",value:"rgb(51,153,255)"},borderColor:{func:"attr@selectColor",value:"rgb(51,153,255)"},closePath:!0,points:[5,0,0,5,5,10,10,5]}]}),ht.Default.setImage("editor.display.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.display.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.display.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.display.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.display.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.display.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.display.node",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1.5,9.38462,14.5,9.38462,14.5,11.23077,14.5,2,1.5,2,1.5,11.23077,14.5,11.23077,7.07143,11.23077,5,15,11,15,8.92857,11.23077]}]}),ht.Default.setImage("editor.display.group",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[13,12.5,13,10.54,3,10.54,13,10.54,13,5.5,3,5.5,3,12.5,13,12.5,7,12.5,5.85714,15.5,10.14287,15.5,9,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[15.5,15.5,.5,15.5,.5,.5,6.92857,.5,8,2.19286,15.5,2.19286,15.5,15.5]}]}),ht.Default.setImage("editor.display.edge",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[.69044,.97071,4,4.00837]},{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[11.27696,10.99163,4,4.00837]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",points:[4.35933,3.02819,7.84441,2.9749,7.84441,12.99581,11.64067,12.99581]}]}),ht.Default.setImage("editor.display.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.display.subgraph",{gridThickColor:"rgb(191,191,191)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(207,207,207)",visible:!1,closePath:!0,points:[2.81788,9.09381,2.81788,9.09381,1.38027,6.92868,3.20223,5.43826,5.02418,3.94784,6.51488,5.43826,6.51488,5.43826,6.51488,5.43826,7.61273,3.06338,10.74281,3.94784,13.87289,4.8323,13.18212,9.09381,13.18212,9.09381,13.18212,9.09381,15.5,9.8671,15.5,11.92851,15.5,13.6866,14.14811,14.93662,13.18212,14.93662,2.81788,14.93662,1.83057,14.93662,.5,13.65558,.5,11.92851,.5,9.92221,2.81788,9.09381,2.81788,9.09381],segments:[1,4,4,4,4,4,4,2,4,4]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[4.99379,5.52777,6,4.47223]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",visible:!1,shadowColor:"#1ABC9C",rect:[4,6.43826,2,2]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.15905,arcTo:5.5676,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[2.5,3.11794,5,5]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:3.57792,arcTo:6.6497,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[5.63862,1.53868,9.36138,7.15852]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:1.5708,arcTo:3.87463,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[-1,6.56338,8.99379,5.93662]},{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",arcFrom:5.00909,arcTo:1.5708,arcClose:!1,visible:!1,shadowColor:"#1ABC9C",rect:[8.00621,6.56338,8.99379,5.93662]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",visible:!1,points:[3.4969,12.5,12.5031,12.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[9.72,12.5,8,10,6.34,12.5]},{type:"circle",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",displayName:"\u5706\u5f62",rect:[0,0,2,2]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderJoin:"miter",points:[15,15.5,8.02409,15.5,8.02409,14,8.02409,15.5,1,15.5]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",closePath:!0,points:[2.81167,6.59481,2.81167,6.59481,1.80439,4.03022,3.39379,2.90023,4.98319,1.77025,6.47379,2.90023,6.47379,2.90023,6.47379,2.90023,7.60652,.5,10.7366,1.3939,13.86668,2.28781,13.17591,6.59481,13.17591,6.59481,13.17591,6.59481,15.49379,7.37636,15.49379,9.45978,15.49379,11.23663,14.1419,12.5,13.17591,12.5,2.81167,12.5,1.82436,12.5,.49379,11.20528,.49379,9.45978,.49379,7.43206,2.81167,6.59481,2.81167,6.59481],segments:[1,4,4,4,4,4,4,2,4,4]}]}),ht.Default.setImage("editor.symbol.rect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[2.5,1.5,11,13]}]}),ht.Default.setImage("editor.symbol.oval",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"circle",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rect:[1,1,14,14]}]}),ht.Default.setImage("editor.symbol.roundrect",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"roundRect",borderWidth:1,borderColor:"rgb(138,138,138)",cornerRadius:2.5,shadowColor:"#1ABC9C",rect:[2.5,1,11,14]}]}),ht.Default.setImage("editor.symbol.triangle",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",rotation:4.71239,points:[1.00872,1,14.99345,8,.99345,15,1.00872,1]}]}),ht.Default.setImage("editor.symbol.polygon",{width:16,height:16,comps:[{type:"polygon",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.star",{width:16,height:16,comps:[{type:"star",rect:[1,1,14,14],borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.arc",{width:16,height:16,comps:[{type:"arc",rect:[1,1,14,14],arcFrom:0,arcTo:4.1888,borderColor:"white",borderWidth:1}]}),ht.Default.setImage("editor.symbol.image",{background:"rgb(156,156,156)",width:16,height:16,comps:[{type:"rect",borderWidth:1,borderColor:"rgb(255,255,255)",rect:[.5,1.96,15,12]},{type:"circle",background:"rgb(255,255,255)",borderColor:"rgb(255,255,255)",rect:[3.32103,4.48721,1.5,1.5]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",points:[2.18757,9.112,6.11684,9.112,7.77072,10.39241,9.50807,13.68975,9.69338,14.04145,9.04982,12.34611,7.45717,10.69236,7.45717,10.69236,8.72728,5.98721,14.05092,5.98721],segments:[1,4,4,4]}]}),ht.Default.setImage("editor.symbol.shape",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"arc",borderWidth:1,borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[6.45666,.50222,10,8]},{type:"oval",background:"rgb(138,138,138)",borderColor:"rgb(138,138,138)",shadowColor:"#1ABC9C",rotation:-2.35619,rect:[4.92983,8.48004,2.48323,2.47136]},{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",rotation:-2.35619,points:[.71918,15.84031,-.26373,13.78,4.61411,6.85806,4.66212,13.2497,4.61411,6.85806,9.56535,13.77996,8.58245,15.84028]}]}),ht.Default.setImage("editor.symbol.border",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",points:[.5,6.01503,.5,2,15.48868,2,15.5,14,.5,14,.5,10]}]}),ht.Default.setImage("editor.symbol.text",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",borderCap:"round",shadowColor:"#1ABC9C",points:[1,15,8.06501,1,15,15,12.38059,9.8,4.10171,9.8]}]}),ht.Default.setImage("editor.symbol.piechart",{background:"rgb(97,97,97)",width:16,height:16,comps:[{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:.5236,arcTo:4.71239,rect:[.53628,2.06928,13.08634,13.08634]},{type:"arc",borderWidth:1,borderColor:"rgb(255,255,255)",arcFrom:4.71239,arcTo:.5236,rect:[2.37737,1,13.08634,13.08634]}]}),ht.Default.setImage("editor.symbol.onedimensionalcolumnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[3.42625,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[10.00543,1,3,14]}]}),ht.Default.setImage("editor.symbol.columnchart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[1,9,3,6]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[4,5.95042,3,9.04958]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[9,1,3,14]},{type:"rect",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[12,10.93747,3,4.06253]}]}),ht.Default.setImage("editor.symbol.linechart",{background:"rgb(179,179,179)",width:16,height:16,blendMode:"override",comps:[{type:"shape",borderWidth:1,borderColor:"rgb(138,138,138)",points:[1,14,5,7,11,8,15,2]}]}),ht.Default.setImage("editor.point.mirrored",{width:30,height:30,fitSize:!1,comps:[{type:"arc",background:"rgb(202,235,248)",borderWidth:2,borderColor:"rgb(17,158,216)",arcClose:!1,rect:[3.5,10.30081203536023,23,25.3726296254234]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.300812035360231,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[17.842265898626422,9.310233818119592,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.713262902082427,8.310233818119592,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.4018068742542837,9.30081203536023,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.286737097917573,8.310233818119592,3,4]}]}),ht.Default.setImage("editor.point.straight",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[26.974999999999998,23.185840967335317,15.133692185007973,10.275109094255685,3.0250000000000004,23.185840967335317]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12,7.561327956066684,6,6]}]}),ht.Default.setImage("editor.point.disconnected",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.1940148593724587,22.95774078992803,3.1940148593724587,18.139874123261343,7.6015038461565965,10.497740789928038,14.542032480517832,10.497740789928038,26.80598514062754,22.95774078992803],segments:[1,4,2]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[12.093814401372779,7.5391087731804305,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[16.36973009802768,14.555043156001322,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rotation:.7853981633974483,rect:[22.831111406474626,16.51363217953681,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.2671011430070465,9.53910877318043,9.826713258365732,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.152031366670336,8.548530555939791,3,4]}]}),ht.Default.setImage("editor.point.asymmetric",{width:30,height:30,fitSize:!1,comps:[{type:"shape",background:"rgb(200,234,247)",borderWidth:2,borderColor:"rgb(17,160,217)",points:[3.5000000000000027,22.974997694265234,3.5000000000000027,17.50768540873153,5.131816608669447,11.637417102180905,12.400695544362113,11.637417102180905,22.516641067164265,11.637417102180905,26.5,22.974997694265234,26.5,22.974997694265234],segments:[1,4,4]},{type:"oval",background:"rgb(255,255,255)",borderWidth:2,borderColor:"rgb(51,51,51)",rect:[9.324670579660944,7.637417102180905,6,6]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[3.405482351035767,9.637417102180905,6.540642002660807,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[2.7221578598514142,8.637417102180905,3,4]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[15.278596259040164,9.637417102180905,11.965262549245955,2]},{type:"rect",background:"rgb(51,51,51)",borderColor:"#979797",rect:[24.731262324024406,8.637417102180905,3,4]}]}),ht.Default.setImage("editor.layout.circular",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,3,3,8,5,13,11,13,13,8],segments:[1,2,2,2,2,5]}]}),ht.Default.setImage("editor.layout.symmetric",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,2,7,4,9,4,9,2,2,7,2,9,4,9,4,7,12,7,12,9,14,9,14,7,4,12,4,14,6,14,6,12,10,12,10,14,12,14,12,12],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderWidth:1,borderColor:"white",points:[8,8,8,3,8,8,3,8,8,8,5,13,8,8,11,13,8,8,13,8],segments:[1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.hierarchical",{width:16,height:16,comps:[{type:"shape",background:"white",points:[4,3,4,5,6,5,6,3,10,3,10,5,12,5,12,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[5,4,2,12,5,4,8,12,5,4,14,12,11,4,2,12,11,4,8,12,11,4,14,12],segments:[1,2,1,2,1,2,1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardnorth",{width:16,height:16,comps:[{type:"shape",background:"white",points:[7,3,7,5,9,5,9,3,1,11,1,13,3,13,3,11,7,11,7,13,9,13,9,11,13,11,13,13,15,13,15,11],segments:[1,2,2,2,1,2,2,2,1,2,2,2,1,2,2,2]},{type:"shape",borderColor:"white",borderWidth:1,points:[8,4,2,12,8,4,8,12,8,4,14,12],segments:[1,2,1,2,1,2]}]}),ht.Default.setImage("editor.layout.towardsouth",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardeast",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*-Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.layout.towardwest",{width:16,height:16,comps:[{type:"image",name:"editor.layout.towardnorth",rotation:.5*Math.PI,rect:[0,0,16,16]}]}),ht.Default.setImage("editor.align.distributehorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14,14,2,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[8,5,8,11],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.distributevertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2,2,14,14,14],segments:[1,2,1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[5,8,11,8],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.alignleft",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,2,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[5,5,13,5,5,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.alignhorizontal",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[8,2,8,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[3,5,13,5,6,11,10,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.alignright",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[14,2,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[3,5,11,5,11,11,8,11],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.aligntop",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,2,14,2],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[5,5,5,13,11,5,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.alignvertical",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,8,14,8],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[5,3,5,13,11,6,11,10],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]}),ht.Default.setImage("editor.align.alignbottom",{background:"rgb(150,150,150)",width:16,height:16,comps:[{type:"shape",points:[2,14,14,14],segments:[1,2],borderWidth:1,borderCap:"round",borderColor:{func:function(){return Ra.config.color_dark}}},{type:"shape",points:[5,3,5,11,11,11,11,8],segments:[1,2,1,2],borderWidth:3,borderCap:"round",borderColor:{func:function(){return Ra.config.color_select}}}]});var sj=function(){return!0};uB("editor.layout.circular"),uB("editor.layout.symmetric"),uB("editor.layout.hierarchical"),uB("editor.layout.towardnorth"),uB("editor.layout.towardsouth"),uB("editor.layout.towardeast"),uB("editor.layout.towardwest"),uB("editor.root"),uB("editor.bind",sj),uB("editor.unbind"),uB("editor.dir"),uB("editor.dxf"),uB("editor.sound"),uB("editor.video"),uB("editor.resetsize"),uB("editor.restore"),ht.Data.prototype.$50$=Ha,ht.Data.prototype.$51$=function(B){return this._refGraph?[]:[Ea.call(this,B),$a]},ht.Node.prototype.$50$=Za,ht.Node.prototype.$51$=function(B){return this._refGraph?[]:[Ka.call(this,B),Ca]},ht.Edge.prototype.$50$=Ja,ht.Edge.prototype.$51$=function(B){return this._refGraph?[]:[ha.call(this,B),ma]},ht.Group.prototype.$51$=function(B){return this._refGraph?[]:[Oa.call(this,B),ka]},ht.Shape.prototype.$51$=function(B){return this._refGraph?[]:[sa.call(this,B),za]},ht.Block.prototype.$51$=function(B){return this._refGraph?[]:[oa.call(this,B),ca]},ht.RefGraph.prototype.$51$=function(B){return this._refGraph?[]:[Ua.call(this,B),Ia]};var zj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype."+this.s("shape").toLowerCase())},a.prototype.parse=function(B,a,j){B&&(nB(this,"shape",B.type,"rect"),nB(this,"shape.background",B.background,null),nB(this,"shape.repeat.image",B.repeatImage),nB(this,"shape.border.width",B.borderWidth),nB(this,"shape.border.color",B.borderColor,null),nB(this,"shape.border.3d",B.border3d),nB(this,"shape.border.3d.color",B.border3dColor),nB(this,"shape.border.3d.accuracy",B.border3dAccuracy),nB(this,"shape.border.cap",B.borderCap),nB(this,"shape.border.join",B.borderJoin),nB(this,"shape.border.pattern",B.borderPattern),nB(this,"shape.gradient",B.gradient),nB(this,"shape.gradient.color",B.gradientColor),nB(this,"shape.dash",B.dash),nB(this,"shape.dash.pattern",B.dashPattern),nB(this,"shape.dash.offset",B.dashOffset),nB(this,"shape.dash.color",B.dashColor),nB(this,"shape.dash.width",B.dashWidth),nB(this,"shape.dash.3d",B.dash3d),nB(this,"shape.dash.3d.color",B.dash3dColor),nB(this,"shape.dash.3d.accuracy",B.dash3dAccuracy),nB(this,"shape.border.width.absolute",B.borderWidthAbsolute),nB(this,"shape.fill.clip.direction",B.fillClipDiretion),nB(this,"shape.fill.clip.percentage",B.fillClipPercentage),"rect"===this.compType?nB(this,"shape.depth",B.depth):"roundRect"===this.compType?nB(this,"shape.corner.radius",B.cornerRadius):"polygon"===this.compType?nB(this,"shape.polygon.side",B.polygonSide):"arc"===this.compType&&(nB(this,"shape.arc.from",B.arcFrom),nB(this,"shape.arc.to",B.arcTo),nB(this,"shape.arc.close",B.arcClose),nB(this,"shape.arc.oval",B.arcOval)),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"shape","type",void 0),VB(this,B,"shape.background","background",null),VB(this,B,"shape.repeat.image","repeatImage"),VB(this,B,"shape.border.width","borderWidth"),VB(this,B,"shape.border.color","borderColor",null),VB(this,B,"shape.border.3d","border3d"),VB(this,B,"shape.border.3d.color","border3dColor"),VB(this,B,"shape.border.3d.accuracy","border3dAccuracy"),VB(this,B,"shape.border.cap","borderCap"),VB(this,B,"shape.border.join","borderJoin"),VB(this,B,"shape.border.pattern","borderPattern"),VB(this,B,"shape.gradient","gradient"),VB(this,B,"shape.gradient.color","gradientColor"),VB(this,B,"shape.dash","dash"),VB(this,B,"shape.dash.pattern","dashPattern"),VB(this,B,"shape.dash.offset","dashOffset"),VB(this,B,"shape.dash.color","dashColor"),VB(this,B,"shape.dash.width","dashWidth"),VB(this,B,"shape.dash.3d","dash3d"),VB(this,B,"shape.dash.3d.color","dash3dColor"),VB(this,B,"shape.dash.3d.accuracy","dash3dAccuracy"),VB(this,B,"shape.border.width.absolute","borderWidthAbsolute"),VB(this,B,"shape.fill.clip.direction","fillClipDirection"),VB(this,B,"shape.fill.clip.percentage","fillClipPercentage"),"rect"===this.compType?VB(this,B,"shape.depth","depth"):"roundRect"===this.compType?VB(this,B,"shape.corner.radius","cornerRadius"):"polygon"===this.compType?VB(this,B,"shape.polygon.side","polygonSide"):"arc"===this.compType&&(VB(this,B,"shape.arc.from","arcFrom"),VB(this,B,"shape.arc.to","arcTo"),VB(this,B,"shape.arc.close","arcClose"),VB(this,B,"shape.arc.oval","arcOval")),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("shape")}}]),a}(ht.Node),oj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.shape")},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"shape"),nB(this,"shape.background",B.background,null),nB(this,"shape.repeat.image",B.repeatImage),nB(this,"shape.border.width",B.borderWidth),nB(this,"shape.border.color",B.borderColor,null),nB(this,"shape.border.3d",B.border3d),nB(this,"shape.border.3d.color",B.border3dColor),nB(this,"shape.border.3d.accuracy",B.border3dAccuracy),nB(this,"shape.border.cap",B.borderCap),nB(this,"shape.border.join",B.borderJoin),nB(this,"shape.border.pattern",B.borderPattern),nB(this,"shape.gradient",B.gradient),nB(this,"shape.gradient.color",B.gradientColor),nB(this,"shape.dash",B.dash),nB(this,"shape.dash.pattern",B.dashPattern),nB(this,"shape.dash.offset",B.dashOffset),nB(this,"shape.dash.color",B.dashColor),nB(this,"shape.dash.width",B.dashWidth),nB(this,"shape.dash.3d",B.dash3d),nB(this,"shape.dash.3d.color",B.dash3dColor),nB(this,"shape.dash.3d.accuracy",B.dash3dAccuracy),nB(this,"shape.fill.rule",B.fillRule),nB(this,"shape.fill.clip.direction",B.fillClipDiretion),nB(this,"shape.fill.clip.percentage",B.fillClipPercentage),nB(this,"shape.gradient.pack",B.gradientPack),nB(this,"shape.border.width.absolute",B.borderWidthAbsolute),lB(this,B,a,j),iB(this,B),this.setPoints(WB(dB(B.points))),this.setSegments(dB(B.segments)))},a.prototype.toJSON=function(){var B={};if(VB(this,B,"type","type",void 0),VB(this,B,"shape.background","background",null),VB(this,B,"shape.repeat.image","repeatImage"),VB(this,B,"shape.border.width","borderWidth"),VB(this,B,"shape.border.color","borderColor",null),VB(this,B,"shape.border.3d","border3d"),VB(this,B,"shape.border.3d.color","border3dColor"),VB(this,B,"shape.border.3d.accuracy","border3dAccuracy"),VB(this,B,"shape.border.cap","borderCap"),VB(this,B,"shape.border.join","borderJoin"),VB(this,B,"shape.border.pattern","borderPattern"),VB(this,B,"shape.gradient","gradient"),VB(this,B,"shape.gradient.color","gradientColor"),
VB(this,B,"shape.dash","dash"),VB(this,B,"shape.dash.pattern","dashPattern"),VB(this,B,"shape.dash.offset","dashOffset"),VB(this,B,"shape.dash.color","dashColor"),VB(this,B,"shape.dash.width","dashWidth"),VB(this,B,"shape.dash.3d","dash3d"),VB(this,B,"shape.dash.3d.color","dash3dColor"),VB(this,B,"shape.dash.3d.accuracy","dash3dAccuracy"),VB(this,B,"shape.fill.rule","fillRule"),VB(this,B,"shape.fill.clip.direction","fillClipDirection"),VB(this,B,"shape.fill.clip.percentage","fillClipPercentage"),VB(this,B,"shape.gradient.pack","gradientPack"),VB(this,B,"shape.border.width.absolute","borderWidthAbsolute"),eB(this,B),FB(this,B),_B(B,"points",this.a("points"),tB(this.getPoints())),this.getSegments()){var a=this.getSegments().toArray();if(a.length){var j=1===a[0];if(j)for(var E=1;E<a.length;E++)if(2!==a[E]){j=!1;break}j||_B(B,"segments",this.a("segments"),a)}}return B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Shape),cj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){if(this.getDisplayName())return this.getDisplayName();var B=this.s("image");return B&&B.length<100?B:H("editor.comptype.image")},a.prototype.onStyleChanged=function(a,j,E){B.prototype.onStyleChanged.call(this,a,j,E),"image"===a&&this.setImage(E)},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"image"),nB(this,"body.color",B.color),nB(this,"image.stretch",B.stretch),nB(this,"image",B.name,"node_image"),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"type","type",void 0),VB(this,B,"body.color","color"),VB(this,B,"image.stretch","stretch"),VB(this,B,"image","name"),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Node),Uj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||this.s("text")||H("editor.comptype.text")},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"text"),nB(this,"text",B.text),nB(this,"text.align",B.align),nB(this,"text.vAlign",B.vAlign),nB(this,"text.color",B.color),nB(this,"text.font",B.font),nB(this,"text.shadow",B.shadow),nB(this,"text.shadow.color",B.shadowColor),nB(this,"text.shadow.blur",B.shadowBlur),nB(this,"text.shadow.offset.x",B.shadowOffsetX),nB(this,"text.shadow.offset.y",B.shadowOffsetY),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"type","type",void 0),VB(this,B,"text","text"),VB(this,B,"text.align","align"),VB(this,B,"text.vAlign","vAlign"),VB(this,B,"text.color","color"),VB(this,B,"text.font","font"),VB(this,B,"text.shadow","shadow"),VB(this,B,"text.shadow.color","shadowColor"),VB(this,B,"text.shadow.blur","shadowBlur"),VB(this,B,"text.shadow.offset.x","shadowOffsetX"),VB(this,B,"text.shadow.offset.y","shadowOffsetY"),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Text),Ij=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.s({"shape.border.color":"red","shape.border.width":1,"shape.background":null}),H.parse(j,E,$),H.setClosePath(!0),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.clip")},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"clip"),lB(this,B,a,j),this.setPoints(WB(dB(B.points))),this.setSegments(dB(B.segments)))},a.prototype.toJSON=function(){var B={};if(VB(this,B,"type","type",void 0),eB(this,B),_B(B,"points",this.a("points"),tB(this.getPoints())),this.getSegments()){var a=this.getSegments().toArray();if(a.length){var j=1===a[0];if(j)for(var E=1;E<a.length;E++)if(2!==a[E]){j=!1;break}j||_B(B,"segments",this.a("segments"),a)}}return B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Shape),Xj=function(B){function a(j,E,$){return Wa(this,a),Ga(this,B.call(this))}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.restore")},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"restore"),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"type","type",void 0),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Node),Fj=function(B){function a(){return Wa(this,a),Ga(this,B.call(this))}return ra(a,B),a}(ht.widget.BorderPane),Vj=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a}(ht.widget.ContextMenu),wj=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a.prototype.invalidateAll=function(a,j){if("imageLoading"!==j)return"imageLoaded"===j?(this.fpImageLoaded=!0,this.dm().each(function(B){B.fp("imageLoaded",!1,!0)}),void(this.fpImageLoaded=!1)):void B.prototype.invalidateAll.call(this,a,j)},a.prototype.adjustZoom=function(B){return B>Ra.config.maxZoom?Ra.config.maxZoom:B<Ra.config.minZoom?Ra.config.minZoom:B},a.prototype.getUnionNodeRect=function(B){var a=this,j=void 0;return B=B._as||B,B.forEach(function(B){B instanceof ht.Node&&(j=R(j,a.getNodeRect(B)))}),j},a.prototype.$64$=function(B){this.validate();var a=this.getViewRect(),j=this.getUnionNodeRect(B);if(!a||!j||ht.Default.intersectsRect(a,j))return null;var E=a.x+a.width/2-j.x-j.width/2,$=a.y+a.height/2-j.y-j.height/2;return this.moveDatas(B,E,$),{x:E,y:$}},a.prototype.getFullscreenDatas=function(){return null},a}(ht.graph.GraphView),Pj=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a}(ht.widget.ListView),_j=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this,j));return E.getView().style.background=Ra.config.color_pane_dark,E.setMaskBackground(null),E.setContentBorderColor(null),E.setContentBackground("white"),E.getMask().style.border=Ra.config.color_select+" solid 1px",E}return ra(a,B),a}(ht.graph.Overview),lj=function(B){function a(j,E,$,H){Wa(this,a);var K=Ga(this,B.call(this,j,E,$,H));return K.setTogglable(!1),K}return ra(a,B),a}(ht.widget.SplitView),ej=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a}(ht.widget.TablePane),nj=function(B){function a(){return Wa(this,a),Ga(this,B.call(this))}return ra(a,B),a.prototype.add=function(a,j,E){var $=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!$){var H=new ht.Tab;return H.setName(a),H.setView(j),H}return B.prototype.add.call(this,a,j,E)},a}(ht.widget.TabView),bj=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a}(ht.widget.Toolbar),Sj=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this,j));return E.setDoubleClickToToggle(!1),E}return ra(a,B),a.prototype.getToggleIcon=function(B){if(this._loader&&!this._loader.isLoaded(B))return this._collapseIcon;var a=B.getChildren(),j=a.size();if(j){for(var E=!1,$=0;$<j;$++)if(this.isVisible(a.get($))){E=!0;break}if(E)return this.isExpanded(B)?this._expandIcon:this._collapseIcon}},a.prototype.hasExpandedChild=function(B){if(!this.isExpanded(B))return!1;var a=B.getChildren(),j=a.size();if(j)for(var E=0;E<j;E++)if(this.isVisible(a.get(E)))return!0;return!1},ta(a,[{key:"expandIds",get:function(){return Object.keys(this._expandMap)},set:function(B){var a=this;B.forEach(function(B){var j=a.dm().getDataById(B);j&&a.expand(j)})}},{key:"selectionIds",get:function(){var B=[];return this.sm().each(function(a){B.push(a.$34$||a._id)}),B},set:function(B){var a=this,j=[];B.forEach(function(B){var E=a.dm().getDataById(B);E&&j.push(E)}),this.sm().ss(j)}}]),a}(ht.widget.TreeView);!function(B,a,j){var E="ht",H=B[E],K=H.Default,C=K.getInternal();C.addMethod(K,{svgToShape:function(B,a){var j=new H.SvgConverter(a);return{converter:j,output:j.toShape(B)}}});var Z=H.Context2dProxy=function(B,a,j){var E=this;E.ctx=B,E.writer=a,E._currentContext={a:1,b:0,c:0,d:1,tx:0,ty:0},E._emptyPath(),E._forceSplitEllipse=!0,E._splitToBezier=j.splitToBezier,E._ellipseSegments=j.segments,E._contextStack=[];for(var $ in CanvasRenderingContext2D.prototype)if("webkitImageSmoothingEnabled"!==$){var H=B[$];"function"==typeof H&&(B[$]=function(a,j){return function(){try{var $=j.apply(B,arguments);return E.handleFunc(a,$,arguments),$}catch(B){}}}($,H))}};Z.prototype={},Z.prototype.constructor=Z,Z.prototype.handleFunc=function(B,a,j){var E=this;switch(B){case"save":E._ctxSave();break;case"restore":E._ctxRestore();break;case"translate":E._ctxTranslate.apply(E,j);break;case"rotate":E._ctxRotate.apply(E,j);break;case"scale":E._ctxScale.apply(E,j);break;case"setTransform":E._ctxSetTransform.apply(E,j);break;case"transform":E._ctxTransform.apply(E,j);break;case"fillText":case"strokeText":E._ctxText(j[0],j[1],j[2],"fillText"===B);break;case"rect":E._ctxRect.apply(E,j);break;case"fill":E._ctxFill(j[0]);break;case"fillRect":E._ctxRect.apply(E,j),E._ctxDraw("fill");break;case"stroke":E._ctxDraw("stroke");break;case"moveTo":E._ctxMoveTo(j[0],j[1]);break;case"lineTo":E._ctxLineTo(j[0],j[1]);break;case"beginPath":E._ctxBeginPath();break;case"closePath":E._ctxClosePath();break;case"arc":E._ctxArc.apply(E,j);break;case"ellipse":E._ctxEllipse.apply(E,j);break;case"quadraticCurveTo":E._ctxBezier([{x:j[0],y:j[1]}],j[2],j[3]);break;case"bezierCurveTo":E._ctxBezier([{x:j[0],y:j[1]},{x:j[2],y:j[3]}],j[4],j[5]);break;case"createLinearGradient":E._ctxCreateGradient(a,!0,j);break;case"createRadialGradient":E._ctxCreateGradient(a,!1,j);break;case"createPattern":E._ctxCreatePattern(a,j[0],j[1]);break;case"drawImage":E._ctxDrawImage.apply(E,j);break;case"clip":E._ctxClip()}},Z.prototype.handleSetter=function(B,a){},Z.prototype._ctxSave=function(){var B=this,a={},j=B._currentContext;for(var E in j)a[E]=j[E],"clip"===E&&j[E]&&delete j[E];B._contextStack.push(a)},Z.prototype._ctxRestore=function(){var B=this;B._currentContext.clip&&B.writer.addRestore(),B._currentContext=B._contextStack.pop(),B._transformUpdated()},Z.prototype._ctxTranslate=function(B,a){if(B=B||0,a=a||0,0!==B||0!==a){var j=this,E=j._currentContext,$=E.a,H=E.b,K=E.c,C=E.d;E.tx=$*B+K*a+E.tx,E.ty=H*B+C*a+E.ty,j._transformUpdated()}},Z.prototype._ctxScale=function(B,a){if(B=B||1,a=a||1,1!==B||1!==a){var j=this,E=j._currentContext;E.a*=B,E.b*=B,E.c*=a,E.d*=a,j._transformUpdated()}},Z.prototype._ctxRotate=function(B){var a=Math.cos(B),j=Math.sin(B),E=this,$=E._currentContext,H=$.a,K=$.b,C=$.c,Z=$.d;$.a=H*a+C*j,$.b=K*a+Z*j,$.c=-H*j+C*a,$.d=-K*j+Z*a,E._transformUpdated()},Z.prototype._ctxSetTransform=function(B,a,j,E,$,H){var K=this,C=K._currentContext;C.a=B,C.b=a,C.c=j,C.d=E,C.tx=$,C.ty=H,K._transformUpdated()},Z.prototype._ctxTransform=function(B,a,j,E,$,H){var K=this,C=K._currentContext,Z=C.a,h=C.b,m=C.c,J=C.d;C.a=Z*B+m*a,C.b=h*B+J*a,C.c=Z*j+m*E,C.d=h*j+J*E,C.tx=Z*$+m*H+C.tx,C.ty=h*$+J*H+C.ty,K._transformUpdated()},Z.prototype._transformUpdated=function(){},Z.prototype._calcCurrentRotation=function(){var B=this._currentContext;return 0===B.b&&0===B.c?0:Math.atan2(B.b,B.a)},Z.prototype._calcCurrentScale=function(){var B=this._currentContext;return{x:Math.sqrt(B.a*B.a+B.c*B.c),y:Math.sqrt(B.b*B.b+B.d*B.d)}},Z.prototype._transformPoint=function(B){var a=this._currentContext,j=B.x,E=B.y;return{x:a.a*j+a.c*E+a.tx,y:a.b*j+a.d*E+a.ty}},Z.prototype._transformPoints=function(B){for(var a=this,j=new Array(B.length),E=0,$=B.length;E<$;E++)j[E]=a._transformPoint(B[E]);return j},Z.prototype._transformSize=function(B){var a=this._currentContext;return B*Math.max(Math.sqrt(a.c*a.c+a.d*a.d),Math.sqrt(a.a*a.a+a.b*a.b))},Z.prototype._equal=function(B,a){var j=B-a;return j>-1e-5&&j<1e-5},Z.prototype._ctxText=function(B,a,j,E){var $,H,K=this,C=K.ctx,Z=C.font,h=E?C.fillStyle:C.strokeStyle,m=C.textAlign,J=C.textBaseline;"string"==typeof Z&&(H=Z.match(/\d+/),H&&($=H[0],Z=Z.replace(/\d+/,K._transformSize($))));var O=K._calcCurrentRotation();"alphabetic"===J?(J="bottom",j+=.25*C.measureText("e").width):"hanging"===J&&(J="top",j+=.2*C.measureText("e").width),"string"==typeof h&&"rgba(0,0,0,0)"===h.replace(/ /g,"")||B.trim().length&&K.writer.addText(B,K._transformPoint({x:a,y:j}),Z,O,m,J,h)},Z.prototype._ctxDrawImage=function(B,a,E,$,H,K,C,Z,h){if(B.width&&B.height){$===j&&H===j?(K=a,C=E,a=0,E=0,$=Z=B.width,H=h=B.height):K===j&&C===j&&(K=a,C=E,Z=$,h=H,a=0,E=0,$=B.width,H=B.height);var m=this,J=m._currentContext,O=Z/$,k=h/H,s=K-O*a,z=C-k*E,o=J.a,c=J.b,U=J.c,I=J.d;o*s+U*z+J.tx,c*s+I*z+J.ty}},Z.prototype._ctxClip=function(){var B=this,a=B._currentContext;a.clip=!0,B._ctxDraw("clip")},Z.prototype._ctxCreateGradient=function(B,a,j){B.isLinear=a,a?B.points=[j[0],j[1],j[2],j[3]]:B.points=[j[0],j[1],j[2],j[3],j[4],j[5]];var E=this._currentContext;B.trans=[E.a,E.b,E.c,E.d,E.tx,E.ty];var $=B.addColorStop;B.addColorStop=function(a,j){$.apply(this,arguments),B.colorStops||(B.colorStops=[]),B.colorStops.push(a,j)}},Z.prototype._ctxCreatePattern=function(B,a,j){console.log("create pattern")},Z.prototype._ctxRect=function(B,a,j,E){var $=this,H=$._transformPoints([{x:B,y:a},{x:B+j,y:a},{x:B+j,y:a+E},{x:B,y:a+E}]);$._path.push({type:"rect",points:H})},Z.prototype._ctxMoveTo=function(B,a){var j=this,E=j._transformPoint({x:B,y:a});j._headPoint=E,j._path.push({type:"moveTo",x:E.x,y:E.y})},Z.prototype._ctxLineTo=function(B,a){var j=this,E=j._transformPoint({x:B,y:a});j._path.push({type:"lineTo",x:E.x,y:E.y})},Z.prototype._ctxArc=function(B,a,j,E,$,H){E=E||0,$=$||2*Math.PI,j&&this._ctxEllipse(B,a,j,j,0,E,$,H)},Z.prototype._ctxEllipse=function(B,a,j,E,$,H,K,C){var Z,h,m,J,O,k,s,z,o,c,U,I,X,F,V,w=this,P=w._calcCurrentScale(),_=w._transformPoint({x:B,y:a});k=Math.sin($),s=Math.cos($);var l=function(B){return e(Math.cos(-B),Math.sin(-B))},e=function($,H){var K=j*$,C=E*H;return{x:B+(s*K-k*C),y:a+(k*K+s*C)}},n=[],b=K;if(C)for(;b>=H;)b-=2*Math.PI;else for(;b<=H;)b+=2*Math.PI;for(c=(b-H)/w._ellipseSegments,I=0;I<=w._ellipseSegments;I++)U=H+c*I,X=w._transformPoint(l(-U)),n.push(X);var S=H,v=b;if(J=n[0],O=n[n.length-1],Z=w._calcaEllipseAngle(H,K,C),H=Z.start,K=Z.end,z=w._equal(P.x,P.y),o=w._equal(j,E),!w._forceSplitEllipse&&z&&o&&w._equal(Math.abs(H-K),2*Math.PI))w._path.push({type:"circle",x:_.x,y:_.y,end:O,keyPoints:n,radius:j*P.x});else if(!w._forceSplitEllipse&&z&&o)h=w._calcCurrentRotation(),m=Math.cos(h),F=w._currentContext.a*m<0,V=w._currentContext.d*m<0,Z=w._transformStartEndAngle(H,K,F,V),H=Z.start-h,K=Z.end-h,w._path.push({type:"arc",x:_.x,y:_.y,end:O,radius:j*P.x,startAngle:H,endAngle:K,keyPoints:n});else{if(w._forceSplitEllipse||!z){if(w._path.length||w._path.push({type:"moveTo",x:n[0].x,y:n[0].y}),w._splitToBezier){var g,i,p,d=v-S,x=Math.max(Math.ceil(Math.abs(d)/Math.PI*2),1),W=d/x,t=Math.tan(.5*W),r=Math.sin(W)*(Math.sqrt(4+3*t*t)-1)/3,G=Math.cos(S),f=Math.sin(S),y=S;for(I=0;I<x;I++){p=S+(I+1)*W,g=Math.cos(p),i=Math.sin(p);var Y=e(g,i);w._ctxBezier([e(G-f*r,f+G*r),e(g+i*r,i-g*r)],Y.x,Y.y),G=g,f=i,y=p}return}for(I=1;I<=w._ellipseSegments;I++)X=n[I],w._path.push({type:"lineTo",x:X.x,y:X.y});return}var R,N,M=w._transformPoint(l(0)),Q=w._transformPoint(l(Math.PI/2)),u=function(B,a){var j=B.x-a.x,E=B.y-a.y;return Math.sqrt(j*j+E*E)},q=u(M,_),D=u(Q,_);D>q?(N=q,q=D,D=N,R=Q):R=M,h=w._calcCurrentRotation(),m=Math.cos(h),F=w._currentContext.a*m<0,V=w._currentContext.d*m<0,Z=w._transformStartEndAngle(H-Math.PI/2,K-Math.PI/2,F,V),H=Z.start,K=Z.end,w._path.push({type:"ellipse",x:_.x,y:_.y,end:O,major:{x:R.x-_.x,y:R.y-_.y},ratio:D/q,startAngle:H,endAngle:K,keyPoints:n})}},Z.prototype._ctxBezier=function(B,a,j){var E=this,$=E._transformPoint({x:a,y:j});this._path.push({type:"bezier",x:$.x,y:$.y,ctrl:E._transformPoints(B)})},Z.prototype._ctxBeginPath=function(){this._emptyPath()},Z.prototype._ctxClosePath=function(){var B=this,a=B._headPoint;a&&(B._path.push({type:"lineTo",x:a.x,y:a.y,subType:"closePath"}),B._headPoint=null,B._lastPoint=null)},Z.prototype._calcaEllipseAngle=function(B,a,j){B=-B,a=-a;var E,$=B%(2*Math.PI),H=a%(2*Math.PI);for($<0&&($+=2*Math.PI),H<0&&(H+=2*Math.PI),j||(E=$,$=H,H=E);H<=$;)H+=2*Math.PI;return{start:$,end:H}},Z.prototype._transformStartEndAngle=function(B,a,j,E){var $;return(E||j)&&(j&&E?(B=Math.PI+B,a=Math.PI+a):($=Math.PI*(j?1:2)-a,a=Math.PI*(j?1:2)-B,B=$)),{start:B,end:a}},Z.prototype._ctxFill=function(B){var a=this;return a._fillRule=B||"nonzero",a._ctxDraw("fill")},Z.prototype._ctxDraw=function(B){var a=this,j=a._path;if(j.length){var E,$,H,K,C,Z,h=[],m=[];if("clip"===B)Z={clip:!0};else{if("stroke"===B){Z={stroke:!0,lineWidth:a._transformSize(a.ctx.lineWidth),color:a.ctx.strokeStyle};var J=a.ctx.lineCap;"butt"!==J&&(Z.lineCap=J);var O=a.ctx.getLineDash();if(O&&O.length){Z.dash=!0;for(var k=0,s=O.length;k<s;k++)O[k]=a._transformSize(O[k]);Z.dashPattern=O,Z.dashOffset=a._transformSize(a.ctx.lineDashOffset)}}else Z={stroke:!1,color:a.ctx.fillStyle},"nonzero"!==a._fillRule&&(Z.fillRule=a._fillRule);if(a.ctx.globalAlpha<1&&(Z.opacity=a.ctx.globalAlpha),"string"!=typeof Z.color)if(Z.color instanceof CanvasGradient){var z=Z.color,o=[z.isLinear?"L":"R"];o=o.concat(z.points);var c=a._currentContext;o=o.concat([c.a,c.b,c.c,c.d,c.tx,c.ty]),o=o.concat(z.colorStops),Z.gradientPack=o}else if(Z.color instanceof CanvasPattern&&Z.color.gradient){var H=Z.color,z=H.gradient,o=[z.isLinear?"L":"R"];o=o.concat(z.points);var U=H.trans,c=a._currentContext,I=c.a,X=c.b,F=c.c,V=c.d,w=c.tx,P=c.ty,_=U[0],l=U[1],e=U[2],n=U[3],b=U[4],S=U[5];o=o.concat([I*_+F*l,X*_+V*l,I*e+F*n,X*e+V*n,I*b+F*S+w,X*b+V*S+P]),o=o.concat(z.colorStops),Z.gradientPack=o}else Z.trans=[a._currentContext.a,a._currentContext.b,a._currentContext.c,a._currentContext.d,a._currentContext.tx,a._currentContext.ty],Z.color=Z.color.image?Z.color.image:Z.color,Z.isPattern=!0;if("string"==typeof Z.color&&"rgba(0,0,0,0)"===Z.color.replace(/ /g,""))return}for($=0,E=j.length;$<E;$++)switch(H=j[$],H.type){case"moveTo":a._lastPoint={x:H.x,y:H.y},h.push(a._lastPoint),m.push(1);break;case"lineTo":"closePath"===H.subType?m.push(5):(h.push({x:H.x,y:H.y}),m.push(2)),a._lastPoint={x:H.x,y:H.y};break;case"rect":C=H.points,h.push({x:C[0].x,y:C[0].y},{x:C[1].x,y:C[1].y},{x:C[2].x,y:C[2].y},{x:C[3].x,y:C[3].y},{x:C[0].x,y:C[0].y}),m.push(2,2,2,2,2),a._lastPoint=H.points[0];break;case"circle":case"arc":case"ellipse":console.log("split to line",H.type);break;case"arcBegin":h.length&&m.length&&a.writer.addShape(h,m,Z),h=[],m=[];break;case"arcClose":a.writer.addShape(h,m,Z),h=[],m=[];break;case"bezier":if(K=a._lastPoint,!K)break;1===H.ctrl.length?(h.push({x:H.ctrl[0].x,y:H.ctrl[0].y},{x:H.x,y:H.y}),m.push(3)):(h.push({x:H.ctrl[0].x,y:H.ctrl[0].y},{x:H.ctrl[1].x,y:H.ctrl[1].y},{x:H.x,y:H.y}),m.push(4)),a._lastPoint={x:H.x,y:H.y};break;default:h.push({x:H.x,y:H.y}),m.push(2)}a.writer.addShape(h,m,Z)}},Z.prototype._emptyPath=function(){var B=this;B._path=[],B._lastPoint=null,B._headPoint=null};var h=H.SvgConverter=function(B){var a=this;a.initConfig(B||{}),a.initCanvas()};h.prototype={},h.prototype.constructor=h,h.prototype.initConfig=function(B){var a,E=this;a=E.options={},a.size=B.size||512,a.segments=B.segments||16,a.splitToBezier=B.splitToBezier===j||B.splitToBezier},h.prototype.initCanvas=function(){var B=this,a=document.createElement("canvas");a.width=a.height=B.options.size,a.style.width=a.style.height=B.options.size;var j=a.getContext;a.getContext=function(a){return function(j){var E=a.apply(this,arguments);return"2d"===j&&B.wrapContext2d(E),E}}(j),B._canvas=a,B._segments=[]},h.prototype.toShape=function(B){var a=this;a._canvas;return a._segments=[],canvg(a._canvas,B,{ignoreMouse:!0,ignoreAnimation:!0}),a.write()},h.prototype.wrapContext2d=function(B){var a=this,j=new H.Context2dProxy(B,a,a.options);return j},h.prototype.write=function(){var B=this;return{width:B._canvas.width,height:B._canvas.height,comps:B._segments}},h.prototype.addComponent=function(B){var a=this;a._segments.push(B)},h.prototype.addText=function(B,a,j,E,$,H,K){$=$||"left","start"===$?$="left":"end"===$&&($="right"),"alphabetic"===H?H="bottom":"hanging"===H&&(H="top");var C=this;C.addComponent({type:"text",color:K,text:B,rotation:E,rect:[a.x,a.y,0,0],align:$,vAlign:H,font:j})},h.prototype.addShape=function(B,a,E){for(var $=this,H=[],K=0,C=B.length;K<C;K++){var Z=B[K];H.push(Z.x,Z.y)}if(E.clip)return void $.addComponent({type:"clip",points:H,segments:a});var h={type:"shape",points:H,segments:a};if(E.opacity!=j&&(h.opacity=E.opacity),E.stroke)E.dash?(h.dash=E.dash,h.dashPattern=E.dashPattern,h.dashOffset=E.dashOffset,h.dashColor=E.color,h.dashWidth=E.lineWidth,h.borderColor=null,h.borderWidth=0,h.background=null):(h.borderColor=E.color,h.borderWidth=E.lineWidth,h.background=null),E.lineCap&&(h.borderCap=E.lineCap);else{if(h.borderColor=null,h.borderWidth=0,E.isPattern)h.repeatImage=E.color,h.trans=E.trans,h.background=null;else if(E.gradientPack){var m=E.gradientPack,J="L"===m[0]?[m[5],m[6],m[7],m[8],m[9],m[10]]:[m[7],m[8],m[9],m[10],m[11],m[12]];if(Math.abs(J[4])>1e8||Math.abs(J[5])>1e8){var O=J[0],k=J[1],s=J[2],z=J[3],o=J[4],c=J[5],U=Math.floor((o*z-c*s)/(O*z-k*s)),I=Math.floor((o*k-c*O)/(s*k-O*z));o=-(O*U+s*I),c=-(k*U+z*I),"L"===m[0]?(m[9]+=o,m[10]+=c,m[1]+=U,m[2]+=I,m[3]+=U,m[4]+=I):(m[11]+=o,m[12]+=c,m[1]+=U,m[2]+=I,m[4]+=U,m[5]+=I)}h.gradientPack=m,h.background=null}else h.background=E.color;E.gradient&&(h.gradient=E.gradient,h.gradientColor=E.gradientColor),E.fillRule&&(h.fillRule=E.fillRule)}$.addComponent(h)},h.prototype.addRestore=function(){this.addComponent({type:"restore"})},function(B){function a(B){this.ok=!1,"#"==B.charAt(0)&&(B=B.substr(1,6)),B=B.replace(/ /g,""),B=B.toLowerCase();var j={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var E in j)B==E&&(B=j[E]);for(var $=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(B){return[parseInt(B[1]),parseInt(B[2]),parseInt(B[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(B){return[parseInt(B[1],16),parseInt(B[2],16),parseInt(B[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(B){return[parseInt(B[1]+B[1],16),parseInt(B[2]+B[2],16),parseInt(B[3]+B[3],16)]}}],H=0;H<$.length;H++){var K=$[H].re,C=$[H].process,Z=K.exec(B);if(Z){var h=C(Z);this.r=h[0],this.g=h[1],this.b=h[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var B=this.r.toString(16),a=this.g.toString(16),j=this.b.toString(16);return 1==B.length&&(B="0"+B),1==a.length&&(a="0"+a),1==j.length&&(j="0"+j),"#"+B+a+j},this.getHelpXML=function(){for(var B=new Array,E=0;E<$.length;E++)for(var H=$[E].example,K=0;K<H.length;K++)B[B.length]=H[K];for(var C in j)B[B.length]=C;var Z=document.createElement("ul");Z.setAttribute("id","rgbcolor-examples");for(var E=0;E<B.length;E++)try{var h=document.createElement("li"),m=new a(B[E]),J=document.createElement("div");J.style.cssText="margin: 3px; border: 1px solid black; background:"+m.toHex()+"; color:"+m.toHex(),J.appendChild(document.createTextNode("test"));var O=document.createTextNode(" "+B[E]+" -> "+m.toRGB()+" -> "+m.toHex());h.appendChild(J),h.appendChild(O),Z.appendChild(h)}catch(B){}return Z}}B.RGBColor=a}("undefined"!=typeof B?B:this),function(B){function a(B){for(var a=B.data,j=B.width*B.height*4,E=0;E<j;E+=4){var $=a[E+3]/255;a[E]*=$,a[E+1]*=$,a[E+2]*=$}}function j(B){for(var a=B.data,j=B.width*B.height*4,E=0;E<j;E+=4){var $=a[E+3];0!=$&&($=255/$,a[E]*=$,a[E+1]*=$,a[E+2]*=$)}}function E(B,a,j,E){var K=document.getElementById(B),C=K.naturalWidth,Z=K.naturalHeight,h=document.getElementById(a);h.style.width=C+"px",h.style.height=Z+"px",h.width=C,h.height=Z;var m=h.getContext("2d");m.clearRect(0,0,C,Z),m.drawImage(K,0,0),isNaN(j)||j<1||(E?$(a,0,0,C,Z,j):H(a,0,0,C,Z,j))}function $(B,E,$,H,h,m){if(!(isNaN(m)||m<1)){m|=0;var J,O=document.getElementById(B),k=O.getContext("2d");try{try{J=k.getImageData(E,$,H,h)}catch(B){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),J=k.getImageData(E,$,H,h)}catch(B){throw alert("Cannot access local image"),new Error("unable to access local image data: "+B)}}}catch(B){throw alert("Cannot access image"),new Error("unable to access image data: "+B)}a(J);var s,z,o,c,U,I,X,F,V,w,P,_,l,e,n,b,S,v,g,i,p,d,x,W,t=J.data,r=m+m+1,G=H-1,f=h-1,y=m+1,Y=y*(y+1)/2,R=new K,N=R;for(o=1;o<r;o++)if(N=N.next=new K,o==y)var M=N;N.next=R;var Q=null,u=null;X=I=0;var q=C[m],D=Z[m];for(z=0;z<h;z++){for(b=S=v=g=F=V=w=P=0,_=y*(i=t[I]),l=y*(p=t[I+1]),e=y*(d=t[I+2]),n=y*(x=t[I+3]),F+=Y*i,V+=Y*p,w+=Y*d,P+=Y*x,N=R,o=0;o<y;o++)N.r=i,N.g=p,N.b=d,N.a=x,N=N.next;for(o=1;o<y;o++)c=I+((G<o?G:o)<<2),F+=(N.r=i=t[c])*(W=y-o),V+=(N.g=p=t[c+1])*W,w+=(N.b=d=t[c+2])*W,P+=(N.a=x=t[c+3])*W,b+=i,S+=p,v+=d,g+=x,N=N.next;for(Q=R,u=M,s=0;s<H;s++)t[I]=F*q>>D,t[I+1]=V*q>>D,t[I+2]=w*q>>D,t[I+3]=P*q>>D,F-=_,V-=l,w-=e,P-=n,_-=Q.r,l-=Q.g,e-=Q.b,n-=Q.a,c=X+((c=s+m+1)<G?c:G)<<2,b+=Q.r=t[c],S+=Q.g=t[c+1],v+=Q.b=t[c+2],g+=Q.a=t[c+3],F+=b,V+=S,w+=v,P+=g,Q=Q.next,_+=i=u.r,l+=p=u.g,e+=d=u.b,n+=x=u.a,b-=i,S-=p,v-=d,g-=x,u=u.next,I+=4;X+=H}for(s=0;s<H;s++){for(S=v=g=b=V=w=P=F=0,I=s<<2,_=y*(i=t[I]),l=y*(p=t[I+1]),e=y*(d=t[I+2]),n=y*(x=t[I+3]),F+=Y*i,V+=Y*p,w+=Y*d,P+=Y*x,N=R,o=0;o<y;o++)N.r=i,N.g=p,N.b=d,N.a=x,N=N.next;for(U=H,o=1;o<=m;o++)I=U+s<<2,F+=(N.r=i=t[I])*(W=y-o),V+=(N.g=p=t[I+1])*W,w+=(N.b=d=t[I+2])*W,P+=(N.a=x=t[I+3])*W,b+=i,S+=p,v+=d,g+=x,N=N.next,o<f&&(U+=H);for(I=s,Q=R,u=M,z=0;z<h;z++)c=I<<2,t[c]=F*q>>D,t[c+1]=V*q>>D,t[c+2]=w*q>>D,t[c+3]=P*q>>D,F-=_,V-=l,w-=e,P-=n,_-=Q.r,l-=Q.g,e-=Q.b,n-=Q.a,c=s+((c=z+y)<f?c:f)*H<<2,F+=b+=Q.r=t[c],V+=S+=Q.g=t[c+1],w+=v+=Q.b=t[c+2],P+=g+=Q.a=t[c+3],Q=Q.next,_+=i=u.r,l+=p=u.g,e+=d=u.b,n+=x=u.a,b-=i,S-=p,v-=d,g-=x,u=u.next,I+=H}j(J),k.putImageData(J,E,$)}}function H(B,a,j,E,$,H){if(!(isNaN(H)||H<1)){H|=0;var h,m=document.getElementById(B),J=m.getContext("2d");try{try{h=J.getImageData(a,j,E,$)}catch(B){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),h=J.getImageData(a,j,E,$)}catch(B){throw alert("Cannot access local image"),new Error("unable to access local image data: "+B)}}}catch(B){throw alert("Cannot access image"),new Error("unable to access image data: "+B)}var O,k,s,z,o,c,U,I,X,F,V,w,P,_,l,e,n,b,S,v,g=h.data,i=H+H+1,p=E-1,d=$-1,x=H+1,W=x*(x+1)/2,t=new K,r=t;for(s=1;s<i;s++)if(r=r.next=new K,s==x)var G=r;r.next=t;var f=null,y=null;U=c=0;var Y=C[H],R=Z[H];for(k=0;k<$;k++){for(_=l=e=I=X=F=0,V=x*(n=g[c]),w=x*(b=g[c+1]),P=x*(S=g[c+2]),I+=W*n,X+=W*b,F+=W*S,r=t,s=0;s<x;s++)r.r=n,r.g=b,r.b=S,r=r.next;for(s=1;s<x;s++)z=c+((p<s?p:s)<<2),I+=(r.r=n=g[z])*(v=x-s),X+=(r.g=b=g[z+1])*v,F+=(r.b=S=g[z+2])*v,_+=n,l+=b,e+=S,r=r.next;for(f=t,y=G,O=0;O<E;O++)g[c]=I*Y>>R,g[c+1]=X*Y>>R,g[c+2]=F*Y>>R,I-=V,X-=w,F-=P,V-=f.r,w-=f.g,P-=f.b,z=U+((z=O+H+1)<p?z:p)<<2,_+=f.r=g[z],l+=f.g=g[z+1],e+=f.b=g[z+2],I+=_,X+=l,F+=e,f=f.next,V+=n=y.r,w+=b=y.g,P+=S=y.b,_-=n,l-=b,e-=S,y=y.next,c+=4;U+=E}for(O=0;O<E;O++){for(l=e=_=X=F=I=0,c=O<<2,V=x*(n=g[c]),w=x*(b=g[c+1]),P=x*(S=g[c+2]),I+=W*n,X+=W*b,F+=W*S,r=t,s=0;s<x;s++)r.r=n,r.g=b,r.b=S,r=r.next;for(o=E,s=1;s<=H;s++)c=o+O<<2,I+=(r.r=n=g[c])*(v=x-s),X+=(r.g=b=g[c+1])*v,F+=(r.b=S=g[c+2])*v,_+=n,l+=b,e+=S,r=r.next,s<d&&(o+=E);for(c=O,f=t,y=G,k=0;k<$;k++)z=c<<2,g[z]=I*Y>>R,g[z+1]=X*Y>>R,g[z+2]=F*Y>>R,I-=V,X-=w,F-=P,V-=f.r,w-=f.g,P-=f.b,z=O+((z=k+x)<d?z:d)*E<<2,I+=_+=f.r=g[z],X+=l+=f.g=g[z+1],F+=e+=f.b=g[z+2],f=f.next,V+=n=y.r,w+=b=y.g,P+=S=y.b,_-=n,l-=b,e-=S,y=y.next,c+=E}J.putImageData(h,a,j)}}function K(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var C=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Z=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],h={
image:E,canvasRGBA:$,canvasRGB:H};B.stackBlur=h}("undefined"!=typeof B?B:this),function(B,a){B.canvg=a(B.RGBColor,B.stackBlur)}("undefined"!=typeof B?B:this,function(a,j){function E(B){var a=[0,0,0],j=function(j,E){var $=B.match(j);null!=$&&(a[E]+=$.length,B=B.replace(j," "))};return B=B.replace(/:not\(([^\)]*)\)/g,"     $1 "),B=B.replace(/{[\s\S]*/gm," "),j(h,1),j(m,0),j(J,1),j(O,2),j(k,1),j(s,1),B=B.replace(/[\*\s\+>~]/g," "),B=B.replace(/[#\.]/g," "),j(z,2),a.join("")}function K($){var K={opts:$};K.FRAMERATE=30,K.MAX_VIRTUAL_PIXELS=3e4,K.log=function(B){},1==K.opts.log&&"undefined"!=typeof console&&(K.log=function(B){console.log(B)}),K.init=function(B){var a=0;K.UniqueId=function(){return a++,"canvg"+a},K.Definitions={},K.Styles={},K.StylesSpecificity={},K.Animations=[],K.Images=[],K.ctx=B,K.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(B,a){this.viewPorts.push({width:B,height:a})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){var B,a=this.Current();return a&&(B=a.width)?B:100},this.height=function(){var B,a=this.Current();return a&&(B=a.height)?B:100},this.ComputeSize=function(B){return null!=B&&"number"==typeof B?B:"x"==B?this.width():"y"==B?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},K.init(),K.ImagesLoaded=function(){for(var B=0;B<K.Images.length;B++)if(!K.Images[B].loaded)return!1;return!0},K.trim=function(B){return B.replace(/^\s+|\s+$/g,"")},K.compressSpaces=function(B){return B.replace(/[\s\r\t\n]+/gm," ")},K.ajax=function(B){B=H.Default.beforeLoadURL(B);var a=new H.Request,j={};return j.url=encodeURI(B),j.sync=!0,a.send(j),a.getResponseText()},K.parseXml=function(a){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var j=new Windows.Data.Xml.Dom.XmlDocument,E=new Windows.Data.Xml.Dom.XmlLoadSettings;return E.prohibitDtd=!1,j.loadXml(a,E),j}if(B.DOMParser){var $=new DOMParser;return $.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var j=new ActiveXObject("Microsoft.XMLDOM");return j.async="false",j.loadXML(a),j},K.Property=function(B,a){this.name=B,this.value=a},K.Property.prototype.getValue=function(){return this.value},K.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},K.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var B=parseFloat(this.value);return(this.value+"").match(/%$/)&&(B/=100),B},K.Property.prototype.valueOrDefault=function(B){return this.hasValue()?this.value:B},K.Property.prototype.numValueOrDefault=function(B){return this.hasValue()?this.numValue():B},K.Property.prototype.addOpacity=function(B){var j=this.value;if(null!=B.value&&""!=B.value&&"string"==typeof this.value){var E=new a(this.value);E.ok&&(j="rgba("+E.r+", "+E.g+", "+E.b+", "+B.numValue()+")")}return new K.Property(this.name,j)},K.Property.prototype.getDefinition=function(){var B=this.value.match(/#([^\)'"]+)/);return B&&(B=B[1]),B||(B=this.value),K.Definitions[B]},K.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},K.Property.prototype.getFillStyleDefinition=function(B,a){var j=this.getDefinition();if(null!=j&&j.createGradient)return j.createGradient(K.ctx,B,a);if(null!=j&&j.createPattern){if(j.getHrefAttribute().hasValue()){var E=j.attribute("patternTransform");j=j.getHrefAttribute().getDefinition(),E.hasValue()&&(j.attribute("patternTransform",!0).value=E.value)}return j.createPattern(K.ctx,B)}return null},K.Property.prototype.getDPI=function(B){return 96},K.Property.prototype.getEM=function(B){var a=12,j=new K.Property("fontSize",K.Font.Parse(K.ctx.font).fontSize);return j.hasValue()&&(a=j.toPixels(B)),a},K.Property.prototype.getUnits=function(){var B=this.value+"";return B.replace(/[0-9\.\-]/g,"")},K.Property.prototype.toPixels=function(B,a){if(!this.hasValue())return 0;var j=this.value+"";if(j.match(/em$/))return this.numValue()*this.getEM(B);if(j.match(/ex$/))return this.numValue()*this.getEM(B)/2;if(j.match(/px$/))return this.numValue();if(j.match(/pt$/))return this.numValue()*this.getDPI(B)*(1/72);if(j.match(/pc$/))return 15*this.numValue();if(j.match(/cm$/))return this.numValue()*this.getDPI(B)/2.54;if(j.match(/mm$/))return this.numValue()*this.getDPI(B)/25.4;if(j.match(/in$/))return this.numValue()*this.getDPI(B);if(j.match(/%$/))return this.numValue()*K.ViewPort.ComputeSize(B);var E=this.numValue();return a&&E<1?E*K.ViewPort.ComputeSize(B):E},K.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var B=this.value+"";return B.match(/s$/)?1e3*this.numValue():B.match(/ms$/)?this.numValue():this.numValue()},K.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var B=this.value+"";return B.match(/deg$/)?this.numValue()*(Math.PI/180):B.match(/grad$/)?this.numValue()*(Math.PI/200):B.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)};var Z={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};return K.Property.prototype.toTextBaseline=function(){return this.hasValue()?Z[this.value]:null},K.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(B,a,j,E,$,H){var C=null!=H?this.Parse(H):this.CreateFont("","","","","",K.ctx.font);return{fontFamily:$||C.fontFamily,fontSize:E||C.fontSize,fontStyle:B||C.fontStyle,fontWeight:j||C.fontWeight,fontVariant:a||C.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var B=this;this.Parse=function(a){for(var j={},E=K.trim(K.compressSpaces(a||"")).split(" "),$={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},H="",C=0;C<E.length;C++)$.fontStyle||B.Styles.indexOf(E[C])==-1?$.fontVariant||B.Variants.indexOf(E[C])==-1?$.fontWeight||B.Weights.indexOf(E[C])==-1?$.fontSize?"inherit"!=E[C]&&(H+=E[C]):("inherit"!=E[C]&&(j.fontSize=E[C].split("/")[0]),$.fontStyle=$.fontVariant=$.fontWeight=$.fontSize=!0):("inherit"!=E[C]&&(j.fontWeight=E[C]),$.fontStyle=$.fontVariant=$.fontWeight=!0):("inherit"!=E[C]&&(j.fontVariant=E[C]),$.fontStyle=$.fontVariant=!0):("inherit"!=E[C]&&(j.fontStyle=E[C]),$.fontStyle=!0);return""!=H&&(j.fontFamily=H),j}},K.ToNumberArray=function(B){for(var a=K.trim(K.compressSpaces((B||"").replace(/,/g," "))).split(" "),j=0;j<a.length;j++)a[j]=parseFloat(a[j]);return a},K.Point=function(B,a){this.x=B,this.y=a},K.Point.prototype.angleTo=function(B){return Math.atan2(B.y-this.y,B.x-this.x)},K.Point.prototype.applyTransform=function(B){var a=this.x*B[0]+this.y*B[2]+B[4],j=this.x*B[1]+this.y*B[3]+B[5];this.x=a,this.y=j},K.CreatePoint=function(B){var a=K.ToNumberArray(B);return new K.Point(a[0],a[1])},K.CreatePath=function(B){for(var a=K.ToNumberArray(B),j=[],E=0;E<a.length;E+=2)j.push(new K.Point(a[E],a[E+1]));return j},K.BoundingBox=function(B,a,j,E){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(B,a){null!=B&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=B,this.x2=B),B<this.x1&&(this.x1=B),B>this.x2&&(this.x2=B)),null!=a&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=a,this.y2=a),a<this.y1&&(this.y1=a),a>this.y2&&(this.y2=a))},this.addX=function(B){this.addPoint(B,null)},this.addY=function(B){this.addPoint(null,B)},this.addBoundingBox=function(B){this.addPoint(B.x1,B.y1),this.addPoint(B.x2,B.y2)},this.addQuadraticCurve=function(B,a,j,E,$,H){var K=B+2/3*(j-B),C=a+2/3*(E-a),Z=K+1/3*($-B),h=C+1/3*(H-a);this.addBezierCurve(B,a,K,Z,C,h,$,H)},this.addBezierCurve=function(B,a,j,E,$,H,K,C){var Z=[B,a],h=[j,E],m=[$,H],J=[K,C];this.addPoint(Z[0],Z[1]),this.addPoint(J[0],J[1]);for(var O=0;O<=1;O++){var k=function(B){return Math.pow(1-B,3)*Z[O]+3*Math.pow(1-B,2)*B*h[O]+3*(1-B)*Math.pow(B,2)*m[O]+Math.pow(B,3)*J[O]},s=6*Z[O]-12*h[O]+6*m[O],z=-3*Z[O]+9*h[O]-9*m[O]+3*J[O],o=3*h[O]-3*Z[O];if(0!=z){var c=Math.pow(s,2)-4*o*z;if(!(c<0)){var U=(-s+Math.sqrt(c))/(2*z);0<U&&U<1&&(0==O&&this.addX(k(U)),1==O&&this.addY(k(U)));var I=(-s-Math.sqrt(c))/(2*z);0<I&&I<1&&(0==O&&this.addX(k(I)),1==O&&this.addY(k(I)))}}else{if(0==s)continue;var X=-o/s;0<X&&X<1&&(0==O&&this.addX(k(X)),1==O&&this.addY(k(X)))}}},this.isPointInBox=function(B,a){return this.x1<=B&&B<=this.x2&&this.y1<=a&&a<=this.y2},this.addPoint(B,a),this.addPoint(j,E)},K.Transform=function(B){var a=this;this.Type={},this.Type.translate=function(B){this.p=K.CreatePoint(B),this.getMatrix=function(){return[1,0,0,1,this.p.x||0,this.p.y||0]},this.apply=function(B){B.translate(this.p.x||0,this.p.y||0)},this.unapply=function(B){B.translate(-1*this.p.x||0,-1*this.p.y||0)},this.applyToPoint=function(B){B.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(B){var a=K.ToNumberArray(B);this.angle=new K.Property("angle",a[0]),this.cx=a[1]||0,this.cy=a[2]||0,this.apply=function(B){B.translate(this.cx,this.cy),B.rotate(this.angle.toRadians()),B.translate(-this.cx,-this.cy)},this.getMatrix=function(){var B=this.angle.toRadians(),a=Math.sin(B),j=Math.cos(B),E=this.cx,$=this.cy;return[j,a,-a,j,j*-E+a*$+E,a*-E-j*$+$]},this.unapply=function(B){B.translate(this.cx,this.cy),B.rotate(-1*this.angle.toRadians()),B.translate(-this.cx,-this.cy)},this.applyToPoint=function(B){var a=this.angle.toRadians();B.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),B.applyTransform([Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a),0,0]),B.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(B){this.p=K.CreatePoint(B),this.getMatrix=function(){return[this.p.x||1,0,0,this.p.y||this.p.x||1,0,0]},this.apply=function(B){B.scale(this.p.x||1,this.p.y||this.p.x||1)},this.unapply=function(B){B.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)},this.applyToPoint=function(B){B.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(B){this.m=K.ToNumberArray(B),this.getMatrix=function(){return this.m},this.apply=function(B){B.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.unapply=function(B){var a=this.m[0],j=this.m[2],E=this.m[4],$=this.m[1],H=this.m[3],K=this.m[5],C=0,Z=0,h=1,m=1/(a*(H*h-K*Z)-j*($*h-K*C)+E*($*Z-H*C));B.transform(m*(H*h-K*Z),m*(K*C-$*h),m*(E*Z-j*h),m*(a*h-E*C),m*(j*K-E*H),m*(E*$-a*K))},this.applyToPoint=function(B){B.applyTransform(this.m)}},this.Type.SkewBase=function(B){this.base=a.Type.matrix,this.base(B),this.angle=new K.Property("angle",B)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(B){this.base=a.Type.SkewBase,this.base(B),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(B){this.base=a.Type.SkewBase,this.base(B),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.getMatrix=function(){for(var B=1,a=0,j=0,E=1,$=0,H=0,K=0;K<this.transforms.length;K++){var C=this.transforms[K].getMatrix(),Z=B,h=a,m=j,J=E,O=$,k=H;B=Z*C[0]+m*C[1],a=h*C[0]+J*C[1],j=Z*C[2]+m*C[3],E=h*C[2]+J*C[3],$=Z*C[4]+m*C[5]+O,H=h*C[4]+J*C[5]+k}return[B,a,j,E,$,H]},this.apply=function(B){for(var a=0;a<this.transforms.length;a++)this.transforms[a].apply(B)},this.unapply=function(B){for(var a=this.transforms.length-1;a>=0;a--)this.transforms[a].unapply(B)},this.applyToPoint=function(B){for(var a=0;a<this.transforms.length;a++)this.transforms[a].applyToPoint(B)};for(var j=K.trim(K.compressSpaces(B)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),E=0;E<j.length;E++){var $=K.trim(j[E].split("(")[0]),H=j[E].split("(")[1].replace(")",""),C=this.Type[$];if("undefined"!=typeof C){var Z=new C(H);Z.type=$,this.transforms.push(Z)}}},K.AspectRatio=function(B,a,j,E,$,H,C,Z,h,m){a=K.compressSpaces(a),a=a.replace(/^defer\s/,"");var J=a.split(" ")[0]||"xMidYMid",O=a.split(" ")[1]||"meet",k=j/E,s=$/H,z=Math.min(k,s),o=Math.max(k,s);"meet"==O&&(E*=z,H*=z),"slice"==O&&(E*=o,H*=o),h=new K.Property("refX",h),m=new K.Property("refY",m),h.hasValue()&&m.hasValue()?B.translate(-z*h.toPixels("x"),-z*m.toPixels("y")):(J.match(/^xMid/)&&("meet"==O&&z==s||"slice"==O&&o==s)&&B.translate(j/2-E/2,0),J.match(/YMid$/)&&("meet"==O&&z==k||"slice"==O&&o==k)&&B.translate(0,$/2-H/2),J.match(/^xMax/)&&("meet"==O&&z==s||"slice"==O&&o==s)&&B.translate(j-E,0),J.match(/YMax$/)&&("meet"==O&&z==k||"slice"==O&&o==k)&&B.translate(0,$-H)),"none"==J?B.scale(k,s):"meet"==O?B.scale(z,z):"slice"==O&&B.scale(o,o),B.translate(null==C?0:-C,null==Z?0:-Z)},K.Element={},K.EmptyProperty=new K.Property("EMPTY",""),K.Element.ElementBase=function(B){this.attributes={},this.styles={},this.stylesSpecificity={},this.children=[],this.attribute=function(B,a){var j=this.attributes[B];return null!=j?j:(1==a&&(j=new K.Property(B,""),this.attributes[B]=j),j||K.EmptyProperty)},this.getHrefAttribute=function(){for(var B in this.attributes)if("href"==B||B.match(/:href$/))return this.attributes[B];return K.EmptyProperty},this.style=function(B,a,j){var E=this.styles[B];if(null!=E)return E;var $=this.attribute(B);if(null!=$&&$.hasValue())return this.styles[B]=$,$;if(1!=j){var H=this.parent;if(null!=H){var C=H.style(B);if(null!=C&&C.hasValue())return C}}return 1==a&&(E=new K.Property(B,""),this.styles[B]=E),E||K.EmptyProperty},this.render=function(B){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){if(B.save(),this.style("mask").hasValue()){var a=this.style("mask").getDefinition();null!=a&&a.apply(B,this)}else this.setContext(B),this.renderChildren(B),this.clearContext(B);B.restore()}},this.setContext=function(B){},this.clearContext=function(B){},this.renderChildren=function(B){for(var a=0;a<this.children.length;a++)this.children[a].render(B)},this.addChild=function(B,a){var j=B;a&&(j=K.CreateElement(B)),j.parent=this,"title"!=j.type&&this.children.push(j)},this.addStylesFromStyleDefinition=function(){for(var a in K.Styles)if("@"!=a[0]&&C(B,a)){var j=K.Styles[a],E=K.StylesSpecificity[a];if(null!=j)for(var $ in j){var H=this.stylesSpecificity[$];"undefined"==typeof H&&(H="000"),E>H&&(this.styles[$]=j[$],this.stylesSpecificity[$]=E)}}};var a=new RegExp("^[A-Z-]+$"),j=function(B){return a.test(B)?B.toLowerCase():B};if(null!=B&&1==B.nodeType){for(var E=0;E<B.attributes.length;E++){var $=B.attributes[E],H=j($.nodeName);this.attributes[H]=new K.Property(H,$.value)}if(this.addStylesFromStyleDefinition(),this.attribute("style").hasValue())for(var Z=this.attribute("style").value.split(";"),E=0;E<Z.length;E++)if(""!=K.trim(Z[E])){var h=Z[E].split(":"),m=K.trim(h[0]),J=K.trim(h[1]);this.styles[m]=new K.Property(m,J)}this.attribute("id").hasValue()&&null==K.Definitions[this.attribute("id").value]&&(K.Definitions[this.attribute("id").value]=this);for(var E=0;E<B.childNodes.length;E++){var O=B.childNodes[E];if(1==O.nodeType&&this.addChild(O,!0),this.captureTextNodes&&(3==O.nodeType||4==O.nodeType)){var k=O.value||O.text||O.textContent||"";""!=K.compressSpaces(k)&&this.addChild(new K.Element.tspan(O),!1)}}}},K.Element.RenderedElementBase=function(B){this.base=K.Element.ElementBase,this.base(B),this.setContext=function(B){if(this.style("fill").isUrlDefinition()){var a=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=a&&(B.fillStyle=a)}else if(this.style("fill").hasValue()){var j=this.style("fill");"currentColor"==j.value&&(j.value=this.style("color").value),"inherit"!=j.value&&(B.fillStyle="none"==j.value?"rgba(0,0,0,0)":j.value)}if(this.style("fill-opacity").hasValue()){var j=new K.Property("fill",B.fillStyle);j=j.addOpacity(this.style("fill-opacity")),B.fillStyle=j.value}if(this.style("stroke").isUrlDefinition()){var a=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=a&&(B.strokeStyle=a)}else if(this.style("stroke").hasValue()){var E=this.style("stroke");"currentColor"==E.value&&(E.value=this.style("color").value),"inherit"!=E.value&&(B.strokeStyle="none"==E.value?"rgba(0,0,0,0)":E.value)}if(this.style("stroke-opacity").hasValue()){var E=new K.Property("stroke",B.strokeStyle);E=E.addOpacity(this.style("stroke-opacity")),B.strokeStyle=E.value}if(this.style("stroke-width").hasValue()){var $=this.style("stroke-width").toPixels();B.lineWidth=0==$?.001:$}if(this.style("stroke-linecap").hasValue()&&(B.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(B.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(B.miterLimit=this.style("stroke-miterlimit").value),this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value){var H=K.ToNumberArray(this.style("stroke-dasharray").value);"undefined"!=typeof B.setLineDash?B.setLineDash(H):"undefined"!=typeof B.webkitLineDash?B.webkitLineDash=H:"undefined"==typeof B.mozDash||1==H.length&&0==H[0]||(B.mozDash=H);var C=this.style("stroke-dashoffset").numValueOrDefault(1);"undefined"!=typeof B.lineDashOffset?B.lineDashOffset=C:"undefined"!=typeof B.webkitLineDashOffset?B.webkitLineDashOffset=C:"undefined"!=typeof B.mozDashOffset&&(B.mozDashOffset=C)}if("undefined"!=typeof B.font&&(B.font=K.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.style("transform",!1,!0).hasValue()){var Z=new K.Transform(this.style("transform",!1,!0).value);Z.apply(B)}if(this.style("clip-path",!1,!0).hasValue()){var h=this.style("clip-path",!1,!0).getDefinition();null!=h&&h.apply(B)}this.style("opacity").hasValue()&&(B.globalAlpha=this.style("opacity").numValue())}},K.Element.RenderedElementBase.prototype=new K.Element.ElementBase,K.Element.PathElementBase=function(B){this.base=K.Element.RenderedElementBase,this.base(B),this.path=function(B){return null!=B&&B.beginPath(),new K.BoundingBox},this.renderChildren=function(B){this.path(B),K.Mouse.checkPath(this,B),""!=B.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?B.fill(this.style("fill-rule").value):B.fill()),""!=B.strokeStyle&&B.stroke();var a=this.getMarkers();if(null!=a){if(this.style("marker-start").isUrlDefinition()){var j=this.style("marker-start").getDefinition();j.render(B,a[0][0],a[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var j=this.style("marker-mid").getDefinition(),E=1;E<a.length-1;E++)j.render(B,a[E][0],a[E][1]);if(this.style("marker-end").isUrlDefinition()){var j=this.style("marker-end").getDefinition();j.render(B,a[a.length-1][0],a[a.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},K.Element.PathElementBase.prototype=new K.Element.RenderedElementBase,K.Element.svg=function(a){this.base=K.Element.RenderedElementBase,this.base(a),this.baseClearContext=this.clearContext,this.clearContext=function(B){this.baseClearContext(B),K.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,"undefined"!=typeof a.font&&"undefined"!=typeof B.getComputedStyle&&(a.font=B.getComputedStyle(a.canvas).getPropertyValue("font")),this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var j=K.ViewPort.width(),E=K.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){j=this.attribute("width").toPixels("x"),E=this.attribute("height").toPixels("y");var $=0,H=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&($=-this.attribute("refX").toPixels("x"),H=-this.attribute("refY").toPixels("y")),"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(a.beginPath(),a.moveTo($,H),a.lineTo(j,H),a.lineTo(j,E),a.lineTo($,E),a.closePath(),a.clip())}if(K.ViewPort.SetCurrent(j,E),this.attribute("viewBox").hasValue()){var C=K.ToNumberArray(this.attribute("viewBox").value),Z=C[0],h=C[1];j=C[2],E=C[3],K.AspectRatio(a,this.attribute("preserveAspectRatio").value,K.ViewPort.width(),j,K.ViewPort.height(),E,Z,h,this.attribute("refX").value,this.attribute("refY").value),K.ViewPort.RemoveCurrent(),K.ViewPort.SetCurrent(C[2],C[3])}}},K.Element.svg.prototype=new K.Element.RenderedElementBase,K.Element.rect=function(B){this.base=K.Element.PathElementBase,this.base(B),this.path=function(B){var a=this.attribute("x").toPixels("x"),j=this.attribute("y").toPixels("y"),E=this.attribute("width").toPixels("x"),$=this.attribute("height").toPixels("y"),H=this.attribute("rx").toPixels("x"),C=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(C=H),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(H=C),H=Math.min(H,E/2),C=Math.min(C,$/2),null!=B&&(B.beginPath(),B.moveTo(a+H,j),B.lineTo(a+E-H,j),B.quadraticCurveTo(a+E,j,a+E,j+C),B.lineTo(a+E,j+$-C),B.quadraticCurveTo(a+E,j+$,a+E-H,j+$),B.lineTo(a+H,j+$),B.quadraticCurveTo(a,j+$,a,j+$-C),B.lineTo(a,j+C),B.quadraticCurveTo(a,j,a+H,j),B.closePath()),new K.BoundingBox(a,j,a+E,j+$)}},K.Element.rect.prototype=new K.Element.PathElementBase,K.Element.circle=function(B){this.base=K.Element.PathElementBase,this.base(B),this.path=function(B){var a=this.attribute("cx").toPixels("x"),j=this.attribute("cy").toPixels("y"),E=this.attribute("r").toPixels();return null!=B&&(B.beginPath(),B.arc(a,j,E,0,2*Math.PI,!0),B.closePath()),new K.BoundingBox(a-E,j-E,a+E,j+E)}},K.Element.circle.prototype=new K.Element.PathElementBase,K.Element.ellipse=function(B){this.base=K.Element.PathElementBase,this.base(B),this.path=function(B){var a=4*((Math.sqrt(2)-1)/3),j=this.attribute("rx").toPixels("x"),E=this.attribute("ry").toPixels("y"),$=this.attribute("cx").toPixels("x"),H=this.attribute("cy").toPixels("y");return null!=B&&(B.beginPath(),B.moveTo($,H-E),B.bezierCurveTo($+a*j,H-E,$+j,H-a*E,$+j,H),B.bezierCurveTo($+j,H+a*E,$+a*j,H+E,$,H+E),B.bezierCurveTo($-a*j,H+E,$-j,H+a*E,$-j,H),B.bezierCurveTo($-j,H-a*E,$-a*j,H-E,$,H-E),B.closePath()),new K.BoundingBox($-j,H-E,$+j,H+E)}},K.Element.ellipse.prototype=new K.Element.PathElementBase,K.Element.line=function(B){this.base=K.Element.PathElementBase,this.base(B),this.getPoints=function(){return[new K.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new K.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(B){var a=this.getPoints();return null!=B&&(B.beginPath(),B.moveTo(a[0].x,a[0].y),B.lineTo(a[1].x,a[1].y)),new K.BoundingBox(a[0].x,a[0].y,a[1].x,a[1].y)},this.getMarkers=function(){var B=this.getPoints(),a=B[0].angleTo(B[1]);return[[B[0],a],[B[1],a]]}},K.Element.line.prototype=new K.Element.PathElementBase,K.Element.polyline=function(B){this.base=K.Element.PathElementBase,this.base(B),this.points=K.CreatePath(this.attribute("points").value),this.path=function(B){var a=new K.BoundingBox(this.points[0].x,this.points[0].y);null!=B&&(B.beginPath(),B.moveTo(this.points[0].x,this.points[0].y));for(var j=1;j<this.points.length;j++)a.addPoint(this.points[j].x,this.points[j].y),null!=B&&B.lineTo(this.points[j].x,this.points[j].y);return a},this.getMarkers=function(){for(var B=[],a=0;a<this.points.length-1;a++)B.push([this.points[a],this.points[a].angleTo(this.points[a+1])]);return B.length>0&&B.push([this.points[this.points.length-1],B[B.length-1][1]]),B}},K.Element.polyline.prototype=new K.Element.PathElementBase,K.Element.polygon=function(B){this.base=K.Element.polyline,this.base(B),this.basePath=this.path,this.path=function(B){var a=this.basePath(B);return null!=B&&(B.lineTo(this.points[0].x,this.points[0].y),B.closePath()),a}},K.Element.polygon.prototype=new K.Element.polyline,K.Element.path=function(B){this.base=K.Element.PathElementBase,this.base(B);var a=this.attribute("d").value;a=a.replace(/,/gm," ");for(var j=0;j<2;j++)a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),a=a.replace(/([0-9])([+\-])/gm,"$1 $2");for(var j=0;j<2;j++)a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),a=K.compressSpaces(a),a=K.trim(a),this.PathParser=new function(B){this.tokens=B.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new K.Point(0,0),this.control=new K.Point(0,0),this.current=new K.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var B=new K.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(B)},this.getAsControlPoint=function(){var B=this.getPoint();return this.control=B,B},this.getAsCurrentPoint=function(){var B=this.getPoint();return this.current=B,B},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase())return this.current;var B=new K.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return B},this.makeAbsolute=function(B){return this.isRelativeCommand()&&(B.x+=this.current.x,B.y+=this.current.y),B},this.addMarker=function(B,a,j){null!=j&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(j)),this.addMarkerAngle(B,null==a?null:a.angleTo(B))},this.addMarkerAngle=function(B,a){this.points.push(B),this.angles.push(a)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var B=0;B<this.angles.length;B++)if(null==this.angles[B])for(var a=B+1;a<this.angles.length;a++)if(null!=this.angles[a]){this.angles[B]=this.angles[a];break}return this.angles}}(a),this.path=function(B){var a=this.PathParser;a.reset();var j=new K.BoundingBox;for(null!=B&&B.beginPath();!a.isEnd();)switch(a.nextCommand(),a.command){case"M":case"m":var E=a.getAsCurrentPoint();for(a.addMarker(E),j.addPoint(E.x,E.y),null!=B&&B.moveTo(E.x,E.y),a.start=a.current;!a.isCommandOrEnd();){var E=a.getAsCurrentPoint();a.addMarker(E,a.start),j.addPoint(E.x,E.y),null!=B&&B.lineTo(E.x,E.y)}break;case"L":case"l":for(;!a.isCommandOrEnd();){var $=a.current,E=a.getAsCurrentPoint();a.addMarker(E,$),j.addPoint(E.x,E.y),null!=B&&B.lineTo(E.x,E.y)}break;case"H":case"h":for(;!a.isCommandOrEnd();){var H=new K.Point((a.isRelativeCommand()?a.current.x:0)+a.getScalar(),a.current.y);a.addMarker(H,a.current),a.current=H,j.addPoint(a.current.x,a.current.y),null!=B&&B.lineTo(a.current.x,a.current.y)}break;case"V":case"v":for(;!a.isCommandOrEnd();){var H=new K.Point(a.current.x,(a.isRelativeCommand()?a.current.y:0)+a.getScalar());a.addMarker(H,a.current),a.current=H,j.addPoint(a.current.x,a.current.y),null!=B&&B.lineTo(a.current.x,a.current.y)}break;case"C":case"c":for(;!a.isCommandOrEnd();){var C=a.current,Z=a.getPoint(),h=a.getAsControlPoint(),m=a.getAsCurrentPoint();a.addMarker(m,h,Z),j.addBezierCurve(C.x,C.y,Z.x,Z.y,h.x,h.y,m.x,m.y),null!=B&&B.bezierCurveTo(Z.x,Z.y,h.x,h.y,m.x,m.y)}break;case"S":case"s":for(;!a.isCommandOrEnd();){var C=a.current,Z=a.getReflectedControlPoint(),h=a.getAsControlPoint(),m=a.getAsCurrentPoint();a.addMarker(m,h,Z),j.addBezierCurve(C.x,C.y,Z.x,Z.y,h.x,h.y,m.x,m.y),null!=B&&B.bezierCurveTo(Z.x,Z.y,h.x,h.y,m.x,m.y),a.previousCommand=a.command}break;case"Q":case"q":for(;!a.isCommandOrEnd();){var C=a.current,h=a.getAsControlPoint(),m=a.getAsCurrentPoint();a.addMarker(m,h,h),j.addQuadraticCurve(C.x,C.y,h.x,h.y,m.x,m.y),null!=B&&B.quadraticCurveTo(h.x,h.y,m.x,m.y)}break;case"T":case"t":for(;!a.isCommandOrEnd();){var C=a.current,h=a.getReflectedControlPoint();a.control=h;var m=a.getAsCurrentPoint();a.addMarker(m,h,h),j.addQuadraticCurve(C.x,C.y,h.x,h.y,m.x,m.y),null!=B&&B.quadraticCurveTo(h.x,h.y,m.x,m.y),a.previousCommand=a.command}break;case"A":case"a":for(;!a.isCommandOrEnd();){var C=a.current,J=a.getScalar(),O=a.getScalar(),k=a.getScalar()*(Math.PI/180),s=a.getScalar(),z=a.getScalar(),m=a.getAsCurrentPoint(),o=new K.Point(Math.cos(k)*(C.x-m.x)/2+Math.sin(k)*(C.y-m.y)/2,-Math.sin(k)*(C.x-m.x)/2+Math.cos(k)*(C.y-m.y)/2),c=Math.pow(o.x,2)/Math.pow(J,2)+Math.pow(o.y,2)/Math.pow(O,2);c>1&&(J*=Math.sqrt(c),O*=Math.sqrt(c));var U=(s==z?-1:1)*Math.sqrt((Math.pow(J,2)*Math.pow(O,2)-Math.pow(J,2)*Math.pow(o.y,2)-Math.pow(O,2)*Math.pow(o.x,2))/(Math.pow(J,2)*Math.pow(o.y,2)+Math.pow(O,2)*Math.pow(o.x,2)));isNaN(U)&&(U=0);var I=new K.Point(U*J*o.y/O,U*-O*o.x/J),X=new K.Point((C.x+m.x)/2+Math.cos(k)*I.x-Math.sin(k)*I.y,(C.y+m.y)/2+Math.sin(k)*I.x+Math.cos(k)*I.y),F=function(B){return Math.sqrt(Math.pow(B[0],2)+Math.pow(B[1],2))},V=function(B,a){return(B[0]*a[0]+B[1]*a[1])/(F(B)*F(a))},w=function(B,a){return(B[0]*a[1]<B[1]*a[0]?-1:1)*Math.acos(V(B,a))},P=w([1,0],[(o.x-I.x)/J,(o.y-I.y)/O]),_=[(o.x-I.x)/J,(o.y-I.y)/O],l=[(-o.x-I.x)/J,(-o.y-I.y)/O],e=w(_,l);V(_,l)<=-1&&(e=Math.PI),V(_,l)>=1&&(e=0);var n=1-z?1:-1,b=P+n*(e/2),S=new K.Point(X.x+J*Math.cos(b),X.y+O*Math.sin(b));if(a.addMarkerAngle(S,b-n*Math.PI/2),a.addMarkerAngle(m,b-n*Math.PI),j.addPoint(m.x,m.y),null!=B){var V=J>O?J:O,v=J>O?1:J/O,g=J>O?O/J:1;B.translate(X.x,X.y),B.rotate(k),B.scale(v,g),B.arc(0,0,V,P,P+e,1-z),B.scale(1/v,1/g),B.rotate(-k),B.translate(-X.x,-X.y)}}break;case"Z":case"z":null!=B&&B.closePath(),a.current=a.start}return j},this.getMarkers=function(){for(var B=this.PathParser.getMarkerPoints(),a=this.PathParser.getMarkerAngles(),j=[],E=0;E<B.length;E++)j.push([B[E],a[E]]);return j}},K.Element.path.prototype=new K.Element.PathElementBase,K.Element.pattern=function(B){this.base=K.Element.ElementBase,this.base(B),this.createPattern=function(B,a){var j=this.attribute("width").toPixels("x",!0),E=this.attribute("height").toPixels("y",!0),$=new K.Element.svg;$.attributes.viewBox=new K.Property("viewBox",this.attribute("viewBox").value),$.attributes.width=new K.Property("width",j+"px"),$.attributes.height=new K.Property("height",E+"px"),$.attributes.transform=new K.Property("transform",this.attribute("patternTransform").value),$.children=this.children;var H=document.createElement("canvas");H.width=j,H.height=E;var C=H.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&C.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var Z=-1;Z<=1;Z++)for(var h=-1;h<=1;h++)C.save(),$.attributes.x=new K.Property("x",Z*H.width),$.attributes.y=new K.Property("y",h*H.height),$.render(C),C.restore();var m=B.createPattern(H,"repeat");return m}},K.Element.pattern.prototype=new K.Element.ElementBase,K.Element.marker=function(B){this.base=K.Element.ElementBase,this.base(B),this.baseRender=this.render,this.render=function(B,a,j){B.translate(a.x,a.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&B.rotate(j),
"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&B.scale(B.lineWidth,B.lineWidth),B.save();var E=new K.Element.svg;E.attributes.viewBox=new K.Property("viewBox",this.attribute("viewBox").value),E.attributes.refX=new K.Property("refX",this.attribute("refX").value),E.attributes.refY=new K.Property("refY",this.attribute("refY").value),E.attributes.width=new K.Property("width",this.attribute("markerWidth").value),E.attributes.height=new K.Property("height",this.attribute("markerHeight").value),E.attributes.fill=new K.Property("fill",this.attribute("fill").valueOrDefault("black")),E.attributes.stroke=new K.Property("stroke",this.attribute("stroke").valueOrDefault("none")),E.children=this.children,E.render(B),B.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&B.scale(1/B.lineWidth,1/B.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&B.rotate(-j),B.translate(-a.x,-a.y)}},K.Element.marker.prototype=new K.Element.ElementBase,K.Element.defs=function(B){this.base=K.Element.ElementBase,this.base(B),this.render=function(B){}},K.Element.defs.prototype=new K.Element.ElementBase,K.Element.GradientBase=function(B){this.base=K.Element.ElementBase,this.base(B),this.stops=[];for(var a=0;a<this.children.length;a++){var j=this.children[a];"stop"==j.type&&this.stops.push(j)}this.getGradient=function(){},this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")},this.attributesToInherit=["gradientUnits"],this.inheritStopContainer=function(B){for(var a=0;a<this.attributesToInherit.length;a++){var j=this.attributesToInherit[a];!this.attribute(j).hasValue()&&B.attribute(j).hasValue()&&(this.attribute(j,!0).value=B.attribute(j).value)}},this.createGradient=function(B,a,j){var E=this;this.getHrefAttribute().hasValue()&&(E=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(E));var $=function(B){if(j.hasValue()){var a=new K.Property("color",B);return a.addOpacity(j).value}return B},H=this.getGradient(B,a);if(null==H)return $(E.stops[E.stops.length-1].color);for(var C=0;C<E.stops.length;C++)H.addColorStop(E.stops[C].offset,$(E.stops[C].color));if(this.attribute("gradientTransform").hasValue()){var Z=K.ViewPort.viewPorts[0],h=new K.Element.rect;h.attributes.x=new K.Property("x",-K.MAX_VIRTUAL_PIXELS/3),h.attributes.y=new K.Property("y",-K.MAX_VIRTUAL_PIXELS/3),h.attributes.width=new K.Property("width",K.MAX_VIRTUAL_PIXELS),h.attributes.height=new K.Property("height",K.MAX_VIRTUAL_PIXELS);var m=new K.Element.g;m.attributes.transform=new K.Property("transform",this.attribute("gradientTransform").value),m.children=[h];var J=new K.Element.svg;J.attributes.x=new K.Property("x",0),J.attributes.y=new K.Property("y",0),J.attributes.width=new K.Property("width",Z.width),J.attributes.height=new K.Property("height",Z.height),J.children=[m];var O=document.createElement("canvas");O.width=Z.width,O.height=Z.height;var k=O.getContext("2d");k.fillStyle=H,J.render(k);var s=k.createPattern(O,"no-repeat");return s.gradient=H,s.gradientTransform=this.attribute("gradientTransform").value,s.trans=new K.Transform(this.attribute("gradientTransform").value).getMatrix(),s}return H}},K.Element.GradientBase.prototype=new K.Element.ElementBase,K.Element.linearGradient=function(B){this.base=K.Element.GradientBase,this.base(B),this.attributesToInherit.push("x1"),this.attributesToInherit.push("y1"),this.attributesToInherit.push("x2"),this.attributesToInherit.push("y2"),this.getGradient=function(B,a){var j="objectBoundingBox"==this.gradientUnits()?a.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var E="objectBoundingBox"==this.gradientUnits()?j.x()+j.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),$="objectBoundingBox"==this.gradientUnits()?j.y()+j.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),H="objectBoundingBox"==this.gradientUnits()?j.x()+j.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),K="objectBoundingBox"==this.gradientUnits()?j.y()+j.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return E==H&&$==K?null:B.createLinearGradient(E,$,H,K)}},K.Element.linearGradient.prototype=new K.Element.GradientBase,K.Element.radialGradient=function(B){this.base=K.Element.GradientBase,this.base(B),this.attributesToInherit.push("cx"),this.attributesToInherit.push("cy"),this.attributesToInherit.push("r"),this.attributesToInherit.push("fx"),this.attributesToInherit.push("fy"),this.getGradient=function(B,a){var j=a.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var E="objectBoundingBox"==this.gradientUnits()?j.x()+j.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),$="objectBoundingBox"==this.gradientUnits()?j.y()+j.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),H=E,K=$;this.attribute("fx").hasValue()&&(H="objectBoundingBox"==this.gradientUnits()?j.x()+j.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(K="objectBoundingBox"==this.gradientUnits()?j.y()+j.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var C="objectBoundingBox"==this.gradientUnits()?(j.width()+j.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return B.createRadialGradient(H,K,0,E,$,C)}},K.Element.radialGradient.prototype=new K.Element.GradientBase,K.Element.stop=function(B){this.base=K.Element.ElementBase,this.base(B),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var a=this.style("stop-color",!0);""===a.value&&(a.value="#000"),this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity"))),this.color=a.value},K.Element.stop.prototype=new K.Element.ElementBase,K.Element.AnimateBase=function(B){this.base=K.Element.ElementBase,this.base(B),K.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var B=this.attribute("attributeType").value,a=this.attribute("attributeName").value;return"CSS"==B?this.parent.style(a,!0):this.parent.attribute(a,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(B){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"!=this.attribute("fill").valueOrDefault("remove")||this.frozen){if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0}else this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=this.getProperty().value;return!1}this.duration=this.duration+B;var a=!1;if(this.begin<this.duration){var j=this.calcValue();if(this.attribute("type").hasValue()){var E=this.attribute("type").value;j=E+"("+j+")"}this.getProperty().value=j,a=!0}return a},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var B={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var a=B.progress*(this.values.value.length-1),j=Math.floor(a),E=Math.ceil(a);B.from=new K.Property("from",parseFloat(this.values.value[j])),B.to=new K.Property("to",parseFloat(this.values.value[E])),B.progress=(a-j)/(E-j)}else B.from=this.from,B.to=this.to;return B}},K.Element.AnimateBase.prototype=new K.Element.ElementBase,K.Element.animate=function(B){this.base=K.Element.AnimateBase,this.base(B),this.calcValue=function(){var B=this.progress(),a=B.from.numValue()+(B.to.numValue()-B.from.numValue())*B.progress;return a+this.initialUnits}},K.Element.animate.prototype=new K.Element.AnimateBase,K.Element.animateColor=function(B){this.base=K.Element.AnimateBase,this.base(B),this.calcValue=function(){var B=this.progress(),j=new a(B.from.value),E=new a(B.to.value);if(j.ok&&E.ok){var $=j.r+(E.r-j.r)*B.progress,H=j.g+(E.g-j.g)*B.progress,K=j.b+(E.b-j.b)*B.progress;return"rgb("+parseInt($,10)+","+parseInt(H,10)+","+parseInt(K,10)+")"}return this.attribute("from").value}},K.Element.animateColor.prototype=new K.Element.AnimateBase,K.Element.animateTransform=function(B){this.base=K.Element.AnimateBase,this.base(B),this.calcValue=function(){for(var B=this.progress(),a=K.ToNumberArray(B.from.value),j=K.ToNumberArray(B.to.value),E="",$=0;$<a.length;$++)E+=a[$]+(j[$]-a[$])*B.progress+" ";return E}},K.Element.animateTransform.prototype=new K.Element.animate,K.Element.font=function(B){this.base=K.Element.ElementBase,this.base(B),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var a=0;a<this.children.length;a++){var j=this.children[a];"font-face"==j.type?(this.fontFace=j,j.style("font-family").hasValue()&&(K.Definitions[j.style("font-family").value]=this)):"missing-glyph"==j.type?this.missingGlyph=j:"glyph"==j.type&&(""!=j.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[j.unicode]&&(this.glyphs[j.unicode]=[]),this.glyphs[j.unicode][j.arabicForm]=j):this.glyphs[j.unicode]=j)}},K.Element.font.prototype=new K.Element.ElementBase,K.Element.fontface=function(B){this.base=K.Element.ElementBase,this.base(B),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},K.Element.fontface.prototype=new K.Element.ElementBase,K.Element.missingglyph=function(B){this.base=K.Element.path,this.base(B),this.horizAdvX=0},K.Element.missingglyph.prototype=new K.Element.path,K.Element.glyph=function(B){this.base=K.Element.path,this.base(B),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},K.Element.glyph.prototype=new K.Element.path,K.Element.text=function(B){this.captureTextNodes=!0,this.base=K.Element.RenderedElementBase,this.base(B),this.baseSetContext=this.setContext,this.setContext=function(B){this.baseSetContext(B);var a=this.style("dominant-baseline").toTextBaseline();null==a&&(a=this.style("alignment-baseline").toTextBaseline()),null!=a&&(B.textBaseline=a)},this.getBoundingBox=function(){var B=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),j=this.parent.style("font-size").numValueOrDefault(K.Font.Parse(K.ctx.font).fontSize);return new K.BoundingBox(B,a-j,B+Math.floor(2*j/3)*this.children[0].getText().length,a)},this.renderChildren=function(B){this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y"),this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x")),this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),this.x+=this.getAnchorDelta(B,this,0);for(var a=0;a<this.children.length;a++)this.renderChild(B,this,this,a)},this.getAnchorDelta=function(B,a,j){var E=this.style("text-anchor").valueOrDefault("start");if("start"!=E){for(var $=0,H=j;H<a.children.length;H++){var K=a.children[H];if(H>j&&K.attribute("x").hasValue())break;K.measureTextRecursive&&($+=K.measureTextRecursive(B))}return-1*("end"==E?$:$/2)}return 0},this.renderChild=function(B,a,j,E){var $=j.children[E];$.attribute("x").hasValue()?($.x=$.attribute("x").toPixels("x")+a.getAnchorDelta(B,j,E),$.attribute("dx").hasValue()&&($.x+=$.attribute("dx").toPixels("x"))):($.attribute("dx").hasValue()&&(a.x+=$.attribute("dx").toPixels("x")),$.x=a.x),a.x=$.x+($.measureText?$.measureText(B):0),$.attribute("y").hasValue()?($.y=$.attribute("y").toPixels("y"),$.attribute("dy").hasValue()&&($.y+=$.attribute("dy").toPixels("y"))):($.attribute("dy").hasValue()&&(a.y+=$.attribute("dy").toPixels("y")),$.y=a.y),a.y=$.y,$.render(B);for(var E=0;E<$.children.length;E++)a.renderChild(B,a,$,E)}},K.Element.text.prototype=new K.Element.RenderedElementBase,K.Element.TextElementBase=function(B){this.base=K.Element.RenderedElementBase,this.base(B),this.getGlyph=function(B,a,j){var E=a[j],$=null;if(B.isArabic){var H="isolated";(0==j||" "==a[j-1])&&j<a.length-2&&" "!=a[j+1]&&(H="terminal"),j>0&&" "!=a[j-1]&&j<a.length-2&&" "!=a[j+1]&&(H="medial"),j>0&&" "!=a[j-1]&&(j==a.length-1||" "==a[j+1])&&(H="initial"),"undefined"!=typeof B.glyphs[E]&&($=B.glyphs[E][H],null==$&&"glyph"==B.glyphs[E].type&&($=B.glyphs[E]))}else $=B.glyphs[E];return null==$&&($=B.missingGlyph),$},this.renderChildren=function(B){var a=this.parent.style("font-family").getDefinition();if(null==a)""!=B.fillStyle&&B.fillText(K.compressSpaces(this.getText()),this.x,this.y),""!=B.strokeStyle&&B.strokeText(K.compressSpaces(this.getText()),this.x,this.y);else{var j=this.parent.style("font-size").numValueOrDefault(K.Font.Parse(K.ctx.font).fontSize),E=this.parent.style("font-style").valueOrDefault(K.Font.Parse(K.ctx.font).fontStyle),$=this.getText();a.isRTL&&($=$.split("").reverse().join(""));for(var H=K.ToNumberArray(this.parent.attribute("dx").value),C=0;C<$.length;C++){var Z=this.getGlyph(a,$,C),h=j/a.fontFace.unitsPerEm;B.translate(this.x,this.y),B.scale(h,-h);var m=B.lineWidth;B.lineWidth=B.lineWidth*a.fontFace.unitsPerEm/j,"italic"==E&&B.transform(1,0,.4,1,0,0),Z.render(B),"italic"==E&&B.transform(1,0,-.4,1,0,0),B.lineWidth=m,B.scale(1/h,-1/h),B.translate(-this.x,-this.y),this.x+=j*(Z.horizAdvX||a.horizAdvX)/a.fontFace.unitsPerEm,"undefined"==typeof H[C]||isNaN(H[C])||(this.x+=H[C])}}},this.getText=function(){},this.measureTextRecursive=function(B){for(var a=this.measureText(B),j=0;j<this.children.length;j++)a+=this.children[j].measureTextRecursive(B);return a},this.measureText=function(B){var a=this.parent.style("font-family").getDefinition();if(null!=a){var j=this.parent.style("font-size").numValueOrDefault(K.Font.Parse(K.ctx.font).fontSize),E=0,$=this.getText();a.isRTL&&($=$.split("").reverse().join(""));for(var H=K.ToNumberArray(this.parent.attribute("dx").value),C=0;C<$.length;C++){var Z=this.getGlyph(a,$,C);E+=(Z.horizAdvX||a.horizAdvX)*j/a.fontFace.unitsPerEm,"undefined"==typeof H[C]||isNaN(H[C])||(E+=H[C])}return E}var h=K.compressSpaces(this.getText());if(!B.measureText)return 10*h.length;B.save(),this.setContext(B);var m=B.measureText(h).width;return B.restore(),m}},K.Element.TextElementBase.prototype=new K.Element.RenderedElementBase,K.Element.tspan=function(B){this.captureTextNodes=!0,this.base=K.Element.TextElementBase,this.base(B),this.text=K.compressSpaces(B.value||B.text||B.textContent||""),this.getText=function(){return this.children.length>0?"":this.text}},K.Element.tspan.prototype=new K.Element.TextElementBase,K.Element.tref=function(B){this.base=K.Element.TextElementBase,this.base(B),this.getText=function(){var B=this.getHrefAttribute().getDefinition();if(null!=B)return B.children[0].getText()}},K.Element.tref.prototype=new K.Element.TextElementBase,K.Element.a=function(a){this.base=K.Element.TextElementBase,this.base(a),this.hasText=a.childNodes.length>0;for(var j=0;j<a.childNodes.length;j++)3!=a.childNodes[j].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].value:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(B){if(this.hasText){this.baseRenderChildren(B);var a=new K.Property("fontSize",K.Font.Parse(K.ctx.font).fontSize);K.Mouse.checkBoundingBox(this,new K.BoundingBox(this.x,this.y-a.toPixels("y"),this.x+this.measureText(B),this.y))}else if(this.children.length>0){var j=new K.Element.g;j.children=this.children,j.parent=this,j.render(B)}},this.onclick=function(){B.open(this.getHrefAttribute().value)},this.onmousemove=function(){K.ctx.canvas.style.cursor="pointer"}},K.Element.a.prototype=new K.Element.TextElementBase,K.Element.image=function(B){this.base=K.Element.RenderedElementBase,this.base(B);var a=this.getHrefAttribute().value;if(""!=a){var j=a.match(/\.svg$/);if(K.Images.push(this),this.loaded=!1,j)this.img=K.ajax(a),this.loaded=!0;else{this.img=document.createElement("img"),1==K.opts.useCORS&&(this.img.crossOrigin="Anonymous");var E=this;this.img.onload=function(){E.loaded=!0},this.img.onerror=function(){K.log('ERROR: image "'+a+'" not found'),E.loaded=!0},this.img.src=a}this.renderChildren=function(B){var a=this.attribute("x").toPixels("x"),E=this.attribute("y").toPixels("y"),$=this.attribute("width").toPixels("x"),H=this.attribute("height").toPixels("y");0!=$&&0!=H&&(B.save(),j?B.drawSvg(this.img,a,E,$,H):(B.translate(a,E),K.AspectRatio(B,this.attribute("preserveAspectRatio").value,$,this.img.width,H,this.img.height,0,0),B.drawImage(this.img,0,0)),B.restore())},this.getBoundingBox=function(){var B=this.attribute("x").toPixels("x"),a=this.attribute("y").toPixels("y"),j=this.attribute("width").toPixels("x"),E=this.attribute("height").toPixels("y");return new K.BoundingBox(B,a,B+j,a+E)}}},K.Element.image.prototype=new K.Element.RenderedElementBase,K.Element.g=function(B){this.base=K.Element.RenderedElementBase,this.base(B),this.getBoundingBox=function(){for(var B=new K.BoundingBox,a=0;a<this.children.length;a++)B.addBoundingBox(this.children[a].getBoundingBox());return B}},K.Element.g.prototype=new K.Element.RenderedElementBase,K.Element.symbol=function(B){this.base=K.Element.RenderedElementBase,this.base(B),this.render=function(B){}},K.Element.symbol.prototype=new K.Element.RenderedElementBase,K.Element.switch=function(B){this.base=K.Element.RenderedElementBase,this.base(B)},K.Element.switch.prototype=new K.Element.symbol,K.Element.style=function(B){this.base=K.Element.ElementBase,this.base(B);for(var a="",j=0;j<B.childNodes.length;j++)a+=B.childNodes[j].data;a=a.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),a=K.compressSpaces(a);for(var $=a.split("}"),j=0;j<$.length;j++)if(""!=K.trim($[j]))for(var H=$[j].split("{"),C=H[0].split(","),Z=H[1].split(";"),h=0;h<C.length;h++){var m=K.trim(C[h]);if(""!=m){for(var J=K.Styles[m]||{},O=0;O<Z.length;O++){var k=Z[O].indexOf(":"),s=Z[O].substr(0,k),z=Z[O].substr(k+1,Z[O].length-k);null!=s&&null!=z&&(J[K.trim(s)]=new K.Property(K.trim(s),K.trim(z)))}if(K.Styles[m]=J,K.StylesSpecificity[m]=E(m),"@font-face"==m)for(var o=J["font-family"].value.replace(/"/g,""),c=J.src.value.split(","),U=0;U<c.length;U++)if(c[U].indexOf('format("svg")')>0)for(var I=c[U].indexOf("url"),X=c[U].indexOf(")",I),F=c[U].substr(I+5,X-I-6),V=K.parseXml(K.ajax(F)),w=V.getElementsByTagName("font"),P=0;P<w.length;P++){var _=K.CreateElement(w[P]);K.Definitions[o]=_}}}},K.Element.style.prototype=new K.Element.ElementBase,K.Element.use=function(B){this.base=K.Element.RenderedElementBase,this.base(B),this.baseSetContext=this.setContext,this.setContext=function(B){this.baseSetContext(B),this.attribute("x").hasValue()&&B.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&B.translate(0,this.attribute("y").toPixels("y"))};var a=this.getHrefAttribute().getDefinition();this.path=function(B){null!=a&&a.path(B)},this.getBoundingBox=function(){if(null!=a)return a.getBoundingBox()},this.renderChildren=function(B){if(null!=a){var j=a;"symbol"==a.type&&(j=new K.Element.svg,j.type="svg",j.attributes.viewBox=new K.Property("viewBox",a.attribute("viewBox").value),j.attributes.preserveAspectRatio=new K.Property("preserveAspectRatio",a.attribute("preserveAspectRatio").value),j.attributes.overflow=new K.Property("overflow",a.attribute("overflow").value),j.children=a.children),"svg"==j.type&&(this.attribute("width").hasValue()&&(j.attributes.width=new K.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&(j.attributes.height=new K.Property("height",this.attribute("height").value)));var E=j.parent;j.parent=null,j.render(B),j.parent=E}}},K.Element.use.prototype=new K.Element.RenderedElementBase,K.Element.mask=function(B){this.base=K.Element.ElementBase,this.base(B),this.apply=function(B,a){var j=this.attribute("x").toPixels("x"),E=this.attribute("y").toPixels("y"),$=this.attribute("width").toPixels("x"),H=this.attribute("height").toPixels("y"),C=1,Z=2048;if(0==$&&0==H){for(var h=new K.BoundingBox,m=0;m<this.children.length;m++)this.children[m].getBoundingBox&&h.addBoundingBox(this.children[m].getBoundingBox());j=Math.floor(h.x1),E=Math.floor(h.y1),$=Math.floor(h.width()),H=Math.floor(h.height())}if($&&H){var J=j+$,O=E+H;(J>Z||O>Z)&&(C=Math.min(Z/J,Z/O),J*=C,O*=C);var k=a.style("mask").value;a.style("mask").value="";var s=document.createElement("canvas");s.width=J,s.height=O;var z=s.getContext("2d");if(z.save(),1!==C&&z.scale(C,C),this.renderChildren(z),z.restore(),s.width&&s.height){var o=document.createElement("canvas");o.width=J,o.height=O;var c=o.getContext("2d");c.save(),1!==C&&c.scale(C,C),a.render(c),c.restore(),c.globalCompositeOperation="destination-in",c.fillStyle=z.createPattern(s,"no-repeat"),c.fillRect(0,0,J,O),B.save(),1!==C&&B.scale(1/C,1/C),B.fillStyle=c.createPattern(o,"no-repeat"),B.fillRect(0,0,J,O),B.restore(),a.style("mask").value=k}}},this.render=function(B){}},K.Element.mask.prototype=new K.Element.ElementBase,K.Element.clipPath=function(B){this.base=K.Element.ElementBase,this.base(B),this.apply=function(B){var a=B.beginPath;B.beginPath=function(){};var j=B.closePath;B.closePath=function(){};var E;this.style("transform",!1,!0).hasValue()&&(E=new K.Transform(this.style("transform",!1,!0).value),E.apply(B)),a.call(B);for(var $=0;$<this.children.length;$++){var H=this.children[$];if("undefined"!=typeof H.path){var C=null;H.style("transform",!1,!0).hasValue()&&(C=new K.Transform(H.style("transform",!1,!0).value),C.apply(B)),H.path(B),B.closePath=j,C&&C.unapply(B)}}j.call(B),B.clip(),E&&E.unapply(B),B.beginPath=a,B.closePath=j},this.render=function(B){}},K.Element.clipPath.prototype=new K.Element.ElementBase,K.Element.filter=function(B){this.base=K.Element.ElementBase,this.base(B),this.apply=function(B,a){return},this.render=function(B){}},K.Element.filter.prototype=new K.Element.ElementBase,K.Element.feMorphology=function(B){this.base=K.Element.ElementBase,this.base(B),this.apply=function(B,a,j,E,$){}},K.Element.feMorphology.prototype=new K.Element.ElementBase,K.Element.feComposite=function(B){this.base=K.Element.ElementBase,this.base(B),this.apply=function(B,a,j,E,$){}},K.Element.feComposite.prototype=new K.Element.ElementBase,K.Element.feColorMatrix=function(B){function a(B,a,j,E,$,H){return B[j*E*4+4*a+H]}function j(B,a,j,E,$,H,K){B[j*E*4+4*a+H]=K}function E(B,a){var j=$[B];return j*(j<0?a-255:a)}this.base=K.Element.ElementBase,this.base(B);var $=K.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case"saturate":var H=$[0];$=[.213+.787*H,.715-.715*H,.072-.072*H,0,0,.213-.213*H,.715+.285*H,.072-.072*H,0,0,.213-.213*H,.715-.715*H,.072+.928*H,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var C=$[0]*Math.PI/180,Z=function(B,a,j){return B+Math.cos(C)*a+Math.sin(C)*j};$=[Z(.213,.787,-.213),Z(.715,-.715,-.715),Z(.072,-.072,.928),0,0,Z(.213,-.213,.143),Z(.715,.285,.14),Z(.072,-.072,-.283),0,0,Z(.213,-.213,-.787),Z(.715,-.715,.715),Z(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":$=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(B,$,H,K,C){if(K&&C){for(var Z=B.getImageData(0,0,K,C),H=0;H<C;H++)for(var $=0;$<K;$++){var h=a(Z.data,$,H,K,C,0),m=a(Z.data,$,H,K,C,1),J=a(Z.data,$,H,K,C,2),O=a(Z.data,$,H,K,C,3);j(Z.data,$,H,K,C,0,E(0,h)+E(1,m)+E(2,J)+E(3,O)+E(4,1)),j(Z.data,$,H,K,C,1,E(5,h)+E(6,m)+E(7,J)+E(8,O)+E(9,1)),j(Z.data,$,H,K,C,2,E(10,h)+E(11,m)+E(12,J)+E(13,O)+E(14,1)),j(Z.data,$,H,K,C,3,E(15,h)+E(16,m)+E(17,J)+E(18,O)+E(19,1))}B.clearRect(0,0,K,C),B.putImageData(Z,0,0)}}},K.Element.feColorMatrix.prototype=new K.Element.ElementBase,K.Element.feGaussianBlur=function(B){this.base=K.Element.ElementBase,this.base(B),this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue()),this.extraFilterDistance=this.blurRadius,this.apply=function(B,a,E,$,H){return"undefined"==typeof j.canvasRGBA?void K.log("ERROR: StackBlur.js must be included for blur to work"):(B.canvas.id=K.UniqueId(),B.canvas.style.display="none",document.body.appendChild(B.canvas),j.canvasRGBA(B.canvas.id,a,E,$,H,this.blurRadius),void document.body.removeChild(B.canvas))}},K.Element.feGaussianBlur.prototype=new K.Element.ElementBase,K.Element.title=function(B){},K.Element.title.prototype=new K.Element.ElementBase,K.Element.desc=function(B){},K.Element.desc.prototype=new K.Element.ElementBase,K.Element.MISSING=function(B){K.log("ERROR: Element '"+B.nodeName+"' not yet implemented.")},K.Element.MISSING.prototype=new K.Element.ElementBase,K.CreateElement=function(B){var a=B.nodeName.replace(/^[^:]+:/,"");a=a.replace(/\-/g,"");var j=null;return j="undefined"!=typeof K.Element[a]?new K.Element[a](B):new K.Element.MISSING(B),j.type=B.nodeName,j},K.load=function(B,a){K.loadXml(B,K.ajax(a))},K.loadXml=function(B,a){K.loadXmlDoc(B,K.parseXml(a))},K.loadXmlDoc=function(a,j){K.init(a);var E=function(j){for(var E=a.canvas;E;)j.x-=E.offsetLeft,j.y-=E.offsetTop,E=E.offsetParent;return B.scrollX&&(j.x+=B.scrollX),B.scrollY&&(j.y+=B.scrollY),j};1!=K.opts.ignoreMouse&&(a.canvas.onclick=function(B){var a=E(new K.Point(null!=B?B.clientX:event.clientX,null!=B?B.clientY:event.clientY));K.Mouse.onclick(a.x,a.y)},a.canvas.onmousemove=function(B){var a=E(new K.Point(null!=B?B.clientX:event.clientX,null!=B?B.clientY:event.clientY));K.Mouse.onmousemove(a.x,a.y)});var $=K.CreateElement(j.documentElement);$.root=!0,$.addStylesFromStyleDefinition();var H=!0,C=function(){K.ViewPort.Clear(),a.canvas.parentNode&&K.ViewPort.SetCurrent(a.canvas.parentNode.clientWidth,a.canvas.parentNode.clientHeight),1!=K.opts.ignoreDimensions&&($.style("width").hasValue()&&(a.canvas.width=$.style("width").toPixels("x"),a.canvas.style.width=a.canvas.width+"px"),$.style("height").hasValue()&&(a.canvas.height=$.style("height").toPixels("y"),a.canvas.style.height=a.canvas.height+"px"));var B=a.canvas.clientWidth||a.canvas.width,E=a.canvas.clientHeight||a.canvas.height;if(1==K.opts.ignoreDimensions&&$.style("width").hasValue()&&$.style("height").hasValue()&&(B=$.style("width").toPixels("x"),E=$.style("height").toPixels("y")),K.ViewPort.SetCurrent(B,E),null!=K.opts.offsetX&&($.attribute("x",!0).value=K.opts.offsetX),null!=K.opts.offsetY&&($.attribute("y",!0).value=K.opts.offsetY),null!=K.opts.scaleWidth||null!=K.opts.scaleHeight){var C=null,Z=null,h=K.ToNumberArray($.attribute("viewBox").value);null!=K.opts.scaleWidth&&($.attribute("width").hasValue()?C=$.attribute("width").toPixels("x")/K.opts.scaleWidth:isNaN(h[2])||(C=h[2]/K.opts.scaleWidth)),null!=K.opts.scaleHeight&&($.attribute("height").hasValue()?Z=$.attribute("height").toPixels("y")/K.opts.scaleHeight:isNaN(h[3])||(Z=h[3]/K.opts.scaleHeight)),null==C&&(C=Z),null==Z&&(Z=C),$.attribute("width",!0).value=K.opts.scaleWidth,$.attribute("height",!0).value=K.opts.scaleHeight,$.style("transform",!0,!0).value+=" scale("+1/C+","+1/Z+")"}1!=K.opts.ignoreClear&&a.clearRect(0,0,B,E),$.render(a),H&&(H=!1,"function"==typeof K.opts.renderCallback&&K.opts.renderCallback(j))},Z=!0;K.ImagesLoaded()&&(Z=!1,C()),K.intervalID=setInterval(function(){var B=!1;if(Z&&K.ImagesLoaded()&&(Z=!1,B=!0),1!=K.opts.ignoreMouse&&(B|=K.Mouse.hasEvents()),1!=K.opts.ignoreAnimation)for(var a=0;a<K.Animations.length;a++)B|=K.Animations[a].update(1e3/K.FRAMERATE);"function"==typeof K.opts.forceRedraw&&1==K.opts.forceRedraw()&&(B=!0),B&&(C(),K.Mouse.runEvents())},1e3/K.FRAMERATE)},K.stop=function(){K.intervalID&&clearInterval(K.intervalID)},K.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(B,a){this.events.push({type:"onclick",x:B,y:a,run:function(B){B.onclick&&B.onclick()}})},this.onmousemove=function(B,a){this.events.push({type:"onmousemove",x:B,y:a,run:function(B){B.onmousemove&&B.onmousemove()}})},this.eventElements=[],this.checkPath=function(B,a){for(var j=0;j<this.events.length;j++){var E=this.events[j];a.isPointInPath&&a.isPointInPath(E.x,E.y)&&(this.eventElements[j]=B)}},this.checkBoundingBox=function(B,a){for(var j=0;j<this.events.length;j++){var E=this.events[j];a.isPointInBox(E.x,E.y)&&(this.eventElements[j]=B)}},this.runEvents=function(){K.ctx.canvas.style.cursor="";for(var B=0;B<this.events.length;B++)for(var a=this.events[B],j=this.eventElements[B];j;)a.run(j),j=j.parent;this.events=[],this.eventElements=[]}},K}var C,Z=function(B,a,j){if(null!=B||null!=a||null!=j){"string"==typeof B&&(B=document.getElementById(B)),null!=B.svg&&B.svg.stop();var E=K(j||{});1==B.childNodes.length&&"OBJECT"==B.childNodes[0].nodeName||(B.svg=E);var $=B.getContext("2d");"undefined"!=typeof a.documentElement?E.loadXmlDoc($,a):"<"==a.substr(0,1)?E.loadXml($,a):E.load($,a)}else for(var H=document.querySelectorAll("svg"),C=0;C<H.length;C++){var h=H[C],m=document.createElement("canvas");m.width=h.clientWidth,m.height=h.clientHeight,h.parentNode.insertBefore(m,h),h.parentNode.removeChild(h);var J=document.createElement("div");J.appendChild(h),Z(m,J.innerHTML)}};"undefined"!=typeof Element.prototype.matches?C=function(B,a){return B.matches(a)}:"undefined"!=typeof Element.prototype.webkitMatchesSelector?C=function(B,a){return B.webkitMatchesSelector(a)}:"undefined"!=typeof Element.prototype.mozMatchesSelector?C=function(B,a){return B.mozMatchesSelector(a)}:"undefined"!=typeof Element.prototype.msMatchesSelector?C=function(B,a){return B.msMatchesSelector(a)}:"undefined"!=typeof Element.prototype.oMatchesSelector?C=function(B,a){return B.oMatchesSelector(a)}:("function"!=typeof jQuery&&"function"!=typeof Zepto||(C=function(B,a){return $(B).is(a)}),"undefined"==typeof C&&(C=Sizzle.matchesSelector));var h=/(\[[^\]]+\])/g,m=/(#[^\s\+>~\.\[:]+)/g,J=/(\.[^\s\+>~\.\[:]+)/g,O=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,k=/(:[\w-]+\([^\)]*\))/gi,s=/(:[^\s\+>~\.\[:]+)/g,z=/([^\s\+>~\.\[:]+)/g;return"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(B,a,j,E,$,H){var K={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:a,offsetY:j,scaleWidth:E,scaleHeight:$};for(var C in H)H.hasOwnProperty(C)&&(K[C]=H[C]);Z(this.canvas,B,K)}),Z})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(B,a,j){function E(B){this._pointer=0,this._data=B,this._eof=!1}function $(B,a){return B<=9?a:B>=10&&B<=59?parseFloat(a):B>=60&&B<=99?parseInt(a):B>=100&&B<=109?a:B>=110&&B<=149?parseFloat(a):B>=160&&B<=179?parseInt(a):B>=210&&B<=239?parseFloat(a):B>=270&&B<=289?parseInt(a):B>=290&&B<=299?H(a):B>=300&&B<=369?a:B>=370&&B<=389?parseInt(a):B>=390&&B<=399?a:B>=400&&B<=409?parseInt(a):B>=410&&B<=419?a:B>=420&&B<=429?parseInt(a):B>=430&&B<=439?a:B>=440&&B<=459?parseInt(a):B>=460&&B<=469?parseFloat(a):B>=470&&B<=481?a:999===B?a:B>=1e3&&B<=1009?a:B>=1010&&B<=1059?parseFloat(a):B>=1060&&B<=1071?parseInt(a):(console.log("WARNING: Group code does not have a defined type: %j",{code:B,value:a}),a)}function H(B){if("0"===B)return!1;if("1"===B)return!0;throw TypeError("String '"+B+"' cannot be cast to Boolean type")}function K(B){B&&B.sanitize!==j&&(this.sanitize=B.sanitize);
}function C(B){z.debug("unhandled group "+Z(B))}function Z(B){return B.code+":"+B.value}function h(B){return o[B]}var m="ht",J=B[m],O=J.Default,k=O.getInternal();k.addMethod(O,{cadToShape:function(B,a){var j=new J.DxfViewer(a);return j.toShape(B)},shapeToCad:function(B,a,j){var E=new J.DxfWriter(j);return E.toDxf(B,a)}});var s=function(){},z={debug:s,warn:s,error:s},o=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];E.prototype.next=function(){var B;if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);return B={code:parseInt(this._data[this._pointer])},this._pointer++,B.value=$(B.code,this._data[this._pointer].trim()),this._pointer++,0===B.code&&"EOF"===B.value&&(this._eof=!0),B},E.prototype.hasNext=function(){return!this._eof&&!(this._pointer>this._data.length-2)},E.prototype.isEOF=function(){return this._eof},K.prototype.parse=function(B,a){throw new Error("read() not implemented. Use readSync()")},K.prototype.parseSync=function(B){return"string"==typeof B?this._parse(B):(console.error("Cannot read dxf source of type `"+typeof B),null)},K.prototype.parseStream=function(B,a){function j(B){H+=B}function E(){try{var B=K._parse(H)}catch(B){return a(B)}a(null,B)}function $(B){a(B)}var H="",K=this;B.on("data",j),B.on("end",E),B.on("error",$)},K.prototype.sanitizeFileName=function(){var B=/[\/\?<>\\:\*\|":]/g,a=/[\x00-\x1f\x80-\x9f]/g,j=/^\.+$/,E=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,$=/[\. ]+$/;return function(H){var K=this.sanitize;return null==K?H:H.replace(B,K).replace(a,K).replace(j,K).replace(E,K).replace($,K)}}(),K.prototype._parse=function(B){var $,H,K=this,m={},J=0,O=B.split(/\r\n|\r|\n/g);if($=new E(O),!$.hasNext())throw Error("Empty file");var k=function(){for(H=$.next();!$.isEOF();)if(0===H.code&&"SECTION"===H.value){if(H=$.next(),2!==H.code){console.error("Unexpected code %s after 0:SECTION",Z(H)),H=$.next();continue}"HEADER"===H.value?(z.debug("> HEADER"),m.header=o(),z.debug("<")):"BLOCKS"===H.value?(z.debug("> BLOCKS"),m.blocks=c(),z.debug("<")):"ENTITIES"===H.value?(z.debug("> ENTITIES"),m.entities=l(!1),z.debug("<")):"TABLES"===H.value?(z.debug("> TABLES"),m.tables=I(),z.debug("<")):"EOF"===H.value?z.debug("EOF"):z.warn("Skipping section '%s'",H.value)}else H=$.next()},s=function(B,a){return H.code===B&&H.value===a},o=function(){var B=null,a=null,j={};for(H=$.next();;){if(s(0,"ENDSEC")){B&&(j[B]=a);break}9===H.code?(B&&(j[B]=a),B=H.value):10===H.code?a={x:H.value}:20===H.code?a.y=H.value:30===H.code?a.z=H.value:a=H.value,H=$.next()}return H=$.next(),j},c=function(){var B,a={};for(H=$.next();"EOF"!==H.value&&!s(0,"ENDSEC");)s(0,"BLOCK")?(z.debug("block {"),B=U(),z.debug("}"),u(B),B.name?a[B.name]=B:z.error('block with handle "'+B.handle+'" is missing a name.')):(C(H),H=$.next());return a},U=function(){var B={};for(H=$.next();"EOF"!==H.value;){switch(H.code){case 1:B.xrefPath=H.value,H=$.next();break;case 2:B.name=K.sanitizeFileName(H.value),H=$.next();break;case 3:B.name2=K.sanitizeFileName(H.value),H=$.next();break;case 5:B.handle=H.value,H=$.next();break;case 8:B.layer=H.value,H=$.next();break;case 10:B.position=S();break;case 67:B.paperSpace=!(!H.value||1!=H.value),H=$.next();break;case 70:0!=H.value&&(B.type=H.value),H=$.next();break;case 100:H=$.next();break;case 330:B.ownerHandle=H.value,H=$.next();break;case 0:if("ENDBLK"==H.value)break;$._pointer-=2,B.entities=l(!0);break;default:C(H),H=$.next()}if(s(0,"ENDBLK")){H=$.next();break}}return B},I=function(){var B={};for(H=$.next();"EOF"!==H.value&&!s(0,"ENDSEC");)if(s(0,"TABLE")){H=$.next();var a=_[H.value];a?(z.debug(H.value+" Table {"),B[_[H.value].tableName]=F(),z.debug("}")):z.debug("Unhandled Table "+H.value)}else H=$.next();return H=$.next(),B},X="ENDTAB",F=function(){var B,j=_[H.value],E={},K=0;for(H=$.next();!s(0,X);)switch(H.code){case 5:E.handle=H.value,H=$.next();break;case 330:E.ownerHandle=H.value,H=$.next();break;case 100:"AcDbSymbolTable"===H.value?H=$.next():(C(H),H=$.next());break;case 70:K=H.value,H=$.next();break;case 0:H.value===j.dxfSymbolName?E[j.tableRecordsProperty]=j.parseTableRecords():(C(H),H=$.next());break;default:C(H),H=$.next()}var Z=E[j.tableRecordsProperty];return Z&&(Z.constructor===Array?B=Z.length:"object"==typeof Z&&(B=a.keys(Z).length),K!==B&&z.warn("Parsed "+B+" "+j.dxfSymbolName+"'s but expected "+K)),H=$.next(),E},V=function(){var B=[],a={};for(z.debug("ViewPort {"),H=$.next();!s(0,X);)switch(H.code){case 2:a.name=H.value,H=$.next();break;case 10:a.lowerLeftCorner=S();break;case 11:a.upperRightCorner=S();break;case 12:a.center=S();break;case 13:a.snapBasePoint=S();break;case 14:a.snapSpacing=S();break;case 15:a.gridSpacing=S();break;case 16:a.viewDirectionFromTarget=S();break;case 17:a.viewTarget=S();break;case 40:a.viewHeight=H.value,a.aspectRatio!==j&&(a.viewWidth=H.value*a.aspectRatio),H=$.next();break;case 41:a.aspectRatio=H.value,a.viewHeight!==j&&(a.viewWidth=H.value*a.viewHeight),H=$.next();break;case 42:a.lensLength=H.value,H=$.next();break;case 43:a.frontClippingPlane=H.value,H=$.next();break;case 44:a.backClippingPlane=H.value,H=$.next();break;case 45:a.viewHeight=H.value,H=$.next();break;case 50:a.snapRotationAngle=H.value,H=$.next();break;case 51:a.viewTwistAngle=H.value,H=$.next();break;case 79:a.orthographicType=H.value,H=$.next();break;case 110:a.ucsOrigin=S();break;case 111:a.ucsXAxis=S();break;case 112:a.ucsYAxis=S();break;case 110:a.ucsOrigin=S();break;case 281:a.renderMode=H.value,H=$.next();break;case 281:a.defaultLightingType=H.value,H=$.next();break;case 292:a.defaultLightingOn=H.value,H=$.next();break;case 330:a.ownerHandle=H.value,H=$.next();break;case 63:case 421:case 431:a.ambientColor=H.value,H=$.next();break;case 0:"VPORT"===H.value&&(z.debug("}"),B.push(a),z.debug("ViewPort {"),a={},H=$.next());break;default:C(H),H=$.next()}return z.debug("}"),B.push(a),B},w=function(){var B,a,j={},E={};for(z.debug("LType {"),H=$.next();!s(0,"ENDTAB");)switch(H.code){case 2:E.name=H.value,B=H.value,H=$.next();break;case 3:E.description=H.value,H=$.next();break;case 73:a=H.value,a>0&&(E.pattern=[]),H=$.next();break;case 40:E.patternLength=H.value,H=$.next();break;case 49:E.pattern.push(H.value),H=$.next();break;case 0:z.debug("}"),a>0&&a!==E.pattern.length&&z.warn("lengths do not match on LTYPE pattern"),j[B]=E,E={},z.debug("LType {"),H=$.next();break;default:H=$.next()}return z.debug("}"),j[B]=E,j},P=function(){var B,a={},E={};for(z.debug("Layer {"),H=$.next();!s(0,"ENDTAB");)switch(H.code){case 2:E.name=H.value,B=H.value,H=$.next();break;case 62:E.visible=H.value>=0,E.color=h(Math.abs(H.value)),H=$.next();break;case 6:E.lineType=H.value,H=$.next();break;case 0:"LAYER"===H.value&&(z.debug("}"),a[B]=E,z.debug("Layer {"),E={},B=j,H=$.next());break;default:C(H),H=$.next()}return z.debug("}"),a[B]=E,a},_={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:V},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:w},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:P}},l=function(B){var a=[],j=B?"ENDBLK":"ENDSEC";for(H=$.next();;)if(0===H.code){if(H.value===j)break;var E;if("LWPOLYLINE"===H.value)z.debug("LWPOLYLINE {"),E=x(),z.debug("}");else if("POLYLINE"===H.value)z.debug("POLYLINE {"),E=W(),z.debug("}");else if("LINE"===H.value)z.debug("LINE {"),E=t(),z.debug("}");else if("CIRCLE"===H.value)z.debug("CIRCLE {"),E=r(),z.debug("}");else if("ARC"===H.value)z.debug("ARC {"),E=r(),z.debug("}");else if("ELLIPSE"===H.value)z.debug("ELLIPSE {"),E=G(),z.debug("}");else if("SPLINE"===H.value)z.debug("SPLINE {"),E=Y(),z.debug("}");else if("TEXT"===H.value)z.debug("TEXT {"),E=R(),z.debug("}");else if("DIMENSION"===H.value)z.debug("DIMENSION {"),E=N(),z.debug("}");else if("INSERT"===H.value)z.debug("INSERT {"),E=f(),z.debug("}");else if("HATCH"===H.value)z.debug("HATCH {"),E=y(),z.debug("}");else if("SOLID"===H.value)z.debug("SOLID {"),E=M(),z.debug("}");else if("POINT"===H.value)z.debug("POINT {"),E=Q(),z.debug("}");else if("MTEXT"===H.value)z.debug("MTEXT {"),E=p(),z.debug("}");else{if("ATTDEF"!==H.value){z.warn("Unhandled entity "+H.value),H=$.next();continue}z.debug("ATTDEF {"),E=d(),z.debug("}")}u(E),a.push(E)}else H=$.next();return"ENDSEC"==j&&(H=$.next()),a},e=function(B){switch(H.code){case 0:B.type=H.value,H=$.next();break;case 5:B.handle=H.value,H=$.next();break;case 6:B.lineType=H.value,H=$.next();break;case 8:B.layer=H.value,H=$.next();break;case 48:B.lineTypeScale=H.value,H=$.next();break;case 60:B.visible=0===H.value,H=$.next();break;case 62:B.colorIndex=H.value,B.color=h(Math.abs(H.value)),H=$.next();break;case 67:B.inPaperSpace=0!==H.value,H=$.next();break;case 210:B.extrusionDirection=S();break;case 230:B.extrusionDirection={x:0,y:0,z:H.value},H=$.next();break;case 330:B.ownerHandle=H.value,H=$.next();break;case 347:B.materialObjectHandle=H.value,H=$.next();break;case 370:B.lineweight=H.value,H=$.next();break;case 420:B.color=H.value,H=$.next();break;case 100:if("AcDbEntity"==H.value){H=$.next();break}default:C(H),H=$.next()}},n=function(){var B={type:H.value};for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.x=H.value,H=$.next();break;case 20:B.y=H.value,H=$.next();break;case 30:B.z=H.value,H=$.next();break;case 40:case 41:case 42:H=$.next();break;case 70:B.curveFittingVertex=0!==(1|H.value),B.curveFitTangent=0!==(2|H.value),B.splineVertex=0!==(8|H.value),B.splineControlPoint=0!==(16|H.value),B.ThreeDPolylineVertex=0!==(32|H.value),B.ThreeDPolylineMesh=0!==(64|H.value),B.polyfaceMeshVertex=0!==(128|H.value),H=$.next();break;case 50:case 71:case 72:case 73:case 74:H=$.next();break;default:e(B)}return B},b=function(){var B={type:H.value};for(H=$.next();"EOF"!=H&&0!=H.code;)e(B);return B},S=function(){var B={},a=H.code;if(B.x=H.value,a+=10,H=$.next(),H.code!=a)throw new Error("Expected code for point value to be "+a+" but got "+H.code+".");return B.y=H.value,a+=10,H=$.next(),H.code!=a?B:(B.z=H.value,H=$.next(),B)},v=function(){var B={},a=H.code;return B.x=H.value,a+=1,H=$.next(),H.code!=a?($._pointer-=2,B.y=1):B.y=H.value,a+=1,H=$.next(),H.code!=a?($._pointer-=2,B.z=1):B.z=H.value,H=$.next(),B},g=function(B){if(!B||B<=0)throw Error("n must be greater than 0 verticies");var a,j=[],E=!1,K=!1;for(a=0;a<B;a++){for(var C={};"EOF"!==H&&0!==H.code&&!K;){switch(H.code){case 10:if(E){K=!0;continue}C.x=H.value,E=!0;break;case 20:C.y=H.value;break;case 30:C.z=H.value;break;case 40:C.startWidth=H.value;break;case 41:C.endWidth=H.value;break;case 42:0!=H.value&&(C.bulge=H.value);break;default:if(E){K=!0;continue}}H=$.next()}j.push(C),E=!1,K=!1}return j},i=function(){for(var B=[];"EOF"!==H;)if(0===H.code)if("VERTEX"===H.value)B.push(n());else if("SEQEND"===H.value){b();break}return B},p=function(){var B={type:H.value};for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 1:B.text=H.value,H=$.next();break;case 3:B.text+=H.value,H=$.next();break;case 10:B.position=S();break;case 40:B.height=H.value,H=$.next();break;case 41:B.width=H.value,H=$.next();break;case 71:B.attachmentPoint=H.value,H=$.next();break;case 72:B.drawingDirection=H.value,H=$.next();break;case 50:B.angle=2*H.value*Math.PI/360,H=$.next();break;case 11:B.directionX=H.value,H=$.next();break;case 21:B.directionY=H.value,H=$.next();break;default:e(B)}return B},d=function(){var B={type:H.value,scale:1,textStyle:"STANDARD"};for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 1:B.text=H.value,H=$.next();break;case 2:B.tag=H.value,H=$.next();break;case 3:B.prompt=H.value,H=$.next();break;case 7:B.textStyle=H.value,H=$.next();break;case 10:B.x=H.value,H=$.next();break;case 20:B.y=H.value,H=$.next();break;case 30:B.z=H.value,H=$.next();break;case 39:B.thickness=H.value,H=$.next();break;case 40:B.textHeight=H.value,H=$.next();break;case 41:B.scale=H.value,H=$.next();break;case 50:B.rotation=H.value,H=$.next();break;case 51:B.obliqueAngle=H.value,H=$.next();break;case 70:B.invisible=!!(1&H.value),B.constant=!!(2&H.value),B.verificationRequired=!!(4&H.value),B.preset=!!(8&H.value),H=$.next();break;case 71:B.backwards=!!(2&H.value),B.mirrored=!!(4&H.value),H=$.next();break;case 72:B.horizontalJustification=H.value,H=$.next();break;case 73:B.fieldLength=H.value,H=$.next();break;case 74:B.verticalJustification=H.value,H=$.next();break;case 100:H=$.next();break;case 210:B.extrusionDirectionX=H.value,H=$.next();break;case 220:B.extrusionDirectionY=H.value,H=$.next();break;case 230:B.extrusionDirectionZ=H.value,H=$.next();break;default:e(B)}return B},x=function(){var B={type:H.value,vertices:[]},a=0;for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 38:B.elevation=H.value,H=$.next();break;case 39:B.depth=H.value,H=$.next();break;case 70:B.shape=1===H.value,H=$.next();break;case 90:a=H.value,H=$.next();break;case 10:B.vertices=g(a);break;case 40:0!==H.value&&(B.startWidth=H.value),H=$.next();break;case 41:0!==H.value&&(B.endWidth=H.value),H=$.next();break;case 43:0!==H.value&&(B.width=H.value),H=$.next();break;default:e(B)}return B},W=function(){var B={type:H.value,vertices:[]};for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:case 20:case 30:case 39:H=$.next();break;case 40:0!==H.value&&(B.startWidth=H.value),H=$.next();break;case 41:0!==H.value&&(B.endWidth=H.value),H=$.next();break;case 70:B.shape=1===H.value,H=$.next();break;case 71:case 72:case 73:case 74:case 75:H=$.next();break;case 100:H=$.next();break;default:e(B)}return B.vertices=i(),B},t=function(){var B={type:H.value,vertices:[]};for(H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.vertices.unshift(S());break;case 11:B.vertices.push(S());break;case 100:if("AcDbLine"==H.value){H=$.next();break}default:e(B)}return B},r=function(){var B,a;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.center=S();break;case 40:B.radius=H.value,H=$.next();break;case 50:B.startAngle=Math.PI/180*H.value,H=$.next();break;case 51:a=Math.PI/180*H.value,a<B.startAngle?B.angleLength=a+2*Math.PI-B.startAngle:B.angleLength=a-B.startAngle,B.endAngle=a,H=$.next();break;default:e(B)}return B},G=function(){var B,a;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.center=S();break;case 11:B.major=S();break;case 40:B.ratio=H.value,H=$.next();break;case 41:B.startAngle=H.value,H=$.next();break;case 42:a=H.value,a<B.startAngle?B.angleLength=a+2*Math.PI-B.startAngle:B.angleLength=a-B.startAngle,B.endAngle=a,H=$.next();break;default:e(B)}return B},f=function(){var B;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 2:B.block=K.sanitizeFileName(H.value),H=$.next();break;case 10:B.center=S();break;case 41:B.scale=v();break;case 50:B.deg=H.value,H=$.next();break;default:e(B)}return B},y=function(){var B;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 2:B.block=K.sanitizeFileName(H.value),H=$.next();break;case 10:B.center=S();break;case 41:B.scale=v();break;case 50:B.deg=H.value,H=$.next();break;default:e(B)}return B},Y=function(){var B,a;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.center=S();break;case 11:B.major=S();break;case 40:B.ratio=H.value,H=$.next();break;case 41:B.startAngle=H.value,H=$.next();break;case 42:a=H.value,a<B.startAngle?B.angleLength=a+2*Math.PI-B.startAngle:B.angleLength=a-B.startAngle,B.endAngle=a,H=$.next();break;default:e(B)}return B},R=function(){var B;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.startPoint=S();break;case 11:B.endPoint=S();break;case 40:B.textHeight=H.value,H=$.next();break;case 41:B.xScale=H.value,H=$.next();break;case 1:B.text=H.value,H=$.next();break;case 7:B.font=H.value,H=$.next();break;case 71:B.generationFlags=H.value,H=$.next();break;case 72:B.halign=H.value,H=$.next();break;case 73:B.valign=H.value,H=$.next();break;case 50:B.rotation=2*H.value*Math.PI/360,H=$.next();break;default:e(B)}return B},N=function(){var B;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 2:B.block=K.sanitizeFileName(H.value),H=$.next();break;case 10:B.anchorPoint=S();break;case 11:B.middleOfText=S();break;case 71:B.attachmentPoint=H.value,H=$.next();break;case 42:B.actualMeasurement=H.value,H=$.next();break;case 1:B.text=H.value,H=$.next();break;case 50:B.angle=H.value,H=$.next();break;default:e(B)}return B},M=function(){var B;for(B={type:H.value},B.points=[],H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.points[0]=S();break;case 11:B.points[1]=S();break;case 12:B.points[2]=S();break;case 13:B.points[3]=S();break;default:e(B)}return B},Q=function(){var B;for(B={type:H.value},H=$.next();"EOF"!==H&&0!==H.code;)switch(H.code){case 10:B.position=S();break;case 39:B.thickness=H.value,H=$.next();break;case 100:if("AcDbPoint"==H.value){H=$.next();break}default:e(B)}return B},u=function(B){if(!B)throw new TypeError("entity cannot be undefined or null");B.handle||(B.handle=J++)};return k(),m};var c=J.DxfViewer=function(B){var a=this;a.init(B)};c.prototype={},c.prototype.constructor=c;var U={LINE:["LINE","POLYLINE","LWPOLYLINE"],CIRCLE:["CIRCLE","ARC"],ELLIPSE:["ELLIPSE"],TEXT:["TEXT","MTEXT"],SOLID:["SOLID"],POINT:["POINT"]};a.defineProperties(c.prototype,{dxf:{get:function(){return this._dxf}}}),c.prototype.init=function(B){var a=this,j=a.options={};B=B||{},j.font=B.font||"Standard",j.textScaleRatio=B.textScaleRatio||1,j.size=B.size,j.scale=B.scale,j.blockSize=B.blockSize||256,j.filter=B.filter,j.defaultColor=B.defaultColor||0,j.edgeLayer=B.edgeLayer,j.showText=B.showText||!0,j.mapColor=B.mapColor,j.circleSegments=B.circleSegments||72,j.browserMinFontSize=B.browserMinFontSize||8,j.useDxfViewport=B.useDxfViewport||!0,B.sanitize!==!1&&(j.sanitize=B.sanitize||"_")},c.prototype.toShape=function(B){var a=this;a.parseFile(B);var j,E,$,H=a._dxf.blocks,K=a.sortBlocks(H);a._blockDef={};for(var C=K.length-1;C>=0;C--)E=K[C],$=H[E],$.entities&&(a._blockDef[E]||(j=a.entitiesToShape($.entities,$.position,null,!1),j&&(j.flag=$.type,a._blockDef[E]=j)));return j=a.entitiesToShape(a._dxf.entities,null,a.options.size,!0,a.options.scale),j.sortedBlockName=K,j.blockDef=a._blockDef,j.layers=a._dxf.tables.layer.layers,j},c.prototype.entitiesToShape=function(B,a,j,E,$){var H=this;H._minFontSize=12,H._bound={xMin:1/0,yMin:1/0,xMax:-(1/0),yMax:-(1/0)},a=a||{x:0,y:0,z:0};var K,C,Z,h=H._models={},m=H._dxf;for(K=0,C=B.length;K<C;K++)Z=B[K],H._groupEntity(h,Z,m);if(E&&H.options.useDxfViewport){var J=H._dxfViewport;!J||isNaN(J.x)||isNaN(J.y)||isNaN(J.width)||isNaN(J.height)||(H._bound={xMin:J.x-J.width/2,xMax:J.x+J.width/2,yMin:J.y-J.height/2,yMax:J.y+J.height/2})}H._shiftX=H._bound.xMin,H._shiftY=H._bound.yMax;var O=H._bound.xMax-H._bound.xMin,k=H._bound.yMax-H._bound.yMin;if(!(O<0||k<0)){if(O=O||1,k=k||1,H._bound.pos=a,$)H._scale=$;else{if(j){var s=j/O,z=j/k;H._scale=Math.min(s,z)}else H._scale=1;H._scale*=Math.max(1,Math.ceil(H.options.browserMinFontSize/H._minFontSize))}H.shapeComps=[],H.drawLine(),H.drawSolid(),H.drawCircle(),H.drawEllipse(),H.options.showText&&H.drawText(),H.drawBlock();var o={width:O*H._scale,height:k*H._scale,comps:H.shapeComps,scale:H._scale,anchorX:-(H._bound.xMin-a.x)/O,anchorY:(H._bound.yMax-a.y)/k,bound:H._bound};return H._calcBoundExtend(o),o}},c.prototype._calcBoundExtend=function(B){var a=1,j=!1;B.comps.forEach(function(B){a=Math.max(a,B.borderWidth||0),B.borderWidthAbsolute&&(j=!0)}),B.boundExtend=a,j&&(B.boundExtendAbsolute=!0)},c.prototype._bulgesAt=function(B,a){return B[a].bulge},c.prototype._isStraightLine=function(B){return!B||Math.abs(B)<1e-6},c.prototype._getDistance=function(B,a){var j=B.x-a.x,E=B.y-a.y;return Math.sqrt(j*j+E*E)},c.prototype._getBulgeSegment=function(B,a,j){var E=this,$=j<0,H=4*Math.atan(j);if(Math.abs(H)>2*Math.PI-1e-6)return[a];var K={x:(B.x+a.x)/2,y:(B.y+a.y)/2},C=E._getDistance(B,a)/2,Z=Math.atan2(a.y-B.y,a.x-B.x),h=Math.abs(C/Math.sin(H/2)),m=Math.abs(h*h-C*C),J=Math.sqrt(m);j>0?Z+=Math.PI/2:Z-=Math.PI/2,Math.abs(H)>Math.PI&&(J*=-1);var O,Z,k=J*Math.cos(Z)+K.x,s=J*Math.sin(Z)+K.y,z=Math.atan2(B.y-s,B.x-k),o=Math.atan2(a.y-s,a.x-k),c=[];if(O=2*Math.PI/E.options.circleSegments,Z=z,$){for(;o>z;)o-=2*Math.PI;for(;Z>o;)Z-=O,Z<o&&(Z=o),c.push({x:k+h*Math.cos(Z),y:s+h*Math.sin(Z)})}else{for(;o<z;)o+=2*Math.PI;for(;Z<o;)Z+=O,Z>o&&(Z=o),c.push({x:k+h*Math.cos(Z),y:s+h*Math.sin(Z)})}return c},c.prototype.drawLine=function(){var B,a,E,$,H,K,C,Z,h,m,J,O,k,s,z,o,c,I,X,F,V=this,w=V._models;for(B=U.LINE,$=0,H=B.length;$<H;$++){a=B[$],E=w[a];for(Z in E)for(h=E[Z],K=0,C=h.length;K<C;K++)if(m=h[K],J=m.vertices,J&&J.length){for(z=V.toLocal(J[0].x,1),o=V.toLocal(J[0].y,2),I={type:"shape",cadType:a,maybeEdge:m.layer===V.options.edgeLayer,borderColor:Z,points:[z,o],segments:[1]},F=j,m.startWidth?F=(m.startWidth+(m.endWidth?m.endWidth:m.startWidth))/2:m.width&&(F=m.width),F?I.borderWidth=V.toLocal(F):(I.borderWidthAbsolute=!0,I.borderWidth=1),k=1,s=J.length;k<s;k++)O=J[k],c=V._bulgesAt(J,k-1),V._isStraightLine(c)?(I.points.push(V.toLocal(O.x,1),V.toLocal(O.y,2)),I.segments.push(2)):(X=V._getBulgeSegment(J[k-1],O,c),X.forEach(function(B){I.points.push(V.toLocal(B.x,1),V.toLocal(B.y,2)),I.segments.push(2)}));m.shape&&(c=V._bulgesAt(J,J.length-1),V._isStraightLine(c)?I.segments.push(5):(X=V._getBulgeSegment(J[J.length-1],J[0],c),X.forEach(function(B){I.points.push(V.toLocal(B.x,1),V.toLocal(B.y,2)),I.segments.push(2)}))),I.handle=m.handle,V.shapeComps.push(I)}}},c.prototype.drawBlock=function(){var B,a,j,E,$,H,K,C,Z,h,m,J,O=this,k=O._models.BLOCK;if(k)for(B=0,a=k.length;B<a;B++)j=k[B],E=j.block,$=O._blockDef[E],m=j.transform,H=Math.atan2(m.b,m.a),H===Math.PI||0===H?(Z=Math.cos(H),K=m.a/Z,C=m.d/Z):(h=Math.sin(H),K=m.b/h,C=-m.c/h),J={type:"image",cadType:"block",handle:j.handle,name:E,rect:[[O.toLocal(m.tx,1),O.toLocal(m.ty,2)],O.toLocal($.width/$.scale),O.toLocal($.height/$.scale)],rotation:H},1===K&&1===C||(J.scaleX=K,J.scaleY=C),O.shapeComps.push(J)},c.prototype.drawSolid=function(){var B,a,j,E,$,H,K,C,Z,h,m,J=this,O=J._models;for(B=U.SOLID,E=0,$=B.length;E<$;E++){a=B[E],j=O[a];for(C in j)for(Z=j[C],H=0,K=Z.length;H<K;H++)h=Z[H],m=h.points,J.shapeComps.push({type:"shape",cadType:a,handle:h.handle,background:C,points:[J.toLocal(m[0].x,1),J.toLocal(m[0].y,2),J.toLocal(m[1].x,1),J.toLocal(m[1].y,2),J.toLocal(m[3].x,1),J.toLocal(m[3].y,2),J.toLocal(m[2].x,1),J.toLocal(m[2].y,2)],segments:[1,2,2,2,5]})}},c.prototype.extrusionZNagative=function(B){var a=B.extrusionDirection;return!!a&&Math.abs(a.z+1)<1e-5},c.prototype.drawCircle=function(){var B,a,j,E,$,H,K,C,Z,h,m,J,O,k,s,z,o,c,I,X,F=this,V=F._models;for(B=U.CIRCLE,E=0,$=B.length;E<$;E++){a=B[E],j=V[a];for(C in j)for(Z=j[C],H=0,K=Z.length;H<K;H++){if(h=Z[H],m=h.startAngle||0,J=h.angleLength||2*Math.PI,O=m+J,k=F.toLocal(h.radius),s=h.addonAngle||0,z=F.toLocal(h.center.x,1),o=F.toLocal(h.center.y,2),X=h.xInvert^F.extrusionZNagative(h),I=h.yInvert,I||X?X&&I?(m=Math.PI+m,O=Math.PI+O,c=!1):(m=Math.PI*(X?1:2)-m,O=Math.PI*(X?1:2)-O,c=!0):c=!1,c=!c,m=2*Math.PI-m-s,O=2*Math.PI-O-s,c){var w=m;m=O,O=w}F.shapeComps.push({type:"arc",cadType:a,handle:h.handle,borderColor:C,borderWidth:1,borderWidthAbsolute:!0,rect:[z-k,o-k,2*k,2*k],arcFrom:m,arcTo:O,arcClose:!1})}}},c.prototype.drawText=function(){var B,a,j,E,$,H,K,C,Z,h,m,J,O,k,s,z,o,c,I,X,F,V,w,P,_,l=this,e=l._models;for(B=U.TEXT,P=l.options.textScaleRatio,E=0,$=B.length;E<$;E++){a=B[E],j=e[a];for(C in j)for(Z=j[C],H=0,K=Z.length;H<K;H++)if(h=Z[H],m=h.text,m&&m.length){if("MTEXT"===a)J=l.toLocal(h.height||12),O=l.toLocal(h.position.x,1),k=l.toLocal(h.position.y,2),X=h.angle?h.angle:h.directionX?Math.atan2(h.directionY,h.directionX):0,X+=h.addonAngle||0,w=1,I=h.attachmentPoint||1,o=I%3,c=Math.floor(I/3),c=1===c?"middle":0===c?"top":"bottom",z=0===o?"right":2===o?"center":"left";else{J=l.toLocal(h.textHeight||12);var n=h.endPoint;n||(n=h.startPoint),O=n.x,k=n.y,X=h.rotation||0,w=h.xScale||1,2===h.generationFlags?X=2*Math.PI-X:4===h.generationFlags?X=Math.PI-X:6===h.generationFlags&&(X=Math.PI+X),O=l.toLocal(O,1),k=l.toLocal(k,2),o=h.halign,c=h.valign,z=2===o?"right":1===o?"center":"left",c=3===c?"top":2===c?"middle":"bottom"}k+=J/4;if(X=2*Math.PI-X,s=J*P+"px "+(h.font||l.options.font),"MTEXT"===a)for(m=m.replace(/\\{/g,"#@#"),m=m.replace(/\\}/g,"#@@"),m=m.replace(/({|})/g,""),m=m.replace(/#@#/g,"{"),m=m.replace(/#@@/g,"}"),m=m.replace(/\\[ACT]\d+;/g,""),(_=m.match(/\\f[^;]*;/))&&(m=m.replace(_[0],""),_=_[0].match(/\|p(\d+)/),_&&(s=_[0]/10*J*P+"px "+s)),k-=J/6,F=m.split("\\P"),V=0;V<F.length;V++)l.shapeComps.push({type:"text",cadType:a,handle:h.handle,color:C,text:F[V],rotation:X,rect:[O,k+V*J*1.5,0,0],align:z,vAlign:c,font:s});else l.shapeComps.push({type:"text",cadType:a,handle:h.handle,color:C,text:m,scaleX:w,rotation:X,rect:[O,k,1e-5,1e-5],align:z,vAlign:c,font:s})}}},c.prototype.drawEllipse=function(){var B,a,j,E,$,H,K,C,Z,h,m,J,O,k,s,z,o,c,I,X,F,V,w=this,P=w._models;for(B=U.ELLIPSE,E=0,$=B.length;E<$;E++){a=B[E],j=P[a];for(C in j)for(Z=j[C],H=0,K=Z.length;H<K;H++){if(h=Z[H],m=h.major,J=Math.atan2(m.y,m.x),O=w.toLocal(Math.sqrt(m.x*m.x+m.y*m.y)),k=O*h.ratio,s=h.startAngle||0,z=h.angleLength||2*Math.PI,o=s+z,c=w.toLocal(h.center.x,1),I=w.toLocal(h.center.y,2),X=h.xInvert,F=h.yInvert^w.extrusionZNagative(h),F^=1,F||X?X&&F?(s=Math.PI+s,o=Math.PI+o,V=!1):(s=Math.PI*(X?1:2)-s,o=Math.PI*(X?1:2)-o,V=!0):V=!1,V){var _=s;s=o,o=_}J=2*Math.PI-J,w.shapeComps.push({type:"arc",cadType:a,handle:h.handle,borderColor:C,borderWidth:1,borderWidthAbsolute:!0,rotation:J,rect:[c-O,I-k,2*O,2*k],arcFrom:s,arcTo:o,arcClose:!1,arcOval:!0})}}},c.prototype._transformPoint=function(B,a,j){if(B){var E=B.x,$=B.y;return j=j||1,{x:E*j*a.a+$*a.c+a.tx,y:E*j*a.b+$*a.d+a.ty}}},c.prototype._groupEntity=function(B,a,j,E,$){var H=this,K=H.getColor(a,j);if(K&&(!H.options.filter||!H.options.filter(a,$))){var C,Z,h,m=H._transformPoint,J=a.type;if("DIMENSION"===J||"INSERT"===J){if(!a.block)return;var O=j.blocks[a.block];if(!O||!O.entities)return;if(!(h=H._blockDef[a.block]))return void console.log("no entity ",a.block);var k=E||{a:1,b:0,c:0,d:1,tx:0,ty:0};if("INSERT"===J){var s=a.scale?a.scale.x:1,z=a.scale?a.scale.y:1,o=0,c=1,U=0;if(a.deg&&(o=a.deg*Math.PI/180,o=2*Math.PI-o,c=Math.cos(o),U=Math.sin(o)),E){var I=s*c,X=s*U,F=-z*U,V=z*c,w=a.center.x,P=a.center.y;k={a:E.a*I+E.c*X,b:E.b*I+E.d*X,c:E.a*F+E.c*V,d:E.b*F+E.d*V,tx:E.a*w+E.c*P+E.tx,ty:E.b*w+E.d*P+E.ty}}else k={a:s*c,b:s*U,c:-z*U,d:z*c,tx:a.center.x,ty:a.center.y}}H.extrusionZNagative(a)&&(k.a*=-1,k.c*=-1,k.tx*=-1);var _=h.bound,l=(_.pos.x,_.pos.y,m({x:_.xMin,y:_.yMin},k)),e=m({x:_.xMax,y:_.yMax},k),n=m({x:_.xMin,y:_.yMax},k),b=m({x:_.xMax,y:_.yMin},k),S=H._bound;S.xMin=Math.min(S.xMin,l.x,e.x,n.x,b.x),S.yMin=Math.min(S.yMin,l.y,e.y,n.y,b.y),S.xMax=Math.max(S.xMax,l.x,e.x,n.x,b.x),S.yMax=Math.max(S.yMax,l.y,e.y,n.y,b.y);var v;return(v=H._models.BLOCK)||(H._models.BLOCK=v=[]),void v.push({handle:a.handle,block:a.block,transform:k})}(C=B[J])||(C=B[J]={}),(Z=C[K])||(Z=C[K]=[]);var g=H.extrusionZNagative(a)&&["POINT","LINE","ELLIPSE"].indexOf(J)<0;if(E||g){E||(E={a:1,b:0,c:0,d:1,tx:0,ty:0});var i={};for(var p in a)i[p]=a[p];i.radius&&(i.radius*=Math.sqrt(E.a*E.a+E.b*E.b)),i.textHeight&&(i.textHeight*=Math.sqrt(E.a*E.a+E.b*E.b));var d=g?-1:1;if(i.position=m(i.position,E,d),i.startPoint=m(i.startPoint,E,d),i.center=m(i.center,E,d),"ELLIPSE"===J){var x;x=m({x:a.major.x+a.center.x,y:a.major.y+a.center.y},E,d),i.major={x:x.x-i.center.x,y:x.y-i.center.y},H.extrusionZNagative(a)&&(i.major.x*=-1)}var W;i.vertices&&(W=[],i.vertices.forEach(function(B){var a=m(B,E,d);B.bulge&&(a.bulge=B.bulge),W.push(a)}),i.vertices=W),i.points&&(W=[],i.points.forEach(function(B){var a=m(B,E,d);B.bulge&&(a.bulge=B.bulge),W.push(a)}),i.points=W);var t=Math.atan2(E.b,E.a),r=Math.cos(t);i.yInvert=E.d*r<0,i.xInvert=E.a*r<0,0!==t&&(i.addonAngle=t),a=i}H.mergeBound(a),Z.push(a)}},c.prototype.getPointsBound=function(B){for(var a=1/0,j=1/0,E=-(1/0),$=-(1/0),H=0,K=B.length;H<K;H++){var C=B[H];a=Math.min(a,C.x),j=Math.min(j,C.y),E=Math.max(E,C.x),$=Math.max($,C.y)}return{xMin:a,yMin:j,xMax:E,yMax:$}},c.prototype.mergeBound=function(B){var a,j,E=this;j=B.type;for(a in U)if(U[a].indexOf(j)>=0)break;var $,H,K,C,Z,h,m,J,O,k,s,z,o,c,I,X,F,V,w,P,_,l=E.getPointsBound;switch(a){case"LINE":for($=l(B.vertices),P=B.vertices.length,V=0;V<P;V++)w=B.vertices[V],E._isStraightLine(w.bulge)||(V!==P-1||B.shape)&&(_=l(E._getBulgeSegment(w,B.vertices[(V+1)%P],w.bulge)),$.xMin=Math.min($.xMin,_.xMin),$.yMin=Math.min($.yMin,_.yMin),$.xMax=Math.max($.xMax,_.xMax),$.yMax=Math.max($.yMax,_.yMax));break;case"SOLID":$=l(B.points);break;case"POINT":if(!B.position)return;H=B.position.x,K=B.position.y,$={xMin:H,yMin:K,xMax:H,yMax:K};break;case"TEXT":if(!B.text||!B.text.length)return;H=B.position?B.position.x:B.startPoint.x,K=B.position?B.position.y:B.startPoint.y,F=B.height||B.textHeight||12,E._minFontSize=Math.min(E._minFontSize,F),$={xMin:H,yMin:K,xMax:H+F*B.text.length,yMax:K+F};break;case"CIRCLE":for(H=B.center.x,K=B.center.y,C=B.radius,Z=[],h=B.startAngle||0,m=h+(B.angleLength||2*Math.PI),J=B.xInvert^E.extrusionZNagative(B),O=B.yInvert,k=J?-1:1,s=O?-1:1,z=h;z<m+Math.PI/30;z+=Math.PI/30)z=Math.min(z,m),Z.push({x:H+k*C*Math.cos(z),y:K+s*C*Math.sin(z)});$=l(Z);break;case"ELLIPSE":for(H=B.center.x,K=B.center.y,Z=[],o=Math.sqrt(B.major.x*B.major.x+B.major.y*B.major.y),c=o*B.ratio,C=Math.atan2(B.major.y,B.major.x),I=Math.sin(C),X=Math.cos(C),h=B.startAngle||0,m=h+(B.angleLength||2*Math.PI),J=B.xInvert,O=B.yInvert^E.extrusionZNagative(B),k=J?-1:1,s=O?-1:1,z=h;z<m+Math.PI/30;z+=Math.PI/30){z=Math.min(z,m);var e=k*o*Math.cos(z),n=s*c*Math.sin(z);Z.push({x:H+(X*e-I*n),y:K+(I*e+X*n)})}$=l(Z);break;default:return}var b=E._bound;b.xMin=Math.min(b.xMin,$.xMin),b.yMin=Math.min(b.yMin,$.yMin),b.xMax=Math.max(b.xMax,$.xMax),b.yMax=Math.max(b.yMax,$.yMax)},c.prototype.parseFile=function(B){var a=this,j="string"==typeof a.options.sanitize?{sanitize:a.options.sanitize}:null,E=new K(j),$=E.parseSync(B);
a._dxf=$,a._isAc2015="AC1015"===$.header.$ACADVER,a._dxfViewport=a.getCameraParametersFromDxf($)},c.prototype.toLocal=function(B,a){var j,E=this;return j=2===a?-(B-E._shiftY):1===a?B-E._shiftX:B,j*E._scale},c.prototype.getCameraParametersFromDxf=function(B){var a,j,E,$,H,K,C,Z,h,m,J,O,k=0;if(!a&&B.tables&&B.tables.viewPort){m=B.tables.viewPort.viewPorts;for(h in m)if(J=m[h],O=J.viewDirectionFromTarget,J.center&&(J.renderMode===k||O&&0===O.x&&0===O.y&&1===O.z)){E=J.center,$=J.upperRightCorner,H=J.lowerLeftCorner,a={x:$.x,y:$.y},j={x:H.x,y:H.y},K=J.viewWidth||0,C=J.viewHeight||0,J.viewTarget&&(E={x:E.x+J.viewTarget.x,y:E.y+J.viewTarget.y});break}}return!a&&B.header&&(Z=B.header,Z.$EXTMIN&&Z.$EXTMAX&&(a=Z.$EXTMAX,j=Z.$EXTMIN)),K=Math.max(K,a.x-j.x),C=Math.max(C,a.y-j.y),E=E||{x:K/2+j.x,y:C/2+j.y},{width:K,height:C,x:E.x,y:E.y}},c.prototype.getColor=function(B,a){var E,$=this;if(B||console.log("no entity",B),a.tables&&a.tables.layer&&(E=a.tables.layer.layers[B.layer]),!E||E.visible){var H;B.color!==j?(H=B.color,0===H&&(H=$.options.defaultColor)):E&&(H=E.color),H&&16777215!==H||(H=$.options.defaultColor);var H="#"+((1<<24)+H).toString(16).slice(1);return $.options.mapColor&&(H=$.options.mapColor(H)),H}},c.prototype.sortBlocks=function(B){var j,E,$,H,K=a.keys(B),C={};for(j in B)if(E=B[j],E.entities)for(var Z=0,h=E.entities.length;Z<h;Z++)$=E.entities[Z],H=$.type,"DIMENSION"!==H&&"INSERT"!==H||$.block&&(C[j]||(C[j]=[]),C[j].push($.block));for(var m=K.length,J=m,O={},k=new Array(m),s=!1,z=function(B,a,j){if(j.indexOf(B)>=0)return void(s=!0);if(!O[a]){O[a]=!0;var E=C[B],$=E?E.length:0;if($){var H=j.concat(B);do{var Z=E[--$];if(z(Z,K.indexOf(Z),H),s)break}while($)}k[--m]=B}};J--;)O[J]||z(K[J],J,[]);return s?[]:k};var I=J.DxfWriter=function(B){var a=this;a.init(B)};I.prototype={},I.prototype.constructor=I,a.defineProperties(I.prototype,{}),I.prototype.init=function(B){var j=this,E=J.DxfWriter.template;E.converted||(a.keys(E).forEach(function(B){E[B]=E[B].join("\n")}),E.converted=!0),j._transformFunc=B.transformFunc||function(B){return B},j._drawingScale=B.scale,j._matchFunc=B.matchFunc||function(){return!0},j._maxHandleId=262128},I.prototype.toDxf=function(B,a){var j=this;j.dxfContent=B,j.gv=a,j.outputEntityLines=["ENTITIES","  0","ENDSEC"],j._fetchEntityContent(),j._collectGvEntity(),j._insertEntities();var E=j._write();return E},I.prototype._collectGvEntity=function(){var B=this;B.gv.dm().toDatas(B._matchFunc).each(function(a){var j=a.a("handle");j&&B._recordMaxHandleId(j)})},I.prototype._fetchEntityContent=function(){var B=this,a=B.dxfContent,j="ENDSEC",E=B.entitiesStartIndex=a.indexOf("ENTITIES"),$=B.entitiesEndIndex=a.indexOf(j,E)+j.length;B.entitiesContent=a.slice(E,$),B.dxfEntityLines=B.entitiesContent.split(/\r\n|\n/)},I.prototype._updateEntities=function(){var B=this,a=B.outputEntityLines,E=B.dxfEntityLines,$=B.gvEntities;a.push(E[0]);for(var H,K,C,Z,h,m,J,O,k,s,z,o,c,U,I=1,X=1e5,F=B._findCode,V=B._toFloat;X--;){if(Z=E[I+1].trim(),"ENDSEC"===Z){a.push(E[I]),a.push(E[I+1]);break}for(H=I+2;X--&&"0"!==E[H].trim();)H+=2;if(h=E[F("5",E,I,H)],B._recordMaxHandleId(h),m=$[h]){for(K=a.length,z=I;z<H;z++)a.push(E[z]);if(C=a.length,I=H,"edge"!==m.a("shapeType")){if("image"===m.a("shapeType")){for(J=B._getNodeRealScale(m),k=2*Math.PI-m.getRotation();k>=2*Math.PI;)k-=2*Math.PI;for(;k<0;)k+=2*Math.PI;O=B._transformFunc(m.getPosition()),Math.abs(J.x-1)<1e-5&&Math.abs(J.y+1)<1e-5&&(J.x=-1,J.y=1,k=2*Math.PI-k);var w={};[{key:"10",value:O.x},{key:"20",value:O.y},{key:"42",value:J.y,default:1,before:["50"]},{key:"41",value:J.x,default:1,dependOn:"42",before:["42","50"]},{key:"50",value:180*k/Math.PI,default:0}].forEach(function(B){if(o=B.key,c=B.value,U=B.default!==j&&Math.abs(c-B.default)<1e-5,c=V(c,"10"===o||"20"===o||"50"===o),s=F(o,a,K,C))c!==a[s].trim()&&(a[s]=c);else{if(U&&(!B.dependOn||w[B.dependOn]))return void(w[o]=!0);var E=!1;do{if(!B.before)break;if(s=j,B.before.forEach(function(B){var j=F(B,a,K,C);j&&(!s||j<s)&&(s=j)}),!s)break;a.splice(s-1,0," "+o,c),E=!0}while(!1);E||(a.push(" "+o),a.push(c)),C+=2}})}}else B._tryUpdateEdge(a,K,C,Z,m)}else console.log("have no entity with handle "+h+" "+Z),I=H}},I.prototype._recordMaxHandleId=function(B){var a=parseInt("0x"+B),j=this;j._maxHandleId=Math.max(j._maxHandleId,a)},I.prototype._nextHandleId=function(){var B=this,a=++B._maxHandleId;return a.toString(16).toUpperCase()},I.prototype._getNodeRealScale=function(B){var a=this,j=B.getScale(),E=B.getSize(),$=J.Default.getImage(B.getImage());return{x:j.x*E.width*$.scale/($.width*a._drawingScale),y:j.y*E.height*$.scale/($.height*a._drawingScale)}},I.template={INSERT:["  0","INSERT","  5","$HANDLE","330","1F","100","AcDbEntity","  8","0","100","AcDbBlockReference","  2","$BLOCK"," 10","$POSITION.X"," 20","$POSITION.Y"," 30","0.0"," 41","$SCALE.X"," 42","$SCALE.Y"," 50","$ROTATION"]},I.prototype._insertEntities=function(){var B,a=this;a.gv.dm().toDatas(a._matchFunc).each(function(j){if(B=null,j.a("addonBlock"))B=a._addonBlock(j);else if(j.a("addonText"))B=a._addonText(j);else if(j.a("addonARC")&&!j.s("shape.arc.oval")){var E=j.s("shape.arc.to"),$=j.s("shape.arc.from")||0;B=!E||Math.abs(E-$)>=2*Math.PI?a._addonCircle(j):a._addonARC(j)}else j.a("addonARC")&&j.s("shape.arc.oval")?B=a._addonEllipse(j):j.a("addonLine")?B=a._addonLine(j):j.a("addonRect")&&(B=a._addonRect(j));if(B){var H=B.length,K=a.outputEntityLines.length,C=K+H;a.outputEntityLines.length=C,a.outputEntityLines[C-1]=a.outputEntityLines[K-1],a.outputEntityLines[C-2]=a.outputEntityLines[K-2];for(var Z=0,h=K-2;Z<H;++Z,++h)a.outputEntityLines[h]=B[Z]}})};var X=function(B){if(B instanceof J.Shape){var a=new J.Matrix,j=B.getPosition();return a.translate(-j.x,-j.y).scale(B.getScaleX(),B.getScaleY()).rotate(B.getRotation()).translate(j.x,j.y),a}return B.getMatrix?B.getMatrix():new J.Matrix};I.prototype._addonRect=function(B){var a=this,j=B.getPoints(),E=B.getSegments(),$=!0;E&&($=5===E.get(E.size()-1));var H,K=["  0","LWPOLYLINE","  5",B.a("handle")||a._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbPolyline"," 90","        "+j.size()," 70","     "+($?1:0)," 43","0.0"],C=a._toFloat,Z=X(B);return j.each(function(B){H=a._transformFunc(Z.tf(B)),K.push.apply(K,[" 10",C(H.x,!0)," 20",C(H.y,!0)])}),K},I.prototype._addonCircle=function(B){var a=this,j=["  0","CIRCLE","  5",B.a("handle")||a._nextHandleId(),"330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"],E=a._toFloat,$=a._transformFunc(B.getPosition());j.push.apply(j,[" 10",E($.x,!0)," 20",E($.y,!0)," 30","0.0"]);var H=B.getScale(),K=B.getWidth()*H.x,C=B.getHeight()*H.y;return j.push.apply(j,[" 40",.5*Math.min(K,C)/a._drawingScale]),j},I.prototype._addonLine=function(B){var a,j=this,E=[],$=j._toFloat,H=B.getPoints(),K=X(B),C=j._transformFunc(K.tf(H.get(0))),Z=B.a("handle")||j._nextHandleId();return H.each(function(B,H){0!==H&&(E.push.apply(E,["  0","LINE","  5",Z,"330","1F","100","AcDbEntity","  8","0","100","AcDbLine"]),E.push.apply(E,[" 10",$(C.x,!0)," 20",$(C.y,!0)," 30","0.0"]),a=j._transformFunc(K.tf(B)),E.push.apply(E,[" 11",$(a.x,!0)," 21",$(a.y,!0)," 31","0.0"]),C=a,Z=j._nextHandleId())}),E},I.prototype._addonEllipse=function(B){var a=this,j=["  0","ELLIPSE","  5",B.a("handle")||a._nextHandleId()];j.push.apply(j,["330","1F","100","AcDbEntity","  8","0","100","AcDbEllipse"]);var E=a._toFloat,$=a._transformFunc(B.getPosition());j.push(" 10");j.push(E($.x,!0));j.push(" 20");j.push(E($.y,!0)),j.push.apply(j,[" 30","0.0"]);var H,K=B.getScale(),C=B.getWidth()*K.x/a._drawingScale,Z=B.getHeight()*K.y/a._drawingScale,h=.5*Math.max(C,Z),m=0;C>Z?H={x:h,y:0}:(H={x:0,y:h},m=.5*-Math.PI);var J=-B.getRotation(),O=Math.sin(J),k=Math.cos(J),s=k*H.x-O*H.y,z=O*H.x+k*H.y;j.push.apply(j,[" 11",E(s,!0)," 21",E(z,!0)," 31","0.0"]),j.push.apply(j,["210","0.0","220","0.0","230","1.0"]);var o=C/Z;o>1&&(o=1/o),j.push.apply(j,[" 40",E(o,!0)]);var c=B.s("shape.arc.from"),U=B.s("shape.arc.to"),I=2*Math.PI-U+m,X=(I+U-c)%(2*Math.PI);return j.push.apply(j,[" 41",I," 42",X||2*Math.PI]),j},I.prototype._addonARC=function(B){var a=this,j=["  0","ARC","  5",B.a("handle")||a._nextHandleId()];j.push.apply(j,["330","1F","100","AcDbEntity","  8","0","100","AcDbCircle"]);var E=a._toFloat,$=a._transformFunc(B.getPosition());j.push(" 10");j.push(E($.x,!0));j.push(" 20");j.push(E($.y,!0)),j.push.apply(j,[" 30","0.0"]);var H=B.getScale(),K=B.getWidth()*H.x,C=B.getHeight()*H.y,Z=.5*Math.min(K,C);j.push.apply(j,[" 40",E(Z/a._drawingScale,!0)]),j.push.apply(j,["100","AcDbArc"]);var h=B.getRotation(),m=B.s("shape.arc.from"),J=B.s("shape.arc.to"),O=2*Math.PI,k=(O-J-h)%O,s=(k+J-m)%O;return s=s||2*Math.PI,j.push.apply(j,[" 50",E(180*k/Math.PI,!0)," 51",E(180*s/Math.PI,!0)]),j};var F={left:0,center:1,right:2},V={top:3,middle:2,bottom:1};I.prototype._addonText=function(B){var a=this,j=["  0","TEXT","  5",B.a("handle")||a._nextHandleId()];j.push.apply(j,["330","1F","100","AcDbEntity","  8","0","100","AcDbText"]);var E=B.s("text.font")||"16px Standard",$=B.s("text"),H=J.Default.getTextSize(E,$),K=B.getScale(),C=parseFloat(E)/a._drawingScale*K.y,Z=C/H.height*H.width,h=a._toFloat,m=a._transformFunc(B.getPosition());m.y+=C/4;var O=j.push(" 10");j.push(h(m.x,!0));var k=j.push(" 20");j.push(h(m.y,!0)),j.push.apply(j,[" 30","0.0"]),j.push(" 40"),j.push(C),j.push("  1"),j.push($);var s=2*Math.PI-B.getRotation();j.push(" 50"),j.push(h(180*s/Math.PI%360,!0)),j.push(" 41"),j.push(K.x/K.y),E=E.substr(E.indexOf("px")+3).split(","),j.push("  7"),j.push(E[0]);var z=B.s("text.align")||"left",o=B.s("text.vAlign")||"bottom";if("left"!==z&&(j.push(" 72"),j.push("     "+F[z])),"bottom"!==o||"left"!==z){j.push(" 11"),j.push(h(m.x,!0)),j.push(" 21"),j.push(h(m.y,!0)),j.push.apply(j,[" 31","0.0"]);var c=0,U=0;"center"===z?c=.5*Z:"right"===z&&(c=Z),c*=K.x,"top"===o?U=C:"middle"===o&&(U=.5*C),U*=K.y;var I=Math.cos(s+Math.PI),X=Math.sin(s+Math.PI);j[O]=I*c-X*U+m.x,j[k]=X*c+I*U+m.y}return j.push.apply(j,["100","AcDbText"]),"bottom"!==o&&(j.push(" 73"),j.push("     "+V[o])),j},I.prototype._addonBlock=function(B){var a=this,j=J.DxfWriter.template.INSERT;j=j.replace("$HANDLE",B.a("handle")||a._nextHandleId()),j=j.replace("$BLOCK",B.getImage());for(var E=a._getNodeRealScale(B),$=2*Math.PI-B.getRotation();$>=2*Math.PI;)$-=2*Math.PI;for(;$<0;)$+=2*Math.PI;var H=a._transformFunc(B.getPosition());Math.abs(E.x-1)<1e-5&&Math.abs(E.y+1)<1e-5&&(E.x=-1,E.y=1,$=2*Math.PI-$);var K=a._toFloat;return j=j.replace("$POSITION.X",K(H.x,!0)),j=j.replace("$POSITION.Y",K(H.y,!0)),j=j.replace("$SCALE.X",K(E.x)),j=j.replace("$SCALE.Y",K(E.y)),j=j.replace("$ROTATION",K(180*$/Math.PI,!0)),j.split(/\r\n|\n/)},I.prototype._tryUpdateEdge=function(B,a,j,E,$){var H=this,K=J.Default.getInternal(),C=K.getEdgeAgentPosition(H.gv,$.getSourceAgent(),$.s("edge.source.position"),$.s("edge.source.offset.x"),$.s("edge.source.offset.y"),$.s("edge.source.anchor.x"),$.s("edge.source.anchor.y")),Z=K.getEdgeAgentPosition(H.gv,$.getTargetAgent(),$.s("edge.target.position"),$.s("edge.target.offset.x"),$.s("edge.target.offset.y"),$.s("edge.target.anchor.x"),$.s("edge.target.anchor.y"));C=H._transformFunc(C),Z=H._transformFunc(Z);var h=H._findCode;if("LINE"===E)B[h("10",B,a,j)]=C.x,B[h("20",B,a,j)]=C.y,B[h("11",B,a,j)]=Z.x,B[h("21",B,a,j)]=Z.y;else if("LWPOLYLINE"===E){for(var m,O=h("10",B,a,j),k=O;m=h("10",B,k+1,j);)k=m;k=(m=h("30",B,k+1,j))?m:h("20",B,k+1,j),B.splice(O-1,k-O+2);var s=[C];$.s("edge.points").each(function(B){s.push(H._transformFunc(B))}),s.push(Z);var z=O-1;s.forEach(function(a){B.splice(z,0,"10",a.x,"20",a.y),z+=4})}},I.prototype._findCode=function(B,a,j,E){for(var $=j,H=!1;$<E;){if(B===a[$].trim()){H=!0;break}$+=2}if(H)return $+1},I.prototype._toFloat=function(B,a){return a||(B=Math.round(1e8*B)/1e8),B=""+B,B.indexOf(".")<0&&(B+=".0"),B},I.prototype._write=function(){var B=this,a=B.dxfContent,j=B.outputEntityLines.join("\n"),E=B.entitiesStartIndex,$=B.entitiesEndIndex;return a.slice(0,E)+j+a.slice($)}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object),function(B,a,j){var E="ht",$=B[E],H=$.Default,K=H.getInternal();K.addMethod(H,{fontToShape:function(B,a,j){var E=new $.FontConverter(a);return E.toShape(B,j)}}),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var j;j="undefined"!=typeof B?B:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,j.opentype=a()}}(function(){return function B(a,j,E){function $(K,C){if(!j[K]){if(!a[K]){var Z="function"==typeof require&&require;if(!C&&Z)return Z(K,!0);if(H)return H(K,!0);var h=new Error("Cannot find module '"+K+"'");throw h.code="MODULE_NOT_FOUND",h}var m=j[K]={exports:{}};a[K][0].call(m.exports,function(B){var j=a[K][1][B];return $(j?j:B)},m,m.exports,B,a,j,E)}return j[K].exports}for(var H="function"==typeof require&&require,K=0;K<E.length;K++)$(E[K]);return $}({1:[function(B,a,j){j.argument=function(B,a){if(!B)throw new Error(a)},j.assert=j.argument},{}],2:[function(B,a,j){function E(B,a,j,E,$){B.beginPath(),B.moveTo(a,j),B.lineTo(E,$),B.stroke()}j.line=E},{}],3:[function(B,j,E){function $(B){this.font=B}function H(B){this.cmap=B}function K(B,a){this.encoding=B,this.charset=a}function C(B){var a;switch(B.version){case 1:this.names=E.standardNames.slice();break;case 2:for(this.names=new Array(B.numberOfGlyphs),a=0;a<B.numberOfGlyphs;a++)B.glyphNameIndex[a]<E.standardNames.length?this.names[a]=E.standardNames[B.glyphNameIndex[a]]:this.names[a]=B.names[B.glyphNameIndex[a]-E.standardNames.length];break;case 2.5:for(this.names=new Array(B.numberOfGlyphs),a=0;a<B.numberOfGlyphs;a++)this.names[a]=E.standardNames[a+B.glyphNameIndex[a]];break;case 3:this.names=[]}}function Z(B){var j,E,$,H,K,C,Z=B.tables.cmap;if(Z)for(j=B.tables.cmap.glyphIndexMap,E=a.keys(j),$=0;$<E.length;$+=1)H=E[$],K=j[H],C=B.glyphs[K],C.addUnicode(parseInt(H));for($=0;$<B.glyphs.length;$+=1)C=B.glyphs[$],B.cffEncoding?C.name=B.cffEncoding.charset[$]:C.name=B.glyphNames.glyphIndexToName($)}var h=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],m=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],J=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],O=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];$.prototype.charToGlyphIndex=function(B){var a,j,E,$,H;if(a=B.charCodeAt(0),j=this.font.glyphs,!j)return null;for(E=0;E<j.length;E+=1)for($=j[E],H=0;H<$.unicodes.length;H+=1)if($.unicodes[H]===a)return E},H.prototype.charToGlyphIndex=function(B){return this.cmap.glyphIndexMap[B.charCodeAt(0)]||0},K.prototype.charToGlyphIndex=function(B){var a,j;return a=B.charCodeAt(0),j=this.encoding[a],this.charset.indexOf(j)},C.prototype.nameToGlyphIndex=function(B){return this.names.indexOf(B)},C.prototype.glyphIndexToName=function(B){return this.names[B]},E.cffStandardStrings=h,E.cffStandardEncoding=m,E.cffExpertEncoding=J,E.standardNames=O,E.DefaultEncoding=$,E.CmapEncoding=H,E.CffEncoding=K,E.GlyphNames=C,E.addGlyphNames=Z},{}],4:[function(a,E,H){function K(B){B=B||{},this.familyName=B.familyName||" ",this.styleName=B.styleName||" ",this.designer=B.designer||" ",this.designerURL=B.designerURL||" ",this.manufacturer=B.manufacturer||" ",this.manufacturerURL=B.manufacturerURL||" ",this.license=B.license||" ",this.licenseURL=B.licenseURL||" ",this.version=B.version||"Version 0.1",this.description=B.description||" ",this.copyright=B.copyright||" ",this.trademark=B.trademark||" ",this.unitsPerEm=B.unitsPerEm||1e3,this.supported=!0,this.glyphs=B.glyphs||[],this.encoding=new h.DefaultEncoding(this),this.tables={}}var C=a("./path"),Z=a("./tables/sfnt"),h=a("./encoding");K.prototype.hasChar=function(B){return null!==this.encoding.charToGlyphIndex(B)},K.prototype.charToGlyphIndex=function(B){return this.encoding.charToGlyphIndex(B)},K.prototype.charToGlyph=function(B){var a,j;return a=this.charToGlyphIndex(B),j=this.glyphs[a],j||(j=this.glyphs[0]),j},K.prototype.stringToGlyphs=function(B){var a,j,E;for(E=[],a=0;a<B.length;a+=1)j=B[a],E.push(this.charToGlyph(j));return E},K.prototype.nameToGlyphIndex=function(B){return this.glyphNames.nameToGlyphIndex(B)},K.prototype.nameToGlyph=function(B){var a,j;return a=this.nametoGlyphIndex(B),j=this.glyphs[a],j||(j=this.glyphs[0]),j},K.prototype.glyphIndexToName=function(B){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(B):""},K.prototype.getKerningValue=function(B,a){B=B.index||B,a=a.index||a;var j=this.getGposKerningValue;return j?j(B,a):this.kerningPairs[B+","+a]||0},K.prototype.forEachGlyph=function(B,a,E,$,H,K){var C,Z,h,m,J,O;if(this.supported)for(a=a!==j?a:0,E=E!==j?E:0,$=$!==j?$:72,H=H||{},C=H.kerning===j||H.kerning,Z=1/this.unitsPerEm*$,h=this.stringToGlyphs(B),m=0;m<h.length;m+=1)J=h[m],K(J,a,E,$,H),J.advanceWidth&&(a+=J.advanceWidth*Z),C&&m<h.length-1&&(O=this.getKerningValue(J,h[m+1]),a+=O*Z)},K.prototype.getPath=function(B,a,j,E,$){var H=new C.Path;return this.forEachGlyph(B,a,j,E,$,function(B,a,j,E){var $=B.getPath(a,j,E);H.extend($)}),H},K.prototype.draw=function(B,a,j,E,$,H){this.getPath(a,j,E,$,H).draw(B)},K.prototype.drawPoints=function(B,a,j,E,$,H){this.forEachGlyph(a,j,E,$,H,function(a,j,E,$){a.drawPoints(B,j,E,$)})},K.prototype.drawMetrics=function(B,a,j,E,$,H){this.forEachGlyph(a,j,E,$,H,function(a,j,E,$){a.drawMetrics(B,j,E,$)})},K.prototype.validate=function(){function B(B,a){B||j.push(a)}function a(a){B(E[a]&&E[a].trim().length>0,"No "+a+" specified.")}var j=[],E=this;a("familyName"),a("weightName"),a("manufacturer"),a("copyright"),a("version"),B(this.unitsPerEm>0,"No unitsPerEm specified.")},K.prototype.toTables=function(){return Z.fontToTable(this)},K.prototype.toBuffer=function(){for(var B=this.toTables(),a=B.encode(),j=new ArrayBuffer(a.length),E=new Uint8Array(j),$=0;$<a.length;$++)E[$]=a[$];return j},K.prototype.download=function(){var a=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",j=this.toBuffer();B.requestFileSystem=B.requestFileSystem||B.webkitRequestFileSystem,B.requestFileSystem(B.TEMPORARY,j.byteLength,function(B){B.root.getFile(a,{create:!0},function(B){B.createWriter(function(a){var E=new DataView(j),H=new Blob([E],{type:"font/opentype"});a.write(H),a.addEventListener("writeend",function(){location.href=B.toURL()},$.Default.eventListenerOptionsFalse)})})},function(B){throw B})},H.Font=K},{"./encoding":3,"./path":8,"./tables/sfnt":23}],5:[function(B,a,E){function $(B){this.font=B.font||null,this.index=B.index||0,this.name=B.name||null,this.unicode=B.unicode||j,this.unicodes=B.unicodes||B.unicode!==j?[B.unicode]:[],this.xMin=B.xMin||0,this.yMin=B.yMin||0,this.xMax=B.xMax||0,this.yMax=B.yMax||0,this.advanceWidth=B.advanceWidth||0,this.path=B.path||null}var H=B("./check"),K=B("./draw"),C=B("./path");$.prototype.addUnicode=function(B){0===this.unicodes.length&&(this.unicode=B),this.unicodes.push(B)},$.prototype.getPath=function(B,a,E){var $,H,K,Z;B=B!==j?B:0,a=a!==j?a:0,E=E!==j?E:72,$=1/this.font.unitsPerEm*E,H=new C.Path,K=this.path.commands;for(var h=0;h<K.length;h+=1)Z=K[h],"M"===Z.type?H.moveTo(B+Z.x*$,a+-Z.y*$):"L"===Z.type?H.lineTo(B+Z.x*$,a+-Z.y*$):"Q"===Z.type?H.quadraticCurveTo(B+Z.x1*$,a+-Z.y1*$,B+Z.x*$,a+-Z.y*$):"C"===Z.type?H.curveTo(B+Z.x1*$,a+-Z.y1*$,B+Z.x2*$,a+-Z.y2*$,B+Z.x*$,a+-Z.y*$):"Z"===Z.type&&H.closePath();return H},$.prototype.getContours=function(){var B,a,E,$;if(this.points===j)return[];for(B=[],a=[],E=0;E<this.points.length;E+=1)$=this.points[E],a.push($),$.lastPointOfContour&&(B.push(a),a=[]);return H.argument(0===a.length,"There are still points left in the current contour."),B},$.prototype.getMetrics=function(){for(var B=this.path.commands,a=[],j=[],E=0;E<B.length;E+=1){var $=B[E];"Z"!==$.type&&(a.push($.x),j.push($.y)),"Q"!==$.type&&"C"!==$.type||(a.push($.x1),j.push($.y1)),"C"===$.type&&(a.push($.x2),j.push($.y2))}var H={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,j),leftSideBearing:0};return H.rightSideBearing=this.advanceWidth-H.leftSideBearing-(H.xMax-H.xMin),H},$.prototype.draw=function(B,a,j,E){this.getPath(a,j,E).draw(B)},$.prototype.drawPoints=function(B,a,E,$){function H(a,j,E,$){var H,K=2*Math.PI;for(B.beginPath(),H=0;H<a.length;H+=1)B.moveTo(j+a[H].x*$,E+a[H].y*$),B.arc(j+a[H].x*$,E+a[H].y*$,2,0,K,!1);B.closePath(),B.fill()}var K,C,Z,h,m,J;for(a=a!==j?a:0,E=E!==j?E:0,$=$!==j?$:24,K=1/this.font.unitsPerEm*$,Z=[],h=[],m=this.path,C=0;C<m.commands.length;C+=1)J=m.commands[C],J.x!==j&&Z.push({x:J.x,y:-J.y}),J.x1!==j&&h.push({x:J.x1,y:-J.y1}),J.x2!==j&&h.push({x:J.x2,y:-J.y2});B.fillStyle="blue",H(Z,a,E,K),B.fillStyle="red",H(h,a,E,K)},$.prototype.drawMetrics=function(B,a,E,$){var H;a=a!==j?a:0,E=E!==j?E:0,$=$!==j?$:24,H=1/this.font.unitsPerEm*$,B.lineWidth=1,B.strokeStyle="black",K.line(B,a,-1e4,a,1e4),K.line(B,-1e4,E,1e4,E),B.strokeStyle="blue",K.line(B,a+this.xMin*H,-1e4,a+this.xMin*H,1e4),K.line(B,a+this.xMax*H,-1e4,a+this.xMax*H,1e4),K.line(B,-1e4,E+-this.yMin*H,1e4,E+-this.yMin*H),K.line(B,-1e4,E+-this.yMax*H,1e4,E+-this.yMax*H),B.strokeStyle="green",K.line(B,a+this.advanceWidth*H,-1e4,a+this.advanceWidth*H,1e4)},E.Glyph=$},{"./check":1,"./draw":2,"./path":8}],6:[function(a,j,E){function $(B){var a,j=new ArrayBuffer(B.length),E=new Uint8Array(j);for(a=0;a<B.length;a+=1)E[a]=B[a];return j}function H(B,j){var E=a("fs");E.readFile(B,function(B,a){return B?j(B.message):void j(null,$(a))})}function K(B,a){var j=new XMLHttpRequest;j.open("get",B,!0),j.responseType="arraybuffer",j.onload=function(){return 200!==j.status?a("Font could not be loaded: "+j.statusText):a(null,j.response||j.responseText)},j.send()}function C(B){
var a,j,E,$,H,K,C,Z,J,k,e,n,b,S,v,g,i,p;if(a=new m.Font,j=new DataView(B,0),E=O.getFixed(j,0),1===E)a.outlinesFormat="truetype";else{if(E=O.getTag(j,0),"OTTO"!==E)throw new Error("Unsupported OpenType version "+E);a.outlinesFormat="cff"}for($=O.getUShort(j,4),K=12,H=0;H<$;H+=1){switch(C=O.getTag(j,K),Z=O.getULong(j,K+8),C){case"cmap":a.tables.cmap=s.parse(j,Z),a.encoding=new h.CmapEncoding(a.tables.cmap),a.encoding||(a.supported=!1);break;case"head":a.tables.head=U.parse(j,Z),a.unitsPerEm=a.tables.head.unitsPerEm,v=a.tables.head.indexToLocFormat;break;case"hhea":a.tables.hhea=I.parse(j,Z),a.ascender=a.tables.hhea.ascender,a.descender=a.tables.hhea.descender,a.numberOfHMetrics=a.tables.hhea.numberOfHMetrics;break;case"hmtx":J=Z;break;case"maxp":a.tables.maxp=w.parse(j,Z),a.numGlyphs=g=a.tables.maxp.numGlyphs;break;case"name":a.tables.name=P.parse(j,Z),a.familyName=a.tables.name.fontFamily,a.styleName=a.tables.name.fontSubfamily;break;case"OS/2":a.tables.os2=_.parse(j,Z);break;case"post":a.tables.post=l.parse(j,Z),a.glyphNames=new h.GlyphNames(a.tables.post);break;case"glyf":k=Z;break;case"loca":e=Z;break;case"CFF ":n=Z;break;case"kern":b=Z;break;case"GPOS":S=Z}K+=16}return k&&e?(p=0===v,i=V.parse(j,e,g,p),a.glyphs=o.parse(j,k,i,a),X.parse(j,J,a.numberOfHMetrics,a.numGlyphs,a.glyphs),h.addGlyphNames(a)):n?(z.parse(j,n,a),h.addGlyphNames(a)):a.supported=!1,a.supported&&(b?a.kerningPairs=F.parse(j,b):a.kerningPairs={},S&&c.parse(j,S,a)),a}function Z(a,j){var E="undefined"==typeof B,$=E?H:K;$(a,function(B,a){if(B)return j(B);var E=C(a);return E.supported?j(null,E):j("Font is not supported (is this a Postscript font?)")})}var h=a("./encoding"),m=a("./font"),J=a("./glyph"),O=a("./parse"),k=a("./path"),s=a("./tables/cmap"),z=a("./tables/cff"),o=a("./tables/glyf"),c=a("./tables/gpos"),U=a("./tables/head"),I=a("./tables/hhea"),X=a("./tables/hmtx"),F=a("./tables/kern"),V=a("./tables/loca"),w=a("./tables/maxp"),P=a("./tables/name"),_=a("./tables/os2"),l=a("./tables/post");E._parse=O,E.Font=m.Font,E.Glyph=J.Glyph,E.Path=k.Path,E.parse=C,E.load=Z},{"./encoding":3,"./font":4,"./glyph":5,"./parse":7,"./path":8,"./tables/cff":10,"./tables/cmap":11,"./tables/glyf":12,"./tables/gpos":13,"./tables/head":14,"./tables/hhea":15,"./tables/hmtx":16,"./tables/kern":17,"./tables/loca":18,"./tables/maxp":19,"./tables/name":20,"./tables/os2":21,"./tables/post":22,fs:j}],7:[function(B,a,E){function $(B,a){this.data=B,this.offset=a,this.relativeOffset=0}E.getByte=function(B,a){return B.getUint8(a)},E.getCard8=E.getByte,E.getUShort=function(B,a){return B.getUint16(a,!1)},E.getCard16=E.getUShort,E.getShort=function(B,a){return B.getInt16(a,!1)},E.getULong=function(B,a){return B.getUint32(a,!1)},E.getFixed=function(B,a){var j,E;return j=B.getInt16(a,!1),E=B.getUint16(a+2,!1),j+E/65535},E.getTag=function(B,a){var j,E="";for(j=a;j<a+4;j+=1)E+=String.fromCharCode(B.getInt8(j));return E},E.getOffset=function(B,a,j){var E,$;for($=0,E=0;E<j;E+=1)$<<=8,$+=B.getUint8(a+E);return $},E.getBytes=function(B,a,j){var E,$;for(E=[],$=a;$<j;$+=1)E.push(B.getUint8($));return E},E.bytesToString=function(B){var a,j;for(a="",j=0;j<B.length;j+=1)a+=String.fromCharCode(B[j]);return a};var H={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};$.prototype.parseByte=function(){var B=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,B},$.prototype.parseChar=function(){var B=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,B},$.prototype.parseCard8=$.prototype.parseByte,$.prototype.parseUShort=function(){var B=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,B},$.prototype.parseCard16=$.prototype.parseUShort,$.prototype.parseSID=$.prototype.parseUShort,$.prototype.parseOffset16=$.prototype.parseUShort,$.prototype.parseShort=function(){var B=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,B},$.prototype.parseF2Dot14=function(){var B=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,B},$.prototype.parseULong=function(){var B=E.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,B},$.prototype.parseFixed=function(){var B=E.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,B},$.prototype.parseOffset16List=$.prototype.parseUShortList=function(B){for(var a=new Array(B),j=this.data,$=this.offset+this.relativeOffset,H=0;H<B;H++)a[H]=E.getUShort(j,$),$+=2;return this.relativeOffset+=2*B,a},$.prototype.parseString=function(B){var a=this.data,j=this.offset+this.relativeOffset,E="";this.relativeOffset+=B;for(var $=0;$<B;$++)E+=String.fromCharCode(a.getUint8(j+$));return E},$.prototype.parseTag=function(){return this.parseString(4)},$.prototype.parseLongDateTime=function(){var B=E.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,B},$.prototype.parseFixed=function(){var B=E.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,B/65536},$.prototype.parseVersion=function(){var B=E.getUShort(this.data,this.offset+this.relativeOffset),a=E.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,B+a/4096/10},$.prototype.skip=function(B,a){a===j&&(a=1),this.relativeOffset+=H[B]*a},E.Parser=$},{}],8:[function(B,a,E){function $(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}$.prototype.moveTo=function(B,a){this.commands.push({type:"M",x:B,y:a})},$.prototype.lineTo=function(B,a){this.commands.push({type:"L",x:B,y:a})},$.prototype.curveTo=$.prototype.bezierCurveTo=function(B,a,j,E,$,H){this.commands.push({type:"C",x1:B,y1:a,x2:j,y2:E,x:$,y:H})},$.prototype.quadTo=$.prototype.quadraticCurveTo=function(B,a,j,E){this.commands.push({type:"Q",x1:B,y1:a,x:j,y:E})},$.prototype.close=$.prototype.closePath=function(){this.commands.push({type:"Z"})},$.prototype.extend=function(B){B.commands&&(B=B.commands),Array.prototype.push.apply(this.commands,B)},$.prototype.draw=function(B){var a,j;for(B.beginPath(),a=0;a<this.commands.length;a+=1)j=this.commands[a],"M"===j.type?B.moveTo(j.x,j.y):"L"===j.type?B.lineTo(j.x,j.y):"C"===j.type?B.bezierCurveTo(j.x1,j.y1,j.x2,j.y2,j.x,j.y):"Q"===j.type?B.quadraticCurveTo(j.x1,j.y1,j.x,j.y):"Z"===j.type&&B.closePath();this.fill&&(B.fillStyle=this.fill,B.fill()),this.stroke&&(B.strokeStyle=this.stroke,B.lineWidth=this.strokeWidth,B.stroke())},$.prototype.toPathData=function(B){function a(a){return Math.round(a)===a?""+Math.round(a):a.toFixed(B)}function E(){for(var B="",j=0;j<arguments.length;j+=1){var E=arguments[j];E>=0&&j>0&&(B+=" "),B+=a(E)}return B}B=B!==j?B:2;for(var $="",H=0;H<this.commands.length;H+=1){var K=this.commands[H];"M"===K.type?$+="M"+E(K.x,K.y):"L"===K.type?$+="L"+E(K.x,K.y):"C"===K.type?$+="C"+E(K.x1,K.y1,K.x2,K.y2,K.x,K.y):"Q"===K.type?$+="Q"+E(K.x1,K.y1,K.x,K.y):"Z"===K.type&&($+="Z")}return $},$.prototype.toSVG=function(B){var a='<path d="';return a+=this.toPathData(B),a+='"',this.fill&"black"!==this.fill&&(a+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(a+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),a+="/>"},E.Path=$},{}],9:[function(B,E,$){function H(B,E,$){var H;for(H=0;H<E.length;H+=1){var K=E[H];this[K.name]=K.value}if(this.tableName=B,this.fields=E,$){var C=a.keys($);for(H=0;H<C.length;H+=1){var Z=C[H],h=$[Z];this[Z]!==j&&(this[Z]=h)}}}var K=B("./check"),C=B("./types").encode,Z=B("./types").sizeOf;H.prototype.sizeOf=function(){for(var B=0,a=0;a<this.fields.length;a+=1){var E=this.fields[a],$=this[E.name];if($===j&&($=E.value),"function"==typeof $.sizeOf)B+=$.sizeOf();else{var H=Z[E.type];K.assert("function"==typeof H,"Could not find sizeOf function for field"+E.name),B+=H($)}}return B},H.prototype.encode=function(){return C.TABLE(this)},$.Table=H},{"./check":1,"./types":24}],10:[function(B,a,E){function $(B,a){if(B===a)return!0;if(Array.isArray(B)&&Array.isArray(a)){if(B.length!==a.length)return!1;for(var j=0;j<B.length;j+=1)if(!$(B[j],a[j]))return!1;return!0}return!1}function H(B,a,j){var E,$,H,K,C,Z,h,m,J;if(E=[],$=[],H=x.getCard16(B,a),0!==H){for(C=x.getByte(B,a+2),Z=a+(H+1)*C+2,h=a+3,m=0;m<H+1;m+=1)E.push(x.getOffset(B,h,C)),h+=C;K=Z+E[H]}else K=a+2;for(m=0;m<E.length-1;m+=1)J=x.getBytes(B,Z+E[m],Z+E[m+1]),j&&(J=j(J)),$.push(J);return{objects:$,startOffset:a,endOffset:K}}function K(B){var a,j,E,$,H,K;for(a="",j=15,E=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){if($=B.parseByte(),H=$>>4,K=15&$,H===j)break;if(a+=E[H],K===j)break;a+=E[K]}return parseFloat(a)}function C(B,a){var j,E,$,H;if(28===a)return j=B.parseByte(),E=B.parseByte(),j<<8|E;if(29===a)return j=B.parseByte(),E=B.parseByte(),$=B.parseByte(),H=B.parseByte(),j<<24|E<<16|$<<8|H;if(30===a)return K(B);if(a>=32&&a<=246)return a-139;if(a>=247&&a<=250)return j=B.parseByte(),256*(a-247)+j+108;if(a>=251&&a<=254)return j=B.parseByte(),256*-(a-251)-j-108;throw new Error("Invalid b0 "+a)}function Z(B){var a,j,E,$,H;for(a={},$=0;$<B.length;$+=1){if(j=B[$][0],E=B[$][1],H=1===E.length?E[0]:E,a.hasOwnProperty(j))throw new Error("Object "+a+" already has key "+j);a[j]=H}return a}function h(B,a,E){var $,H,K,h;for(a=a!==j?a:0,$=new x.Parser(B,a),H=[],K=[],E=E!==j?E:B.length;$.relativeOffset<E;)h=$.parseByte(),h<=21?(12===h&&(h=1200+$.parseByte()),H.push([h,K]),K=[]):K.push(C($,h));return Z(H)}function m(B,a){return a=a<=390?p.cffStandardStrings[a]:B[a-391]}function J(B,a,E){var $,H,K,C;for(C={},$=0;$<a.length;$+=1)H=a[$],K=B[H.op],K===j&&(K=H.value!==j?H.value:null),"SID"===H.type&&(K=m(E,K)),C[H.name]=K;return C}function O(B,a){var j={};return j.formatMajor=x.getCard8(B,a),j.formatMinor=x.getCard8(B,a+1),j.size=x.getCard8(B,a+2),j.offsetSize=x.getCard8(B,a+3),j.startOffset=a,j.endOffset=a+4,j}function k(B,a){var j;return j=h(B,0,B.byteLength),J(j,r,a)}function s(B,a,j,E){var $;return $=h(B,a,j),J($,G,E)}function z(B,a,j,E){var $,H,K,C,Z,h;if($=new x.Parser(B,a),j-=1,K=[".notdef"],H=$.parseCard8(),0===H)for(C=0;C<j;C+=1)Z=$.parseSID(),K.push(m(E,Z));else if(1===H)for(;K.length<=j;)for(Z=$.parseSID(),h=$.parseCard8(),C=0;C<=h;C+=1)K.push(m(E,Z)),Z+=1;else{if(2!==H)throw new Error("Unknown charset format "+H);for(;K.length<=j;)for(Z=$.parseSID(),h=$.parseCard16(),C=0;C<=h;C+=1)K.push(m(E,Z)),Z+=1}return K}function o(B,a,j){var E,$,H,K,C,Z,h,m,J,O;if(E={},$=new x.Parser(B,a),H=$.parseCard8(),0===H)for(K=$.parseCard8(),C=0;C<K;C+=1)Z=$.parseCard8(),E[Z]=C;else{if(1!==H)throw new Error("Unknown encoding format "+H);for(h=$.parseCard8(),Z=1,C=0;C<h;C+=1)for(m=$.parseCard8(),J=$.parseCard8(),O=m;O<=m+J;O+=1)E[O]=Z,Z+=1}return new p.CffEncoding(E,j)}function c(B,a,j){function E(B,a){O&&K.closePath(),K.moveTo(B,a),O=!0}function $(){var B;B=Z.length%2!==0,B&&!m&&(J=Z.shift()+a.nominalWidthX),h+=Z.length>>1,Z.length=0,m=!0}function H(B){var C,X,F,V,w,P,_;for(C=0;C<B.length;)switch(I=B[C],C+=1,I){case 1:$();break;case 3:$();break;case 4:Z.length>1&&!m&&(J=Z.shift()+a.nominalWidthX,m=!0),s+=Z.pop(),E(k,s);break;case 5:for(;Z.length>0;)k+=Z.shift(),s+=Z.shift(),K.lineTo(k,s);break;case 6:for(;Z.length>0&&(k+=Z.shift(),K.lineTo(k,s),0!==Z.length);)s+=Z.shift(),K.lineTo(k,s);break;case 7:for(;Z.length>0&&(s+=Z.shift(),K.lineTo(k,s),0!==Z.length);)k+=Z.shift(),K.lineTo(k,s);break;case 8:for(;Z.length>0;)z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U+Z.shift(),K.curveTo(z,o,c,U,k,s);break;case 10:P=Z.pop()+a.subrsBias,_=a.subrs[P],_&&H(_);break;case 11:return;case 12:I=B[C],C+=1;var l,e,n,b,S,v,g;switch(I){case 35:z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),l=c+Z.shift(),e=U+Z.shift(),n=l+Z.shift(),b=e+Z.shift(),S=n+Z.shift(),v=b+Z.shift(),k=S+Z.shift(),s=v+Z.shift(),g=Z.shift(),K.curveTo(z,o,c,U,l,e),K.curveTo(n,b,S,v,k,s);break;case 34:z=k+Z.shift(),o=s,c=z+Z.shift(),U=o+Z.shift(),l=c+Z.shift(),e=U,n=l+Z.shift(),b=U,S=n+Z.shift(),v=s,k=S+Z.shift(),K.curveTo(z,o,c,U,l,e),K.curveTo(n,b,S,v,k,s);break;case 36:z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),l=c+Z.shift(),e=U,n=l+Z.shift(),b=U,S=n+Z.shift(),v=b+Z.shift(),k=S+Z.shift(),K.curveTo(z,o,c,U,l,e),K.curveTo(n,b,S,v,k,s);break;case 37:z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),l=c+Z.shift(),e=U+Z.shift(),n=l+Z.shift(),b=e+Z.shift(),S=n+Z.shift(),v=b+Z.shift(),Math.abs(S-k)>Math.abs(v-s)?k=S+Z.shift():s=v+Z.shift(),K.curveTo(z,o,c,U,l,e),K.curveTo(n,b,S,v,k,s);break;default:console.log("Glyph "+j+": unknown operator 1200"+I),Z.length=0}break;case 14:Z.length>0&&!m&&(J=Z.shift()+a.nominalWidthX,m=!0),O&&(K.closePath(),O=!1);break;case 18:$();break;case 19:case 20:$(),C+=h+7>>3;break;case 21:Z.length>2&&!m&&(J=Z.shift()+a.nominalWidthX,m=!0),s+=Z.pop(),k+=Z.pop(),E(k,s);break;case 22:Z.length>1&&!m&&(J=Z.shift()+a.nominalWidthX,m=!0),k+=Z.pop(),E(k,s);break;case 23:$();break;case 24:for(;Z.length>2;)z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U+Z.shift(),K.curveTo(z,o,c,U,k,s);k+=Z.shift(),s+=Z.shift(),K.lineTo(k,s);break;case 25:for(;Z.length>6;)k+=Z.shift(),s+=Z.shift(),K.lineTo(k,s);z=k+Z.shift(),o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U+Z.shift(),K.curveTo(z,o,c,U,k,s);break;case 26:for(Z.length%2&&(k+=Z.shift());Z.length>0;)z=k,o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c,s=U+Z.shift(),K.curveTo(z,o,c,U,k,s);break;case 27:for(Z.length%2&&(s+=Z.shift());Z.length>0;)z=k+Z.shift(),o=s,c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U,K.curveTo(z,o,c,U,k,s);break;case 28:X=B[C],F=B[C+1],Z.push((X<<24|F<<16)>>16),C+=2;break;case 29:P=Z.pop()+a.gsubrsBias,_=a.gsubrs[P],_&&H(_);break;case 30:for(;Z.length>0&&(z=k,o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U+(1===Z.length?Z.shift():0),K.curveTo(z,o,c,U,k,s),0!==Z.length);)z=k+Z.shift(),o=s,c=z+Z.shift(),U=o+Z.shift(),s=U+Z.shift(),k=c+(1===Z.length?Z.shift():0),K.curveTo(z,o,c,U,k,s);break;case 31:for(;Z.length>0&&(z=k+Z.shift(),o=s,c=z+Z.shift(),U=o+Z.shift(),s=U+Z.shift(),k=c+(1===Z.length?Z.shift():0),K.curveTo(z,o,c,U,k,s),0!==Z.length);)z=k,o=s+Z.shift(),c=z+Z.shift(),U=o+Z.shift(),k=c+Z.shift(),s=U+(1===Z.length?Z.shift():0),K.curveTo(z,o,c,U,k,s);break;default:I<32?console.log("Glyph "+j+": unknown operator "+I):I<247?Z.push(I-139):I<251?(X=B[C],C+=1,Z.push(256*(I-247)+X+108)):I<255?(X=B[C],C+=1,Z.push(256*-(I-251)-X-108)):(X=B[C],F=B[C+1],V=B[C+2],w=B[C+3],C+=4,Z.push((X<<24|F<<16|V<<8|w)/65536))}}var K,C,Z,h,m,J,O,k,s,z,o,c,U,I;return K=new W.Path,Z=[],h=0,m=!1,J=a.defaultWidthX,O=!1,k=s=0,H(B),C=new d.Glyph({font:a,index:j}),C.path=K,C.advanceWidth=J,C}function U(B){var a;return a=B.length<1240?107:B.length<33900?1131:32768}function I(B,a,j){var E,$,K,C,Z,h,m,J,I,X,F,V,w,P;j.tables.cff={},E=O(B,a),$=H(B,E.endOffset,x.bytesToString),K=H(B,$.endOffset),C=H(B,K.endOffset,x.bytesToString),Z=H(B,C.endOffset),j.gsubrs=Z.objects,j.gsubrsBias=U(j.gsubrs);var _=new DataView(new Uint8Array(K.objects[0]).buffer);for(h=k(_,C.objects),j.tables.cff.topDict=h,m=a+h.private[1],J=s(B,m,h.private[0],C.objects),j.defaultWidthX=J.defaultWidthX,j.nominalWidthX=J.nominalWidthX,0!==J.subrs?(I=m+J.subrs,X=H(B,I),j.subrs=X.objects,j.subrsBias=U(j.subrs)):(j.subrs=[],j.subrsBias=0),V=H(B,a+h.charStrings),j.nGlyphs=V.objects.length,w=z(B,a+h.charset,j.nGlyphs,C.objects),0===h.encoding?j.cffEncoding=new p.CffEncoding(p.cffStandardEncoding,w):1===h.encoding?j.cffEncoding=new p.CffEncoding(p.cffExpertEncoding,w):j.cffEncoding=o(B,a+h.encoding,w),j.encoding=j.encoding||j.cffEncoding,j.glyphs=[],P=0;P<j.nGlyphs;P+=1)F=V.objects[P],j.glyphs.push(c(F,j,P))}function X(B,a){var j,E;return j=p.cffStandardStrings.indexOf(B),j>=0&&(E=j),j=a.indexOf(B),j>=0?E=j+p.cffStandardStrings.length:(E=p.cffStandardStrings.length+a.length,a.push(B)),E}function F(){return new t.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function V(B){var a=new t.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);a.names=[];for(var j=0;j<B.length;j+=1)a.names.push({name:"name_"+j,type:"NAME",value:B[j]});return a}function w(B,a,E){var H,K,C,Z={};for(H=0;H<B.length;H+=1)K=B[H],C=a[K.name],C===j||$(C,K.value)||("SID"===K.type&&(C=X(C,E)),Z[K.op]={name:K.name,type:K.type,value:C});return Z}function P(B,a){var j=new t.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=w(r,B,a),j}function _(B){var a=new t.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return a.topDicts=[{name:"topDict_0",type:"TABLE",value:B}],a}function l(B){var a=new t.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);a.strings=[];for(var j=0;j<B.length;j+=1)a.strings.push({name:"string_"+j,type:"STRING",value:B[j]});return a}function e(){return new t.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function n(B,a){for(var j=new t.Table("Charsets",[{name:"format",type:"Card8",value:0}]),E=0;E<B.length;E+=1){var $=B[E],H=X($,a);j.fields.push({name:"glyph_"+E,type:"SID",value:H})}return j}function b(B){var a,j,E,$,H,K,C,Z,h,m,J=[],O=B.path;for(J.push({name:"width",type:"NUMBER",value:B.advanceWidth}),a=0,j=0,E=0;E<O.commands.length;E+=1){if($=O.commands[E],"Q"===$.type){var k=1/3,s=2/3;$={type:"C",x:$.x,y:$.y,x1:k*a+s*$.x1,y1:k*j+s*$.y1,x2:k*$.x+s*$.x1,y2:k*$.y+s*$.y1}}"M"===$.type?(H=Math.round($.x-a),K=Math.round($.y-j),J.push({name:"dx",type:"NUMBER",value:H}),J.push({name:"dy",type:"NUMBER",value:K}),J.push({name:"rmoveto",type:"OP",value:21}),a=Math.round($.x),j=Math.round($.y)):"L"===$.type?(H=Math.round($.x-a),K=Math.round($.y-j),J.push({name:"dx",type:"NUMBER",value:H}),J.push({name:"dy",type:"NUMBER",value:K}),J.push({name:"rlineto",type:"OP",value:5}),a=Math.round($.x),j=Math.round($.y)):"C"===$.type?(C=Math.round($.x1-a),Z=Math.round($.y1-j),h=Math.round($.x2-$.x1),m=Math.round($.y2-$.y1),H=Math.round($.x-$.x2),K=Math.round($.y-$.y2),J.push({name:"dx1",type:"NUMBER",value:C}),J.push({name:"dy1",type:"NUMBER",value:Z}),J.push({name:"dx2",type:"NUMBER",value:h}),J.push({name:"dy2",type:"NUMBER",value:m}),J.push({name:"dx",type:"NUMBER",value:H}),J.push({name:"dy",type:"NUMBER",value:K}),J.push({name:"rrcurveto",type:"OP",value:8}),a=Math.round($.x),j=Math.round($.y)):"Z"===$.type}return J.push({name:"endchar",type:"OP",value:14}),J}function S(B){for(var a=new t.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),j=0;j<B.length;j+=1){var E=B[j],$=b(E);a.charStrings.push({name:E.name,type:"CHARSTRING",value:$})}return a}function v(B,a){var j=new t.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return j.dict=w(G,B,a),j}function g(B){var a=new t.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return a.privateDicts=[{name:"privateDict_0",type:"TABLE",value:B}],a}function i(B,a){var j=new t.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),E={version:a.version,fullName:a.fullName,familyName:a.familyName,weight:a.weightName,charset:999,encoding:0,charStrings:999};E.private=[0,999];for(var $={},H=[],K=1;K<B.length;K+=1)H.push(B[K].name);var C=[];j.header=F(),j.nameIndex=V([a.postScriptName]);var Z=P(E,C);j.topDictIndex=_(Z),j.globalSubrIndex=e(),j.charsets=n(H,C),j.charStringsIndex=S(B);var h=v($,C);j.privateDictIndex=g(h),j.stringIndex=l(C);var m=j.header.sizeOf()+j.nameIndex.sizeOf()+j.topDictIndex.sizeOf()+j.stringIndex.sizeOf()+j.globalSubrIndex.sizeOf();return E.charset=m,E.encoding=0,E.charStrings=E.charset+j.charsets.sizeOf(),E.private[1]=E.charStrings+j.charStringsIndex.sizeOf(),Z=P(E,C),j.topDictIndex=_(Z),j}var p=B("../encoding"),d=B("../glyph"),x=B("../parse"),W=B("../path"),t=B("../table"),r=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],G=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];E.parse=I,E.make=i},{"../encoding":3,"../glyph":5,"../parse":7,"../path":8,"../table":9}],11:[function(B,a,E){function $(B,a){var j,E,$,H,K,C,m,J,O,k,s,z,o,c,U,I,X,F,V,w,P={};for(P.version=j=h.getUShort(B,a),Z.argument(0===j,"cmap table version should be 0."),P.numtables=E=h.getUShort(B,a+2),$=-1,U=0;U<E;U+=1)if(H=h.getUShort(B,a+4+8*U),K=h.getUShort(B,a+4+8*U+2),3===H&&(1===K||0===K)){$=h.getULong(B,a+4+8*U+4);break}if($===-1)return null;for(V=new h.Parser(B,a+$),P.format=C=V.parseUShort(),Z.argument(4===C,"Only format 4 cmap tables are supported."),P.length=V.parseUShort(),P.language=V.parseUShort(),P.segCount=m=V.parseUShort()>>1,V.skip("uShort",3),P.glyphIndexMap={},J=new h.Parser(B,a+$+14),O=new h.Parser(B,a+$+16+2*m),k=new h.Parser(B,a+$+16+4*m),s=new h.Parser(B,a+$+16+6*m),z=a+$+16+8*m,U=0;U<m-1;U+=1)for(o=J.parseUShort(),c=O.parseUShort(),X=k.parseShort(),F=s.parseUShort(),I=c;I<=o;I+=1)0!==F?(z=s.offset+s.relativeOffset-2,z+=F,z+=2*(I-c),w=h.getUShort(B,z),0!==w&&(w=w+X&65535)):w=I+X&65535,P.glyphIndexMap[I]=w;return P}function H(B,a,j){B.segments.push({end:a,start:a,delta:-(a-j),offset:0})}function K(B){B.segments.push({end:65535,start:65535,delta:1,offset:0})}function C(B){var a,E,$,C=new m.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(C.segments=[],a=0;a<B.length;a+=1){for($=B[a],E=0;E<$.unicodes.length;E+=1)H(C,$.unicodes[E],a);C.segments=C.segments.sort(function(B,a){return B.start-a.start})}K(C);var Z;Z=C.segments.length,C.segCountX2=2*Z,C.searchRange=2*Math.pow(2,Math.floor(Math.log(Z)/Math.log(2))),C.entrySelector=Math.log(C.searchRange/2)/Math.log(2),C.rangeShift=C.segCountX2-C.searchRange;var h=[],J=[],O=[],k=[],s=[];for(a=0;a<Z;a+=1){var z=C.segments[a];h=h.concat({name:"end_"+a,type:"USHORT",value:z.end}),J=J.concat({name:"start_"+a,type:"USHORT",value:z.start}),O=O.concat({name:"idDelta_"+a,type:"SHORT",value:z.delta}),k=k.concat({name:"idRangeOffset_"+a,type:"USHORT",value:z.offset}),z.glyphId!==j&&(s=s.concat({name:"glyph_"+a,type:"USHORT",value:z.glyphId}))}return C.fields=C.fields.concat(h),C.fields.push({name:"reservedPad",type:"USHORT",value:0}),C.fields=C.fields.concat(J),C.fields=C.fields.concat(O),C.fields=C.fields.concat(k),C.fields=C.fields.concat(s),C.length=14+2*h.length+2+2*J.length+2*O.length+2*k.length+2*s.length,C}var Z=B("../check"),h=B("../parse"),m=B("../table");E.parse=$,E.make=C},{"../check":1,"../parse":7,"../table":9}],12:[function(B,a,j){function E(B,a,j,E,$){var H;return(a&E)>0?(H=B.parseByte(),0===(a&$)&&(H=-H),H=j+H):H=(a&$)>0?j:j+B.parseShort(),H}function $(B,a,j,$){var H,K,C,Z,O,k,s,z,o,c,U,I,X,F,V;if(H=new J.Parser(B,a),K=new m.Glyph({font:$,index:j}),K.numberOfContours=H.parseShort(),K.xMin=H.parseShort(),K.yMin=H.parseShort(),K.xMax=H.parseShort(),K.yMax=H.parseShort(),K.numberOfContours>0){for(s=K.endPointIndices=[],Z=0;Z<K.numberOfContours;Z+=1)s.push(H.parseUShort());for(K.instructionLength=H.parseUShort(),K.instructions=[],Z=0;Z<K.instructionLength;Z+=1)K.instructions.push(H.parseByte());for(z=s[s.length-1]+1,k=[],Z=0;Z<z;Z+=1)if(C=H.parseByte(),k.push(C),(8&C)>0)for(o=H.parseByte(),O=0;O<o;O+=1)k.push(C),Z+=1;if(h.argument(k.length===z,"Bad flags."),s.length>0){if(c=[],z>0){for(Z=0;Z<z;Z+=1)C=k[Z],U={},U.onCurve=!!(1&C),U.lastPointOfContour=s.indexOf(Z)>=0,c.push(U);for(I=0,Z=0;Z<z;Z+=1)C=k[Z],U=c[Z],U.x=E(H,C,I,2,16),I=U.x;for(X=0,Z=0;Z<z;Z+=1)C=k[Z],U=c[Z],U.y=E(H,C,X,4,32),X=U.y}K.points=c}else K.points=[]}else if(0===K.numberOfContours)K.points=[];else for(K.isComposite=!0,K.points=[],K.components=[],V=!0;V;)k=H.parseUShort(),F={glyphIndex:H.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},(1&k)>0?(F.dx=H.parseShort(),F.dy=H.parseShort()):(F.dx=H.parseChar(),F.dy=H.parseChar()),(8&k)>0?F.xScale=F.yScale=H.parseF2Dot14():(64&k)>0?(F.xScale=H.parseF2Dot14(),F.yScale=H.parseF2Dot14()):(128&k)>0&&(F.xScale=H.parseF2Dot14(),F.scale01=H.parseF2Dot14(),F.scale10=H.parseF2Dot14(),F.yScale=H.parseF2Dot14()),K.components.push(F),V=!!(32&k);return K}function H(B,a){var j,E,$,H;for(j=[],E=0;E<B.length;E+=1)$=B[E],H={x:a.xScale*$.x+a.scale01*$.y+a.dx,y:a.scale10*$.x+a.yScale*$.y+a.dy,onCurve:$.onCurve,lastPointOfContour:$.lastPointOfContour},j.push(H);return j}function K(B){var a,j,E,$;for(a=[],j=[],E=0;E<B.length;E+=1)$=B[E],j.push($),$.lastPointOfContour&&(a.push(j),j=[]);return h.argument(0===j.length,"There are still points left in the current contour."),a}function C(B){var a,j,E,$,H,C,Z,h,m,J,k,s;if(a=new O.Path,!B)return a;for(j=K(B),E=0;E<j.length;E+=1){for(C=j[E],h=C[0],s=C[C.length-1],h.onCurve?(k=null,$=!0):(h=s.onCurve?s:{x:(h.x+s.x)/2,y:(h.y+s.y)/2},k=h,$=!1),a.moveTo(h.x,h.y),H=$?1:0;H<C.length;H+=1)if(Z=C[H],m=0===H?h:C[H-1],m.onCurve&&Z.onCurve)a.lineTo(Z.x,Z.y);else if(m.onCurve&&!Z.onCurve)k=Z;else if(m.onCurve||Z.onCurve){if(m.onCurve||!Z.onCurve)throw new Error("Invalid state.");a.quadraticCurveTo(k.x,k.y,Z.x,Z.y),k=null}else J={x:(m.x+Z.x)/2,y:(m.y+Z.y)/2},a.quadraticCurveTo(m.x,m.y,J.x,J.y),k=Z;h!==s&&(k?a.quadraticCurveTo(k.x,k.y,h.x,h.y):a.lineTo(h.x,h.y))}return a.closePath(),a}function Z(B,a,j,E){var K,Z,h,J,O,k,s,z,o;for(K=[],Z=0;Z<j.length-1;Z+=1)J=j[Z],O=j[Z+1],J!==O?K.push($(B,a+J,Z,E)):K.push(new m.Glyph({font:E,index:Z}));for(Z=0;Z<K.length;Z+=1){if(k=K[Z],k.isComposite)for(h=0;h<k.components.length;h+=1)s=k.components[h],z=K[s.glyphIndex],z.points&&(o=H(z.points,s),k.points=k.points.concat(o));k.path=C(k.points)}return K}var h=B("../check"),m=B("../glyph"),J=B("../parse"),O=B("../path");j.parse=Z},{"../check":1,"../glyph":5,"../parse":7,"../path":8}],13:[function(B,a,E){function $(B,a){for(var j=new J.Parser(B,a),E=j.parseUShort(),$=[],H=0;H<E;H++)$[j.parseTag()]={offset:j.parseUShort()};return $}function H(B,a){var j=new J.Parser(B,a),E=j.parseUShort(),$=j.parseUShort();if(1===E)return j.parseUShortList($);if(2===E){for(var H,K,C,Z,h=[];$--;)for(K=j.parseUShort(),C=j.parseUShort(),Z=j.parseUShort(),H=K;H<=C;H++)h[Z++]=H;return h}}function K(B,a){var j=new J.Parser(B,a),E=j.parseUShort();if(1===E){var $=j.parseUShort(),H=j.parseUShort(),K=j.parseUShortList(H);return function(B){return K[B-$]||0}}if(2===E){for(var C=j.parseUShort(),Z=[],h=[],m=[],O=0;O<C;O++)Z[O]=j.parseUShort(),h[O]=j.parseUShort(),m[O]=j.parseUShort();return function(B){var a,j,E;for(a=0,E=Z.length-1;a<E;)j=a+E+1>>1,B<Z[j]?E=j-1:a=j;return Z[a]<=B&&B<=h[a]?m[a]||0:0}}}function C(B,a){var j,E,$,C,Z,h,m,O,k,s,z=new J.Parser(B,a);if(j=z.parseUShort(),E=z.parseUShort(),$=H(B,a+E),C=z.parseUShort(),Z=z.parseUShort(),4===C&&0===Z){if(h={},1===j){var o,c,U,I,X,F;for(o=z.parseUShort(),F=[],c=z.parseOffset16List(o),m=0;m<o;m++){if(U=c[m],I=h[U],!I)for(I={},z.relativeOffset=U,X=z.parseUShort();X--;)O=z.parseUShort(),C&&(k=z.parseShort()),Z&&(s=z.parseShort()),I[O]=k;F[$[m]]=I}return function(B,a){var j=F[B];if(j)return j[a]}}if(2===j){var V,w,P,_,l,e,n,b,S,v,g;for(V=z.parseUShort(),w=z.parseUShort(),P=z.parseUShort(),_=z.parseUShort(),n=K(B,a+V),b=K(B,a+w),S=[],l=0;l<P;l++)for(v=S[l]=[],e=0;e<_;e++)C&&(k=z.parseShort()),Z&&(s=z.parseShort()),v[e]=k;for(g={},l=0;l<$.length;l++)g[$[l]]=1;return function(B,a){if(g[B]){var j=n(B),E=b(a),$=S[j];return $?$[E]:void 0}}}}}function Z(B,a){var E,$,H,K,Z,h,m,O,k=new J.Parser(B,a);if($=k.parseUShort(),H=k.parseUShort(),K=16&H,Z=k.parseUShort(),h=k.parseOffset16List(Z),E={lookupType:$,lookupFlag:H,markFilteringSet:K?k.parseUShort():-1},2===$){for(m=[],O=0;O<Z;O++)m.push(C(B,a+h[O]));E.getKerningValue=function(B,a){for(var E=m.length;E--;){var $=m[E](B,a);if($!==j)return $}return 0}}return E}function h(B,a,j){var E,H,K,C,h,O,k,s,z,o;for(E=new J.Parser(B,a),H=E.parseFixed(),m.argument(1===H,"Unsupported GPOS table version."),C=$(B,a+E.parseUShort()),O=$(B,a+E.parseUShort()),K=E.parseUShort(),E.relativeOffset=K,k=E.parseUShort(),s=E.parseOffset16List(k),z=a+K,h=0;h<k;h++)o=Z(B,z+s[h]),2!==o.lookupType||j.getGposKerningValue||(j.getGposKerningValue=o.getKerningValue)}var m=B("../check"),J=B("../parse");E.parse=h},{"../check":1,"../parse":7}],14:[function(B,a,j){function E(B,a){var j={},E=new K.Parser(B,a);return j.version=E.parseVersion(),j.fontRevision=Math.round(1e3*E.parseFixed())/1e3,j.checkSumAdjustment=E.parseULong(),j.magicNumber=E.parseULong(),H.argument(1594834165===j.magicNumber,"Font header has wrong magic number."),j.flags=E.parseUShort(),j.unitsPerEm=E.parseUShort(),j.created=E.parseLongDateTime(),j.modified=E.parseLongDateTime(),j.xMin=E.parseShort(),j.yMin=E.parseShort(),j.xMax=E.parseShort(),j.yMax=E.parseShort(),j.macStyle=E.parseUShort(),j.lowestRecPPEM=E.parseUShort(),j.fontDirectionHint=E.parseShort(),j.indexToLocFormat=E.parseShort(),j.glyphDataFormat=E.parseShort(),j}function $(B){return new C.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],B)}var H=B("../check"),K=B("../parse"),C=B("../table");j.parse=E,j.make=$},{"../check":1,"../parse":7,"../table":9}],15:[function(B,a,j){function E(B,a){var j={},E=new H.Parser(B,a);return j.version=E.parseVersion(),j.ascender=E.parseShort(),j.descender=E.parseShort(),j.lineGap=E.parseShort(),j.advanceWidthMax=E.parseUShort(),j.minLeftSideBearing=E.parseShort(),j.minRightSideBearing=E.parseShort(),j.xMaxExtent=E.parseShort(),j.caretSlopeRise=E.parseShort(),j.caretSlopeRun=E.parseShort(),j.caretOffset=E.parseShort(),E.relativeOffset+=8,j.metricDataFormat=E.parseShort(),j.numberOfHMetrics=E.parseUShort(),j}function $(B){return new K.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",
value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],B)}var H=B("../parse"),K=B("../table");j.parse=E,j.make=$},{"../parse":7,"../table":9}],16:[function(B,a,j){function E(B,a,j,E,$){var K,C,Z,h,m;for(K=new H.Parser(B,a),C=0;C<E;C+=1)C<j&&(h=K.parseUShort(),m=K.parseShort()),Z=$[C],Z.advanceWidth=h,Z.leftSideBearing=m}function $(B){for(var a=new K.Table("hmtx",[]),j=0;j<B.length;j+=1){var E=B[j],$=E.advanceWidth||0,H=E.leftSideBearing||0;a.fields.push({name:"advanceWidth_"+j,type:"USHORT",value:$}),a.fields.push({name:"leftSideBearing_"+j,type:"SHORT",value:H})}return a}var H=B("../parse"),K=B("../table");j.parse=E,j.make=$},{"../parse":7,"../table":9}],17:[function(B,a,j){function E(B,a){var j,E,K,C,Z,h,m,J,O;for(j={},E=new H.Parser(B,a),K=E.parseUShort(),$.argument(0===K,"Unsupported kern table version."),E.skip("uShort",1),C=E.parseUShort(),$.argument(0===C,"Unsupported kern sub-table version."),E.skip("uShort",2),Z=E.parseUShort(),E.skip("uShort",3),h=0;h<Z;h+=1)m=E.parseUShort(),J=E.parseUShort(),O=E.parseShort(),j[m+","+J]=O;return j}var $=B("../check"),H=B("../parse");j.parse=E},{"../check":1,"../parse":7}],18:[function(B,a,j){function E(B,a,j,E){var H,K,C,Z,h;for(H=new $.Parser(B,a),K=E?H.parseUShort:H.parseULong,C=[],h=0;h<j+1;h+=1)Z=K.call(H),E&&(Z*=2),C.push(Z);return C}var $=B("../parse");j.parse=E},{"../parse":7}],19:[function(B,a,j){function E(B,a){var j={},E=new H.Parser(B,a);return j.version=E.parseVersion(),j.numGlyphs=E.parseUShort(),1===j.version&&(j.maxPoints=E.parseUShort(),j.maxContours=E.parseUShort(),j.maxCompositePoints=E.parseUShort(),j.maxCompositeContours=E.parseUShort(),j.maxZones=E.parseUShort(),j.maxTwilightPoints=E.parseUShort(),j.maxStorage=E.parseUShort(),j.maxFunctionDefs=E.parseUShort(),j.maxInstructionDefs=E.parseUShort(),j.maxStackElements=E.parseUShort(),j.maxSizeOfInstructions=E.parseUShort(),j.maxComponentElements=E.parseUShort(),j.maxComponentDepth=E.parseUShort()),j}function $(B){return new K.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:B}])}var H=B("../parse"),K=B("../table");j.parse=E,j.make=$},{"../parse":7,"../table":9}],20:[function(B,a,E){function $(B,a){var j={},E=new m.Parser(B,a);j.format=E.parseUShort();var $,H,K,C,Z,h,J,k,s,z,o,c=E.parseUShort(),U=E.offset+E.parseUShort(),I=0;for(s=0;s<c;s++)if($=E.parseUShort(),H=E.parseUShort(),K=E.parseUShort(),C=E.parseUShort(),Z=O[C],h=E.parseUShort(),J=E.parseUShort(),3===$&&1===H&&1033===K){o=[];var X=h/2;for(z=0;z<X;z++,J+=2)o[z]=m.getShort(B,U+J);k=String.fromCharCode.apply(null,o),Z?j[Z]=k:(I++,j["unknown"+I]=k)}return 1===j.format&&(j.langTagCount=E.parseUShort()),j}function H(B,a,j,E,$,H){return new J.Table("NameRecord",[{name:"platformID",type:"USHORT",value:B},{name:"encodingID",type:"USHORT",value:a},{name:"languageID",type:"USHORT",value:j},{name:"nameID",type:"USHORT",value:E},{name:"length",type:"USHORT",value:$},{name:"offset",type:"USHORT",value:H}])}function K(B,a,j,E){var $=h.STRING(j);return B.records.push(H(1,0,0,a,$.length,E)),B.strings.push($),E+=$.length}function C(B,a,j,E){var $=h.UTF16(j);return B.records.push(H(3,1,1033,a,$.length,E)),B.strings.push($),E+=$.length}function Z(B){var a,E,$=new J.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);$.records=[],$.strings=[];var H=0;for(a=0;a<O.length;a+=1)B[O[a]]!==j&&(E=B[O[a]],H=K($,a,E,H));for(a=0;a<O.length;a+=1)B[O[a]]!==j&&(E=B[O[a]],H=C($,a,E,H));for($.count=$.records.length,$.stringOffset=6+12*$.count,a=0;a<$.records.length;a+=1)$.fields.push({name:"record_"+a,type:"TABLE",value:$.records[a]});for(a=0;a<$.strings.length;a+=1)$.fields.push({name:"string_"+a,type:"LITERAL",value:$.strings[a]});return $}var h=B("../types").encode,m=B("../parse"),J=B("../table"),O=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];E.parse=$,E.make=Z},{"../parse":7,"../table":9,"../types":24}],21:[function(B,a,j){function E(B){for(var a=0;a<Z.length;a+=1){var j=Z[a];if(B>=j.begin&&B<j.end)return a}return-1}function $(B,a){var j={},E=new K.Parser(B,a);j.version=E.parseUShort(),j.xAvgCharWidth=E.parseShort(),j.usWeightClass=E.parseUShort(),j.usWidthClass=E.parseUShort(),j.fsType=E.parseUShort(),j.ySubscriptXSize=E.parseShort(),j.ySubscriptYSize=E.parseShort(),j.ySubscriptXOffset=E.parseShort(),j.ySubscriptYOffset=E.parseShort(),j.ySuperscriptXSize=E.parseShort(),j.ySuperscriptYSize=E.parseShort(),j.ySuperscriptXOffset=E.parseShort(),j.ySuperscriptYOffset=E.parseShort(),j.yStrikeoutSize=E.parseShort(),j.yStrikeoutPosition=E.parseShort(),j.sFamilyClass=E.parseShort(),j.panose=[];for(var $=0;$<10;$++)j.panose[$]=E.parseByte();return j.ulUnicodeRange1=E.parseULong(),j.ulUnicodeRange2=E.parseULong(),j.ulUnicodeRange3=E.parseULong(),j.ulUnicodeRange4=E.parseULong(),j.achVendID=String.fromCharCode(E.parseByte(),E.parseByte(),E.parseByte(),E.parseByte()),j.fsSelection=E.parseUShort(),j.usFirstCharIndex=E.parseUShort(),j.usLastCharIndex=E.parseUShort(),j.sTypoAscender=E.parseShort(),j.sTypoDescender=E.parseShort(),j.sTypoLineGap=E.parseShort(),j.usWinAscent=E.parseUShort(),j.usWinDescent=E.parseUShort(),j.version>=1&&(j.ulCodePageRange1=E.parseULong(),j.ulCodePageRange2=E.parseULong()),j.version>=2&&(j.sxHeight=E.parseShort(),j.sCapHeight=E.parseShort(),j.usDefaultChar=E.parseUShort(),j.usBreakChar=E.parseUShort(),j.usMaxContent=E.parseUShort()),j}function H(B){return new C.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],B)}var K=B("../parse"),C=B("../table"),Z=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];j.unicodeRanges=Z,j.getUnicodeRange=E,j.parse=$,j.make=H},{"../parse":7,"../table":9}],22:[function(B,a,j){function E(B,a){var j,E,$={},C=new K.Parser(B,a);switch($.version=C.parseVersion(),$.italicAngle=C.parseFixed(),$.underlinePosition=C.parseShort(),$.underlineThickness=C.parseShort(),$.isFixedPitch=C.parseULong(),$.minMemType42=C.parseULong(),$.maxMemType42=C.parseULong(),$.minMemType1=C.parseULong(),$.maxMemType1=C.parseULong(),$.version){case 1:$.names=H.standardNames.slice();break;case 2:for($.numberOfGlyphs=C.parseUShort(),$.glyphNameIndex=new Array($.numberOfGlyphs),j=0;j<$.numberOfGlyphs;j++)$.glyphNameIndex[j]=C.parseUShort();for($.names=[],j=0;j<$.numberOfGlyphs;j++)$.glyphNameIndex[j]>=H.standardNames.length&&(E=C.parseChar(),$.names.push(C.parseString(E)));break;case 2.5:for($.numberOfGlyphs=C.parseUShort(),$.offset=new Array($.numberOfGlyphs),j=0;j<$.numberOfGlyphs;j++)$.offset[j]=C.parseChar()}return $}function $(){return new C.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var H=B("../encoding"),K=B("../parse"),C=B("../table");j.parse=E,j.make=$},{"../encoding":3,"../parse":7,"../table":9}],23:[function(B,a,E){function $(B){return Math.log(B)/Math.log(2)|0}function H(B){for(;B.length%4!==0;)B.push(0);for(var a=0,j=0;j<B.length;j+=4)a+=(B[j]<<24)+(B[j+1]<<16)+(B[j+2]<<8)+B[j+3];return a%=Math.pow(2,32)}function K(B,a,E,$){return new O.Table("Table Record",[{name:"tag",type:"TAG",value:B!==j?B:""},{name:"checkSum",type:"ULONG",value:a!==j?a:0},{name:"offset",type:"ULONG",value:E!==j?E:0},{name:"length",type:"ULONG",value:$!==j?$:0}])}function C(B){var a=new O.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);a.tables=B,a.numTables=B.length;var j=Math.pow(2,$(a.numTables));a.searchRange=16*j,a.entrySelector=$(j),a.rangeShift=16*a.numTables-a.searchRange;for(var E=[],C=[],Z=a.sizeOf()+K().sizeOf()*a.numTables;Z%4!==0;)Z+=1,C.push({name:"padding",type:"BYTE",value:0});for(var h=0;h<B.length;h+=1){var m=B[h];J.argument(4===m.tableName.length,"Table name"+m.tableName+" is invalid.");var k=m.sizeOf(),s=K(m.tableName,H(m.encode()),Z,k);for(E.push({name:s.tag+" Table Record",type:"TABLE",value:s}),C.push({name:m.tableName+" table",type:"TABLE",value:m}),Z+=k,J.argument(!isNaN(Z),"Something went wrong calculating the offset.");Z%4!==0;)Z+=1,C.push({name:"padding",type:"BYTE",value:0})}return E.sort(function(B,a){return B.value.tag>a.value.tag?1:-1}),a.fields=a.fields.concat(E),a.fields=a.fields.concat(C),a}function Z(B,a,j){for(var E=0;E<a.length;E+=1){var $=B.charToGlyphIndex(a[E]);if($>0){var H=B.glyphs[$];return H.getMetrics()}}return j}function h(B){for(var a=0,j=0;j<B.length;j+=1)a+=B[j];return a/B.length}function m(B){for(var a=[],j=[],E=[],$=[],K=[],m=[],J=[],O=null,V=0,w=0,P=0,_=0,l=0,e=0;e<B.glyphs.length;e+=1){var n=B.glyphs[e],b=0|n.unicode;(O>b||null===O)&&(O=b),V<b&&(V=b);var S=X.getUnicodeRange(b);if(S<32)w|=1<<S;else if(S<64)P|=1<<S-32;else if(S<96)_|=1<<S-64;else{if(!(S<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");l|=1<<S-96}if(".notdef"!==n.name){var v=n.getMetrics();a.push(v.xMin),j.push(v.yMin),E.push(v.xMax),$.push(v.yMax),m.push(v.leftSideBearing),J.push(v.rightSideBearing),K.push(n.advanceWidth)}}var g={xMin:Math.min.apply(null,a),yMin:Math.min.apply(null,j),xMax:Math.max.apply(null,E),yMax:Math.max.apply(null,$),advanceWidthMax:Math.max.apply(null,K),advanceWidthAvg:h(K),minLeftSideBearing:Math.min.apply(null,m),maxLeftSideBearing:Math.max.apply(null,m),minRightSideBearing:Math.min.apply(null,J)};g.ascender=g.yMax,g.descender=g.yMin;var i=z.make({unitsPerEm:B.unitsPerEm,xMin:g.xMin,yMin:g.yMin,xMax:g.xMax,yMax:g.yMax}),p=o.make({ascender:g.ascender,descender:g.descender,advanceWidthMax:g.advanceWidthMax,minLeftSideBearing:g.minLeftSideBearing,minRightSideBearing:g.minRightSideBearing,xMaxExtent:g.maxLeftSideBearing+(g.xMax-g.xMin),numberOfHMetrics:B.glyphs.length}),d=U.make(B.glyphs.length),x=X.make({xAvgCharWidth:Math.round(g.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:O,usLastCharIndex:V,ulUnicodeRange1:w,ulUnicodeRange2:P,ulUnicodeRange3:_,ulUnicodeRange4:l,sTypoAscender:g.ascender,sTypoDescender:g.descender,sTypoLineGap:0,usWinAscent:g.ascender,usWinDescent:-g.descender,sxHeight:Z(B,"xyvw",{yMax:0}).yMax,sCapHeight:Z(B,"HIKLEFJMNTZBDPRAGOQSUVWXY",g).yMax,usBreakChar:B.hasChar(" ")?32:0}),W=c.make(B.glyphs),t=k.make(B.glyphs),r=B.familyName+" "+B.styleName,G=B.familyName.replace(/\s/g,"")+"-"+B.styleName,f=I.make({copyright:B.copyright,fontFamily:B.familyName,fontSubfamily:B.styleName,uniqueID:B.manufacturer+":"+r,fullName:r,version:B.version,postScriptName:G,trademark:B.trademark,manufacturer:B.manufacturer,designer:B.designer,description:B.description,manufacturerURL:B.manufacturerURL,designerURL:B.designerURL,license:B.license,licenseURL:B.licenseURL,preferredFamily:B.familyName,preferredSubfamily:B.styleName}),y=F.make(),Y=s.make(B.glyphs,{version:B.version,fullName:r,familyName:B.familyName,weightName:B.styleName,postScriptName:G}),R=[i,p,d,x,f,t,y,Y,W],N=C(R),M=N.encode(),Q=H(M),u=N.fields,q=!1;for(e=0;e<u.length;e+=1)if("head table"===u[e].name){u[e].value.checkSumAdjustment=2981146554-Q,q=!0;break}if(!q)throw new Error("Could not find head table with checkSum to adjust.");return N}var J=B("../check"),O=B("../table"),k=B("./cmap"),s=B("./cff"),z=B("./head"),o=B("./hhea"),c=B("./hmtx"),U=B("./maxp"),I=B("./name"),X=B("./os2"),F=B("./post");E.computeCheckSum=H,E.make=C,E.fontToTable=m},{"../check":1,"../table":9,"./cff":10,"./cmap":11,"./head":14,"./hhea":15,"./hmtx":16,"./maxp":19,"./name":20,"./os2":21,"./post":22}],24:[function(B,E,$){function H(B){return function(){return B}}var K=B("./check"),C=32768,Z=2147483648,h={},m={},J={};m.BYTE=function(B){return K.argument(B>=0&&B<=255,"Byte value should be between 0 and 255."),[B]},J.BYTE=H(1),m.CHAR=function(B){return[B.charCodeAt(0)]},J.BYTE=H(1),m.CHARARRAY=function(B){for(var a=[],j=0;j<B.length;j+=1)a.push(B.charCodeAt(j));return a},J.CHARARRAY=function(B){return B.length},m.USHORT=function(B){return[B>>8&255,255&B]},J.USHORT=H(2),m.SHORT=function(B){return B>=C&&(B=-(2*C-B)),[B>>8&255,255&B]},J.SHORT=H(2),m.UINT24=function(B){return[B>>16&255,B>>8&255,255&B]},J.UINT24=H(3),m.ULONG=function(B){return[B>>24&255,B>>16&255,B>>8&255,255&B]},J.ULONG=H(4),m.LONG=function(B){return B>=Z&&(B=-(2*Z-B)),[B>>24&255,B>>16&255,B>>8&255,255&B]},J.LONG=H(4),m.FIXED=m.ULONG,J.FIXED=J.ULONG,m.FWORD=m.SHORT,J.FWORD=J.SHORT,m.UFWORD=m.USHORT,J.UFWORD=J.USHORT,m.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},J.LONGDATETIME=H(8),m.TAG=function(B){return K.argument(4===B.length,"Tag should be exactly 4 ASCII characters."),[B.charCodeAt(0),B.charCodeAt(1),B.charCodeAt(2),B.charCodeAt(3)]},J.TAG=H(4),m.Card8=m.BYTE,J.Card8=J.BYTE,m.Card16=m.USHORT,J.Card16=J.USHORT,m.OffSize=m.BYTE,J.OffSize=J.BYTE,m.SID=m.USHORT,J.SID=J.USHORT,m.NUMBER=function(B){return B>=-107&&B<=107?[B+139]:B>=108&&B<=1131?(B-=108,[(B>>8)+247,255&B]):B>=-1131&&B<=-108?(B=-B-108,[(B>>8)+251,255&B]):B>=-32768&&B<=32767?m.NUMBER16(B):m.NUMBER32(B)},J.NUMBER=function(B){return m.NUMBER(B).length},m.NUMBER16=function(B){return[28,B>>8&255,255&B]},J.NUMBER16=H(2),m.NUMBER32=function(B){return[29,B>>24&255,B>>16&255,B>>8&255,255&B]},J.NUMBER32=H(4),m.NAME=m.CHARARRAY,J.NAME=J.CHARARRAY,m.STRING=m.CHARARRAY,J.STRING=J.CHARARRAY,m.UTF16=function(B){for(var a=[],j=0;j<B.length;j+=1)a.push(0),a.push(B.charCodeAt(j));return a},J.UTF16=function(B){return 2*B.length},m.INDEX=function(B){var a,E,$,H,K,C,Z,h,J,O;for(E=1,$=[E],Z=[],h=0,J=0;J<B.length;J+=1)O=m.OBJECT(B[J]),Array.prototype.push.apply(Z,O),h+=O.length,E+=O.length,$.push(E);if(0===Z.length)return[0,0];for(K=[],a=1+Math.floor(Math.log(h)/Math.log(2))/8|0,H=[j,m.BYTE,m.USHORT,m.UINT24,m.ULONG][a],J=0;J<$.length;J+=1)C=H($[J]),Array.prototype.push.apply(K,C);return Array.prototype.concat(m.Card16(B.length),m.OffSize(a),K,Z)},J.INDEX=function(B){return m.INDEX(B).length},m.DICT=function(B){for(var j=[],E=a.keys(B),$=E.length,H=0;H<$;H+=1){var K=parseInt(E[H],0),C=B[K];j=j.concat(m.OPERAND(C.value,C.type)),j=j.concat(m.OPERATOR(K))}return j},J.DICT=function(B){return m.DICT(B).length},m.OPERATOR=function(B){return B<1200?[B]:[12,B-1200]},m.OPERAND=function(B,a){var j,E;if(j=[],Array.isArray(a))for(E=0;E<a.length;E+=1)K.argument(B.length===a.length,"Not enough arguments given for type"+a),j=j.concat(m.OPERAND(B[E],a[E]));else j="SID"===a?j.concat(m.NUMBER(B)):"offset"===a?j.concat(m.NUMBER32(B)):j.concat(m.NUMBER(B));return j},m.OP=m.BYTE,J.OP=J.BYTE;var O="function"==typeof WeakMap&&new WeakMap;m.CHARSTRING=function(B){if(O&&O.has(B))return O.get(B);var a,j,E=[],$=B.length;for(j=0;j<$;j+=1)a=B[j],E=E.concat(m[a.type](a.value));return O&&O.set(B,E),E},J.CHARSTRING=function(B){return m.CHARSTRING(B).length},m.OBJECT=function(B){var a=m[B.type];return K.argument(a!==j,"No encoding function for type "+B.type),a(B.value)},m.TABLE=function(B){var a,E=[],$=B.fields.length;for(a=0;a<$;a+=1){var H=B.fields[a],C=m[H.type];K.argument(C!==j,"No encoding function for field type "+H.type);var Z=B[H.name];Z===j&&(Z=H.value);var h=C(Z);E=E.concat(h)}return E},m.LITERAL=function(B){return B},J.LITERAL=function(B){return B.length},$.decode=h,$.encode=m,$.sizeOf=J},{"./check":1}]},{},[6])(6)});var C=$.FontConverter=function(B){var a=this;a._objPool=[],a.initConfig(B||{})};C.prototype={},C.prototype.constructor=C,C.prototype.initConfig=function(B){var a,j=this;a=j.options={},a.texts=B.texts,a.color=B.color||"black",a.width=B.width||100,a.height=B.height||100},C.prototype.toShape=function(B,a){var j=this;return"string"==typeof B?($.Default.xhrLoad(B,function(B){j.toShapeImpl(B,a)},{responseType:"arraybuffer"}),null):j.toShapeImpl(B,a)},C.prototype.toShapeImpl=function(B,j){var E=this,$=opentype.parse(B);$.styleName||($.styleName="");var H,K,C,Z,h,m,J=E.convertToTypeface($),O=[],k=J.glyphs,s=E.options,z=0,o=s.texts,c=s.width,U=s.height;for(o||(o=a.keys(k)),H=0,K=o.length;H<K;H++)C=o[H],Z=E.createShape(C,k[C]),Z&&(O.push(Z),z++);for(var I=Math.ceil(Math.sqrt(z*c*U)/c),X=0;X<z;X++)h=X%I,m=Math.floor(X/I),E.fitPointsToRect(O[X].points,h*c,m*U,c,U);var F={width:I*c,height:Math.ceil(z/I)*U,comps:O,familyName:$.familyName,styleName:$.styleName};return j&&j(F),F},C.prototype.createShape=function(B,a){if(!a)return!1;if(!a.o)return!1;var j,E,$=this,H=a.o.split(" "),K=H.length,C=[],Z=[];for(j=0;j<K;)switch(E=H[j++]){case"m":C.push(1*H[j++]),C.push(1*H[j++]),Z.push(1);break;case"l":C.push(1*H[j++]),C.push(1*H[j++]),Z.push(2);break;case"q":C.push(1*H[j+2]),C.push(1*H[j+3]),C.push(1*H[j+0]),C.push(1*H[j+1]),j+=4,Z.push(3);break;case"b":C.push(1*H[j+2]),C.push(1*H[j+3]),C.push(1*H[j+4]),C.push(1*H[j+5]),C.push(1*H[j+0]),C.push(1*H[j+1]),j+=6,Z.push(4)}return{type:"shape",points:C,segments:Z,borderColor:null,borderWidth:0,background:$.options.color,displayName:B}},C.prototype.fitPointsToRect=function(B,a,j,E,$){var H,K,C,Z,h,m={x:1/0,y:1/0},J={x:-(1/0),y:-(1/0)},O=B.length;for(H=0;H<O;H+=2)K=B[H],C=B[H+1],m.x=Math.min(m.x,K),m.y=Math.min(m.y,C),J.x=Math.max(J.x,K),J.y=Math.max(J.y,C);for(Z=J.x-m.x,h=J.y-m.y,H=0;H<O;H+=2)B[H]=(B[H]-m.x)*E/Z+a,B[H+1]=(J.y-B[H+1])*$/h+j},C.prototype.convertToTypeface=function(B){var a=1e5/(72*(B.unitsPerEm||2048)),E={};E.glyphs={};var $=this.options.texts;return B.glyphs.forEach(function(B){if(B.unicode!=j){var H=String.fromCharCode(B.unicode);if(!($&&$.indexOf(H)<0)){var K={};K.ha=Math.round(B.advanceWidth*a),K.x_min=Math.round(B.xMin*a),K.x_max=Math.round(B.xMax*a),K.o="",B.path.commands.forEach(function(B,E){"c"===B.type.toLowerCase()&&(B.type="b"),K.o+=B.type.toLowerCase(),K.o+=" ",B.x!==j&&B.y!==j&&(K.o+=Math.round(B.x*a),K.o+=" ",K.o+=Math.round(B.y*a),K.o+=" "),B.x1!==j&&B.y1!==j&&(K.o+=Math.round(B.x1*a),K.o+=" ",K.o+=Math.round(B.y1*a),K.o+=" "),B.x2!==j&&B.y2!==j&&(K.o+=Math.round(B.x2*a),K.o+=" ",K.o+=Math.round(B.y2*a),K.o+=" ")}),E.glyphs[H]=K}}}),E.familyName=B.familyName,E.ascender=Math.round(B.ascender*a),E.descender=Math.round(B.descender*a),E.underlinePosition=B.tables.post.underlinePosition,E.underlineThickness=B.tables.post.underlineThickness,E.boundingBox={yMin:B.tables.head.yMin,xMin:B.tables.head.xMin,yMax:B.tables.head.yMax,xMax:B.tables.head.xMax},E.resolution=1e3,E.original_font_information=B.tables.name,B.styleName.toLowerCase().indexOf("bold")>-1?E.cssFontWeight="bold":E.cssFontWeight="normal",B.styleName.toLowerCase().indexOf("italic")>-1?E.cssFontStyle="italic":E.cssFontStyle="normal",E},C.prototype.reverseCommands=function(B){var a,E=[];B.forEach(function(B){"m"===B.type.toLowerCase()?(a=[B],E.push(a)):"z"!==B.type.toLowerCase()&&a.push(B)});var $=[];return E.forEach(function(B){var a={type:"m",x:B[B.length-1].x,y:B[B.length-1].y};$.push(a);for(var E=B.length-1;E>0;E--){var H=B[E];a={type:H.type},H.x2!==j&&H.y2!==j?(a.x1=H.x2,a.y1=H.y2,a.x2=H.x1,a.y2=H.y1):H.x1!==j&&H.y1!==j&&(a.x1=H.x1,a.y1=H.y1),a.x=B[E-1].x,a.y=B[E-1].y,$.push(a)}}),$}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);var vj=function(){function B(a,j){var E=this;Wa(this,B),this.editor=j,this.handler=a,this.cookie=0,this.callbacks={},this.cmds={};var $=Ra.config.host||window.location.hostname,H=Ra.config.port||window.location.port,K=window.location.protocol+"//"+$+":"+H;this.socket=io.connect(K),this.socket.on("connect",function(){E.handler({type:"connected",message:K})}),this.socket.on("disconnect",function(){E.handler({type:"disconnected",message:K})}),this.socket.on("fileChanged",function(B){E.handler({type:"fileChanged",path:B.path,event:B.event})}),this.socket.on("operationDone",function(B,a){E.handleRespone(B,a)}),this.socket.on("download",function(B){E.handler({type:"download",path:B})}),this.socket.on("confirm",function(B,a){E.handler({type:"confirm",path:B,datas:a})})}return B.prototype.request=function(B,a,j){var E=++this.cookie;this.callbacks[E]=j,this.cmds[E]=B;var $=this.editor.sid;this.socket.emit(B,E,a,$?{sid:$}:null);var H=B;a&&(kB(a)?H=B+": "+a:a.path&&(H=B+": "+a.path)),this.handler({type:"request",message:H,cmd:B,data:a})},B.prototype.handleRespone=function(B,a){var j=this.callbacks[B],E=this.cmds[B];delete this.callbacks[B],delete this.cmds[B],j&&j(a),this.handler({type:"response",message:E,cmd:E,data:a})},B}(),gj=function(B){function a(j,E){var $=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Wa(this,a);var H=Ga(this,B.call(this,E));return H.editor=j,H.editable=$,H.dragToIndexEnabled=!0,H.addTopPainter(H.$1$.bind(H)),H}return ra(a,B),a.prototype.getLabelColor=function(a){return a!==this.draggingData||this.isSelected(a)?B.prototype.getLabelColor.call(this,a):Ra.config.color_select},a.prototype.handleDelete=function(){this.editable&&this.removeSelection()},a.prototype.isDroppable=function(B,a){return!1},a.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},a.prototype._endDrag=function(B,a){},a.prototype._endCrossDrag=function(B,a){},a.prototype.$1$=function(B){B.texureImage2D=!0;var a=void 0;if(this._dragInfo&&this._dragInfo.inView?a=this._dragInfo:this._crossDragInfo&&(a=this._crossDragInfo),a){var j=this.getWidth(),E=this.getRowHeight(),$=a.type,H=a.parent,K=H?this.getRowDatas().indexOf(H):-1,C=Ra.config.color_select_dark;if(a.refData){if(Q(B,C,0,K*E,j,E,2),"up"===$||"down"===$){var Z=a.x,h=a.y;B.beginPath(),B.arc(Z-3,h,3,0,2*Math.PI,!0),B.moveTo(Z,h),B.lineTo(j,h),B.lineWidth=2,B.strokeStyle=C,B.stroke()}}else{var m=this.getViewRect();Q(B,C,m.x,m.y,m.width,m.height,2)}}},a.prototype._dragging=function(B,a){var j=this.getRowHeight(),E=this.lp(B),$=E.y/j,H=Math.floor($),K=this.getRowSize();if(H>K-1)a.refData=null,a.type="parent",a.parent=null;else{var C=E.y-H*j;this.dragToIndexEnabled?C<.25*j?a.type="up":C>.75*j?a.type="down":a.type="parent":a.type="parent";var Z=a.refData=this.getRowDatas().get(H);"up"===a.type?(a.parent=Z.getParent(),a.x=(this.getLevel(Z)+1)*this.getIndent(),a.y=H*j):"down"===a.type?(this.getToggleIcon(Z)===this.getExpandIcon()?(a.parent=Z,a.x=(this.getLevel(Z)+2)*this.getIndent()):(a.parent=Z.getParent(),a.x=(this.getLevel(Z)+1)*this.getIndent()),a.y=(H+1)*j):a.parent=Z}this.autoScroll(B),this.redraw()},a.prototype.$2$=function(){var B="";if(this.draggingData&&(B=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var a=this.sm().size();B+=a>1?" (+"+a+") ":""}return B},a.prototype.handleDragAndDrop=function(B,a){if(this.editable){if("prepare"===a)return void this._clearDragInfo();"begin"===a&&(this._dragInfo={tip:this.$2$(),view:this});var j=this._dragInfo;if(j){var E=this.editor.dnd;if("begin"===a||"between"===a){var $=this.getView().contains(P(B));return $?(j.inView=!0,this._dragging(B,j),E.clearDropView(B,j)):(j.inView&&this.redraw(),j.inView=!1,E.crossDrag(B,j)),void E.showTip(j.tip,B)}return"end"===a?(j.inView?this._endDrag(B,j):E.crossDrop(B,j),void this._clearDragInfo()):"cancel"===a?(j.inView||E.crossCancel(B,j),void this._clearDragInfo()):void 0}}},a.prototype.handleCrossDrag=function(B,a,j){return"exit"===a||"cancel"===a?(this._crossDragInfo=null,void this.redraw()):"enter"===a||"over"===a?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(B,this._crossDragInfo)):"drop"===a?(this._endCrossDrag(B,j),this._crossDragInfo=null,void this.redraw()):void 0},a.prototype.isEditable=function(B){return this.editable},a.prototype.rename=function(B,a){B.setName(a)},a.prototype.handleDataDoubleSelect=function(B,a){if(this.isEditable(a)){var j=this.getLevel(a);j+=this.getIcon(a)?2:1,this.lp(B).x>j*this.getIndent()&&this.beginEditing(a)}},a.prototype.getEditingLabel=function(B){return this.getLabel(B)},a.prototype.beginEditing=function(B){var a=this;this.cancelEditing(),this.makeVisible(B),this.validate();var j=this.getLevel(B);j+=this.getIcon(B)?2:1;var E=this.getIndent()*j,$=this.ty()+this.getRowIndex(B)*this.getRowHeight(),H=Math.max(1,this.getWidth()-E),K=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=B;var C=this._currentEditor.getElement(),Z=this.getEditingLabel(B);C.value=null==Z?"":Z,C.onblur=function(B){a.endEditing()},C.onkeydown=function(B){c(B)?a.endEditing():U(B)&&a.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),d(this._currentEditor,E,$,H,K),this._currentEditor.setFocus(),ht.Default.callLater(C.select,C)},a.prototype.endEditing=function(){var B=this._currentEditor;B&&(this.rename(B.data,B.getValue()),delete this._currentEditor,W(B.getView()),this.redraw())},a.prototype.cancelEditing=function(){var B=this._currentEditor;B&&(delete this._currentEditor,W(B.getView()),this.redraw())},a}(Sj);Ra.DNDTree=gj;var ij=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j.editor,j.dataModel,E));return $.explorer=j,$.dragToIndexEnabled=!1,$.setSortFunc(Ra.config.createFileTreeSortFunc($)),$}return ra(a,B),a.prototype.isVisible=function(B){return(!this._visibleFunc||this._visibleFunc(B)!==!1)&&(B.fileType===ua||B.fileType===Qa)},a.prototype.getLabel=function(B){return H("url:"+B.url,!0)||this.getEditingLabel(B)},a.prototype.getEditingLabel=function(B){return B.getName()},a.prototype.handleBackgroundClick=function(B){},a.prototype.handleDelete=function(){this.editable&&Ra.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},a.prototype.isDroppable=function(B,a){return!(!this.editable||a.view!==this.explorer.list)||a.view===this.editor.dndFromOutside},a.prototype._endCrossDrag=function(B,a){var j=this;if(this._crossDragInfo){var E=a.view,$=this._crossDragInfo.parent;$||($=this.explorer.rootNode),E===this.explorer.list?E.isSelected(E.draggingData)?E.sm().toSelection().each(function(B){j.editor.moveFile(B,$)}):this.editor.moveFile(E.draggingData,$):E===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(B,$)}},a.prototype._endDrag=function(B,a){var j=this,E=a.parent;if(E||(E=this.explorer.rootNode),this.isSelected(this.draggingData)){var $=this.getTopRowOrderSelection();$.each(function(B){j.editor.moveFile(B,E)})}else this.editor.moveFile(this.draggingData,E),this.sm().ss(this.draggingData);E&&this.expand(E)},a.prototype.isEditable=function(B){return this.editable&&B!==this.explorer.rootNode},a.prototype.beginEditing=function(a){var j={data:a,url:a.url};this.editor.fireEvent("fileRenaming",j),j.preventDefault||B.prototype.beginEditing.call(this,a)},a.prototype.rename=function(B,a){this.editor.renameFile(B,a,function(){
B.s("label")?B.s("label",a):B.setName(a)})},a.prototype.getIcon=function(B){return void 0!==B.getIcon()?B.getIcon():B.fileType===ua?this.hasExpandedChild(B)?"editor.direxpanded":"editor.dircollapsed":B.fileType===Qa?"editor.root.state":null},a}(gj),pj=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this,j));return E._lastSelectDataTime=Date.now(),E}return ra(a,B),a.prototype.isVScrollable=function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},a.prototype.isV=function(B){var a=this.gv.getViewRect();return this.isVScrollable()&&(a.x+a.width-this.gv.lp(B).x)*this.gv.getZoom()<ht.Default.scrollBarInteractiveSize},a.prototype.clear=function(B){B&&this._dragging&&!this._dragCancel&&this.gv.handleDragAndDrop(B,"end"),this.gv.draggingData&&(this.gv.draggingData.iv(),this.gv.draggingData=null,this.gv.redraw()),this._dragging=this._dragCancel=this._clientPoint=null},a.prototype.handle_mousedown=function(B){this.handle_touchstart(B)},a.prototype.handle_touchstart=function(B){if(!this.isV(B)&&!yB(B.target)){A(B),this.clear(B),this._clientPoint=w(B);var a=this.gv.getDataAt(B);X(B)?a?(this.gv.draggingData=a,a.iv(),this.gv.redraw(),this.gv.handleDragAndDrop(B,"prepare"),V(this,B)):this.gv.sm().cs():(a&&this.handleSelection(B,a),this.clear(B))}},a.prototype.handle_mouseup=function(B){this.handle_touchend(B)},a.prototype.handle_touchend=function(B){if(this._clientPoint&&!this._dragging&&!this.gv._justDoubleClickData){var a=this.gv.getDataAt(B);a&&this.handleSelection(B,a)}this.gv._justDoubleClickData=!1,this.clear(B)},a.prototype.handleWindowMouseMove=function(B){this.handleWindowTouchMove(B)},a.prototype.handleWindowMouseUp=function(B){this.handleWindowTouchEnd(B)},a.prototype.handleWindowTouchMove=function(B){A(B),this._dragging?this._dragCancel||this.gv.handleDragAndDrop(B,"between"):this._clientPoint&&this.gv.draggingData&&e(w(B),this._clientPoint)>2&&(this._dragging=!0,this.gv.handleDragAndDrop(B,"begin"))},a.prototype.handleWindowTouchEnd=function(B){A(B),this.clear(B)},a.prototype.handleSelection=function(B,a){var j=this.gv.sm();if(G(B))this.gv.isSelected(a)?j.removeSelection(a):j.appendSelection(a);else if(r(B)){var E=j.ld();if(E)for(var $=this.gv.nodes,H=$.indexOf(E),K=$.indexOf(a);H!==K;)H+=K>H?1:-1,j.as($[H]);else j.ss(a)}else if(X(B)){var C=Date.now();if(j.contains(a)){var Z=C-this._lastSelectDataTime;Z>500&&Z<1500&&this.gv.handleDataDoubleSelect(B,a)}j.ss(a),this._lastSelectDataTime=C}else j.contains(a)||j.ss(a)},a.prototype.handle_keydown=function(B){if(!yB(B.target))if(U(B))this._dragging&&!this._dragCancel&&(this.gv.handleDragAndDrop(B,"cancel"),this._dragCancel=!0);else if(s(B)||o(B)||k(B)||z(B)){var a=this.gv.sm(),j=this.gv.nodes,E=a.ld();if(j.length){var $=void 0;if(E){var H=j.indexOf(E);s(B)||k(B)?0!==H&&($=j[H-1]):H!==j.length-1&&($=j[H+1])}else $=j[0];$&&(r(B)?a.as($):a.ss($))}}},a}(ht.graph.Interactor),dj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j.editor,j.dm,E));return $.displayView=j,$.graphView=j.graphView,$.nodeIcon=rB($),$.initMenu(),j.dm.addDataPropertyChangeListener(function(B){var a=B.data;(a instanceof ht.Shape||a instanceof ht.Edge)&&(a.editorIcon=null)}),$}return ra(a,B),a.prototype.getBorderColor=function(B){return null},a.prototype.onDataDoubleClicked=function(B,a){a.altKey?this.graphView.fitData(B,!0,Ra.config.fitPadding):this.graphView.makeCenter(B,!0)},a.prototype.onPropertyChanged=function(a){"filter"===a.property&&(this.visibleMap=null,this.ivm()),B.prototype.onPropertyChanged.call(this,a)},a.prototype.handleDataPropertyChange=function(a){!this._filter||"name"!==a.property&&"displayName"!==a.property?B.prototype.handleDataPropertyChange.call(this,a):(this.visibleMap=null,this.ivm())},a.prototype.checkVisible=function(B){if(!this._filter)return!0;var a=this.getLabel(B);return null!=a&&(a=(a+"").toLowerCase(),a.indexOf(this._filter)>=0)},a.prototype.validateModel=function(){var a=this;this._filter&&!this.visibleMap&&(this.visibleMap={},this.getDataModel().each(function(B){if(a.checkVisible(B)){a.visibleMap[B._id]=!0;for(var j=B.getParent();j&&!a.visibleMap[j._id];)a.visibleMap[j._id]=!0,j=j.getParent()}})),B.prototype.validateModel.call(this),Ra.config.filterDisplayViewEnabled&&this.graphView.setVisibleFunc(function(B){return a.isVisible(B)})},a.prototype.isVisible=function(B){return!B._refGraph&&(!this._filter||this.visibleMap&&this.visibleMap[B._id])},a.prototype.validate=function(){this.graphView.validate(),B.prototype.validate.call(this)},a.prototype.getLabel=function(B){var a=B.toLabel();return null==a&&B.s("editor.folder")?H("ht.Folder"):B.toLabel()||H(B.getClassName())},a.prototype.getIcon=function(B){return B instanceof ht.SubGraph?"editor.subgraph":B instanceof ht.Group?"editor.group":B instanceof ht.RefGraph||B instanceof ht.Text?B.getIcon():B instanceof ht.Block?"editor.block":B instanceof ht.Shape?(B.editorIcon||(B.editorIcon=fB(B)),B.editorIcon):B instanceof ht.Edge?(B.editorIcon||(B.editorIcon=GB(this,B)),B.editorIcon):B instanceof ht.Node?this.nodeIcon:B.s("editor.folder")?this.hasExpandedChild(B)?"editor.direxpanded":"editor.dircollapsed":null},a.prototype.isDroppable=function(B,a){return a.view===this.editor.symbols.getFileListView()||(a.view===this.editor.assets.getFileListView()||a.view===this.editor.displays.getFileListView())},a.prototype._endCrossDrag=function(B,a){var j=this;if(this._crossDragInfo){this.editor.beginTransaction();var E=[],$=a.view,H=this._crossDragInfo.type,K=this._crossDragInfo.parent,C=this._crossDragInfo.refData;$!==this.editor.symbols.getFileListView()&&$!==this.editor.assets.getFileListView()||$.toDraggingDatas("down"===H).forEach(function(B){var a=new ht.Node;a.setImage(B.uuid),a.setDisplayName(i(B.getName())),E.push(a),j.displayView.addData(a,!0),j.editor.gv.$64$([a]),j._dropData(a,H,K,C)}),$===this.editor.displays.getFileListView()&&$.toDraggingDatas("down"===H).forEach(function(B){if(B.url!==j.editor.url){var a=new ht.RefGraph;a.setRef(B.uuid),a.setDisplayName(i(B.getName())),E.push(a),j.displayView.addData(a,!0),j._dropData(a,H,K,C)}}),E.length&&this.sm().ss(E),this.editor.endTransaction()}},a.prototype._endDrag=function(B,a){var j=this;this.editor.beginTransaction();var E=a.type,$=a.parent,H=a.refData;if(this.isSelected(this.draggingData)){var K=this.getTopRowOrderSelection();"down"===E&&K.reverse(),K.each(function(B){j._dropData(B,E,$,H)})}else this._dropData(this.draggingData,E,$,H),this.sm().ss(this.draggingData);$&&this.expand($),this.editor.endTransaction()},a.prototype._dropData=function(B,a,j,E){if(B.setParent(j),"down"===a||"up"===a){var $=j?j.getChildren():this.dm().getRoots(),H=$.indexOf(E);"down"===a&&H++,$.indexOf(B)<H&&H--,this.dm().moveTo(B,H)}else j||this.dm().moveToBottom(B)},a.prototype.rename=function(B,a){B.setDisplayName(a)},a.prototype.initMenu=function(){var B=this,a=function(){for(var a=B.editor.selection,j=0;j<a.length;j++)if(a[j].s("editor.folder"))return!0;return!1};this.menu=new Vj;var j=[{id:"folder",label:H("editor.folder"),action:function(){B.editor.folder()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"unfolder",label:H("editor.unfolder"),action:function(){B.editor.unfolder()},visible:function(){return B.editable&&a()}},{separator:!0,visible:function(){return B.editable&&!!B.editor.ld}},{id:"copy",label:H("editor.copy"),action:function(){B.editor.copy()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"paste",label:H("editor.paste"),action:function(){B.editor.paste()},visible:function(){return B.editable&&B.editor.hasCopyInfo()}},{id:"delete",label:H("editor.delete"),action:function(){B.editor.delete()},visible:function(){return B.editable&&!!B.editor.ld}},{separator:!0,visible:function(){return B.editable&&!!B.editor.ld}},{id:"bringToFront",label:H("editor.bringtofront"),action:function(){B.editor.bringToFront()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"bringForward",label:H("editor.bringforward"),action:function(){B.editor.bringForward()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"sendBackward",label:H("editor.sendbackward"),action:function(){B.editor.sendBackward()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"sendToBack",label:H("editor.sendtoback"),action:function(){B.editor.sendToBack()},visible:function(){return B.editable&&!!B.editor.ld}},{separator:!0,visible:function(){return B.editable&&!!B.editor.ld}},{id:"expandAll",label:H("editor.expandall"),action:function(){B.expandAll()}},{id:"collapseAll",label:H("editor.collapseall"),action:function(){B.collapseAll()}}];this.menu.setItems(j),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},a.prototype.onClosed=function(){K(this.editor.menus,this.menu)},a}(gj);q(dj,{ms_ac:["filter"]});var xj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j.dataModel));return $.explorer=j,$.editable=E,$.editor=j.editor,$.getHScrollBar().style.display="none",$.setMaxFileSize(Ra.config.imageSize),$.enableToolTip(),$.setPannable(!1),$.setInteractors([new ht.graph.ScrollBarInteractor($),new pj($),new ht.graph.DefaultInteractor($),new ht.graph.TouchInteractor($,{editable:!1})]),$}return ra(a,B),a.prototype.getToolTip=function(B){var a=this.getDataAt(B);return a?this._filter?a.url:this.getLabel(a):null},a.prototype.getLabel=function(B){return H("url:"+B.url,!0)||this.getEditingLabel(B)},a.prototype.isEditable=function(B){return this.editable},a.prototype.getEditingLabel=function(B){return B.s("label")||B.getName()},a.prototype.rename=function(B,a){this.editor.renameFile(B,a,function(){B.s("label")?B.s("label",a):B.setName(a)})},a.prototype.handleDelete=function(){this.editable&&Ra.config.removeFileByKeyboardEnabled&&this.explorer.deleteSelection(this)},a.prototype.beginEditing=function(B){var a=this,j={data:B,url:B.url};if(this.editor.fireEvent("fileRenaming",j),!j.preventDefault){this.cancelEditing(),this.makeVisible(B),this.validate();var E=this.getDataUI(B),$=!1,H=void 0;if(this.explorer.isAccordionMode()&&B.fileType===ua?(H=B.getRect(),$=!0):E&&E.labelInfo&&(H=E.labelInfo.rect),H){var K=void 0,C=void 0,Z=void 0,h=void 0;if($)K=H.x,C=H.y,Z=H.width,h=H.height;else if(this._layoutType===jj)K=this._rowHeight,C=B.p().y-this._rowHeight/2,Z=this.getWidth()-K,h=this._rowHeight;else{var m=E.labelInfo.rect||B.getRect();K=B.p().x-B.getWidth()/2,C=m.y,Z=B.getWidth(),h=m.height}C+=this.ty(),this._currentEditor=new ht.widget.TextField,this._currentEditor.data=B;var J=this._currentEditor.getElement(),O=this.getEditingLabel(B);J.value=null==O?"":O,J.onblur=function(B){a.endEditing()},J.onkeydown=function(B){c(B)?a.endEditing():U(B)&&a.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),d(this._currentEditor,K,C,Z,h),this._currentEditor.setFocus(),ht.Default.callLater(J.select,J)}}},a.prototype.endEditing=function(){var B=this._currentEditor;B&&(this.rename(B.data,B.getValue()),delete this._currentEditor,W(B.getView()),this.redraw())},a.prototype.cancelEditing=function(){var B=this._currentEditor;B&&(delete this._currentEditor,W(B.getView()),this.redraw())},a.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},a.prototype.handleDragAndDrop=function(B,a){if("prepare"===a)return void this._clearDragInfo();"begin"===a&&(this._dragInfo={tip:this.$2$(),view:this});var j=this._dragInfo;if(j){var E=this.editor.dnd;if("begin"===a||"between"===a){var $=this.getView().contains(P(B));return $?(j.inView=!0,this._dragging(B,j),E.clearDropView(B,j)):(j.inView&&this.redraw(),j.inView=!1,E.crossDrag(B,j)),void E.showTip(j.tip,B)}return"end"===a?(j.inView?this._endDrag(B,j):E.crossDrop(B,j),void this._clearDragInfo()):"cancel"===a?(j.inView||E.crossCancel(B,j),void this._clearDragInfo()):void 0}},a.prototype._dragging=function(B,a){if(this.editable){var j=this.getDataAt(B);j&&j.fileType===ua?a.targetData=j:a.targetData=null,this.autoScroll(B),this.redraw()}},a.prototype.$2$=function(){var B="";if(this.draggingData&&(B=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var a=this.sm().size();B+=a>1?" (+"+a+") ":""}return B},a.prototype._endDrag=function(B,a){},a.prototype.handleSelectionChange=function(a){B.prototype.handleSelectionChange.call(this,a),this.redraw()},a.prototype.handleCrossDrag=function(B,a,j){if(this.editable)return"exit"===a||"cancel"===a?(this._crossDragInfo=null,void this.redraw()):"enter"===a||"over"===a?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(B,this._crossDragInfo)):"drop"===a?(this._endCrossDrag(B,j),this._crossDragInfo=null,void this.redraw()):void 0},a.prototype._endCrossDrag=function(B,a){if(this.editable&&this._crossDragInfo){var j=this._crossDragInfo.targetData;if(j&&j.fileType===ua||(j=this.dm().sm().ld()),j){var E=a.view;"displays"===this.explorer.rootDir&&E instanceof dj&&this.handleDisplayTreeDrop(E,j),E===this.editor.dndFromOutside&&this.editor.dropLocalFileOnDir(B,j)}}},a}(wj);q(xj,{ms_ac:["layoutType","fileSize","fileGap","rowHeight","maxFileSize","filter"],_fileRect:{x:0,y:0,width:0,height:0},_layoutType:aj,_fileSize:50,_fileGap:6,_rowHeight:21,_maxFileSize:200});var Wj={filter:!0,layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,visibleFunc:!0},tj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,E));return $.nodes=[],$.doLayoutBind=$.doLayout.bind($),$.dm().sm().ms(function(){$.sm().cs(),$.doLayoutLater()}),$.dm().mm(function(){$.doLayoutLater()}),$.addInteractorListener($.handleInteraction.bind($)),$.addBottomPainter($.paintBottom.bind($)),$.addTopPainter($.paintTop.bind($)),$}return ra(a,B),a.prototype.getDataAt=function(a){if(this._layoutType===jj){var j=Math.floor(this.lp(a).y/this._rowHeight);return this.nodes[j]}return B.prototype.getDataAt.call(this,a)},a.prototype.paintBottom=function(B){var a=this,j=this._rowHeight,E=this.getWidth();this.nodes.forEach(function($){if(a.isSelected($))if(a._layoutType===jj)B.beginPath(),B.rect(0,$.p().y-j/2,E,j),B.fillStyle=Ra.config.color_select,B.fill();else{var H=$.getRect();Q(B,Ra.config.color_select,H.x-2,H.y-2,H.width+4,H.height+4,1)}})},a.prototype.paintTop=function(B){B.texureImage2D=!0;var a=void 0;if(this._dragInfo&&this._dragInfo.inView?a=this._dragInfo:this._crossDragInfo&&(a=this._crossDragInfo),a){var j=Ra.config.color_select_dark,E=a.targetData;if(B.texureImage2D=!0,E)if(this._layoutType===jj){var $=0,H=E.p().y-this._rowHeight/2,K=this.getWidth(),C=this._rowHeight;Q(B,j,$,H,K,C,2)}else{var Z=E.getRect();B.beginPath(),B.rect(Z.x,Z.y,Z.width,Z.height),B.lineWidth=2,B.strokeStyle=Ra.config.color_select_dark,B.stroke()}else{var h=this.getViewRect();Q(B,j,h.x,h.y,h.width,h.height,2)}}},a.prototype.toDraggingDatas=function(B){var a=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(B){B.fileType!==ua&&a.push(B)}),B&&a.reverse()):this.draggingData.fileType!==ua&&a.push(this.draggingData),a},a.prototype.isDroppable=function(B,a){return"displays"===this.explorer.rootDir&&a.view instanceof dj||a.view===this.editor.dndFromOutside},a.prototype._endDrag=function(B,a){var j=this,E=a.targetData;E&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(B){j.editor.moveFile(B,E)}):this.editor.moveFile(this.draggingData,E))},a.prototype.handleDisplayTreeDrop=function(B,a){var j=this,E=void 0;E=B.isSelected(B.draggingData)?B.getTopRowOrderSelection().toArray():[B.draggingData];var $={};E.forEach(function(B){D(B,$)});var K=new ht.JSONSerializer(B.getDataModel(),!0);K.isSerializable=function(B){return $[B._id]};var C=K.serialize(),Z=H("editor.inputnewdisplayname")+" ["+a.url+"]";YB(Z,B.getLabel(B.draggingData),{nullable:!1,trim:!0,maxLength:Ra.config.maxFileNameLength,checkFunc:Ra.config.checkFileName},function(B,E){"ok"===E&&!function(){HB(B)||(B+=".json");var E=a.url+"/"+B,H={path:E,content:C};j.editor.request("upload",H,function(B){B===!0&&!function(){var B=j.editor.gv,a=B.isVisible;B.isVisible=function(j){return a.call(B,j)&&$[j._id]},j.editor.saveImage(B,E.substr(0,E.length-5)+".png"),B.isVisible=a,B.redraw()}(),j.editor.fireEvent("displayViewSaved",{url:E})})}()})},a.prototype.handleDataDoubleSelect=function(B,a){if(this.isEditable(a)){var j=this.lp(B);if(this._layoutType===jj)j.x>this._rowHeight&&this.beginEditing(a);else{var E=this.getDataUI(a);E&&E.labelInfo&&E.labelInfo.rect&&ht.Default.containsPoint(E.labelInfo.rect,j)&&this.beginEditing(a)}}},a.prototype.getLabelColor=function(B){return B!==this.draggingData||this.isSelected(B)?this._layoutType===jj?this.isSelected(B)?Ra.config.color_light:ht.Default.labelColor:this.isSelected(B)?Ra.config.color_select:ht.Default.labelColor:Ra.config.color_select},a.prototype.handleInteraction=function(B){var a=B.kind,j=B.data,E=B.event;if("clickData"===a&&this._filter)this.dm().sm().ss(j.getParent());else if("doubleClickData"===a)1===this.sm().size()&&(this.setFilter(""),this._justDoubleClickData=!0,j.fileType===ua?this.dm().sm().ss(j):this.editor.open(j,r(E)));else if("doubleClickBackground"===B.kind&&!this._filter){var $=this.dm().sm().ld();$&&$.getParent()&&this.dm().sm().ss($.getParent())}},a.prototype.handleScroll=function(B,a){A(B),r(B)?a>0?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1)):(Cj||B.wheelDelta!==B.wheelDeltaX)&&(a=Cj?-B.detail:B.wheelDelta/40,this.translate(0,20*a))},a.prototype.handlePinch=function(B,a,j){j<a?this.setFileSize(Math.min(this.getFileSize()+2,this.getMaxFileSize())):this.setFileSize(Math.max(this.getFileSize()-2,1))},a.prototype.onPropertyChanged=function(B){xj.prototype.onPropertyChanged.apply(this,arguments),Wj[B.property]&&this.doLayoutLater()},a.prototype.isVisible=function(B){if(this._visibleFunc&&this._visibleFunc(B)===!1)return!1;if(this._filter){var a=this.getLabel(B);if(!a||a.indexOf(this._filter)<0)return!1}else{var j=this.dm().sm().ld();if(!j||B.getParent()!==j)return!1}return B.fileType!==Ma},a.prototype.isMovable=function(){return!1},a.prototype.onValidated=function(){this._lastWidth===this.getWidth()&&this._lastHeight===this.getHeight()||this.doLayoutLater()},a.prototype.adjustTranslateX=function(){return 0},a.prototype.adjustTranslateY=function(B){var a=this.getHeight()-this._fileRect.height;return B<a&&(B=a),B>0?0:Math.round(B)},a.prototype.getContentRect=function(){return this._fileRect},a.prototype.doLayoutLater=function(){this._doLayoutLater||(this._doLayoutLater=!0,requestAnimationFrame(this.doLayoutBind))},a.prototype.doLayout=function(){var B=this;this._doLayoutLater=!1,this.redraw();var a=this.nodes=[];this.dm().getDatas().each(function(j){B.isVisible(j)&&a.push(j)});var j=this._lastWidth=this.getWidth();this._lastHeight=this.getHeight();var E=this._fileGap;if(this._layoutType===jj){for(var $=this._rowHeight,H=Math.max($-4,2),K=0;K<a.length;K++){var C=a[K];C.setPosition(E+H/2,$*K+2+H/2),C.setSize(H,H),C.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0})}this._fileRect={x:0,y:0,width:j,height:$*a.length}}else{for(var Z=this._fileSize,h=Z+E,m=Z+E+16,J=E,O=E,k=0,s=0;s<a.length;s++){var z=a[s];z.setPosition(J+Z/2,O+Z/2),z.setSize(Z,Z),z.s({"label.position":31,"label.offset.x":0,"label.offset.y":2,"label.max":Z}),(k+2)*h+E>j?(J=E,s!==a.length-1&&(O+=m),k=0):(J+=h,k++)}this._fileRect={x:0,y:0,width:j,height:O+m}}this.tx(this.tx()),this.ty(this.ty()),this.showScrollBar()},a}(xj),rj=function(B){function a(j,E,$,H){Wa(this,a);var K=Ga(this,B.call(this));K.setSize(20,20),K._id=K.url=E?E+"/"+$:$,K.path=E,K.value=H,K.rootDir=j,sB(H)&&kB(H.fileType)&&null!=H.uuid?K.uuid=H.postfix?H.uuid+"."+H.postfix:H.uuid:K.uuid=K.url;var C=Ma,Z=void 0,h=void 0;return K.s({"select.width":0,pixelPerfect:!1,"image.stretch":"centerUniform"}),""===E?(C=Qa,h="editor.root.state"):$B($)&&"assets"===j?(C=qa,h=hB($)?"editor.dxf.state":mB($)?"editor.ttf":JB($)?"editor.otf":KB($)?"editor.sound.state":CB($)?"editor.video.state":K.url):HB($)&&"displays"===j?(C=Aa,h=OB(K.url),K.s("label",i($))):HB($)&&"symbols"===j?(C=Da,h=OB(K.url),K.s("label",i($))):HB($)&&"components"===j?(C=Ta,h=OB(K.url),K.s("label",i($))):HB($)&&"scenes"===j?(C=Bj,h=OB(K.url),K.s("label",i($))):HB($)&&"models"===j&&(C=La,h=OB(K.url),K.s("label",i($))),sB(H)&&(kB(H.fileType)?(C=H.fileType,Z=H.fileIcon,h=H.fileImage||h||Z,h||H.fileType!==ua||(h="editor.dir"),K.a(H.attrs),K.s(H.styles)):(C=ua,h="editor.dir")),h||(h="editor.unknown"),K.fileType=C,K.setIcon(Z),K.setImage(h),K.setName($),K}return ra(a,B),a}(ht.Node);ht.Default.setCompType("accordion-title-comp",function(B,a,j,E,$){var H=Ra.config.drawAccordionTitle;if(H)return void H(B,a,E,$,{isHover:E.__hover,isExpanded:E.expanded,hoverColor:Ra.config.color_hover,selectColor:Ra.config.color_select});var K=E.__hover,C=a.x,Z=a.y,h=a.width,m=a.height,J=$.getLabel(E),O=8,k=$.getFileGap();B.save(),(K||$.isSelected(E))&&(B.fillStyle=Ra.config.color_hover,B.fillRect(C,Z,h,m)),B.fillStyle=Ra.config.color_select,B.fillRect(C+k,Z+(m-O)/2,O,O),J&&ht.Default.drawText(B,J,"bold 14px Arial","black",C+k+O+8,Z,200,m,"left","middle"),B.restore()}),ht.Default.setImage("accordion-title",{width:160,height:24,fitSize:!0,pixelPerfect:!1,interactive:!0,boundExtend:2,onDown:function(B,a,j,E,$,H){ht.Default.isLeftButton(B)&&(j.getMutex()&&!a.expanded&&j.dirs.forEach(function(B){B!==a&&(B.expanded=!1)}),a.expanded=!a.expanded,j.ivm())},onEnter:function(B,a,j,E,$,H){a.__hover=!0,a.iv()},onLeave:function(B,a,j,E,$,H){a.__hover=!1,a.iv()},comps:[{type:"accordion-title-comp",displayName:"clock-pointer",rect:[0,0,160,24]}]});var Gj={layoutType:!0,fileSize:!0,fileGap:!0,rowHeight:!0,filePadding:!0,titleHeight:!0},fj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,E));return $.setFileGap(10),$.setMutex(Ra.config.accordionMutex),$.nodes=[],$.dirs=[],$.bottomRects=[],$.addViewListener(function(B){"beginValidate"===B.kind&&$.doLayout()}),$.setSelectionModelShared(!1),$.dm().sm().ms(function(){$.sm().cs()}),$._layouted=!1,$.mi($.handleInteraction.bind($)),$.addBottomPainter($.paintBottom.bind($)),$.addTopPainter($.paintTop.bind($)),$}return ra(a,B),a.prototype.paintBottom=function(B){var a=this,j=this._rowHeight,E=this.getWidth();this.nodes.forEach(function($){if(a._layoutType===jj)a.isSelected($)&&(B.beginPath(),B.rect(0,$.p().y-j/2,E,j),B.fillStyle=Ra.config.color_select,B.fill());else{var H=a.isSelected($)?Ra.config.color_select:Ra.config.color_mask,K=$.getRect(),C=K.x,Z=K.y,h=K.width,m=K.height,J=a._filePadding;Q(B,H,C-J,Z-J,h+2*J,m+2*J,1)}}),this.bottomRects.forEach(function(a){var j=a.x,E=a.y,$=a.width,H=a.height;B.beginPath(),B.lineWidth=2,B.strokeStyle=Ra.config.color_hover,B.moveTo(j+10,E+H/2),B.lineTo(j+$-10,E+H/2),B.stroke()})},a.prototype.isDroppable=function(B,a){return"displays"===this.explorer.rootDir&&a.view instanceof dj||a.view===this.editor.dndFromOutside},a.prototype.handleDragAndDrop=function(a,j){var E=this.draggingData;E&&E.fileType!==ua&&B.prototype.handleDragAndDrop.call(this,a,j)},a.prototype.isLabelVisible=function(B){return B.fileType!==ua},a.prototype.paintTop=function(B){B.texureImage2D=!0;var a=void 0;if(this._dragInfo&&this._dragInfo.inView?a=this._dragInfo:this._crossDragInfo&&(a=this._crossDragInfo),a){var j=Ra.config.color_select_dark,E=a.targetData;if(B.texureImage2D=!0,E){var $=E.getRect();B.beginPath(),B.rect($.x,$.y,$.width,$.height),B.lineWidth=2,B.strokeStyle=Ra.config.color_select_dark,B.stroke()}else{var H=this.getViewRect();Q(B,j,H.x,H.y,H.width,H.height,2)}}},a.prototype.getDataAt=function(a){if(this._layoutType!==jj)return B.prototype.getDataAt.call(this,a);var j=B.prototype.getDataAt.call(this,a);if(j)return j;for(var E=this.lp(a).y,$=0;$<this.nodes.length;$++){var H=this.nodes[$],K=H.getY(),C=this._rowHeight,Z=K-C/2,h=K+C/2;if(E>=Z&&E<h)return H}},a.prototype.handleInteraction=function(B){var a=B.kind,j=B.data,E=B.event;"doubleClickData"===a&&1===this.sm().size()&&j.fileType!==ua&&(this.setFilter(""),j.getParent().expanded=!0,this.sm().ss(j),this.ivm(),this.editor.open(j,r(E)),console.log("open"))},a.prototype.handleDataDoubleSelect=function(B,a){if(this.isEditable(a)){var j=this.lp(B);if(a.fileType!==ua)if(this._layoutType===jj)j.x>this._rowHeight&&this.beginEditing(a);else{var E=this.getDataUI(a);E&&E.labelInfo&&E.labelInfo.rect&&ht.Default.containsPoint(E.labelInfo.rect,j)&&this.beginEditing(a)}}},a.prototype.getLabelColor=function(B){return B!==this.draggingData||this.isSelected(B)?this._layoutType===jj?this.isSelected(B)?Ra.config.color_light:ht.Default.labelColor:this.isSelected(B)?Ra.config.color_select:ht.Default.labelColor:Ra.config.color_select},a.prototype.isVisible=function(B){if(!this._layouted)return!1;if(this._visibleFunc&&this._visibleFunc(B)===!1)return!1;var a=this.explorer.rootDir,j=B.getParent();if(B.fileType===Ma||!j)return!1;if(this._visibleFunc&&!this._visibleFunc(B))return!1;if(this._filter){var E=this.getLabel(B);if(j.url===a&&B.fileType===ua){for(var $=B.getChildren(),H=0;H<$.length;H++){var K=$.get(H);if(this.isVisible(K))return!0}return!1}if(j.getParent()&&j.getParent().url===a&&B.fileType!==ua)return!(!E||E.indexOf(this._filter)<0)}return j.url===a&&B.fileType===ua||!(!j.getParent()||j.getParent().url!==a||B.fileType===ua)&&!!j.expanded},a.prototype.adjustTranslateX=function(B){return 0},a.prototype.adjustTranslateY=function(B){if(!this.contentHeight)return 0;var a=this.getViewRect(),j=a.height-this.contentHeight;return B>=0||j>=0?0:B>j?B:j},a.prototype.getImage=function(B){if(B.getImage)return B.fileType===ua?"accordion-title":B.getImage()},a.prototype.doLayout=function(){var B=this;if(this._lastWidth!==this.getWidth()||this._lastHeight!==this.getHeight()||this._lastFileSize!==this.getFileSize()){this._doLayoutLater=!1,this.redraw();var a=this.dirs=[],j=this.nodes=[],E=this.bottomRects=[];this.dm().each(function(j){B.isVisible(j)&&j.fileType===ua&&a.push(j)});var $=this._lastWidth=this.getWidth(),H=this._titleHeight,K=0,C=0;this._lastHeight=this.getHeight(),this._lastFileSize=this._fileSize,this._expandIds&&(this.dirs.forEach(function(a){a.expanded=B._expandIds.indexOf(a.getId())>=0}),delete this._expandIds),a.forEach(function(a){a.setAnchor(0,0),a.p(K,C),a.setSize($,H),a.s("label",null),C+=H;var Z=[];a.getChildren().each(function(a){B.isVisible(a)&&(Z.push(a),j.push(a))}),C=B.layoutChildren(Z,C),a.expanded&&(E.push({x:0,y:C,width:$,height:16}),C+=16)}),this.contentHeight=C,this._layouted=!0}},a.prototype.layoutChildren=function(B,a){var j=this;if(!B||0===B.length)return a;var E=this._fileGap;if(this._layoutType===jj){var $=function(){var $=j._rowHeight,H=Math.max($-4,15);return B.forEach(function(B,j){B.setPosition(E+H/2,a+2+H/2),B.setSize(H,H),B.s({"label.position":20,"label.offset.x":3,"label.offset.y":0,"label.max":void 0}),a+=$}),{v:a}}();if("object"==typeof $)return $.v}else{var H=function(){var $=j.getWidth(),H=j._fileSize,K=j._filePadding,C=H+2*K,Z=E,h=a+E,m=0,J=H+E+2*K,O=H+E+16+2*K;return B.forEach(function(a,j){a.setPosition(Z+C/2,h+C/2),a.setSize(H,H),a.s({"label.position":31,"label.offset.x":0,"label.offset.y":2+K,"label.max":C}),(m+2)*J+E>$?(Z=E,j!==B.length-1&&(h+=O),m=0):(Z+=J,m++)}),{v:h+O}}();if("object"==typeof H)return H.v}},a.prototype.handleScroll=function(B){var a=Cj?-B.detail:B.wheelDelta/10;(Cj||B.wheelDelta!==B.wheelDeltaX)&&this.translate(0,a)},a.prototype.adjustZoom=function(){return 1},a.prototype.onPropertyChanged=function(a){B.prototype.onPropertyChanged.call(this,a);var j=a.property;"dataModel"!==j&&"fileSize"!==j||this.doLayout()},a.prototype._endDrag=function(B,a){var j=this,E=a.targetData;E&&E.fileType===ua&&(this.isSelected(this.draggingData)?this.sm().toSelection().each(function(B){j.editor.moveFile(B,E)}):this.editor.moveFile(this.draggingData,E),this.doLayout(),this.redraw())},a.prototype.toDraggingDatas=function(B){var a=[];return this.isSelected(this.draggingData)?(this.sm().toSelection().each(function(B){B.fileType!==ua&&a.push(B)}),B&&a.reverse()):this.draggingData.fileType!==ua&&a.push(this.draggingData),a},a.prototype.invalidateModel=function(){this._lastWidth=null,this.iv()},a.prototype.ivm=function(){this.invalidateModel()},a.prototype.getContentRect=function(){return{x:0,y:0,width:this.getWidth(),height:this.contentHeight||0}},a.prototype.onPropertyChanged=function(a){B.prototype.onPropertyChanged.apply(this,arguments),Gj[a.property]&&this.ivm()},ta(a,[{key:"expandIds",get:function(){var B=[];return this.dirs.forEach(function(a){a.expanded&&B.push(a.getId())}),B},set:function(B){this._expandIds=B,this._lastWidth=null}}]),a}(xj);q(fj,{ms_ac:["filePadding","titleHeight","mutex"],_mutex:!1,_filePadding:6,_titleHeight:36});var yj=function(B){function a(j,E){var $=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Wa(this,a);var H=Ga(this,B.call(this));H.editor=j,H.rootDir=E,H.copyFileInfos=[],H.dataModel=new ht.DataModel,H.dataModel.setAutoAdjustIndex(!1);var K=H.mode=Ra.config.explorerMode;K===Ej&&(H.accordion=new fj(H,$)),H.tree=new ij(H,$),H.list=new tj(H,$),H.controlPane=new ya,H.controlPane.addRow([{id:"filter",textField:{}},{id:"url",textField:{editable:!1}},{id:"slider",slider:{min:1,max:H.getFileListView().getMaxFileSize(),step:1,onValueChanged:function(B,a){H.getFileListView().setFileSize(a),H.getFileListView().setLayoutType(a>16?aj:jj)}}}],[.1,.2,ht.Default.isTouchable?70:50]);var C=H.controlPane.getViewById("filter").getElement();C.onkeyup=function(B){U(B)&&(C.value=""),K===Ej?(H.accordion.setFilter(C.value),H.accordion.ivm()):H.list.setFilter(C.value)};var Z=K===Ej?H.accordion:H.list;Z.mp(function(B){"filter"===B.property&&(C.value=B.newValue||"")});var h=H.controlPane.getItemById("slider").element;return h.getToolTip=function(){},H.getFileListView().mp(function(B){"fileSize"===B.property&&h.setValue(B.newValue)}),H.bottomPane=new Fj,H.bottomPane.setCenterView(H.getFileListView()),H.bottomPane.setBottomView(H.controlPane),H.bottomPane.setBottomHeight(ht.Default.widgetRowHeight+8),H.setOrientation("vertical"),K===Ej?(H.setLeftView(H.bottomPane),H.setPosition(1),H.accordion.sm().ms(function(){H.$52$(H.accordion)}),H.accordion.setFileSize(Ra.config.fileSize),H.setDraggable(!1)):(H.setLeftView(H.tree),H.setRightView(H.bottomPane),H.setPosition(Ra.config.explorerSplitViewPosition),H.list.setSelectionModelShared(!1),H.list.sm().ms(function(){H.$52$(H.list)}),H.list.setFileSize(Ra.config.fileSize)),H.tree.menu=new Vj,H.treeMenuItems=[],H.initTreeMenu(H.tree.menu,H.treeMenuItems),H.tree.menu.setItems(H.treeMenuItems),H.tree.menu.addTo(H.tree.getView()),H.editor.menus.push(H.tree.menu),H.list.menu=new Vj,H.listMenuItems=[],H.initListMenu(H.list.menu,H.listMenuItems),H.list.menu.setItems(H.listMenuItems),H.list.menu.addTo(H.list.getView()),H.editor.menus.push(H.list.menu),H.isAccordionMode()&&(H.accordion.menu=new Vj,H.accordionMenuItems=[],H.initAccordionMenu(H.accordion.menu,H.accordionMenuItems),H.accordion.menu.setItems(H.accordionMenuItems),H.accordion.menu.addTo(H.accordion.getView()),H.editor.menus.push(H.accordion.menu)),H}return ra(a,B),a.prototype.$52$=function(B){var a=B.sm().ld();this.controlPane.v("url",a?a.uuid:"")},a.prototype.isAccordionMode=function(){return this.mode===Ej},a.prototype.parse=function(B){var a=void 0,j=void 0,E=void 0,$=void 0;this.mode===Ej?(j=this.accordion.expandIds,a=this.accordion.ty()):(a=this.tree.ty(),j=this.tree.expandIds,E=this.tree.selectionIds,$=this.tree.dm().size()),this.dataModel.clear();var H=this.rootNode=new rj(this.rootDir,"",this.rootDir);this.dataModel.add(H);var K=void 0;B.fileType===ua||B.fileType===Qa?(H.a(B.attrs),H.s(B.styles),B.fileIcon&&(H.setIcon(B.fileIcon),H.setImage(B.fileIcon)),K=B.children):K=B;for(var C in K)this.parseChild(H,C,K[C]);var Z=this.dataModel.getDatas(),h={};Z.toArray().forEach(function(B,a){h[B._id]=a}),Z.sort(function(B,a){return B.fileType===Qa?-1:a.fileType===Qa?1:B.fileType===ua&&a.fileType!==ua?-1:B.fileType!==ua&&a.fileType===ua?1:h[B._id]-h[a._id];
}),this.mode===Ej?(this.accordion.expandIds=j,this.accordion.ty(a)):(this.tree.expandIds=j,this.tree.selectionIds=E,this.tree.ty(a),0===$&&(this.tree.expand(this.rootNode),this.tree.sm().ss(this.rootNode)));var m={explorer:this};this.editor.fireEvent("explorerUpdated",m)},a.prototype.parseChild=function(B,a,j){var E=new rj(this.rootDir,B.url,a,j);E.setParent(B),this.dataModel.add(E);var $=void 0;j.fileType===ua?$=j.children:E.fileType===ua&&($=j);for(var H in $)this.parseChild(E,H,$[H]);return E},a.prototype.deleteSelection=function(B){var a=this,j=[];if(B.sm().getTopSelection().forEach(function(B){var E={data:B,url:B.url};a.editor.fireEvent("fileDeleting",E),E.preventDefault||j.push(B)}),j.length){var E=B.getLabel(j[0])||j[0].getName(),$=H("editor.delete")+" ["+E+"]";j.length>1&&($+=" ("+j.length+")");var K=function(){a.editor.removeFiles(j)};Ra.config.deleteFileConfirm?RB($,H("editor.deleteselection"),K,function(){}):K()}},a.prototype.$53$=function(B){var a=this;B.push("separator"),B.push({id:"expandAll",label:H("editor.expandall"),action:function(){a.tree.expandAll()}}),B.push({id:"collapseAll",label:H("editor.collapseall"),action:function(){a.tree.collapseAll()}})},a.prototype.addDeleteItem=function(B,a){var j=this;B.push({id:"delete",label:H("editor.delete"),action:function(){j.deleteSelection(a)},visible:function(){return a.sm().ld()&&a.isEditable(a.sm().ld())}})},a.prototype.addNewFolderItem=function(B,a){var j=this;B.push({id:"newFolder",label:H("editor.newfolder"),action:function(){j.editor.newFolder(a)},visible:function(){return a.editable}})},a.prototype.addLocateTreeFileItem=function(B){var a=this;Ra.config.locateFileEnabled&&B.push({id:"locateFile",label:H("editor.locatefile"),action:function(){var B=a.tree.sm().ld()||a.rootNode;a.editor.locate(B)}})},a.prototype.addLocateListFileItem=function(B){var a=this;Ra.config.locateFileEnabled&&B.push({id:"locateFile",label:H("editor.locatefile"),action:function(){var B=a.ld||a.tree.sm().ld()||a.rootNode;a.editor.locate(B)}})},a.prototype.$55$=function(B){var a=this;B.push({id:"open",label:H("editor.open"),action:function(){a.editor.open(a.ld)},visible:function(){var B=a.ld;return!!B&&(B.fileType===Aa||B.fileType===Da||B.fileType===Ta||B.fileType===Bj)}})},a.prototype.addExportItem=function(B){var a=this;B.push({id:"export",label:H("editor.export"),action:function(){var B=[],j=a.getFileListView().sm();j.size()>0&&(j.each(function(a){B.push(a.url)}),a.editor.request("export",B))},visible:function(){var B=a.getFileListView().sm().ld();return!!B&&(B.fileType===Aa||B.fileType===Da||B.fileType===Ta||B.fileType===Bj)}})},a.prototype.addRenameItem=function(B,a){var j=this;B.push({id:"rename",label:H("editor.rename"),action:function(){var B=a.sm().ld();B&&B!==j.rootNode&&a.beginEditing(B)},visible:function(){var B=a.sm().ld();return B&&a.isEditable(B)}})},a.prototype.addInsertItem=function(B){var a=this;B.push({id:"insert",label:H("editor.insert"),action:function(){a.editor.$100$(a.getFileListView().sm().ld())},visible:function(){var B=a.getFileListView().sm().ld();return!!B&&(!!a.editor.gv&&(a.editor.url!==B.url&&(B.fileType===Ta?!!a.editor.symbolView:B.fileType===Da||B.fileType===qa)))}})},a.prototype.addCopyItem=function(B){var a=this;B.push({id:"copy",label:H("editor.copy"),action:function(){a.copyFiles()},visible:function(){if(!a.getFileListView().editable)return!1;var B=a.getFileListView().sm().ld();return!(!B||B===a.rootNode)}})},a.prototype.addPasteItem=function(B){var a=this;B.push({id:"paste",label:H("editor.paste"),action:function(){a.pasteFiles()},visible:function(){return!!a.getFileListView().editable&&(!a.isAccordionMode()||!!a.ld)}})},a.prototype.copyFiles=function(){var B=this;this.copyFileInfos.length=0,this.getFileListView().sm().each(function(a){if(a.fileType!==Qa&&a.fileType!==ua&&a.fileType!==Ma){var j={url:a.url,name:a.getName()};B.copyFileInfos.push(j),B.editor.fireEvent("copyFile",{url:a.url}),B.loadFileInfo(j)}})},a.prototype.loadFileInfo=function(B){var a=B.url;if(this.editor.requestBase64(a,function(a){B.content=a}),HB(a)){var j=OB(a);this.dataModel.getDataById(j)&&this.editor.requestBase64(j,function(a){B.image=a})}},a.prototype.pasteFiles=function(){var B=this;this.copyFileInfos.forEach(function(a){if(a.content){var j=a.url,E=void 0,$=2,H=B.currentDir+"/"+i(a.name),K=j.substring(j.lastIndexOf("."),j.length);for(E=H+K;B.dataModel.getDataById(E);)E=H+" "+$++ +K;var C={path:E,content:a.content};B.editor.request("upload",C),B.editor.fireEvent("pasteFile",{url:E}),a.image&&(C.path=OB(E),C.content=a.image,B.editor.request("upload",C),B.editor.fireEvent("pasteFile",{url:C.path}))}})},a.prototype.enableDroppableToSymbolView=function(){var B=this.list;this.mode===Ej&&(B=this.accordion),B.isDroppableToSymbolView=!0},a.prototype.enableDroppableToDisplayView=function(){var B=this.list;this.mode===Ej&&(B=this.accordion),B.isDroppableToDisplayView=!0},a.prototype.getFileListView=function(){return this.mode===Ej?this.accordion:this.list},a.prototype.initTreeMenu=function(B,a){},a.prototype.initListMenu=function(B,a){},a.prototype.initAccordionMenu=function(B,a){},ta(a,[{key:"currentDir",get:function(){var B=void 0;return this.isAccordionMode()?(B=this.ld,B&&B.fileType!==ua&&(B=B.getParent()),B?B.url:this.accordion.dirs[this.accordion.dirs.length-1].url):(B=this.tree.sm().ld(),B?B.url:this.rootDir)}},{key:"ld",get:function(){return this.getFileListView().sm().ld()}}]),a}(lj);Ra.Explorer=yj;var Yj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"displays",E));return $.enableDroppableToDisplayView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){this.addLocateTreeFileItem(a),this.addNewFolderItem(a,this.tree),this.addNewDisplayItem(a,this.tree),this.addRenameItem(a,this.tree),this.addDeleteItem(a,this.tree),this.$53$(a)},a.prototype.initListMenu=function(B,a){this.$55$(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.list),this.addNewDisplayItem(a,this.list),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.list),this.addDeleteItem(a,this.list),this.addExportItem(a)},a.prototype.initAccordionMenu=function(B,a){this.$55$(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.accordion),this.addNewDisplayItem(a,this.accordion),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.accordion),this.addDeleteItem(a,this.accordion),this.addExportItem(a)},a.prototype.addNewDisplayItem=function(B,a){var j=this;B.push({id:"newDisplayView",label:H("editor.newdisplayview"),action:function(){j.editor.newDisplayView(),j.editor.save()},visible:function(){if(!a.editable)return!1;if(j.isAccordionMode()){var B=j.accordion.sm().ld();return B&&B.fileType===ua}return!0}})},a}(yj),Rj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"symbols",E));return $.enableDroppableToDisplayView(),$.enableDroppableToSymbolView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){this.addLocateTreeFileItem(a),this.addNewFolderItem(a,this.tree),this.addNewSymbolItem(a,this.tree),this.addRenameItem(a,this.tree),this.addDeleteItem(a,this.tree),this.$53$(a)},a.prototype.initListMenu=function(B,a){this.$55$(a),this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.list),this.addNewSymbolItem(a,this.list),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.list),this.addDeleteItem(a,this.list),this.addExportItem(a)},a.prototype.initAccordionMenu=function(B,a){this.$55$(a),this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.accordion),this.addNewSymbolItem(a,this.accordion),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.accordion),this.addDeleteItem(a,this.accordion),this.addExportItem(a)},a.prototype.addNewSymbolItem=function(B,a){var j=this;B.push({id:"newSymbolView",label:H("editor.newsymbolview"),action:function(){j.editor.newSymbolView(),j.editor.save()},visible:function(){return a.editable}})},a}(yj),Nj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"components",E));return $.enableDroppableToSymbolView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){this.addLocateTreeFileItem(a),this.addNewFolderItem(a,this.tree),this.addNewComponentItem(a,this.tree),this.addRenameItem(a,this.tree),this.addDeleteItem(a,this.tree),this.$53$(a)},a.prototype.initListMenu=function(B,a){this.$55$(a),this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.list),this.addNewComponentItem(a,this.list),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.list),this.addDeleteItem(a,this.list),this.addExportItem(a)},a.prototype.initAccordionMenu=function(B,a){this.$55$(a),this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.accordion),this.addNewComponentItem(a,this.accordion),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.accordion),this.addDeleteItem(a,this.accordion),this.addExportItem(a)},a.prototype.addNewComponentItem=function(B,a){var j=this;B.push({id:"newComponent",label:H("editor.newcomponent"),action:function(){j.editor.newComponent()},visible:function(){return a.editable}})},a}(yj),Mj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"scenes",E));return $.enableDroppableToDisplayView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){},a.prototype.initListMenu=function(B,a){},a.prototype.initAccordionMenu=function(B,a){},a}(yj),Qj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"models",E));return $.enableDroppableToDisplayView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){},a.prototype.initListMenu=function(B,a){},a.prototype.initAccordionMenu=function(B,a){},a}(yj),uj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j,"assets",E));return $.enableDroppableToDisplayView(),$.enableDroppableToSymbolView(),$}return ra(a,B),a.prototype.initTreeMenu=function(B,a){this.addLocateTreeFileItem(a),this.addNewFolderItem(a,this.tree),this.addRenameItem(a,this.tree),this.addDeleteItem(a,this.tree),this.$53$(a)},a.prototype.initListMenu=function(B,a){this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.list),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.list),this.addDeleteItem(a,this.list),this.$54$(a)},a.prototype.initAccordionMenu=function(B,a){this.addInsertItem(a),this.addLocateListFileItem(a),this.addNewFolderItem(a,this.accordion),this.addCopyItem(a),this.addPasteItem(a),this.addRenameItem(a,this.accordion),this.addDeleteItem(a,this.accordion),this.$54$(a)},a.prototype.$54$=function(B){var a=this;B.push("separator"),B.push({id:"convertToDisplay",label:H("editor.converttodisplay"),action:function(){a.editor.open(a.getFileListView().sm().ld(),!1)},visible:function(){var B=a.getFileListView().sm().ld();return!!B&&(ZB(B.url)||hB(B.url))}}),B.push({id:"convertToSymbol",label:H("editor.converttosymbol"),action:function(){a.editor.open(a.getFileListView().sm().ld(),!0)},visible:function(){var B=a.getFileListView().sm().ld();return!!B&&(ZB(B.url)||hB(B.url)||mB(B.url)||JB(B.url))}})},a}(yj),qj=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E}return ra(a,B),a.prototype.$6$=function(B){this.setGraphView(this.editor.gv)},a}(_j),Dj=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this));$.editView=j,$.editor=j.editor,$.editable=E,$._topCanvas=y(),$._topDiv=Y(),$._view.insertBefore($._topCanvas,$._scrollBarDiv),$._view.insertBefore($._topDiv,$._scrollBarDiv);var H=[];return $.menu=new Vj(H),$.menu.beforeShow=function(B){$._rightClickPosition=$.lp(B)},$.initMenuItems(H),$.menu.addTo($.getView()),$.editor.menus.push($.menu),$.addTopPainter(function(B){return B.texureImage2D=!0}),$}return ra(a,B),a.prototype.isEditable=function(a){return!!this.editable&&B.prototype.isEditable.call(this,a)},a.prototype.isMovable=function(a){return!!this.editable&&B.prototype.isMovable.call(this,a)},a.prototype.onGroupDoubleClicked=function(a,j,E){this.editable&&B.prototype.onGroupDoubleClicked.call(this,a,j,E)},a.prototype.onEdgeDoubleClicked=function(a,j,E){this.editable&&B.prototype.onEdgeDoubleClicked.call(this,a,j,E)},a.prototype.checkDoubleClickOnNote=function(a,j){return!!this.editable&&B.prototype.checkDoubleClickOnNote.call(this,a,j)},a.prototype.$57$=function(B){var a=this;B.push({id:"copy",label:H("editor.copy"),action:function(){a.editor.copy()},visible:function(){return!!a.editor.ld}}),B.push({id:"paste",label:H("editor.paste"),action:function(){a.editor.paste(!1,a._rightClickPosition)},visible:function(){return a.editor.hasCopyInfo()}})},a.prototype.$56$=function(B){var a=this;B.push({separator:!0,visible:function(){return!!a.editor.ld}}),B.push({id:"bringToFront",label:H("editor.bringtofront"),action:function(){a.editor.bringToFront()},visible:function(){return!!a.editor.ld}}),B.push({id:"bringForward",label:H("editor.bringforward"),action:function(){a.editor.bringForward()},visible:function(){return!!a.editor.ld}}),B.push({id:"sendBackward",label:H("editor.sendbackward"),action:function(){a.editor.sendBackward()},visible:function(){return!!a.editor.ld}}),B.push({id:"sendToBack",label:H("editor.sendtoback"),action:function(){a.editor.sendToBack()},visible:function(){return!!a.editor.ld}})},a.prototype.initMenuItems=function(B){},a.prototype.onClosed=function(){K(this.editor.menus,this.menu)},a.prototype.$58$=function(B){return B&&this.copyMap[B._id]?B._id:B},a.prototype.$50$=function(B,a){return B instanceof ht.Data?this.dm().contains(B)?B:void 0:a[B]},a.prototype.getSelectWidth=function(B){return!this.isEditable(B)||B instanceof ht.Edge?B.s("select.width"):0},a.prototype.onSelectionChanged=function(B){if(1===this.sm().size()&&("set"===B.kind||"append"===B.kind)){var a=this.sm().ld();a&&document.activeElement===this.getView()&&this._dataModel.isAutoAdjustIndex()&&this.adjustIndex(a)}},a.prototype.getContentRect=function(){var a=B.prototype.getContentRect.call(this);return a.width&&a.height||(a={x:0,y:0,width:this.dm().a("width")||100,height:this.dm().a("height")||100,empty:!0}),a},a.prototype.isDroppable=function(B,a){return!1},a.prototype.$59$=function(B){if(this.dragImage){var a=Ra.config.dragImageSize,j=_(B);this.dragImage.style.left=j.x-a/2+"px",this.dragImage.style.top=j.y-a/2+"px"}},a.prototype.removeDragImage=function(){this.dragImage&&(W(this.dragImage),this.dragImage=null)},a.prototype.handleCrossDrag=function(B,a,j){var E=this,$=j.view,H=$.draggingData;if("enter"===a){if(this._topDiv.style.border="solid "+Ra.config.color_select_dark+" 2px",!this.dragImage&&H){var K=void 0===H.a("dragImage")?H.getImage():H.a("dragImage");if(ht.Default.getImage(K)!==ht.Default.getImage("editor.unknown")){var C=Ra.config.dragImageSize;this.dragImage=ht.Default.toCanvas(K,C,C,"centerUniform",H,j.view,null,ht.Default.devicePixelRatio),this.$59$(B),this.dragImage.style.opacity=Ra.config.dragImageOpacity,this.dragImage.className="ht-editor-dnd-image",ht.Default.appendToScreen(this.dragImage)}}}else"exit"===a||"cancel"===a?(this._topDiv.style.border="",this.removeDragImage()):"over"===a?this.$59$(B):"drop"===a&&(this._topDiv.style.border="",H?!function(){E.removeDragImage();var a=E.lp(B);$.isSelected(H)?$.sm().toSelection().each(function(j){$.handleDropToEditView?$.handleDropToEditView(E.editView,j,a,B):E.editor.$100$(j,a)}):$.handleDropToEditView?$.handleDropToEditView(E.editView,H,a,B):E.editor.$100$(H,a)}():$===this.editor.dndFromOutside&&this.editor.dropLocalFileOnGraphView(B))},a}(wj),Aj=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a.prototype.handleDataModelChange=function(a){B.prototype.handleDataModelChange.call(this,a),this.editor&&this.editor.fireEvent("displayViewDataModelChanged",{displayView:this.editView,event:a})},a.prototype.handleDataModelPropertyChange=function(a){B.prototype.handleDataModelPropertyChange.call(this,a),this.editor&&this.editor.fireEvent("displayViewDataModelPropertyChanged",{displayView:this.editView,event:a})},a.prototype.handleDataPropertyChange=function(a){B.prototype.handleDataPropertyChange.call(this,a),this.editor&&this.editor.fireEvent("displayViewDataPropertyChanged",{displayView:this.editView,event:a})},a.prototype.initMenuItems=function(B){this.$57$(B),this.$56$(B),this.addBlockItems(B)},a.prototype.isDroppable=function(B,a){return!!a.view.isDroppableToDisplayView},a.prototype.isSelectable=function(a,j){return!a._refGraph&&B.prototype.isSelectable.call(this,a,j)},a.prototype.addBlockItems=function(B){var a=this,j=function(){return a.sm().size()>0},E=function(){for(var B=0;B<a.sm().size();B++){var j=a.sm().getSelection().get(B);if(j instanceof ht.Block&&!(j instanceof ht.RefGraph))return!0}return!1};B.push({separator:!0,visible:function(){return j()||E()}}),B.push({id:"block",label:H("editor.block"),action:function(){a.editor.block()},visible:j}),B.push({id:"unblock",label:H("editor.unblock"),action:function(){a.editor.unblock()},visible:E})},a}(Dj),Tj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.defaultValueMap={},H.parse(j,E,$),H}return ra(a,B),a.prototype.toLabel=function(){return this.getDisplayName()||this.s("type")||H("editor.comptype.comp")},a.prototype.getClass=function(){return a},a.prototype.getStyle=function(a,j){var E=B.prototype.getStyle.call(this,a,j);return void 0===E&&(E=this.defaultValueMap[a]),E},a.prototype.$61$=function(B){var a=this;this.properties&&(this.properties=null),this.disableDirty=!0,this.defaultValueMap={};var j=this.s("type"),E=ht.Default.getCompType(j);E?!function(){a.$60$=null;var j={cache:E,width:{value:100,isSafeFunc:!0,func:function(B){return B._width}},height:{value:100,isSafeFunc:!0,func:function(B){return B._height}},comps:[{type:{func:function(B){return B.compType},isSafeFunc:!0}}]};if(!E.width||a._width>0||a.setWidth(E.width),!E.height||a._height>0||a.setHeight(E.height),E.properties){a.properties=E.properties;for(var $ in a.properties){var H=a.properties[$];j.comps[0][$]={func:"style@"+$},B?nB(a,$,B[$],H.defaultValue):void 0===a.s($)&&nB(a,$,void 0,H.defaultValue),a.defaultValueMap[$]=H.defaultValue}}var K=Ra.config.customProperties.comp;K&&K.length&&K.forEach(function(B){var a=B.property;j.comps[0][a]={func:"style@"+a}}),a.setImage(j),a.ivLater()}():(this.$60$=B,"editor.comp"!==this.getImage()&&(this.setImage("editor.comp"),this.ivLater())),this.disableDirty=!1},a.prototype.ivLater=function(){var B=this;ht.Default.callLater(function(){B.disableDirty=!0,B.iv(),B.disableDirty=!1})},a.prototype.onStyleChanged=function(a,j,E){B.prototype.onStyleChanged.call(this,a,j,E),"type"===a&&this.$61$(this.parsingComp)},a.prototype.parse=function(B,a,j){B&&(this.parsingComp=B,nB(this,"type",B.type),this.$61$(B),lB(this,B,a,j),this.parsingComp=null)},a.prototype.toJSON=function(){var B={};if(VB(this,B,"type","type",void 0),eB(this,B),this.properties)for(var a in this.properties){var j=this.properties[a];VB(this,B,a,a,j.defaultValue)}return B},ta(a,[{key:"compType",get:function(){var B=this.s("type");return this.$60$?this.$61$(this.$60$):B&&ht.Default.getCompType(B)!==this.getImage().cache&&this.$61$(),B}}]),a}(ht.Node),Lj=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.s({border_color:Ra.config.color_dark,border_width:1}),H.setImage("border_image"),H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.border")},a.prototype.parse=function(B,a,j){B&&(nB(this,"type",B.type,"border"),nB(this,"border_color",B.color,Ra.config.color_dark),nB(this,"border_width",B.width,1),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"type","type",void 0),VB(this,B,"border_color","color",void 0),VB(this,B,"border_width","width",void 0),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("type")}}]),a}(ht.Node),BE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.setSize(100,100),H.setImage("pieChart_image"),H.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.hollw":!1,"chart.start.angle":0,"chart.values":[],"chart.colors":void 0}),H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.piechart")},a.prototype.parse=function(B,a,j){B&&(nB(this,"chart.type",B.type,"pieChart"),nB(this,"chart.label",B.label,!1),nB(this,"chart.label.color",B.labelColor,ht.Default.labelColor),nB(this,"chart.label.font",B.labelFont,ht.Default.labelFont),nB(this,"chart.hollow",B.hollow,!1),nB(this,"chart.start.angle",B.startAngle,0),nB(this,"chart.values",B.values,[]),nB(this,"chart.colors",B.colors,void 0),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"chart.type","type",void 0),VB(this,B,"chart.label","label",!1),VB(this,B,"chart.label.color","labelColor",ht.Default.labelColor),VB(this,B,"chart.label.font","labelFont",ht.Default.labelFont),VB(this,B,"chart.hollow","hollow",!1),VB(this,B,"chart.start.angle","startAngle",0),VB(this,B,"chart.values","values",[]),VB(this,B,"chart.colors","colors",void 0),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("chart.type")}}]),a}(ht.Node),aE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.setSize(100,100),H.setImage("columnChart_image"),H.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0}),H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.columnchart")},a.prototype.parse=function(B,a,j){B&&(nB(this,"chart.type",B.type,void 0),nB(this,"chart.label",B.label,!1),nB(this,"chart.label.color",B.labelColor,ht.Default.labelColor),nB(this,"chart.label.font",B.labelFont,ht.Default.labelFont),nB(this,"chart.series",B.series,[]),nB(this,"chart.min.value",B.minValue,0),nB(this,"chart.max.value",B.maxValue,void 0),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"chart.type","type",void 0),VB(this,B,"chart.label","label",!1),VB(this,B,"chart.label.color","labelColor",ht.Default.labelColor),VB(this,B,"chart.label.font","labelFont",ht.Default.labelFont),VB(this,B,"chart.series","series",[]),VB(this,B,"chart.min.value","minValue",0),VB(this,B,"chart.max.value","maxValue",void 0),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("chart.type")}}]),a}(ht.Node),jE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.setSize(100,100),H.setImage("lineChart_image"),H.s({"chart.label":!1,"chart.label.color":ht.Default.labelColor,"chart.label.font":ht.Default.labelFont,"chart.series":[],"chart.min.value":0,"chart.max.value":void 0,"chart.line.point":!1,"chart.line.width":2,"chart.line.3d":!1}),H.parse(j,E,$),H}return ra(a,B),a.prototype.getClass=function(){return a},a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.linechart")},a.prototype.parse=function(B,a,j){B&&(nB(this,"chart.type",B.type,void 0),nB(this,"chart.label",B.label,!1),nB(this,"chart.label.color",B.labelColor,ht.Default.labelColor),nB(this,"chart.label.font",B.labelFont,ht.Default.labelFont),nB(this,"chart.series",B.series,[]),nB(this,"chart.min.value",B.minValue,0),nB(this,"chart.max.value",B.maxValue,void 0),nB(this,"chart.line.point",B.linePoint,!1),nB(this,"chart.line.width",B.lineWidth,2),nB(this,"chart.line.3d",B.line3d,!1),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return VB(this,B,"chart.type","type",void 0),VB(this,B,"chart.label","label",!1),VB(this,B,"chart.label.color","labelColor",ht.Default.labelColor),VB(this,B,"chart.label.font","labelFont",ht.Default.labelFont),VB(this,B,"chart.series","series",[]),VB(this,B,"chart.min.value","minValue",0),VB(this,B,"chart.max.value","maxValue",void 0),VB(this,B,"chart.line.point","linePoint",!1),VB(this,B,"chart.line.width","lineWidth",2),VB(this,B,"chart.line.3d","line3d",!1),eB(this,B),B},ta(a,[{key:"compType",get:function(){return this.s("chart.type")}}]),a}(ht.Node),EE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this,j.getView().graphView));return H.tab=j,H.editView=j.getView(),H.editor=H.editView.editor,H.clazz=E,H.type=$,H}return ra(a,B),a.prototype.beginTransaction=function(){this._isBeginTransaction||(this._isBeginTransaction=!0,this.dm.beginTransaction())},a.prototype.endTransaction=function(){this._isBeginTransaction&&(this._isBeginTransaction=!1,this.dm.endTransaction())},a.prototype.getDataAt=function(B){return this.gv.getDataAt(B)},a.prototype.getNodeAt=function(B){var a=this.getDataAt(B);return a instanceof ht.Node?a:null},a.prototype.setUp=function(){B.prototype.setUp.call(this),this.sm.cs()},a.prototype.$0$=function(B){},a.prototype.drawDiamond=function(B,a,j,E){var $=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4;a=this.toPoint(a),E&&(B.fillStyle=E),j&&(B.strokeStyle=j);var H=a,K=H.x,C=H.y;B.lineWidth=1,B.beginPath(),B.moveTo(K,C-$),B.lineTo(K+$,C),B.lineTo(K,C+$),B.lineTo(K-$,C),B.closePath(),E&&B.fill(),j&&B.stroke()},a.prototype.drawRect=function(B,a,j,E){a=this.toRect(a),E&&(B.fillStyle=E),j&&(B.strokeStyle=j),B.lineWidth=1,B.beginPath(),B.rect(a.x,a.y,a.width,a.height),B.stroke(),E&&B.fill(),j&&B.stroke()},a.prototype.drawPoint=function(B,a,j,E,$){a=this.toPoint(a),$&&(B.fillStyle=$),E&&(B.strokeStyle=E),B.lineWidth=1,B.beginPath(),B.arc(a.x,a.y,j,0,2*Math.PI,!0),$&&B.fill(),E&&B.stroke()},a.prototype.drawPoints=function(B,a,j,E,$){for(var H=0;H<a.length;H++)this.drawPoint(B,a[H],j,E,$)},a.prototype.drawLine=function(B,a,j,E){a=this.toPoint(a),j=this.toPoint(j),B.lineWidth=1,B.strokeStyle=E,B.beginPath(),B.moveTo(a.x,a.y),B.lineTo(j.x,j.y),B.stroke()},a.prototype.toRect=function(B){var a=this.zoom;return{x:B.x*a+this.tx,y:B.y*a+this.ty,width:B.width*a,height:B.height*a}},a.prototype.toPoint=function(B){return{x:B.x*this.zoom+this.tx,y:B.y*this.zoom+this.ty}},a.prototype.add=function(B){this.editView.addData(B)},a.prototype.remove=function(B){this.dm.remove(B)},a.prototype.lp=function(B){return this.gv.lp(B)},ta(a,[{key:"dm",get:function(){return this.gv.dm()}},{key:"sm",get:function(){return this.gv.dm().sm()}},{key:"zoom",get:function(){return this.gv.getZoom()}},{key:"tx",get:function(){return this.gv.tx()}},{key:"ty",get:function(){return this.gv.ty()}}]),a}(ht.graph.Interactor),$E=function(B){function a(j,E,$){return Wa(this,a),Ga(this,B.call(this,j,E,$))}return ra(a,B),a.prototype.tearDown=function(){B.prototype.tearDown.call(this),this.node=this.p1=this.p2=null},a.prototype.$49$=function(B){this.node?this.remove(this.node):this.editView.$5$("edit")},a.prototype.handle_mousedown=function(B){this.handle_touchstart(B)},a.prototype.handle_touchstart=function(B){A(B),X(B)&&(this.gv.setFocus(B),this.p1=this.lp(B),this.startDragging(B))},a.prototype.handleWindowMouseMove=function(B){this.handleWindowTouchMove(B)},a.prototype.handleWindowMouseUp=function(B){this.handleWindowTouchEnd(B)},a.prototype.handleWindowTouchMove=function(B){if(A(B),this.p1){this.p2=this.lp(B);var a=n(this.p1,this.p2);if(this.node)this.node.setRect(a);else{if(!a.width||!a.height)return;this.beginTransaction(),this.createNode(a,!1)}}},a.prototype.handleWindowTouchEnd=function(B){if(A(B),this.endTransaction(),!this.node&&this.p1&&this.createNode({x:this.p1.x-25,y:this.p1.y-25,width:50,height:50},!0),this.node){var a="display"===this.editView.type?"dataCreated":"compCreated",j={data:this.node};j["display"===this.editView.type?"displayView":"symbolView"]=this.editView,this.editor.fireEvent(a,j)}Ra.config.continuousCreating?this.node=this.p1=this.p2=null:this.editView.$5$("edit")},a.prototype.createNode=function(B,a){zB(this.type)?this.node=this.type(B,a):this.node=new this.clazz,a?this.node.setPosition(B.x+B.width/2,B.y+B.height/2):this.node.setRect(B),this.node.setParent(this.editView.graphView.getCurrentSubGraph()),this.dm.add(this.node),this.dm.sm().ss(this.node),this.editView.graphView.setFocus()},a.prototype.$0$=function(B){this.node&&this.drawRect(B,this.node.getRect(),Ra.config.color_data_border)},a}(EE),HE=function(B){function a(j,E,$){return Wa(this,a),Ga(this,B.call(this,j,E,$))}return ra(a,B),a.prototype.tearDown=function(){B.prototype.tearDown.call(this),this.draggingPoint=this.n1=this.n2=null},a.prototype.$49$=function(B){this.n1?(this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()):this.editView.$5$("edit")},a.prototype.drawAttachPoints=function(B,a,j){var E=this,$=this.gv.getAttachPoints(a);$&&$.forEach(function($,H){var K=$.x,C=$.y,Z=$.offsetX,h=$.offsetY;H===j?E.drawDiamond(B,a.getAttachPosition(K,C,Z,h),Ra.config.color_select,Ra.config.color_select,6):E.drawDiamond(B,a.getAttachPosition(K,C,Z,h),Ra.config.color_select,Ra.config.color_light)})},a.prototype.drawCurve=function(B,a,j){var E=this.gv.getEditInteractor();if(!E)return null;var $=E.getSubModule("Curve");return $?($.drawEdgeHostHighlight(B,a,j),void this.editView.validateCanvasLater()):null},a.prototype.$0$=function(B){if(this.n1&&(this.n1 instanceof ht.Edge?this.drawCurve(B,this.n1,this.edgePosition1):(this.drawRect(B,this.gv.getNodeRect(this.n1),Ra.config.color_data_border),this.drawAttachPoints(B,this.n1,this.attachIndex1)),this.draggingPoint)){var a=void 0,j=void 0;a=this.n1 instanceof ht.Edge?this.edgePosition1.point:this.attachIndex1||0===this.attachIndex1?this.getAttachPosition(this.n1,this.attachIndex1):this.n1.p(),this.n2 instanceof ht.Edge?j=this.edgePosition2.point:this.n2&&(this.attachIndex2||0===this.attachIndex2)&&(j=this.getAttachPosition(this.n2,this.attachIndex2)),this.drawLine(B,a,j||this.draggingPoint,Ra.config.color_data_border)}if(this.n2)if(this.n2 instanceof ht.Edge)this.drawCurve(B,this.n2,this.edgePosition2);else{var E=this.gv.getNodeRect(this.n2);this.n1!==this.n2&&(this.drawRect(B,E,Ra.config.color_data_border),this.drawAttachPoints(B,this.n2,this.attachIndex2));var $=this.toPoint({x:E.x,y:E.y}),H=3;B.beginPath(),B.moveTo($.x,$.y-15-H),B.lineTo($.x+10,$.y-15-H),B.lineTo($.x+10,$.y-H),B.lineTo($.x+5,$.y-7-H),B.moveTo($.x+10,$.y-H),B.lineTo($.x+15,$.y-7-H),B.lineWidth=1,B.strokeStyle=Ra.config.color_data_border,B.stroke()}},a.prototype.handle_mousemove=function(B){if(A(B),!this.draggingPoint){var a=this.getDataAt(B);if(a instanceof ht.Edge)this.edgePosition1=this.gv.calculateEdgePosition(a,this.lp(B));else{var j=this.attachIndex1;if(a){var E=this.gv.calculateAttachPoint(a,this.lp(B));this.attachIndex1=E?E.index:null}else this.attachIndex1=null;if(a===this.n1&&j===this.attachIndex1)return}this.n1=a,this.editView.validateCanvas()}},a.prototype.handle_mousedown=function(B){this.handle_touchstart(B)},a.prototype.handle_touchstart=function(B){A(B),X(B)&&(this.gv.setFocus(B),this.draggingPoint||(this.n1=this.getDataAt(B),this.n1&&(this.draggingPoint=this.lp(B),this.startDragging(B))))},a.prototype.handleWindowMouseMove=function(B){this.handleWindowTouchMove(B)},a.prototype.handleWindowMouseUp=function(B){this.handleWindowTouchEnd(B)},a.prototype.handleWindowTouchMove=function(B){var a=this.getDataAt(B);if(this.draggingPoint=this.lp(B),this.autoScroll(B),Ra.config.edgeLoop||this.n1!==a){if(this.n2=a,a)if(a instanceof ht.Edge)this.edgePosition2=this.gv.calculateEdgePosition(a,this.lp(B));else{var j=this.gv.calculateAttachPoint(a,this.lp(B));this.attachIndex2=j?j.index:null}}else this.attachIndex2=null,this.edgePosition2=null;this.editView.validateCanvas();
},a.prototype.handleWindowTouchEnd=function(B){if(this.n1&&this.n2){var a=void 0;kB(this.type)?(a=new this.clazz(this.n1,this.n2),a.s("edge.type",this.type)):a=zB(this.type)?this.type(this.n1,this.n2):new this.clazz(this.n1,this.n2);var j=void 0,E=void 0;if(this.n1 instanceof ht.Edge)void 0!==this.edgePosition1.index?a.setStyle("edge.source.index",this.edgePosition1.index):void 0!==this.edgePosition1.percent&&a.setStyle("edge.source.percent",this.edgePosition1.percent);else if(j=this.getAttachPoint(this.n1,this.attachIndex1)){var $=j,H=$.x,K=$.y,C=$.offsetX,Z=$.offsetY;a.s({"edge.source.anchor.x":H,"edge.source.anchor.y":K,"edge.source.offset.x":C,"edge.source.offset.y":Z})}if(this.n2 instanceof ht.Edge)void 0!==this.edgePosition2.index?a.setStyle("edge.target.index",this.edgePosition2.index):void 0!==this.edgePosition2.percent&&a.setStyle("edge.target.percent",this.edgePosition2.percent);else if(E=this.getAttachPoint(this.n2,this.attachIndex2)){var h=E,m=h.x,J=h.y,O=h.offsetX,k=h.offsetY;a.s({"edge.target.anchor.x":m,"edge.target.anchor.y":J,"edge.target.offset.x":O,"edge.target.offset.y":k})}(j||E)&&a.s("edge.offset",0),this.add(a),Ra.config.continuousCreating||this.editView.$5$("edit")}this.draggingPoint=this.n1=this.n2=null,this.editView.validateCanvas()},a.prototype.getAttachPoint=function(B,a){if(null===a||void 0===a)return null;var j=this.gv.getAttachPoints(B);return j&&0!==j.length?j[a]:null},a.prototype.getAttachPosition=function(B,a){var j=this.getAttachPoint(B,a),E=j.x,$=j.y,H=j.offsetX,K=j.offsetY;return B.getAttachPosition(E,$,H,K)},a}(EE),KE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this,j,E,$));return H.points=[],H.segments=[],H.nextPoint=null,H.closePath=!1,H}return ra(a,B),a.prototype.tearDown=function(){B.prototype.tearDown.call(this),this.points=[],this.segments=[],this.nextPoint=null,this.isBreak=!1},a.prototype.$49$=function(B){this.isBreak?this.createShape():(this.preCtrl=null,this.isBreak=!0,this.editView.validateCanvas())},a.prototype.createShape=function(){if(this.points.length>1){var B=void 0;zB(this.type)?B=this.type(this.points,this.segments):(B=new this.clazz,B.setPoints(this.points),B.setSegments(this.segments)),this.closePath&&B.setClosePath&&B.setClosePath(!0),this.add(B)}this.editView.$5$("edit"),this.editor.pointsEditingMode=!0},a.prototype.handle_mousedown=function(B){this.handle_touchstart(B)},a.prototype.isCloseStart=function(B){var a=this.points[0];if(!a)return!1;var j=this.lp(B),E=ht.Default.getDistance(a,j);return E<5},a.prototype.handle_touchstart=function(B){if(A(B),X(B)){if(this.gv.setFocus(B),F(B))this.createShape();else{if(this.isCloseStart(B))return this.closePath=!0,void this.createShape();var a=this.judgeNextPoint(B,!0);if(this.points.length){var j=this.points[this.points.length-1];if(Math.abs(j.x-a.x)<.01&&Math.abs(j.y-a.y)<.01)return}this.preCtrl?(this.points.push(this.preCtrl),this.points.push(a),this.points.push(a),this.segments.push(4),this.preCtrl=null):(this.isBreak?(this.segments.push(1),this.isBreak=!1):this.segments.push(this.points.length>0?2:1),this.points.push(a)),this.nextPoint=this.lp(B),this.editView.validateCanvas()}this.downPoint=this.lp(B),this.startDragging(B),this._dragging=!0}},a.prototype.judgeNextPoint=function(B,a){var j=this.lp(B);if(this._dragging||this.isBreak&&!a)return null;if(ht.Default.isShiftDown()&&this.points.length>0){var E=this.points[this.points.length-1],$=j.x-E.x,H=j.y-E.y,K=Math.atan2(H,$),C=ht.Default.getDistance(E,j),Z=K%(Math.PI/4);return K-=Z,Math.abs(Z)>Math.PI/8&&(Z>0?K+=Math.PI/4:K-=Math.PI/4),{x:E.x+Math.cos(K)*C,y:E.y+Math.sin(K)*C}}var h=this.gv.getEditInteractor(),m=h.gridGuide.findClosest(j);return m&&(m.x&&(j.x+=m.x),m.y&&(j.y+=m.y)),j},a.prototype.handle_mousemove=function(B){this.nextPoint=this.judgeNextPoint(B),this.editView.validateCanvas()},a.prototype.handle_touchend=function(B){},a.prototype.handle_mouseup=function(B){this.handle_touchend(B)},a.prototype.handleWindowTouchMove=function(B){return this.handleWindowMouseMove(B)},a.prototype.updateCtrl=function(B){var a=this.points.length,j=this.points[a-1],E=this.downPoint,$=this.lp(B),H=this.gv.getZoom(),K=ht.Default.getDistance(E,$),C=this.segments[this.segments.length-1];if(K*H>5){if(ht.Default.isShiftDown()){var Z=Math.abs;Z(j.x-$.x)>=Z(j.y-$.y)?$.y=j.y:$.x=j.x}else{var h=this.gv.getEditInteractor(),m=h.gridGuide.findClosest($);m&&(m.x&&($.x+=m.x),m.y&&($.y+=m.y))}var J={x:2*j.x-$.x,y:2*j.y-$.y};4===C?this.points[a-2]=J:1!==C&&(this.segments.pop(),this.segments.push(4),this.points.splice(a-1,0,J),this.points.push(this.points[a-1])),this.preCtrl=$}else 4===C&&(this.points[a-2]=this.points[a-1],this.preCtrl=null)},a.prototype.handleWindowMouseMove=function(B){0!==this.points.length&&(this.updateCtrl(B),this.editView.validateCanvas())},a.prototype.handleWindowTouchEnd=function(B){return this.handleWindowMouseUp(B)},a.prototype.handleWindowMouseUp=function(B){0!==this.points.length&&(this._dragging=!1,this.updateCtrl(B),this.nextPoint=this.judgeNextPoint(B,!0))},a.prototype.$0$=function(B){var a=[];B.beginPath();for(var j=0,E=void 0,$=void 0,H=void 0,K=0;K<this.segments.length;K++){var C=this.segments[K];1===C?(E=this.toPoint(this.points[j++]),B.moveTo(E.x,E.y)):2===C?(E=this.toPoint(this.points[j++]),B.lineTo(E.x,E.y)):3===C?(E=this.toPoint(this.points[j++]),$=this.toPoint(this.points[j++]),B.quadraticCurveTo(E.x,E.y,$.x,$.y)):4===C?(E=this.toPoint(this.points[j++]),$=this.toPoint(this.points[j++]),H=this.toPoint(this.points[j++]),B.bezierCurveTo(E.x,E.y,$.x,$.y,H.x,H.y)):5===C&&B.closePath(),a.push(this.points[j-1])}var Z=this.preCtrl;if(this.nextPoint)if(Z)E=this.toPoint(Z),$=this.toPoint(this.nextPoint),H=this.toPoint(this.nextPoint),B.bezierCurveTo(E.x,E.y,$.x,$.y,H.x,H.y);else{var h=this.toPoint(this.nextPoint);B.lineTo(h.x,h.y)}if(B.strokeStyle=Ra.config.color_data_border,B.lineWidth=1,B.stroke(),this.drawPoints(B,a,4,Ra.config.color_data_border,Ra.config.color_data_background),Z){var m=this.points[this.points.length-1],J=this.gv.getZoom(),O=3/J,k=6/J,s={x:2*m.x-Z.x,y:2*m.y-Z.y};this.drawLine(B,Z,s,Ra.config.color_data_border),this.drawRect(B,{x:s.x-O,y:s.y-O,width:k,height:k},Ra.config.color_data_border,Ra.config.color_data_background),this.drawRect(B,{x:Z.x-O,y:Z.y-O,width:k,height:k},Ra.config.color_data_border,Ra.config.color_data_background)}},a}(EE),CE={width:!0,height:!0,position:!0,rotation:!0,anchor:!0,scale:!0,expanded:!0},ZE={border:Lj,rect:zj,circle:zj,oval:zj,roundRect:zj,star:zj,triangle:zj,hexagon:zj,pentagon:zj,diamond:zj,rightTriangle:zj,parallelogram:zj,trapezoid:zj,polygon:zj,arc:zj,image:cj,shape:oj,text:Uj,pieChart:BE,oneDimensionalColumnChart:aE,columnChart:aE,lineChart:jE,comp:Tj},hE=function(){function B(a,j,E,$){var H=this;Wa(this,B),this.editor=a,this.tab=j,this.type=$,j.setView(this);var K=this.graphView=new E(this);this._view=f(!0,this),K.addViewListener(function(B){"validate"===B.kind&&H.validateCanvas()}),this._hRuler=y(),this._vRuler=y(),this._view.appendChild(K.getView()),this.$5$("edit"),K.isInteractive=function(){return!1},K.addPropertyChangeListener(function(){H.iv()}),K.addInteractorListener(function(B){H.handleInteractorEvent(B)}),this.dm.sm().addSelectionChangeListener(function(B){H.iv()}),this.dm.addDataModelChangeListener(function(B){H.handleDataModelChanged(B)}),this.dm.addDataPropertyChangeListener(function(B){H.handleDataPropertyChanged(B)}),this.dm.addPropertyChangeListener(function(B){H.handleDataModelPropertyChanged(B)}),this.dm.addHierarchyChangeListener(function(B){H.handleHierarchyChanged(B)}),this.dm.layout=function(B,a){H._autoLayout||(H._autoLayout=new ht.layout.AutoLayout(K)),H._autoLayout.options=a||{};var j=H.graphView.getZoom(),E=H.graphView.tx(),$=H.graphView.ty();H.dm.beginTransaction(),H._autoLayout.setAnimate(Ra.config.animate);var C=function(){var B=H.graphView.getZoom(),a=H.graphView.tx(),K=H.graphView.ty(),C={undo:function(){H.graphView.setZoom(j),H.graphView.tx(E),H.graphView.ty($)},redo:function(){H.graphView.setZoom(B),H.graphView.tx(a),H.graphView.ty(K)}};H.dm.addHistory(C),H.dm.endTransaction()};H._autoLayout.layout(B,function(){Ra.config.animate?K.fitContent({finishFunc:C}):(K.fitContent(!1,Ra.config.fitPadding),C())})},this.graphView.setEditable(!0),this.graphView.getInteractors().each(function(B){B.keep=!0}),this.setRulerEnabled(this.editor.isRulerEnabled()),this.init()}return B.prototype.handleInteractorEvent=function(B){"prepareMove"!==B.kind&&"prepareEdit"!==B.kind||!B.event.altKey||(this.editor.copy(),this.editor.paste(!0),this.editor.gv.validate())},B.prototype.handleDataModelChanged=function(B){this.dirty=!0},B.prototype.handleDataPropertyChanged=function(B){B.data.disableDirty||this.graphView.fpImageLoaded||"*"!==B.property&&(CE[B.property]&&this.iv(),this.dirty=!0)},B.prototype.handleHierarchyChanged=function(B){this.dirty=!0},B.prototype.handleDataModelPropertyChanged=function(B){var a=B.property,j=B.newValue;null!=j&&("a:gridBlockSize"===a?this.graphView.getEditInteractor().setStyle("gridBlockSize",j):"a:gridThickLinesEvery"===a?this.graphView.getEditInteractor().setStyle("gridThickLinesEvery",j):"a:gridThickColor"===a?this.graphView.getEditInteractor().setStyle("gridThickColor",j):"a:gridLightColor"===a?this.graphView.getEditInteractor().setStyle("gridLightColor",j):"a:gridAngle"===a?this.graphView.getEditInteractor().setStyle("gridAngle",j):"a:gridRotation"===a?this.graphView.getEditInteractor().setStyle("gridRotation",j):"a:gridZoomThreshold"===a&&this.graphView.getEditInteractor().setStyle("gridZoomThreshold",j)),"a:connectActionType"===a?this.graphView.setCurrentConnectActionType(j):"a:rotateAsClock"===a&&this.graphView.getEditInteractor().setStyle("rotateAsClock",j),this.dirty=!0,this.validateCanvas()},B.prototype.onPropertyChanged=function(B){"rulerEnabled"===B.property&&(this.graphView.getEditInteractor().alignmentGuideEnabled=B.newValue),this.iv()},B.prototype.parse=function(B,a){(B||a)&&(this.url=B,a?this.update(a):t(B,this.update.bind(this)))},B.prototype.update=function(B,a){var j=this;B&&(a?!function(){var E=v(j.content),$=B,H={undo:function(){j._updateImpl(E,!0)},redo:function(){j._updateImpl($,!0)}};j.dm.disableHistoryManager(),j._updateImpl(B,a),j.dm.enableHistoryManager(),j.dm.addHistory(H)}():(this.dm.disableHistoryManager(),this._updateImpl(B,a),this.dm.enableHistoryManager(),this.dm.clearHistoryManager()))},B.prototype._saveNew=function(B,a,j,E){var $=this,K=function(j,K){if("ok"===K){var C=HB(j)?i(j):j,Z=E+"/"+C+".json",h=$.editor.getFileNode(Z);h?RB(H("editor.filenameconflict"),Z,function(){B&&B()}):($.tab.setName(C),$.url=Z,$.tab.setTag($.url),$.editor.dataView.updateUrl(),$._saveImpl(a))}else B&&B()},C={name:void 0};return"display"===this.type?(C.displayView=this,this.editor.fireEvent("displayViewNewNameInputing",C)):"symbol"===this.type&&(C.symbolView=this,this.editor.fireEvent("symbolViewNewNameInputing",C)),!C.preventDefault&&void(C.name?K(C.name,"ok"):YB(j,this.tab.getName(),{nullable:!1,trim:!0,maxLength:Ra.config.maxFileNameLength,checkFunc:Ra.config.checkFileName},K))},B.prototype._saveAs=function(B,a){this.tab.setName(p(a)),this.url=a,this.tab.setTag(this.url),this.editor.dataView.updateUrl(),this._saveImpl(B)},B.prototype._saveImpl=function(B){var a=this,j=this.url,E={url:j};return"display"===this.type?(Ra.config.settingDefaultValueBeforeSaving&&this.dm.each(function(B){if(B instanceof ht.Node){var a=ht.Default.getImage(B.getImage());a&&a.dataBindings&&a.dataBindings.forEach(function(a){var j=B.getAttrObject(),E=a.defaultValue;if(void 0!==E){var $=a.attr;j&&void 0!==j[$]||B.a($,E)}})}}),E.displayView=this,this.editor.fireEvent("displayViewSaving",E)):"symbol"===this.type&&(E.symbolView=this,this.editor.fireEvent("symbolViewSaving",E)),!E.preventDefault&&(E={path:E.url,content:v(this.content)},void this.editor.request("upload",E,function(E){E===!0?(a.editor.saveImage(a.dm.a("snapshotURL")||a.graphView,j.substr(0,j.length-5)+".png",function(){a.dirty=!1}),B&&B(),a.editor.showMessage(H("editor.savedsuccessfully"),$j,1e3)):(a.tab&&a.editor.mainTabView.removeTab(a.tab),delete a.tab,a.editor.showMessage(H("editor.savedfailed"),Hj,1e3))}))},B.prototype.$65$=function(B,a){var j=this;this.tab.getTag()&&a.indexOf("?")===-1&&(a+="?tag="+encodeURI(this.tab.getTag()));var E={url:a};if("display"===this.type?(E.displayView=this,this.editor.fireEvent("displayViewPreviewing",E)):"symbol"===this.type&&(E.symbolView=this,this.editor.fireEvent("symbolViewPreviewing",E)),E.preventDefault)return!1;a=E.url,window.open(a,a);var $=this.content;$.title=this.tab.getName(),E={path:B,content:v($)},this.editor.request("upload",E,function(B){"display"===j.type?j.editor.fireEvent("displayViewPreview",{displayView:j,url:a}):"symbol"===j.type&&j.editor.fireEvent("symbolViewPreview",{symbolView:j,url:a})})},B.prototype.$4$=function(){return this._interactionState},B.prototype.$5$=function(B,a,j){var E=this,$=this._interactionState;if($!==B){this._interactionState=B,this.editor.pointsEditingMode=!1;var H=[];if(this.graphView.getInteractors().each(function(a){a.keep?a.disabled="edit"!==B:H.push(a)}),H.forEach(function(B){B.tearDown(),E.graphView.getInteractors().remove(B)}),"edit"!==B){var K=kB(a)?this.$63$(a,j):this.$62$(a,j);K.setUp(),this.graphView.getInteractors().add(K)}this.graphView.invalidateSelection(),this.editor.mainToolbar.iv(),this.fp("interactionState",$,B),this.validateCanvas()}},B.prototype.$62$=function(B,a){var j=new B;return j instanceof ht.Shape?new KE(this.tab,null,function(j,E){var $=new B;return $.setPoints(j),$.setSegments(E),a&&a($),$}):j instanceof ht.Edge?new HE(this.tab,null,function(B,j){var E=new ht.Edge(B,j);return a&&a(E),E}):j instanceof ht.Node?new $E(this.tab,null,function(j,E){var $=new B;return a&&a($,j,E),$}):void 0},B.prototype.$63$=function(B,a){var j=this,E=ZE[B];return"shape"===B?new KE(this.tab,null,function($,H){var K={type:"shape",background:null,borderColor:Ra.config.color_data_border,borderWidth:1};a&&a(K,$,H);var C=new E(K);return C.setPoints($),C.setSegments(H),j.editor.fireEvent("compInited",{type:B,data:C,symbolView:j.editor.symbolView}),C}):new $E(this.tab,null,function($,K){var C=void 0;C="arc"===B?{type:B,rect:[$.x,$.y,$.width,$.height],background:Ra.config.color_data_background,borderWidth:1,borderColor:Ra.config.color_data_border,arcFrom:0,arcTo:4.1888}:"border"===B?{type:B,rect:[$.x,$.y,$.width,$.height],border:1,color:Ra.config.color_data_border}:"text"===B?{type:B,rect:[$.x,$.y,$.width,$.height],text:H("editor.text")}:"comp"===B||"image"===B?K?{rect:[$.x+$.width/2,$.y+$.height/2,-1,-1]}:{rect:[$.x,$.y,$.width,$.height]}:"pieChart"===B?{type:"pieChart",values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}:"oneDimensionalColumnChart"===B?{type:"columnChart",series:[{values:[10,20,40,60,80],colors:["#7EB6EA","#434348","#93EB82","#F5A262","#8087E6"]}]}:"columnChart"===B?{type:"columnChart",series:[{values:[30,40,60,70,80],color:"#7EB6EA"},{values:[20,40,50,80,90],color:"#434348"}]}:"lineChart"===B?{type:"lineChart",series:[{values:[10,40,30,60,70],color:"#7EB6EA"}]}:{type:B,rect:[$.x,$.y,$.width,$.height],background:Ra.config.color_data_background,borderWidth:1,borderColor:Ra.config.color_data_border},a&&a(C,$,K);var Z=new E(C);return j.editor.fireEvent("compInited",{type:B,data:Z,symbolView:j.editor.symbolView}),Z})},B.prototype.init=function(){this.clear()},B.prototype.resetGrid=function(){},B.prototype.clear=function(){this.dm.setName(void 0),this.dm.setBackground(void 0),this.dm.setHierarchicalRendering(!1),this.dm.setLayers(void 0),this.dm.clear(),this.dm.setAttrObject(void 0),this.resetGrid()},B.prototype.onClosed=function(){this.graphView.onClosed()},B.prototype.addData=function(B){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],j=arguments.length>2&&void 0!==arguments[2]&&arguments[2],E=arguments.length>3&&void 0!==arguments[3]&&arguments[3],$="display"===this.type?"dataCreated":"compCreated",H={data:B};return H["display"===this.type?"displayView":"symbolView"]=this,j?void this.editor.fireEvent($,H):(this.dm.beginTransaction(),a||B.getParent()||B.setParent(this.graphView.getCurrentSubGraph()),this.dm.add(B),a||(E||this.dm.sm().ss(B),this.graphView.setFocus()),this.editor.fireEvent($,H),void this.dm.endTransaction())},B.prototype.validateCanvasLater=function(){var B=this;B._drawTimer||(B._drawTimer=setTimeout(function(){B._drawTimer=null,B.validateCanvas()},0))},B.prototype.validateCanvas=function(){var B=this.graphView._topCanvas,a=u(B);a.clearRect(0,0,B.clientWidth,B.clientHeight),this.graphView.getInteractors().each(function(B){B.$0$&&B.$0$(a)}),this.$0$(a),a.restore()},B.prototype.redraw=function(){this._lastWidth=this._lastHeight=null,this.iv()},B.prototype.validateImpl=function(){var B=this._rulerSize,a=this._rulerEnabled,j=this.getWidth(),E=this.getHeight();if(j!==this._lastWidth||E!==this._lastHeight||B!==this._lastRulerSize||a!==this._lastRulerEnabled){if(this._lastWidth=j,this._lastHeight=E,this._lastRulerSize=B,this._lastRulerEnabled=a,a){this._hRuler.parentNode||(this._view.appendChild(this._hRuler),this._view.appendChild(this._vRuler));var $=Math.max(0,j-B),H=Math.max(0,E-B);d(this._hRuler,B,0,$,B),d(this._vRuler,0,B,B,H),d(this.graphView,B,B,$,H),d(this.graphView._topDiv,0,0,$,H),x(this.graphView._topCanvas,$,H),x(this._hRuler,$,B),x(this._vRuler,B,H)}else this._hRuler.parentNode&&(W(this._hRuler),W(this._vRuler)),d(this.graphView,0,0,j,E),d(this.graphView._topDiv,0,0,j,E),x(this.graphView._topCanvas,j,E);this.validateCanvas()}this._hRuler.style.background=this._rulerBackground,this._vRuler.style.background=this._rulerBackground,this.drawRuler()},B.prototype.$0$=function(B){var a=this.graphView.getZoom(),j=this.graphView.tx(),E=this.graphView.ty(),$=Math.round(this.dm.a("width")||0)*a,H=Math.round(this.dm.a("height")||0)*a,K=this.graphView.getWidth(),C=this.graphView.getHeight();!Ra.config.mixMaskAndBackground&&this.dm.getBackground()||$>0&&H>0&&K>0&&C>0&&(B.beginPath(),j&&B.rect(0,0,j,C),E&&K-j&&B.rect(j,0,K-j,E),K-j-$&&H&&B.rect(j+$,E,K-j-$,H),K-j&&C-E-H&&B.rect(j,E+H,K-j,C-E-H),B.fillStyle=Ra.config.color_mask,B.fill())},B.prototype.drawVerticalText=function(B,a,j){B.save(),B.translate(11,j+11),B.rotate(-Math.PI/2),N(B,a,this._rulerFont,this._rulerColor,11,-11,0,this._rulerSize,"right"),B.restore()},B.prototype.drawRuler=function(){if(this._rulerEnabled){var B,a,j,E,$,H,K=this._rulerFont,C=this._rulerSize,Z=this._rulerColor,h=this.graphView,m=h.getUnionNodeRect(h.sm().getSelection()),J=h.getZoom(),O=Math.log(J)/Math.log(10),k=Math.floor(O),s=100,z=10,o=s/Math.pow(10,k)*J,c=o/z,U=k>1?40+10*(k-1):40,I=Math.round(h.tx()),X=Math.round(h.ty()),F={x:-I,y:-X,width:h.getWidth(),height:h.getHeight()},V=Math.floor(F.x/o),w=Math.ceil((F.x+F.width)/o),P=Math.floor(F.y/o),_=Math.ceil((F.y+F.height)/o);for(u(this._hRuler,0,0,1,{x:0,y:0,width:F.width,height:C}).restore(),E=u(this._hRuler,I,0,1),E.lineWidth=1,E.strokeStyle=Z,m&&(E.beginPath(),E.rect(m.x*J,0,m.width*J,C),E.fillStyle=Ra.config.color_line,E.fill()),E.beginPath(),B=V;B<=w;B++)$=B*o,H=k>1?($/J).toFixed(k-1):Math.round($/J),$=Math.round($),E.moveTo($,C),E.lineTo($,0),N(E,H,K,Z,$,0,1,C,"left");for(E.stroke(),E.beginPath(),B=V;B<=w;B++)for(j=1;j<z;j++)$=B*o+j*c,H=k>1?($/J).toFixed(k-1):Math.round($/J),$=Math.round($),E.moveTo($,C),5===j?(E.lineTo($,C-10),N(E,H,K,Z,$,0,1,C,"left")):(E.lineTo($,C-4),c>U&&N(E,H,K,Z,$,0,1,C,"left"));for(E.stroke(),E.restore(),u(this._vRuler,0,0,1,{x:0,y:0,width:C,height:F.height}).restore(),E=u(this._vRuler,0,X,1),E.lineWidth=1,E.strokeStyle=Z,m&&(E.beginPath(),E.rect(0,m.y*J,C,m.height*J),E.fillStyle=Ra.config.color_line,E.fill()),E.beginPath(),a=P;a<=_;a++)$=a*o,H=k>1?($/J).toFixed(k-1):Math.round($/J),$=Math.round($),E.moveTo(C,$),E.lineTo(0,$),this.drawVerticalText(E,H,$);for(E.stroke(),E.beginPath(),a=P;a<=_;a++)for(j=1;j<z;j++)$=a*o+j*c,H=k>1?($/J).toFixed(k-1):Math.round($/J),$=Math.round($),E.moveTo(C,$),5===j?(E.lineTo(C-10,$),this.drawVerticalText(E,H,$)):(E.lineTo(C-4,$),c>U&&this.drawVerticalText(E,H,$));E.stroke(),E.restore()}},ta(B,[{key:"dm",get:function(){return this.graphView.dm()}},{key:"dirty",get:function(){return this.tab.a("dirty")},set:function(B){ht.Default.loadingRefGraph||this.tab.a("dirty",B)}}]),B}();q(hE,{ms_v:1,ms_fire:1,ms_ac:["rulerEnabled","rulerBackground","rulerFont","rulerColor","rulerSize","guideColor"],_rulerFont:Ra.config.smallFont,_rulerBackground:Ra.config.color_pane,_rulerColor:Ra.config.color_dark,_rulerSize:Ra.config.rulerSize,_guideColor:Ra.config.color_transparent,_interactionState:void 0}),Ra.EditView=hE;var mE=function(B){function a(j,E,$,H){Wa(this,a);var K=Ga(this,B.call(this,j,E,Aj,"display"));K.displayTree=K.list=new dj(K);var C=K.graphView.getEditInteractor();return C.gridEnabled=K.editor.isGridEnabled(),K.dirty=!1,K.dm.enableHistoryManager(Ra.config.maxUndoRedoSteps),K.parse($,H),$?H||K.editor.fireEvent("displayViewOpening",{displayView:K,url:$}):K.editor.fireEvent("displayViewCreated",{displayView:K,json:H}),K}return ra(a,B),a.prototype.init=function(){B.prototype.init.call(this),this.dm.setHierarchicalRendering(!0)},a.prototype.onClosed=function(){B.prototype.onClosed.call(this),this.displayTree.onClosed()},a.prototype.handleDataModelChanged=function(B){"add"!==B.kind||this.isDeserializing||B.data.setLayer(this.editor.currentLayer),this.dirty=!0},a.prototype.update=function(a,j){B.prototype.update.call(this,a,j),this.editor.fireEvent(j?"displayViewCommitted":"displayViewOpened",{displayView:this,url:this.url,json:a})},a.prototype._updateImpl=function(B,a){var E=this,$=g(B);this.clear(),this.isDeserializing=!0,this.dm.deserialize($,void 0,{disableOnPreDeserialize:!0,disableOnPostDeserialize:!0}),this.isDeserializing=!1,this.dirty=!!a,!a&&Ra.config.fitContentForDisplayView&&($.contentRect?!function(){var B=j($.contentRect);ht.Default.grow(B,Ra.config.fitPadding),E.graphView.getWidth()&&E.graphView.getHeight()?E.graphView.fitRect(B,Ra.config.animate):setTimeout(function(){E.graphView.fitRect(B,Ra.config.animate)},500)}():this.graphView.fitContent(Ra.config.animate,Ra.config.fitPadding))},a.prototype.reload=function(){if(this.url){var B={displayView:this,url:this.url};return this.editor.fireEvent("displayViewReloading",B),!B.preventDefault&&void this.parse(this.url)}},a.prototype.save=function(B,a){var j=this,E=function(){B&&B(),j.editor.fireEvent("displayViewSaved",{displayView:j,url:j.url}),j.editor.selectFileNode(j.url)};if(a)this._saveAs(E,a);else if(this.url)this._saveImpl(E);else{var $=this.editor.displays.currentDir,K=H("editor.inputnewdisplayname");this._saveNew(B,E,K,$)}},a.prototype.clear=function(){B.prototype.clear.call(this),this.dm.a("connectActionType",Ra.config.displayConnectActionType),this.dm.a("rotateAsClock",Ra.config.rotateAsClock)},a.prototype.resetGrid=function(){this.dm.a("gridBlockSize",Ra.config.displayGridBlockSize),this.dm.a("gridThickLinesEvery",Ra.config.displayGridThickLinesEvery),this.dm.a("gridThickColor",Ra.config.displayGridThickColor),this.dm.a("gridLightColor",Ra.config.displayGridLightColor),this.dm.a("gridAngle",Ra.config.displayGridAngle),this.dm.a("gridRotation",Ra.config.displayGridRotation),this.dm.a("gridZoomThreshold",Ra.config.displayGridZoomThreshold)},a.prototype.skewGrid=function(){this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6)},a.prototype.preview=function(){this.$65$("previews/display.json",this.dm.a("previewURL")||Ra.config.displayPreviewURL)},ta(a,[{key:"content",get:function(){var B=this.dm,a=B.toJSON();a.modified=(new Date).toString(),B.a("connectActionType")===Ra.config.displayConnectActionType&&delete a.connectActionType,B.a("rotateAsClock")===Ra.config.rotateAsClock&&delete a.rotateAsClock,B.a("gridBlockSize")===Ra.config.displayGridBlockSize&&delete a.a.gridBlockSize,B.a("gridThickLinesEvery")===Ra.config.displayGridThickLinesEvery&&delete a.a.gridThickLinesEvery,B.a("gridThickColor")===Ra.config.displayGridThickColor&&delete a.a.gridThickColor,B.a("gridLightColor")===Ra.config.displayGridLightColor&&delete a.a.gridLightColor,B.a("gridAngle")===Ra.config.displayGridAngle&&delete a.a.gridAngle,B.a("gridRotation")===Ra.config.displayGridRotation&&delete a.a.gridRotation,B.a("gridZoomThreshold")===Ra.config.displayGridZoomThreshold&&delete a.a.gridZoomThreshold,B.a("xAlignmentGuides")&&!B.a("xAlignmentGuides").length&&delete a.a.xAlignmentGuides,B.a("yAlignmentGuides")&&!B.a("yAlignmentGuides").length&&delete a.a.yAlignmentGuides;var j=this.graphView.getContentRect();return B.a("width")>0&&B.a("height")>0&&(a.contentRect={x:0,y:0,width:B.a("width"),height:B.a("height")}),B.size()&&j&&j.width&&j.height&&(a.contentRect=j),a}}]),a}(hE),JE=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a.prototype.setDataModel=function(B){var a=this,j=a._dataModel,E=a._selectionModel;j!==B&&(j&&(j.umm(a.handleDataModelChange,a),j.umd(a.handleDataPropertyChange,a),j.removeIndexChangeListener(a.handleIndexChange,a),E||j.sm().ums(a.handleSelectionChange,a)),a._dataModel=B,B.mm(a.handleDataModelChange,a),B.md(a.handleDataPropertyChange,a),B.addIndexChangeListener(a.handleIndexChange,a),E?E._setDataModel(B):B.sm().ms(a.handleSelectionChange,a),a.fp("dataModel",j,B))},a.prototype.handleIndexChange=function(B){this.ivm()},a.prototype.handleDataPropertyChange=function(B){this.invalidateData(B.data)},a.prototype.validateModel=function(){var B=this;B._rows.clear(),B._rowMap={};var a=B._rows=B._dataModel.toDatas(B.isVisible,B),j=0,E=B.getCurrentSortFunc(),$=a.size();for(E&&a.sort(E);j<$;j++)B._rowMap[a.get(j)._id]=j},a}(Pj),OE=function(B){function a(j,E){var $=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];Wa(this,a);var H=Ga(this,B.call(this,E));return H.editor=j,H.editable=$,H.addTopPainter(H.$1$.bind(H)),H}return ra(a,B),a.prototype.isEditable=function(B){return this.editable},a.prototype.handleDelete=function(){this.editable&&this.removeSelection()},a.prototype.handleDataDoubleSelect=function(B,a){if(this.isEditable(a)){var j=this.getIcon(a)?this.getIndent():0;this.lp(B).x>j&&this.beginEditing(a)}},a.prototype.rename=function(B,a){B.setName(a)},a.prototype.isDroppable=function(B,a){return!1},a.prototype._clearDragInfo=function(){this.editor.dnd.hideTip(),this._dragInfo&&(this._dragInfo=null,this.redraw())},a.prototype._endDrag=function(B,a){},a.prototype._endCrossDrag=function(B,a){},a.prototype.$1$=function(B){B.texureImage2D=!0;var a=void 0;if(this._dragInfo&&this._dragInfo.inView?a=this._dragInfo:this._crossDragInfo&&(a=this._crossDragInfo),a){var j=this.getWidth(),E=(this.getRowHeight(),a.type,Ra.config.color_select_dark);if(a.refData){var $=a.y;B.beginPath(),B.arc(4,$,3,0,2*Math.PI,!0),B.moveTo(7,$),B.lineTo(j,$),B.lineWidth=2,B.strokeStyle=E,B.stroke()}else{var H=this.getViewRect();Q(B,E,H.x,H.y,H.width,H.height,2)}}},a.prototype._dragging=function(B,a){var j=this.getRowHeight(),E=this.lp(B),$=E.y/j,H=Math.floor($),K=this.getRowSize();H>K-1?(a.refData=null,a.type=null,a.parent=null):(a.refData=this.getRowDatas().get(H),E.y-H*j<.5*j?(a.type="up",a.y=H*j):(a.type="down",a.y=(H+1)*j)),this.autoScroll(B),this.redraw()},a.prototype.$2$=function(){var B="";if(this.draggingData&&(B=this.getLabel(this.draggingData),this.isSelected(this.draggingData))){var a=this.sm().size();B+=a>1?" (+"+a+") ":""}return B},a.prototype.handleDragAndDrop=function(B,a){if(this.editable){if("prepare"===a)return void this._clearDragInfo();"begin"===a&&(this._dragInfo={tip:this.$2$(),view:this});var j=this._dragInfo;if(j){var E=this.editor.dnd;if("begin"===a||"between"===a){var $=this.getView().contains(P(B));return $?(j.inView=!0,this._dragging(B,j),E.clearDropView(B,j)):(j.inView&&this.redraw(),j.inView=!1,E.crossDrag(B,j)),void E.showTip(j.tip,B)}return"end"===a?(j.inView?this._endDrag(B,j):E.crossDrop(B,j),void this._clearDragInfo()):"cancel"===a?(j.inView||E.crossCancel(B,j),void this._clearDragInfo()):void 0}}},a.prototype.handleCrossDrag=function(B,a,j){if(this.editable)return"exit"===a||"cancel"===a?(this._crossDragInfo=null,void this.redraw()):"enter"===a||"over"===a?(this._crossDragInfo||(this._crossDragInfo={}),void this._dragging(B,this._crossDragInfo)):"drop"===a?(this._endCrossDrag(B,j),this._crossDragInfo=null,void this.redraw()):void 0},a.prototype.beginEditing=function(B){var a=this;this.cancelEditing(),this.makeVisible(B),this.validate();var j=this.getIcon(B)?this.getIndent():0,E=this.ty()+this.getRowIndex(B)*this.getRowHeight(),$=Math.max(1,this.getWidth()-j),H=this.getRowHeight();this._currentEditor=new ht.widget.TextField,this._currentEditor.data=B;var K=this._currentEditor.getElement(),C=this.getLabel(B);K.value=null==C?"":C,K.onblur=function(B){a.endEditing()},K.onkeydown=function(B){c(B)?a.endEditing():U(B)&&a.cancelEditing()},this.getView().appendChild(this._currentEditor.getView()),d(this._currentEditor,j,E,$,H),this._currentEditor.setFocus(),ht.Default.callLater(K.select,K)},a.prototype.endEditing=function(){var B=this._currentEditor;B&&(this.rename(B.data,B.getValue()),delete this._currentEditor,W(B.getView()),this.redraw())},a.prototype.cancelEditing=function(){var B=this._currentEditor;B&&(delete this._currentEditor,W(B.getView()),this.redraw())},a}(JE);Ra.DNDIndexList=OE;var kE=function(B){function a(j){var E=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Wa(this,a);var $=Ga(this,B.call(this,j.editor,j.dm,E));return $.graphView=j.graphView,$.nodeIcon=rB($),$.initMenu(),j.dm.addDataPropertyChangeListener(function(B){B.data.editorIcon=null}),$}return ra(a,B),a.prototype.onDataDoubleClicked=function(B,a){a.altKey?this.graphView.fitData(B,!0,Ra.config.fitPadding):this.graphView.makeCenter(B,!0)},a.prototype.onPropertyChanged=function(a){"filter"===a.property&&this.ivm(),B.prototype.onPropertyChanged.call(this,a)},a.prototype.handleDataPropertyChange=function(a){!this._filter||"displayName"!==a.property&&"s:text"!==a.property&&"s:type"!==a.property&&"s:image"!==a.property?B.prototype.handleDataPropertyChange.call(this,a):this.ivm()},a.prototype.isVisible=function(B){if(!this._filter)return!0;var a=this.getLabel(B);return null!=a&&(a=(a+"").toLowerCase(),a.indexOf(this._filter)>=0)},a.prototype.validate=function(){this.graphView.validate(),B.prototype.validate.call(this)},a.prototype.validateModel=function(){var a=this;B.prototype.validateModel.call(this),Ra.config.filterSymbolViewEnabled&&this.graphView.setVisibleFunc(function(B){return a.isVisible(B)})},a.prototype.getIcon=function(B){return B instanceof Xj?"editor.restore.state":B instanceof ht.Text?B.getIcon():B instanceof ht.Shape?(B.editorIcon||(B.editorIcon=fB(B)),B.editorIcon):B instanceof ht.Node?this.nodeIcon:null},a.prototype.isDroppable=function(B,a){return!1},a.prototype._endCrossDrag=function(B,a){},a.prototype._endDrag=function(B,a){var j=this;this.editor.beginTransaction();var E=a.type,$=a.refData;if(this.isSelected(this.draggingData)){var H=this.getRowOrderSelection();"down"===E&&H.reverse(),H.each(function(B){j._dropData(B,E,$)})}else this._dropData(this.draggingData,E,$),this.sm().ss(this.draggingData);this.editor.endTransaction()},a.prototype._dropData=function(B,a,j){if(j){var E=this.dm().getDatas(),$=E.indexOf(j);"down"===a&&$++,E.indexOf(B)<$&&$--,this.dm().moveToIndex(B,$)}else this.dm().bringToFront(B)},a.prototype.rename=function(B,a){B.setDisplayName(a)},a.prototype.initMenu=function(){var B=this;this.menu=new Vj;var a=[{id:"copy",label:H("editor.copy"),action:function(){B.editor.copy()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"paste",label:H("editor.paste"),action:function(){B.editor.paste()},visible:function(){return B.editable&&B.editor.hasCopyInfo()}},{id:"delete",label:H("editor.delete"),action:function(){B.editor.delete()},visible:function(){return B.editable&&!!B.editor.ld}},"separator",{id:"bringToFront",label:H("editor.bringtofront"),action:function(){B.editor.bringToFront()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"bringForward",label:H("editor.bringforward"),
action:function(){B.editor.bringForward()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"sendBackward",label:H("editor.sendbackward"),action:function(){B.editor.sendBackward()},visible:function(){return B.editable&&!!B.editor.ld}},{id:"sendToBack",label:H("editor.sendtoback"),action:function(){B.editor.sendToBack()},visible:function(){return B.editable&&!!B.editor.ld}}];this.menu.setItems(a),this.menu.addTo(this.getView()),this.editor.menus.push(this.menu)},a.prototype.onClosed=function(){K(this.editor.menus,this.menu)},a}(OE);q(kE,{ms_ac:["filter"]});var sE=function(B){function a(j){return Wa(this,a),Ga(this,B.call(this,j))}return ra(a,B),a.prototype.handleDataModelChange=function(a){B.prototype.handleDataModelChange.call(this,a),this.editor&&this.editor.fireEvent("symbolViewDataModelChanged",{symbolView:this.editView,event:a})},a.prototype.handleDataModelPropertyChange=function(a){B.prototype.handleDataModelPropertyChange.call(this,a),this.editor&&this.editor.fireEvent("symbolViewDataModelPropertyChanged",{symbolView:this.editView,event:a})},a.prototype.handleDataPropertyChange=function(a){B.prototype.handleDataPropertyChange.call(this,a),this.editor&&this.editor.fireEvent("symbolViewDataPropertyChanged",{symbolView:this.editView,event:a})},a.prototype.isDroppable=function(B,a){return!!a.view.isDroppableToSymbolView},a.prototype.isPixelPerfect=function(B){return!0},a.prototype.initMenuItems=function(B){this.$57$(B),this.$56$(B)},a}(Dj),zE=function(B){function a(j,E,$){Wa(this,a);var H=Ga(this,B.call(this));return H.setIcon("editor.func"),H.setImage("editor.func"),H.parse(j,E,$),H}return ra(a,B),a.prototype.toLabel=function(){return this.getDisplayName()||H("editor.comptype.func")},a.prototype.getClass=function(){return a},a.prototype.parse=function(B,a,j){B&&(this.a("type",B.type),lB(this,B,a,j))},a.prototype.toJSON=function(){var B={};return B.type=this.a("type"),eB(this,B),B},ta(a,[{key:"compType",get:function(){return"function"}}]),a}(ht.Node),oE={rect:zj,circle:zj,oval:zj,roundRect:zj,star:zj,triangle:zj,hexagon:zj,pentagon:zj,diamond:zj,rightTriangle:zj,parallelogram:zj,trapezoid:zj,polygon:zj,arc:zj,image:cj,shape:oj,text:Uj,border:Lj,pieChart:BE,columnChart:aE,percentageColumnChart:aE,stackedColumnChart:aE,lineChart:jE,clip:Ij,restore:Xj,endClip:Xj};Ra.toDatas=function(B,a){var j=[];return B.forEach(function(B){var E=Va(B);if(E){var $=Xa(E),H=Fa($,a);H&&j.push(H)}}),j};var cE=function(B){function a(j,E,$,H){Wa(this,a);var K=Ga(this,B.call(this,j,E,sE,"symbol"));K.graphView.vectorDataBindingDisabled=!0,K.graphView.getLabel=function(){return null},K.graphView.setVisibleFunc(function(B){return!(B instanceof Xj)}),K.list=K.symbolList=new kE(K),K.dm.a({name:void 0,comps:[],width:100,height:100,boundExtend:0,fitSize:!1,scrollable:!1,interactive:!1,disableSelectedBorder:!1,pixelPerfect:!0,clip:!1,visible:!0,color:void 0,blendMode:"multiply",opacity:1});var C=Ra.config.customProperties.symbol;C&&C.length&&C.forEach(function(B){K.dm.a(B.property,B.defaultValue)});var Z=K.graphView.getEditInteractor();return Z.gridEnabled=K.editor.isGridEnabled(),K.dm.addIndexChangeListener(function(){K.dirty=!0}),K.dirty=!1,K.dm.enableHistoryManager(Ra.config.maxUndoRedoSteps),K.parse($,H),$?H||K.editor.fireEvent("symbolViewOpening",{symbolView:K,url:$}):K.editor.fireEvent("symbolViewCreated",{symbolView:K,json:H}),K}return ra(a,B),a.prototype.clear=function(){B.prototype.clear.call(this),this.dm.a("connectActionType",Ra.config.symbolConnectActionType),this.dm.setAutoAdjustIndex(!1)},a.prototype.onClosed=function(){B.prototype.onClosed.call(this),this.list.onClosed()},a.prototype.update=function(a,j){B.prototype.update.call(this,a,j),this.editor.fireEvent(j?"symbolViewCommitted":"symbolViewOpened",{symbolView:this,url:this.url,json:a})},a.prototype._updateImpl=function(B,a){var j=this,E=this.dm,$=g(B);this.clear(),E.setBackground($.background),E.a("previewURL",$.previewURL),E.a("snapshotURL",$.snapshotURL),E.dataBindings=$.dataBindings,null!=$.gridBlockSize&&this.dm.a("gridBlockSize",$.gridBlockSize),null!=$.gridThickLinesEvery&&this.dm.a("gridThickLinesEvery",$.gridThickLinesEvery),null!=$.gridThickColor&&this.dm.a("gridThickColor",$.gridThickColor),null!=$.gridLightColor&&this.dm.a("gridLightColor",$.gridLightColor),null!=$.gridAngle&&this.dm.a("gridAngle",$.gridAngle),null!=$.gridRotation&&this.dm.a("gridRotation",$.gridRotation),null!=$.gridZoomThreshold&&this.dm.a("gridZoomThreshold",$.gridZoomThreshold),$.hasOwnProperty("connectActionType")&&this.dm.a("connectActionType",$.connectActionType),$.hasOwnProperty("rotateAsClock")&&this.dm.a("rotateAsClock",$.rotateAsClock),Na.forEach(function(B){E.a(B,$[B])}),E.a({name:$.name,renderHTML:$.renderHTML,comps:dB($.comps,[]),width:dB($.width,100),height:dB($.height,100),boundExtend:dB($.boundExtend,0),fitSize:dB($.fitSize,!1),scrollable:dB($.scrollable,!1),interactive:dB($.interactive,!1),disableSelectedBorder:dB($.disableSelectedBorder,!1),pixelPerfect:dB($.pixelPerfect,!0),clip:dB($.clip,!1),visible:dB($.visible,!0),color:dB($.color,void 0),blendMode:dB($.blendMode,"multiply"),opacity:dB($.opacity,1),attachPoints:dB($.attachPoints,void 0),attachStyle:dB($.attachStyle,"close"),cacheRule:dB($.cacheRule,!1),comps_func:xB($.comps),width_func:xB($.width),height_func:xB($.height),fitSize_func:xB($.fitSize),scrollable_func:xB($.scrollable),interactive_func:xB($.interactive),disableSelectedBorder_func:xB($.disableSelectedBorder),pixelPerfect_func:xB($.pixelPerfect),visible_func:xB($.visible),color_func:xB($.color),blendMode_func:xB($.blendMode),opacity_func:xB($.opacity),attachPoints_func:xB($.attachPoints),attachStyle_func:xB($.attachStyle),cacheRule_func:xB($.cacheRule)});var H=Ra.config.customProperties.symbol;H&&H.length&&H.forEach(function(B){E.a(B.property,dB($[B.property],B.defaultValue))}),E.a("comps").forEach(function(B){Va(B,j)}),this.dirty=!!a,!a&&Ra.config.fitContentForSymbolView&&this.graphView.fitContent(Ra.config.animate,Ra.config.fitPadding)},a.prototype.reload=function(){if(this.url){var B={symbolView:this,url:this.url};return this.editor.fireEvent("symbolViewReloading",B),!B.preventDefault&&void this.parse(this.url)}},a.prototype.save=function(B,a){var j=this,E=function(){B&&B(),j.editor.fireEvent("symbolViewSaved",{symbolView:j,url:j.url}),j.editor.selectFileNode(j.url)};if(a)this._saveAs(E,a);else if(this.url)this._saveImpl(E);else{var $=this.editor.symbols.currentDir,K=H("editor.inputnewsymbolname");this._saveNew(B,E,K,$)}},a.prototype.addValue=function(B,a,j){var E=this.dm.a(a),$=this.dm.a(a+"_func");_B(B,a,$,E,j)},a.prototype.resetGrid=function(){this.dm.a("gridBlockSize",Ra.config.symbolGridBlockSize),this.dm.a("gridThickLinesEvery",Ra.config.symbolGridThickLinesEvery),this.dm.a("gridThickColor",Ra.config.symbolGridThickColor),this.dm.a("gridLightColor",Ra.config.symbolGridLightColor),this.dm.a("gridAngle",Ra.config.symbolGridAngle),this.dm.a("gridRotation",Ra.config.symbolGridRotation),this.dm.a("gridZoomThreshold",Ra.config.symbolGridZoomThreshold)},a.prototype.skewGrid=function(){this.dm.a("gridAngle",2*Math.PI/3),this.dm.a("gridRotation",Math.PI/6)},a.prototype.preview=function(){this.$65$("previews/symbol.json",this.dm.a("previewURL")||Ra.config.symbolPreviewURL)},ta(a,[{key:"content",get:function(){var B=this,a=this.graphView.getEditInteractor(),j=(a.gridGuide,this.dm),E={modified:(new Date).toString()};j.getBackground()&&(E.background=j.getBackground()),j.dataBindings&&(E.dataBindings=j.dataBindings),j.a("previewURL")&&(E.previewURL=j.a("previewURL")),j.a("snapshotURL")&&(E.snapshotURL=j.a("snapshotURL")),j.a("connectActionType")!==Ra.config.symbolConnectActionType&&(E.connectActionType=j.a("connectActionType")),j.a("rotateAsClock")!==Ra.config.rotateAsClock&&(E.rotateAsClock=j.a("rotateAsClock")),j.a("gridBlockSize")!==Ra.config.symbolGridBlockSize&&(E.gridBlockSize=j.a("gridBlockSize")),j.a("gridThickLinesEvery")!==Ra.config.symbolGridThickLinesEvery&&(E.gridThickLinesEvery=j.a("gridThickLinesEvery")),j.a("gridThickColor")!==Ra.config.symbolGridThickColor&&(E.gridThickColor=j.a("gridThickColor")),j.a("gridLightColor")!==Ra.config.symbolGridLightColor&&(E.gridLightColor=j.a("gridLightColor")),j.a("gridAngle")!==Ra.config.symbolGridAngle&&(E.gridAngle=j.a("gridAngle")),j.a("gridRotation")!==Ra.config.symbolGridRotation&&(E.gridRotation=j.a("gridRotation")),j.a("gridZoomThreshold")!==Ra.config.symbolGridZoomThreshold&&(E.gridZoomThreshold=j.a("gridZoomThreshold")),j.a("xAlignmentGuides")&&j.a("xAlignmentGuides").length&&(E.xAlignmentGuides=j.a("xAlignmentGuides")),j.a("yAlignmentGuides")&&j.a("yAlignmentGuides").length&&(E.yAlignmentGuides=j.a("yAlignmentGuides")),j.a("cacheRule")&&this.addValue(E,"cacheRule"),Na.forEach(function(B){j.a(B)&&(E[B]=j.a(B))}),j.a("renderHTML")&&(E.renderHTML=j.a("renderHTML")),this.addValue(E,"width"),this.addValue(E,"height"),this.addValue(E,"boundExtend",0),this.addValue(E,"fitSize",!1),this.addValue(E,"scrollable",!1),this.addValue(E,"interactive",!1),this.addValue(E,"disableSelectedBorder",!1),this.addValue(E,"pixelPerfect",!0),this.addValue(E,"name"),this.addValue(E,"clip",!1),this.addValue(E,"visible",!0),this.addValue(E,"color"),this.addValue(E,"blendMode","multiply"),this.addValue(E,"opacity",1),this.addValue(E,"attachPoints"),this.addValue(E,"attachStyle");var $=Ra.config.customProperties.symbol,H=!!Ra.config.saveSymbolCustomPropertyDefaultValue;$&&$.length&&$.forEach(function(a){H?B.addValue(E,a.property):B.addValue(E,a.property,a.defaultValue)});var K=[];return j.a("comps_func")?E.comps={values:K,func:j.a("comps_func")}:E.comps=K,j.each(function(B){K.push(B.toJSON())}),E}}]),a}(hE),UE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.getTabModel().sm().ms(function(){E.editor.$6$(E.currentTab)}),E.menu=new Vj([{id:"closeTab",label:H("editor.closetab"),action:function(){E.closeTab()}},{id:"closeOtherTabs",label:H("editor.closeothertabs"),action:function(){E.closeOtherTabs()}},{id:"closeTabsToTheRight",label:H("editor.closetabstotheright"),action:function(){E.closeTabsToTheRight()}}]),E.menu.beforeShow=function(B){E._rightClickTab=E.getTabAt(B)},E.menu.addTo(E.getTitleDiv()),E.editor.menus.push(E.menu),E}return ra(a,B),a.prototype.drawCloseIcon=function(a,j,E,$){a.a("dirty")?(j.fillStyle=E,j.beginPath(),j.arc($.x+$.width/2,$.y+$.height/2,3,0,2*Math.PI,!0),j.fill()):B.prototype.drawCloseIcon.call(this,a,j,E,$)},a.prototype.open=function(B){if(B){var a=B.fileType,j=a===Aa,E=a===Da;if(j||E){var $=B.url,H=this.getTabModel().getDataByTag($);H||(H=new ht.Tab,H.setTag($),H.setIcon(j?"editor.display":"editor.symbol"),H.setClosable(!0),H.setName(i(B.getName())),j?new mE(this.editor,H,$):new cE(this.editor,H,$),this.editor.addTab(H)),this.getTabModel().sm().ss(H)}}},a.prototype.newDisplayView=function(B){var a=new ht.Tab;a.setClosable(!0),a.setIcon("editor.display"),a.setName(B||H("editor.untitled"));var j=new mE(this.editor,a);return this.editor.addTab(a,!0),j},a.prototype.newSymbolView=function(B){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],j=new ht.Tab;j.setClosable(!0),j.setIcon("editor.symbol"),j.setName(B||H("editor.untitled"));var E=new cE(this.editor,j);return this.editor.addTab(j,!0),a&&this.editor.zoomToFit(),E},a.prototype.$101$=function(){this.getTabModel().each(function(B){B.getView().graphView.invalidateAll()})},a.prototype.reload=function(){this.currentTab&&this.currentTab.getView().reload()},a.prototype.save=function(B,a){this.currentTab&&this.currentTab.getView().save(B,a)},a.prototype.saveAll=function(B){var a=this.tabs,j=-1,E=function(){j++,j<a.length?a[j].getView().save(E):B()};E()},a.prototype.preview=function(){this.currentTab&&this.currentTab.getView().preview()},a.prototype.selectTab=function(B){B&&this.getTabModel().sm().ss(B)},a.prototype.onTabClosing=function(B,a){return this.closeTab(B),!1},a.prototype.closeTab=function(B,a,j){B=B||this._rightClickTab||this.currentTab,B&&this.closeTabs([B],a,j)},a.prototype.closeOtherTabs=function(B,a){var j=this._rightClickTab||this.currentTab;this.closeTabs(this.tabs.filter(function(B){return B!==j}),B,a)},a.prototype.closeTabsToTheRight=function(B,a){var j=this._rightClickTab||this.currentTab;if(j){var E=this.tabs.indexOf(j);this.closeTabs(this.tabs.slice(E+1),B,a)}},a.prototype.closeAllTabs=function(B,a){this.closeTabs(this.tabs,B,a)},a.prototype.closeTabs=function(B,a,j){var E=this,$=void 0,H=function(K){if("cancel"!==K&&B.length){var C=B.shift(0);void 0===$&&($=E.tabs.indexOf(C)-1),E.$66$(C,H,j)}else{a&&a();var Z=E.tabs.length;!E.currentTab&&Z&&((void 0===$||$<0)&&($=0),$>Z-1&&($=Z-1),E.selectTab(E.tabs[$]))}};H(),this._rightClickTab=null},a.prototype.removeTab=function(B){var a=B.getView(),j={url:a.url};"display"===a.type?(j.displayView=a,this.editor.fireEvent("displayViewClosing",j)):"symbol"===a.type&&(j.symbolView=a,this.editor.fireEvent("symbolViewClosing",j)),j.preventDefault||(a.onClosed(),this.getTabModel().remove(B),this.editor.fireEvent("tabClosed",{tab:B}),"display"===a.type?this.editor.fireEvent("displayViewClosed",j):"symbol"===a.type&&this.editor.fireEvent("symbolViewClosed",j))},a.prototype.$66$=function(B,a,j){var E=this,$=B.getView();if(!j&&$.dirty){var K={tab:B};this.editor.fireEvent("tabPrompting",K),"notSave"===K.action?(this.removeTab(B),a&&a("notSave")):"save"===K.action?$.save(function(){E.removeTab(B),a&&a("save")}):"cancel"===K.action?a&&a("cancel"):!function(){var j=[{label:H("editor.notsave"),action:function(){K.hide(),E.removeTab(B),a&&a("notSave")}},{label:H("editor.save"),action:function(){$.save(function(){K.hide(),E.removeTab(B),a&&a("save")})}},{label:H("editor.cancel"),action:function(){K.hide(),a&&a("cancel")}}],K=new fa({title:B.getName(),contentPadding:20,width:260,draggable:!0,content:"<p>"+H("editor.savechange")+"</p>",buttons:j});K.$49$=j[2].action,K.$48$=j[1].action,K.show()}()}else this.removeTab(B),a&&a()},ta(a,[{key:"currentTab",get:function(){return this.getTabModel().sm().ld()}},{key:"tabs",get:function(){return this.getTabModel().getRoots().toArray()}}]),a}(nj),IE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.buttons={};var $=[];$.push(E.createItem("distributeHorizontal")),$.push(E.createItem("distributeVertical")),$.push(E.createItem("alignLeft")),$.push(E.createItem("alignHorizontal")),$.push(E.createItem("alignRight")),$.push(E.createItem("alignTop")),$.push(E.createItem("alignVertical")),$.push(E.createItem("alignBottom")),E.addSearchItem($);var H=22,K=[H,H,H,H,H,H,H,H,.1];return C(Ra.config.compactFilter)||(E.addCompactItem($),K.push(H)),E.addRow($,K),E.updateItems(),E}return ra(a,B),a.prototype.createItem=function(B){var a=this,j="editor.align."+B.toLocaleLowerCase();return this.buttons[B]=QB(null,H(j),j,function(){a[B]()})},a.prototype.updateItems=function(){var B=this,a=this.buttons;this.dataModel?!function(){var j=[];B.dataModel.sm().each(function(B){B instanceof ht.Node&&j.push(B)}),j.length>2?(a.distributeHorizontal.setDisabled(!1),a.distributeVertical.setDisabled(!1),a.alignLeft.setDisabled(!1),a.alignHorizontal.setDisabled(!1),a.alignRight.setDisabled(!1),a.alignTop.setDisabled(!1),a.alignVertical.setDisabled(!1),a.alignBottom.setDisabled(!1)):j.length>1?(a.distributeHorizontal.setDisabled(!0),a.distributeVertical.setDisabled(!0),a.alignLeft.setDisabled(!1),a.alignHorizontal.setDisabled(!1),a.alignRight.setDisabled(!1),a.alignTop.setDisabled(!1),a.alignVertical.setDisabled(!1),a.alignBottom.setDisabled(!1)):(a.distributeHorizontal.setDisabled(!0),a.distributeVertical.setDisabled(!0),a.alignLeft.setDisabled(!0),a.alignHorizontal.setDisabled(!0),a.alignRight.setDisabled(!0),a.alignTop.setDisabled(!0),a.alignVertical.setDisabled(!0),a.alignBottom.setDisabled(!0))}():(a.distributeHorizontal.setDisabled(!0),a.distributeVertical.setDisabled(!0),a.alignLeft.setDisabled(!0),a.alignHorizontal.setDisabled(!0),a.alignRight.setDisabled(!0),a.alignTop.setDisabled(!0),a.alignVertical.setDisabled(!0),a.alignBottom.setDisabled(!0))},a.prototype.$6$=function(B){this.dataModel&&this.dataModel.sm().ums(this.updateItems,this),B?(this.dataModel=B.getView().dm,this.dataModel.sm().ms(this.updateItems,this)):this.dataModel=null,this.updateItems()},a.prototype.getUnionRect=function(B){return this.editor.gv?this.editor.gv.getUnionNodeRect(B):null},a.prototype.isSelected=function(B){return this.dataModel&&this.dataModel.sm().contains(B)},a.prototype.hasSelectedGroupParent=function(B){return B instanceof ht.Group&&(!!this.isSelected(B)||this.hasSelectedGroupParent(B.getParent()))},a.prototype.hasSelectedHost=function(B){var a=this,j=function(E){return E!==B&&(E instanceof ht.Node&&(!!a.isSelected(E)||j(E.getHost())))};return j(B.getHost())},a.prototype.distributeHorizontal=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&!function(){a.sort(function(a,j){return B.getNodeRect(a).x-B.getNodeRect(j).x});var E={},$=0;a.forEach(function(a){var j=B.getNodeRect(a);E[a._id]=j,$+=j.width});var H=(j.width-$)/(a.length-1),K=j.x;a.forEach(function(a){var j=B.getNodeRect(a);a.translate(K-j.x,0),K+=j.width+H})}(),this.editor.endTransaction()},a.prototype.distributeVertical=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&!function(){a.sort(function(a,j){return B.getNodeRect(a).y-B.getNodeRect(j).y});var E={},$=0;a.forEach(function(a){var j=B.getNodeRect(a);E[a._id]=j,$+=j.height});var H=(j.height-$)/(a.length-1),K=j.y;a.forEach(function(a){var j=B.getNodeRect(a);a.translate(0,K-j.y),K+=j.height+H})}(),this.editor.endTransaction()},a.prototype.alignLeft=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(j.x-E.x,0)}),this.editor.endTransaction()},a.prototype.alignHorizontal=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(j.x+j.width/2-E.x-E.width/2,0)}),this.editor.endTransaction()},a.prototype.alignRight=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(j.x+j.width-E.x-E.width,0)}),this.editor.endTransaction()},a.prototype.alignTop=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(0,j.y-E.y)}),this.editor.endTransaction()},a.prototype.alignVertical=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(0,j.y+j.height/2-E.y-E.height/2)}),this.editor.endTransaction()},a.prototype.alignBottom=function(){this.editor.beginTransaction();var B=this.editor.gv,a=this.selection,j=this.getUnionRect(a);B&&j&&a.forEach(function(a){var E=B.getNodeRect(a);a.translate(0,j.y+j.height-E.y-E.height)}),this.editor.endTransaction()},a.prototype.addSearchItem=function(B){var a=this;this.searchField=new ht.widget.TextField;var j=this.searchField.getElement();j.onkeyup=function(B){U(B)&&(j.value=""),a.editor.filterProperties()},B.push(this.searchField)},a.prototype.addCompactItem=function(B){var a=this,j=uB("editor.filter",function(){return a.editor.inspectorCompact}),E=function(){a.editor.inspectorCompact=!a.editor.inspectorCompact};B.push(QB(null,H("editor.inspectorcompact"),j,E))},ta(a,[{key:"selection",get:function(){var B=this,a=[];return this.dataModel&&this.dataModel.sm().each(function(j){j instanceof ht.Node&&(B.hasSelectedGroupParent(j.getParent())||B.hasSelectedHost(j)||a.push(j))}),a}},{key:"filter",get:function(){return this.searchField.getElement().value}}]),a}(ya);Ra.InspectorTool=IE;var XE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.initForm(),E.visible=!1,E.$6$(),E.oopsImageJSON=ht.Default.getImage("editor.oops"),E.oopsImage=ht.Default.toCanvas(E.oopsImageJSON,E.oopsImageJSON.width,E.oopsImageJSON.height,"fill",null,null,null,ht.Default.devicePixelRatio).toDataURL(),E}return ra(a,B),a.prototype.initForm=function(){var B=this;this.addRow([{id:"content",textArea:{}}],[.1],.1),this.addRow([{id:"url",textField:{editable:!1}},{id:"edit",button:{onClicked:function(){B.editing=!B.editing}}},{id:"commit",button:{label:H("editor.commit"),onClicked:function(){B.currentView.update(B.content,!0),B.editing=!1}}}],[.1,50,50]),this.getView().style.background=Ra.config.color_pane,this.textArea=this.getViewById("content").getElement(),this.editing=!1},a.prototype.$67$=function(){var B=this;this.visible&&!this.editing&&(this._updateContentLater||(this._updateContentLater=!0,setTimeout(function(){B.updateContent()},100)))},a.prototype.updateContent=function(){this.visible&&!this.editing&&(this._updateContentLater=!1,this.content=this.currentView?v(this.currentView.content):"")},a.prototype.updateUrl=function(){this.v("url",this.tab&&this.tab.getTag()||"")},a.prototype.$6$=function(B){this.editing=!1,this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.$67$,this),this.dataModel.removeDataPropertyChangeListener(this.$67$,this),this.dataModel.removePropertyChangeListener(this.$67$,this)),B?(this.currentView=B.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.$67$,this),this.dataModel.addDataPropertyChangeListener(this.$67$,this),this.dataModel.addPropertyChangeListener(this.$67$,this),this.setDisabled(!1)):(this.currentView=null,this.dataModel=null,this.setDisabled(!0)),this.tab=B,this.updateUrl(),this.$67$()},ta(a,[{key:"editing",get:function(){return this._editing},set:function(B){this._editing!==B&&(this._editing=B,this.getViewById("edit").setLabel(H(B?"editor.cancel":"editor.edit")),this.getViewById("commit").setDisabled(!B),this.getViewById("content").setEditable(B),B||this.$67$())}},{key:"visible",get:function(){return this._visible},set:function(B){this._visible!==B&&(this._visible=B,B?this.updateContent():this.editing||(this.content=""))}},{key:"content",get:function(){return this.v("content")},set:function(B){if(B&&B.length>Ra.config.maxStringLength){B="Oops, tooooo long!",this.setDisabled(!0,this.oopsImage);var a=this.oopsImageJSON.width,j=this.oopsImageJSON.height;this.getDisabledDiv().style.backgroundSize=a+"px "+j+"px"}else this.setDisabled(!1);this.v("content",B)}}]),a}(ya),FE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.centerPane=new Fj,E.setCenterView(E.centerPane),E.controlPane=new ya,E.controlPane.addRow([{id:"filter",textField:{}}],[.1,ht.Default.isTouchable?32:18]),E.setBottomView(E.controlPane),E.setBottomHeight(ht.Default.widgetRowHeight+8),E.input=E.controlPane.getViewById("filter").getElement(),E.input.onkeyup=function(B){E.list&&(U(B)&&(E.input.value=""),E.list.setFilter(E.input.value))},E}return ra(a,B),a.prototype.$6$=function(B){this.tab=B,this.list=B?B.getView().list:null,this.controlPane.v("filter",this.list?this.list.getFilter()||"":"")},ta(a,[{key:"list",get:function(){return this.centerPane.getCenterView()},set:function(B){this.centerPane.setCenterView(B)}}]),a}(Fj),VE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E._layerNames=[],E.setDisabled(!0),E.tableModel=new ht.DataModel,E.tablePane=new ej(E.tableModel),E.tableView=E.tablePane.getTableView(),E.tableView.setEditable(!0),E.tablePane.getView().style.border=Ra.config.color_line+" solid 1px",E.tablePane.addColumns([E.$74$("name",H("editor.name"),100),E.$74$("visible",H("editor.visible"),50),E.$74$("selectable",H("editor.selectable"),50),E.$74$("movable",H("editor.movable"),50),E.$74$("editable",H("editor.editable"),50)]),E.addRow([E.tablePane],[.1],.1),E.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){E.addLayer(ht.Data.prototype._layer,!0,!0,!0,!0),E.updateLayers()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){E.tableView.sm().size()&&(E.tableView.removeSelection(),E.updateLayers())}}},null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){E.tableView.sm().size()&&(E.tableModel.moveSelectionToTop(),E.updateLayers())}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){E.tableView.sm().size()&&(E.tableModel.moveSelectionUp(),E.updateLayers())}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){E.tableView.sm().size()&&(E.tableModel.moveSelectionDown(),E.updateLayers())}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){E.tableView.sm().size()&&(E.tableModel.moveSelectionToBottom(),E.updateLayers())}}}],[20,20,.1,20,20,20,20]),E}return ra(a,B),a.prototype.addLayer=function(B,a,j,E,$){a!==!1&&(a=!0),j!==!1&&(j=!0),E!==!1&&(E=!0),$!==!1&&($=!0);var H=new ht.Data;H.a({name:B,visible:a,selectable:j,movable:E,editable:$}),this.tableModel.add(H)},a.prototype.$74$=function(B,a,j){var E=this;return{name:B,tag:B,accessType:"attr",width:j,displayName:a,align:"center",editable:!0,setValue:function(a,j,$){$!==a.a(B)&&(a.a(B,$),E.updateLayers())}}},a.prototype.$6$=function(B){this.dataModel&&this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this);var a=this.editor.displayView;a?(this.dataModel=a.dm,this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.setDisabled(!1)):(this.dataModel=null,this.setDisabled(!0)),this.updateTable()},a.prototype.handleDataModelPropertyChange=function(B){var a=this;if("layers"===B.property){this.updateTable(),this._layerNames=[];var j=this.dataModel.getLayers();j&&j.forEach(function(B){a._layerNames.push(sB(B)?B.name:B)}),this.editor.inspector&&this.editor.inspector.$35$()}},a.prototype.updateLayers=function(){if(this.dataModel){var B=this.tableModel.size()?[]:null;B&&this.tableModel.getRoots().forEach(function(a){B.push({name:a.a("name"),visible:a.a("visible"),selectable:a.a("selectable"),movable:a.a("movable"),editable:a.a("editable")})}),this.isSettingLayers=!0,this.dataModel.setLayers(B),this.isSettingLayers=!1}},a.prototype.updateTable=function(){var B=this;if(!this.isSettingLayers&&(this.tableModel.clear(),this.dataModel)){var a=this.dataModel.getLayers();a&&a.forEach(function(a){sB(a)?B.addLayer(a.name,a.visible,a.selectable,a.movable,a.editable):B.addLayer(a,!0,!0,!0,!0)})}},ta(a,[{key:"currentLayer",get:function(){var B=this.tableModel.sm().ld();if(B)return B.a("name");var a=this.tableModel.getRoots();return a.size()?(B=a.get(a.size()-1),B.a("name")):ht.Data.prototype._layer}},{key:"layerNames",get:function(){return this._layerNames}}]),a}(ya),wE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.editor.menus.push(E),E.setItems([{id:"file",label:H("editor.file"),items:[E.createItem("newDisplayView",H("editor.newdisplayview"),"newDisplayView",Ra.config.displaysVisible),E.createItem("newSymbolView",H("editor.newsymbolview"),"newSymbolView",Ra.config.symbolsVisible),E.createItem("newComponent",H("editor.newcomponent"),"newComponent",Ra.config.componentsVisible)]},{id:"edit",label:H("editor.edit"),items:[E.createItem("undo",H("editor.undo"),"undo"),E.createItem("redo",H("editor.redo"),"redo"),{id:"afterRedo",separator:!0},E.createItem("copy",H("editor.copy"),"copy"),E.createItem("paste",H("editor.paste"),"paste")]}]),E}return ra(a,B),a.prototype.createItem=function(B,a,j){var E=this,$=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],H={id:B,label:a,visible:$};return j&&(H.action=function(){E.editor[j]()}),H},a}(Vj),PE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.initMenu(),E.$69$(),E.enableToolTip(),E}return ra(a,B),a.prototype.$6$=function(){this.iv()},a.prototype.initMenu=function(){var B=this;this.editor.mainMenu=new wE(this.editor);var a=function(a){var j=B.editor.mainMenu;j.isShowing()&&!j.getView().contains(a.target)&&j.hide()};window.addEventListener("touchstart",a,!1),window.addEventListener("mousedown",a,!1)},a.prototype.$69$=function(){var B=this,a=function(a){return function(j){"node"===a||"subgraph"===a||("edge"===a?j.s({"edge.width":1,"edge.color":Ra.config.color_data_border}):"group"===a?j.setExpanded(!0):"arc"===a?j.s({shape:a,"shape.background":Ra.config.color_data_background,"shape.border.width":1,"shape.border.color":Ra.config.color_data_border,"shape.arc.from":0,"shape.arc.to":4.1888}):"shape"===a?j.s({"shape.background":null,"shape.border.color":Ra.config.color_data_border,"shape.border.width":1}):"text"===a?j.s("text",H("editor.text")):j.s({shape:a,"shape.background":Ra.config.color_data_background,"shape.border.width":1,"shape.border.color":Ra.config.color_data_border})),B.editor.fireEvent("dataInited",{type:a,data:j,displayView:B.editor.displayView})}},j=[];j.push(this.$68$()),j.push(this.createEditItem()),j.push(this.editor.createDisplayItem("Shape",H("editor.shape"),"editor.display.shape",ht.Shape,a("shape"))),j.push(this.editor.createDisplayItem("Oval",H("editor.oval"),"editor.display.oval",ht.Node,a("oval"))),j.push(this.editor.createDisplayItem("RoundRect",H("editor.roundrect"),"editor.display.roundrect",ht.Node,a("roundRect"))),j.push(this.editor.createDisplayItem("Rect",H("editor.rect"),"editor.display.rect",ht.Node,a("rect"))),j.push(this.editor.createDisplayItem("Polygon",H("editor.polygon"),"editor.display.polygon",ht.Node,a("polygon"))),j.push(this.editor.createDisplayItem("Triangle",H("editor.triangle"),"editor.display.triangle",ht.Node,a("triangle"))),j.push(this.editor.createDisplayItem("Star",H("editor.star"),"editor.display.star",ht.Node,a("star"))),j.push(this.editor.createDisplayItem("Arc",H("editor.arc"),"editor.display.arc",ht.Node,a("arc"))),j.push(this.editor.createDisplayItem("Text",H("editor.text"),"editor.display.text",ht.Text,a("text"))),j.push(this.editor.createDisplayItem("Node",H("editor.node"),"editor.display.node",ht.Node,a("node"))),j.push(this.editor.createDisplayItem("Group",H("editor.group"),"editor.display.group",ht.Group,a("group"))),j.push(this.editor.createDisplayItem("SubGraph",H("editor.subgraph"),"editor.display.subgraph",ht.SubGraph,a("subgraph"))),j.push(this.editor.createDisplayItem("Edge",H("editor.edge"),"editor.display.edge",ht.Edge,a("edge"))),j.push(this.editor.createSymbolItem("shape",H("editor.shape"),"editor.symbol.shape","shape")),j.push(this.editor.createSymbolItem("oval",H("editor.oval"),"editor.symbol.oval","oval")),j.push(this.editor.createSymbolItem("roundRect",H("editor.roundrect"),"editor.symbol.roundrect","roundRect")),j.push(this.editor.createSymbolItem("rect",H("editor.rect"),"editor.symbol.rect","rect")),j.push(this.editor.createSymbolItem("polygon",H("editor.polygon"),"editor.symbol.polygon","polygon")),j.push(this.editor.createSymbolItem("triangle",H("editor.triangle"),"editor.symbol.triangle","triangle")),j.push(this.editor.createSymbolItem("star",H("editor.star"),"editor.symbol.star","star")),j.push(this.editor.createSymbolItem("arc",H("editor.arc"),"editor.symbol.arc","arc")),j.push(this.editor.createSymbolItem("text",H("editor.text"),"editor.symbol.text","text")),j.push(this.editor.createSymbolItem("border",H("editor.border"),"editor.symbol.border","border")),j.push(this.editor.createSymbolItem("piechart",H("editor.piechart"),"editor.symbol.piechart","pieChart")),j.push(this.editor.createSymbolItem("onedimensionalcolumnchart",H("editor.onedimensionalcolumnchart"),"editor.symbol.onedimensionalcolumnchart","oneDimensionalColumnChart")),j.push(this.editor.createSymbolItem("columnchart",H("editor.columnchart"),"editor.symbol.columnchart","columnChart")),j.push(this.editor.createSymbolItem("linechart",H("editor.linechart"),"editor.symbol.linechart","lineChart")),this.setItems(j)},a.prototype.$68$=function(){var B=this,a=NB("menu",H("editor.menu"),"editor.menu");return a.action=function(a,j,E){
B.editor.mainMenu.isShowing()||(B.editor.mainMenu.showOnView(B,4,20),E.preventDefault(),E.stopPropagation())},a},a.prototype.createEditItem=function(){var B=this,a=function(){return B.editor.currentView&&"edit"===B.editor.currentView.$4$()},j=NB("edit",H("editor.edit"),"editor.edit",a);return j.visible=function(){return!!B.editor.currentView},j.action=function(){var a=B.editor.currentView;a&&a.$5$("edit")},j},a}(bj),_E=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.$69$(),E.enableToolTip(),E.setStickToRight(!0),E}return ra(a,B),a.prototype.handlePropertyChange=function(B){"zoom"===B.property&&this.$70$()},a.prototype.$70$=function(){this.label.innerHTML=this.graphView?parseInt(100*this.graphView.getZoom())+"%":""},a.prototype.$6$=function(B){this.graphView&&this.graphView.removePropertyChangeListener(this.handlePropertyChange,this),B?(this.graphView=B.getView().graphView,this.graphView.addPropertyChangeListener(this.handlePropertyChange,this)):this.graphView=null,this.iv(),this.$70$()},a.prototype.$69$=function(){var B=this,a=void 0,j=function(){return!!B.graphView},E=[];a=NB("undo",H("editor.undo"),"editor.undo"),a.action=function(){B.editor.undo()},a.visible=j,E.push(a),a=NB("redo",H("editor.redo"),"editor.redo"),a.action=function(){B.editor.redo()},a.visible=j,E.push(a),E.push({separator:!0,visible:j}),a=NB("rulers",H("editor.showrulers"),"editor.rulers",function(){return B.editor.isRulerEnabled()}),a.action=function(){B.editor.toggleRulerEnabled()},a.visible=j,E.push(a),a=NB("grid",H("editor.showgrid"),"editor.grid",function(){return B.editor.isGridEnabled()}),a.action=function(){B.editor.toggleGridEnabled()},a.visible=j,E.push(a),E.push({separator:!0,visible:j}),a=NB("save",H("editor.save"),"editor.save"),a.action=function(){B.editor.save()},a.visible=j,E.push(a),a=NB("preview",H("editor.preview"),"editor.preview"),a.action=function(){B.editor.preview()},a.visible=j,E.push(a),a=NB("reload",H("editor.reload"),"editor.reload"),a.action=function(){B.editor.reload()},a.visible=j,E.push(a),E.push({separator:!0,visible:j}),a=NB("zoomOut",H("editor.zoomout"),"editor.zoomout"),a.action=function(){B.editor.zoomOut()},a.visible=j,E.push(a),E.push(this.createZoomItem(j)),a=NB("zoomIn",H("editor.zoomin"),"editor.zoomin"),a.action=function(){B.editor.zoomIn()},a.visible=j,E.push(a),a=NB("zoomToFit",H("editor.zoomtofit"),"editor.zoomtofit"),a.action=function(){B.editor.zoomToFit()},a.visible=j,E.push(a),E.push({separator:!0,visible:j}),a=NB("toggleLeft",H("editor.toggleleft"),"editor.toggleleft"),a.action=function(){B.editor.toggleLeft()},E.push(a),a=NB("toggleBoth",H("editor.toggleboth"),"editor.toggleboth"),a.action=function(){B.editor.toggleBoth()},E.push(a),a=NB("toggleRight",H("editor.toggleright"),"editor.toggleright"),a.action=function(){B.editor.toggleRight()},E.push(a),this.setItems(E)},a.prototype.createZoomItem=function(B){var a=this,j=this.label=ht.Default.createDiv(!0);j.style.font=this.getLabelFont(),j.style.color=this.getLabelColor(),j.style.cursor="ew-resize",j.style.width="40px",j.style.height=ht.Default.widgetRowHeight+"px",j.style.lineHeight=ht.Default.widgetRowHeight+"px",j.style.whiteSpace="nowrap",j.style.textAlign="center";var E=function(B){B.preventDefault();var j=a.editor.gv;if(j){F(B)&&a.editor.zoomReset();var E=j.getZoom(),$=w(B).x,H=function(B){B.preventDefault();var a=w(B).x-$;j.setZoom(E*(1+.005*a))};window.addEventListener("mousemove",H,!1),window.addEventListener("touchmove",H,!1);var K=function(B){B.preventDefault(),window.removeEventListener("mousemove",H,!1),window.removeEventListener("touchmove",H,!1),window.removeEventListener("mouseup",K,!1),window.removeEventListener("touchend",K,!1)};window.addEventListener("mouseup",K,!1),window.addEventListener("touchend",K,!1)}};return j.addEventListener("mousedown",E,!1),j.addEventListener("touchstart",E,!1),{id:"zoom",unfocusable:!0,element:j,visible:B}},a}(bj),lE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E._errorMsg=null,E.$72$(),E.$71$(),E.$73$(),E.splitView=new lj(E.inspectorPane,E.graphView,"v",-200),E.mainSplitView=new lj(E.funcPane,E.splitView,"h",-360);var $=[];return $.push({label:H("editor.refresh"),action:function(){E.refresh()}}),$.push({label:H("editor.ok"),action:function(){E.ok()}}),$.push({label:H("editor.cancel"),action:function(){E.hide()}}),E.setConfig({closable:!0,draggable:!0,width:Ra.config.componentViewSize.width,height:Ra.config.componentViewSize.height,contentPadding:0,resizeMode:"wh",maximizable:!0,content:E.mainSplitView,buttons:$,buttonsAlign:"right"}),E}return ra(a,B),a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype.$72$=function(){var B=this;ht.Default.setCompType("_editingCompType_",{func:function(){}}),this.node=new ht.Node,this.node.setImage({width:100,height:100,fitSize:!0,comps:[{type:"_editingCompType_"}]}),this.graphView=new wj,this.graphView.dm().add(this.node),this.graphView.sm().ss(this.node),this.graphView.mi(function(a){"doubleClickData"!==a.kind&&"doubleClickBackground"!==a.kind||B.graphView.fitContent(Ra.config.animate,Ra.config.fitPadding)});var a=this;ht.Default.drawCompType=function(B,j,E,$,K,C){var Z="_editingCompType_"===$.type;try{Z&&a.beforeDrawCompType(j),B(j,E,$,K,C),Z&&a.afterDrawCompType(j)}catch(B){Z&&(a.afterDrawCompType(j),a._errorMsg=H("editor.compfunctionerror")),console.error(B.stack||B)}}},a.prototype.beforeDrawCompType=function(B){var a=this._restoreFlag;a||(a=this._restoreFlag=B.createLinearGradient(0,0,10,10),a.addColorStop(0,"black"),a.addColorStop(0,"black")),B.fillStyle=a,B.save(),B.fillStyle="#000000"},a.prototype.afterDrawCompType=function(B){if(B.restore(),B.fillStyle!==this._restoreFlag){for(var a=0,j=20;B.fillStyle!==this._restoreFlag&&(B.restore(),a++,!(a>=j)););B.fillStyle="black",this._errorMsg=H("editor.complosssaveorrestore")}else this._errorMsg=null},a.prototype.$73$=function(){this.funcPane=new ya,this.funcPane.addRow([{id:"head",element:"function(g, rect, comp, data, view) {"}],[.1]),this.funcPane.addRow([{id:"func",element:ja()}],[.1],.1),this.funcPane.addRow(["}"],[.1])},a.prototype.$71$=function(){var B=Ra.config.indent;this.inspectorPane=new ya,this.inspectorPane.addRow([H("editor.name"),{id:"name",textField:{}}],[B,.1]),this.inspectorPane.addRow([H("editor.path"),{id:"path",textField:{editable:!1}}],[B,.1]),this.inspectorPane.addRow([H("editor.snapshoturl"),{id:"snapshotURL",textField:{}}],[B,.1]),this.inspectorPane.addRow([H("editor.width"),{id:"width",textField:{}},H("editor.height"),{id:"height",textField:{}}],[B,.1,Ra.config.indent2,.1]),this.inspectorPane.addLine(),this.createTable()},a.prototype.$74$=function(B,a,j,E){return{name:B,tag:B,accessType:"attr",width:j,displayName:a,align:"center",enum:E,editable:!0}},a.prototype.createTable=function(){var B=this;this.tableModel=new ht.DataModel,this.tablePane=new ej(this.tableModel),this.tableView=this.tablePane.getTableView(),this.tableView.setEditable(!0),this.tablePane.getView().style.border=Ra.config.color_line+" solid 1px",this.tablePane.addColumns([this.$74$("property",H("editor.property"),90),this.$74$("valueType",H("editor.valuetype"),80,{values:Ra.consts.valueTypes,labels:Ra.consts.valueTypeLabels}),this.$74$("defaultValue",H("editor.defaultvalue"),90),this.$74$("name",H("editor.name"),90),this.$74$("description",H("editor.description"),120),this.$74$("extraInfo",H("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn(),this.inspectorPane.addRow([this.tablePane],[.1],.1),this.inspectorPane.addRow([{button:{toolTip:H("editor.add"),icon:"editor.add",onClicked:function(){var a=new ht.Data;a.a({property:"property",valueType:"String"});var j=void 0,E=B.tableModel.sm().ld();E&&(j=B.tableModel.getRoots().indexOf(E)+1),B.tableModel.add(a,j)}}},{button:{toolTip:H("editor.delete"),icon:"editor.delete",onClicked:function(){B.tableView.removeSelection()}}},null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){B.tableView.sm().size()&&B.tableModel.moveSelectionToTop()}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){B.tableView.sm().size()&&B.tableModel.moveSelectionUp()}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){B.tableView.sm().size()&&B.tableModel.moveSelectionDown()}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){B.tableView.sm().size()&&B.tableModel.moveSelectionToBottom()}}}],[20,20,.1,20,20,20,20])},a.prototype.$75$=function(){var B=this,a=this.tableView.getColumnModel().getDataByTag("defaultValue");a.getEnumValues=function(B){var a=B?Ra.config.valueTypes[B.a("valueType")]:null;return a&&"enum"===a.type?a.values:null},a.getEnumLabels=function(B){var a=B?Ra.config.valueTypes[B.a("valueType")]:null;return a&&"enum"===a.type?a.labels:null},a.getEnumIcons=function(B){var a=B?Ra.config.valueTypes[B.a("valueType")]:null;return a&&"enum"===a.type?a.icons:null},a.getEnumDropDownWidth=function(B){var a=B?Ra.config.valueTypes[B.a("valueType")]:null;return a&&"enum"===a.type?a.dropDownWidth:null},a.getValueType=function(B){var a=B?Ra.config.valueTypes[B.a("valueType")]:null;return a?a.type:null},a.isCellEditable=function(a,j,E,$){var K=a?Ra.config.valueTypes[a.a("valueType")]:null,C=K?K.type:null;if("function"===C){var Z=H("editor.function")+" "+(a.a("property")||"");return B.editor.functionView.open(a.a("defaultValue"),function(B){a.a("defaultValue",B)},Z),!1}if("multiline"===C)return B.editor.textView.open(a.a("defaultValue"),function(B){a.a("defaultValue",B)},a.a("property")||"&nbsp;"),!1;if("font"===C)return B.editor.fontView.open(a.a("defaultValue"),function(B){a.a("defaultValue",B)},a.a("property")||"&nbsp;"),!1;if("object"===C||"custom"===C||"stringArray"===C||"objectArray"===C||"numberArray"===C||"colorArray"===C){var h=H("editor.object")+" "+(a.a("property")||"");return B.editor.objectView.open(a.a("defaultValue"),function(B){a.a("defaultValue",B)},h),!1}return!0}},a.prototype.initExtraInfoColumn=function(){var B=this,a=this.tableView.getColumnModel().getDataByTag("extraInfo");a.isCellEditable=function(a,j,E,$){var K=H("editor.extrainfo")+" "+(a.a("property")||"");return B.editor.objectView.open(a.a("extraInfo"),function(B){a.a("extraInfo",B)},K),!1}},a.prototype.open=function(B){var a=this;this.fileNode=B,B?t(B.url,function(j){a.update(B.url,B.path,i(B.getName()),j)}):this.update(void 0,this.editor.components.currentDir,H("editor.untitled"))},a.prototype.update=function(B,a,j,E){if(E){if(E=g(E),this.setTitle(H("editor.editcomponent")),this.node.setWidth(E.width||100),this.node.setHeight(E.height||100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",E.snapshotURL||""),this.inspectorPane.getViewById("name").setEditable(!1),this.inspectorPane.v("name",j||""),this.inspectorPane.v("path",a||""),this.funcPane.v("func",h(E.func)),this.tableModel.clear(),E.properties)for(var $ in E.properties){var K=E.properties[$],C=new ht.Data;C.a({property:$,valueType:K.valueType,defaultValue:K.defaultValue,name:K.name,description:K.description,extraInfo:K.extraInfo}),this.tableModel.add(C)}this.refresh(),this.show(),this.url=B,this.editor.fireEvent("componentViewOpened",{componentView:this,url:B,json:E})}else this.setTitle(H("editor.newcomponent")),this.node.setWidth(100),this.node.setHeight(100),this.inspectorPane.v("width",this.node.getWidth()),this.inspectorPane.v("height",this.node.getHeight()),this.inspectorPane.v("snapshotURL",""),this.inspectorPane.getViewById("name").setEditable(!0),this.inspectorPane.v("name",j),this.inspectorPane.v("path",a),this.funcPane.v("func",""),this.tableModel.clear(),this.refresh(),this.show(),this.url=B,this.editor.fireEvent("componentViewCreated",{componentView:this})},a.prototype.$76$=function(){var B=this.funcPane.v("head"),a=this.funcPane.v("func").trim();return m(B+"\n"+a+"\n}")},a.prototype.$77$=function(){var B={};return this.tableModel.getRoots().each(function(a){B[a.a("property")]={valueType:a.a("valueType"),defaultValue:a.a("defaultValue"),name:a.a("name"),description:a.a("description"),extraInfo:a.a("extraInfo")}}),B},a.prototype.refresh=function(B){ht.Default.setCompType("_editingCompType_",{func:this.$76$(),properties:this.$77$()}),this.node.setWidth(parseFloat(this.inspectorPane.v("width"))),this.node.setHeight(parseFloat(this.inspectorPane.v("height"))),this.node.iv(),this.graphView.fitContent(Ra.config.animate,Ra.config.fitPadding);var a=function(j){"validate"===j.kind&&(B&&B(!this._errorMsg),this._errorMsg&&this.editor.showMessage(this._errorMsg,Hj),this.graphView.removeViewListener(a,this))};this.graphView.addViewListener(a,this)},a.prototype.ok=function(){var B=this,a=this.inspectorPane.v("name").trim(),j=this.inspectorPane.v("path"),E=this.url||j+"/"+a+".json";if(!a)return void RB(null,H("editor.inputempty"),function(){});if(a.length>Ra.config.maxFileNameLength)return void RB(null,H("editor.inputmax"),function(){});if(Ra.config.checkFileName&&!(a=Ra.config.checkFileName(a,E)))return void RB(null,H("editor.invalidinput"),function(){});HB(a)&&(a=i(a));var $=this.content,K={componentView:this,url:E,json:v($)};this.editor.fireEvent("componentViewSaving",K),K.preventDefault||(K={path:K.url,content:K.json},this.refresh(function(E){E&&B.editor.request("upload",K,function(E){E===!0&&(B.refresh(),B.graphView.sm().cs(),B.graphView.validate(),B.editor.saveImage($.snapshotURL||B.graphView,j+"/"+a+".png"),B.hide(),B.editor.selectFileNode(K.path),K={componentView:B,url:K.path,json:K.content},B.editor.fireEvent("componentViewSaved",K))})}))},ta(a,[{key:"content",get:function(){var B={modified:(new Date).toString(),width:parseFloat(this.inspectorPane.v("width")),height:parseFloat(this.inspectorPane.v("height")),snapshotURL:this.inspectorPane.v("snapshotURL"),func:this.$76$()};return this.tableModel.size()&&(B.properties=this.$77$()),B}}]),a}(fa),eE=460,nE=230,bE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j;var $=[];$.push(H("editor.binding")),$.push({id:"compProperty",textField:{editable:!1}}),$.push({element:H("editor.type"),align:"right"}),$.push({id:"type",comboBox:{values:["attr","func"],onValueChanged:function(B,a){var j="func"===a,$=j?ht.Default.labelColor:Ra.config.color_disabled;E.getViewById("func").setEditable(j),E.getItemById("head").color=$,E.getItemById("end").color=$,E.getViewById("property").setDisabled(j),j&&E.getViewById("property").setValue(""),E.iv()}}}),$.push({element:H("editor.property"),align:"right"});var K={id:"property"};Ra.config.dataBindingsForSymbol.getComboBoxValues?K.comboBox={editable:!!Ra.config.dataBindingsForSymbol.comboBoxEditable}:K.textField={},$.push(K);var C=[50,90,40,60,60,.1];if(Ra.config.dataBindingsForSymbol.onButtonClicked){var Z=QB("...",void 0,void 0,function(){E.smartClose=!1,Ra.config.dataBindingsForSymbol.onButtonClicked(E,E.v("compProperty"))});$.push(Z),C.push(20)}E.addRow($,C),E.addLine(),E.addRow([{id:"head",element:""}],[.1]),E.addRow([{id:"func",element:ja()}],[.1],.1),E.addRow([{id:"end",element:"}"},{button:{label:H("editor.ok"),onClicked:function(){E.hide(!0)}}},{button:{label:H("editor.cancel"),onClicked:function(){E.hide()}}}],[.1,50,50]),E.setWidth(eE),E.setHeight(nE),E.getView().className="ht-editor-databinding",E.getView().style.background=Ra.config.color_pane,E.getView().style.border=Ra.config.color_pane_dark+" solid 1px",E.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,E.getView().style.overflow="visible";var h=E.handleWindowClick.bind(E);return window.addEventListener("mousedown",h,!1),window.addEventListener("touchstart",h,!1),E}return ra(a,B),a.prototype.handleWindowClick=function(B){if(this.smartClose&&this.getView().parentNode&&!this.button.getView().contains(B.target)){var a=this.getViewById("type");if(!a.getListView().getView().contains(B.target)){if(a=this.getViewById("property"),a instanceof ht.widget.ComboBox){if(a.getListView().getView().contains(B.target))return;if(a.getInput()&&a.getInput().contains(B.target))return}this.getView().contains(B.target)||this.hide()}}},a.prototype.toggle=function(B,a,j,E,$,H){this.getView().parentNode?this.hide():this.show(B,a,j,E,$,H)},a.prototype.show=function(B,a,j,E,$,H){var K=this;Ra.config.dataBindingsForSymbol.getComboBoxValues?Ra.config.dataBindingsForSymbol.getComboBoxValues(function(C){var Z=K.getViewById("property");Z.setValues(C),K.showImpl(B,a,j,E,$,H)}):this.showImpl(B,a,j,E,$,H)},a.prototype.showImpl=function(B,a,j,E,$,H){if(!this.getView().parentNode){this.smartClose=!0;var K=B.getView().getBoundingClientRect(),C=(this.getView().style,l());ht.Default.appendToScreen(this),K.bottom+nE+1>C.height?this.getView().style.top=C.top+K.top-nE-1+"px":this.getView().style.top=C.top+K.bottom+1+"px",this.getView().style.left=C.left+K.right-eE+"px",this.iv(),this.button=B,this.name=a,this.inspector=E,this.setter=H,this.v("compProperty",j||a);var Z=void 0,m=!1;this.inspector.global?"clip"===a?(Z=$?$():this.inspector.dataModel.a("clip"),this.v("head","function(g, width, height, data, view, image) {"),m=!0):(Z=$?$():this.inspector.dataModel.a(a+"_func"),this.v("head","function(data, view) {")):(Z=$?$():this.inspector.data.a(a),this.inspector.data instanceof zE&&"type"===a?(this.v("head","function(g, rect, comp, data, view) {"),m=!0):this.v("head","function(data, view) {"));kB(Z)?(Kj.test(Z)?(this.v("type","attr"),this.v("property",Z.slice(5))):(this.v("type","attr"),this.v("property",Z)),this.v("func","")):zB(Z)?(this.v("type","func"),this.v("property",""),this.v("func",h(Z))):(this.v("type","attr"),this.v("property",""),this.v("func","")),m?(this.v("type","func"),this.v("property",""),this.getViewById("type").setDisabled(!0)):this.getViewById("type").setDisabled(!1)}},a.prototype.hide=function(){var B=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(W(this.getView()),a)){var j=this.v("type"),E=this.v("property"),$=void 0;if("func"===j){var H=this.v("func").trim();(H||this.inspector.data instanceof zE&&"type"===this.name)&&($=m(this.v("head")+"\n"+H+"\n}"))}else E&&"attr"===j&&($="attr@"+E);this.setter?this.setter($):this.inspector.global?"clip"===this.name?this.inspector.dataModel.a("clip",$):this.inspector.dataModel.a(this.name+"_func",$):this.inspector.setValue(function(a,j){a.a(B.name,j)},$)}},a}(ya),SE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.createTabView();var $=[];return $.push({label:H("editor.ok"),action:function(){E.ok()}}),$.push({label:H("editor.cancel"),action:function(){E.hide()}}),E.setConfig({title:H("editor.eventhandlers"),closable:!0,draggable:!0,width:Ra.config.eventViewSize.width,height:Ra.config.eventViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:E.tabView,buttons:$,buttonsAlign:"right"}),E}return ra(a,B),a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype.ok=function(){var B=this;this.target&&Na.forEach(function(a){var j=B[a+"FormPane"],E=j.v("body").trim();"data"===B.inspectorType?!function(){var j=E?m("function(event, data, view) {\n"+E+"\n}"):void 0;B.target.forEach(function(B){B.s(a,j)})}():!function(){var j=E?m("function(event, data, view, point, width, height) {\n"+E+"\n}"):void 0;B.target.forEach(function(B){B.a(a,j)})}()}),this.hide()},a.prototype.createTabView=function(){var B=this,a=this.tabView=new nj;Na.forEach(function(j){var E=B[j+"FormPane"]=new ya;E.addRow([{id:"head",element:""}],[.1]),E.addRow([{id:"body",element:ja()}],[.1],.1),E.addRow(["}"],[.1]),B[j+"Tab"]=a.add(H("editor.event."+j.toLowerCase()),E)}),a.getTabModel().sm().ss(a.getTabModel().getDatas().get(0))},a.prototype.open=function(B,a){var j=this;B&&B.length&&(this.target=B,this.inspectorType=a,Na.forEach(function(E){var $=j[E+"FormPane"];"data"===a?($.v("head",E+": function(event, data, view) {"),$.v("body",h(B[B.length-1].s(E)))):($.v("head",E+": function(event, data, view, point, width, height) {"),$.v("body",h(B[B.length-1].a(E))))}),this.show())},a}(fa),vE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.formPane=new ya;var $=E.raws=[],K=E.formPane.addRow([{id:"head",element:"function() {"}],[.1]);$.push(K),K=E.formPane.addRow([{id:"function",element:ja()}],[.1],.1),$.push(K),K=E.formPane.addRow(["}"],[.1]),$.push(K);var C=[];return C.push({label:H("editor.ok"),action:function(){E.ok()}}),C.push({label:H("editor.cancel"),action:function(){E.hide()}}),E.setConfig({title:H("editor.function"),closable:!0,draggable:!0,width:Ra.config.functionViewSize.width,height:Ra.config.functionViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:E.formPane,buttons:C,buttonsAlign:"right"}),E}return ra(a,B),a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype.parse=function(B){if(B){var a=this.getFunctionHead();return B=B.trim(),a?B=""+a+B+"}":B.startsWith("function")||(B="function() {\n"+B+"\n}"),m(B)}},a.prototype.ok=function(){this.setValue&&this.setValue(this.parse(this.formPane.v("function"))),this.hide()},a.prototype.setFormRows=function(){var B=this.formPane,a=this.raws,j=this._argList;this._argList?B._rows=a:B._rows=[a[1]],B.iv(),j&&B.v("head",this.getFunctionHead())},a.prototype.getFunctionHead=function(){var B=this._argList;if(B)return"function("+(ht.Default.isArray(B)?B.join(", "):B)+") {"},a.prototype.stringifyFunction=function(B){var a=Z(B);if(this._argList){var j=a.indexOf("{"),E=a.lastIndexOf("}");a=a.substring(j+1,E)}return a},a.prototype.open=function(B,a,j,E){this.setValue=a,this._argList=E,this.setTitle(j),this.setFormRows(),this.formPane.v("function",this.stringifyFunction(B)),this.show()},a}(fa);Ra.FunctionView=vE;var gE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.formPane=new ya,E.formPane.addRow([{id:"object",element:ja()}],[.1],.1);var $=[];return $.push({label:H("editor.ok"),action:function(){E.ok()}}),$.push({label:H("editor.cancel"),action:function(){E.hide()}}),E.setConfig({title:H("editor.object"),closable:!0,draggable:!0,width:Ra.config.objectViewSize.width,height:Ra.config.objectViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:E.formPane,buttons:$,buttonsAlign:"right"}),E}return ra(a,B),a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype.ok=function(){if(this.setValue){var B=this.formPane.v("object").trim(),a=new Function("return "+B);B=a(),this.setValue(B)}this.hide()},a.prototype.open=function(B,a,j){if(this.setValue=a,this.setTitle(j),B=this.stringify(B,4)){this._funcMap;for(var E in this._funcMap)B=B.replace('"'+E+'"',Z(this._funcMap[E]))}this.formPane.v("object",B),this.show()},a.prototype.stringify=function(B,a){var j=this,E=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()},this._funcMap={};var $=JSON.stringify(B,function(B,a){if("function"==typeof a){var E=Math.random().toString().substring(3,16)+Date.now();return j._funcMap[E]=a,E}return a},null==a?2:a);return Date.prototype.toJSON=E,$},a}(fa);Ra.ObjectView=gE;var iE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.formPane=new ya,E.formPane.addRow([{id:"text",textArea:{}}],[.1],.1);var $=[];return $.push({label:H("editor.ok"),action:function(){E.ok()}}),$.push({label:H("editor.cancel"),action:function(){E.hide()}}),E.setConfig({closable:!0,draggable:!0,width:Ra.config.textViewSize.width,height:Ra.config.textViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:E.formPane,buttons:$,buttonsAlign:"right"}),E}return ra(a,B),a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype.ok=function(){this.setValue&&this.setValue(this.formPane.v("text")),this.hide()},a.prototype.open=function(B,a,j){this.setValue=a,this.setTitle(j),this.formPane.v("text",B),this.show()},a}(fa),pE=function(){function B(){Wa(this,B)}return B.prototype.init=function(){var B=this.baseFonts=["monospace","sans-serif","serif"],a=this.testString="mmmmmmmmmmlli",j=this.testSize="72px",E=this.h=document.getElementsByTagName("body")[0],$=this.s=document.createElement("span");$.style.fontSize=j,$.innerHTML=a;var H=this.defaultWidth={},K=this.defaultHeight={};for(var C in B)$.style.fontFamily=B[C],E.appendChild($),H[B[C]]=$.offsetWidth,K[B[C]]=$.offsetHeight,E.removeChild($);this.initialized=!0},B.prototype.detect=function(B){this.initialized||this.init();var a=!1,j=this.baseFonts,E=this.s,$=this.h,H=this.defaultWidth,K=this.defaultHeight;for(var C in j){E.style.fontFamily=B+","+j[C],$.appendChild(E);var Z=E.offsetWidth!=H[j[C]]||E.offsetHeight!=K[j[C]];$.removeChild(E),a=a||Z}return a},B}(),dE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E}return ra(a,B),a.prototype.init=function(){var B=this;this._detector=new pE;var a=32,j=this.borderPane=new Fj,E=this.rightBorder=new Fj,$=this.previewGraph=new ht.graph.GraphView,K=this.listView=new Pj,C=this.formPane=new ya;K.getView().style.borderRight="2px solid #f7f7f7",K.getLabelFont=function(B){return"14px "+B.getName()},j.setLeftView(K),j.setCenterView(E),j.setLeftWidth(180),E.setBottomView($),E.setBottomHeight(120),E.setCenterView(C),$.adjustTranslateX=function(){return 0},$.adjustTranslateY=function(){return 0},$.handleScroll=function(){return!1},$.setScrollBarVisible(!1);var Z=this.textNode=new ht.Text;Z.s({"2d.selectable":!1,text:Ra.config.fontPreview}),Z.setAnchor(0,0),Z.setSize(2e3,120),Z.p(4,4),$.dm().add(Z);var h=60;C.setVPadding(32),C.setVGap(18),C.setHGap(0),C.addRow([{element:H("editor.font.style"),align:"right"},"",{id:"normal",button:this.createStyleButton(H("editor.font.normal"))},{id:"bold",button:this.createStyleButton(H("editor.font.bold"))},{id:"oblique",button:this.createStyleButton(H("editor.font.oblique"))},{id:"obliqueBold",button:this.createStyleButton(H("editor.font.obliqueBold"))}],[h,8,.1,.1,.1,.1],a),C.addRow([{element:H("editor.font.size"),align:"right"},"",{id:"fontSize",slider:{max:72,min:12,step:1,onValueChanged:function(a,j){C.getItemById("fontSizeLabel").element=j+"",C.iv(),B._handleFontChange()}}},{id:"fontSizeLabel",element:"12"}],[h,8,.1,20],a),C.addRow([{element:"\u8f93\u51fa",align:"right"},"",{id:"fontOutput",textField:{editable:!1,value:this.getFontString()}}],[h,8,.1],a);var m=[];m.push({label:H("editor.ok"),action:function(){B.ok()}}),m.push({label:H("editor.cancel"),action:function(){B.hide()}}),this.initFontList(),this.setConfig({closable:!0,draggable:!0,width:Ra.config.fontViewSize.width,height:Ra.config.fontViewSize.height,contentPadding:6,resizeMode:"wh",maximizable:!0,content:j,buttons:m,buttonsAlign:"right"}),this._init=!0},a.prototype.createStyleButton=function(B){var a=this;return{label:B,groupId:"fontStyle",labelSelectColor:Ra.config.color_select,labelColor:"#2c2c2c",borderSelectColor:"red",background:"rgb(247,247,247)",selectBackground:"rgb(247,247,247)",togglable:!0,borderColor:null,onClicked:function(B){a._handleFontChange()}}},a.prototype.initFontList=function(){var B=this,a=this.listView,j=a.getView().style,E=a.dm(),$=this._detector,H=Ra.config.fontList;return a.sm().ms(function(a){B._handleFontChange(a)}),H.forEach(function(B){if($.detect(B)){var a=new ht.Node;a.setIcon(null),a.setName(B),E.add(a)}}),E.sm().setSelectionMode("multiple"),j.background="white",a},a.prototype.$49$=function(){this.hide()},a.prototype.$48$=function(){this.ok()},a.prototype._handleFontChange=function(){this.textNode.s("text.font",this.getFontString()),this.formPane.v("fontOutput",this.getFontString())},a.prototype.getFontString=function(){var B=this.listView,a=this.formPane,j=B.sm().getSelection().toArray(),E="",$=j.map(function(B){return B.getName()});return $.length||($=["arial"]),["bold","oblique","obliqueBold"].forEach(function(B,j){var $=a.getItemById(B);$.element.isSelected()&&(0===j?E="bold ":1===j?E="italic ":2===j&&(E="italic bold "))}),""+E+a.getValue("fontSize")+"px "+$.join(", ")},a.prototype.ok=function(){this.setValue&&this.setValue(this.getFontString()),this.hide()},a.prototype.analysisFontString=function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht.Default.labelFont,a=B.split(/px\s+/),j=a[0].split(/\s+/),E=a[1].split(",").map(function(B){return B.trim()}),$=/\d+/,H=void 0,K=void 0,C=void 0;j.forEach(function(B){"bold"===B?H=!0:"oblique"===B||"italic"===B?K=!0:$.test(B)&&(C=parseInt(B))}),this.setFormValue(C,E,H,K)},a.prototype.setFormValue=function(B,a,j,E){var $=this.listView,H=this.formPane;$.sm().cs(),$.dm().each(function(B){a.forEach(function(a){B.getName().toLowerCase()===a.toLowerCase()&&$.sm().as(B)})});var K=0;j&&E?K=3:j?K=1:E&&(K=2),["normal","bold","oblique","obliqueBold"].forEach(function(B,a){var j=H.getItemById(B);j.element.setSelected(K===a)}),H.getItemById("fontSizeLabel").element=B+"",H.setValue("fontSize",B)},a.prototype.open=function(B,a,j){this._init||this.init(),this.setValue=a,this.setTitle(j),this.analysisFontString(B),this.show()},a}(fa);Ra.FontView=dE;var xE=300,WE=230,tE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j,E.addRow([{id:"content",textArea:{}}],[.1],.1),E.addRow([null,{button:{label:H("editor.ok"),onClicked:function(){E.hide(!0)}}},{button:{label:H("editor.cancel"),onClicked:function(){E.hide()}}}],[.1,50,50]),E.setWidth(xE),E.setHeight(WE),E.getView().className="ht-editor-styleicons",E.getView().style.background=Ra.config.color_pane,E.getView().style.border=Ra.config.color_pane_dark+" solid 1px",E.getView().style.boxShadow="0px 0px 3px "+ht.Default.toolTipShadowColor,E.getView().style.overflow="visible";var $=function(B){!E.getView().parentNode||E.button.getView().contains(B.target)||E.getView().contains(B.target)||E.hide()};return window.addEventListener("mousedown",$,!1),window.addEventListener("touchstart",$,!1),E}return ra(a,B),a.prototype.toggle=function(B,a){this.getView().parentNode?this.hide():this.show(B,a)},a.prototype.show=function(B,a){if(!this.getView().parentNode){var j=B.getView().getBoundingClientRect(),E=(this.getView().style,l());ht.Default.appendToScreen(this),this.getView().style.top=E.top+j.top+"px",this.getView().style.left=E.left+j.left-xE-4+"px",this.iv(),this.button=B,this.data=a;var $=a.s("icons");this.v("content",$?v($):"")}},a.prototype.hide=function(){var B=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.getView().parentNode&&(W(this.getView()),B)){var a=this.v("content").trim();this.data.s("icons",a?g(a):void 0)}},a}(ya),rE=function(){function B(a){var j=this;Wa(this,B),this.editor=a;var E=this.container=ht.Default.createDiv(),$=this.wrap=ht.Default.createDiv(),H=E.style;H.pointerEvents="none",H.position="absolute",H.left=0,H.right=0,H.top=0,H.bottom=0,E.appendChild($),H=$.style,H.width="600px",H.position="absolute",H.left="50%",H.bottom="20px",H.marginLeft="-300px",H.pointerEvents="none",this._cache=[],this._visibleCount=0,this.layoutContainer(),window.addEventListener("resize",function(){j.layoutContainer()})}return B.prototype.layoutContainer=function(){var B=this.container,a=ht.Default.getWindowInfo(),j=B.style;j.width=a.width+"px",j.height=a.height+"px"},B.prototype.createMessage=function(B){var a=this._cache.pop();if(!a){a=document.createElement("div");var j=a.style;j.boxSizing="border-box",j.padding=0,j.backgroundColor="rgba(61,61,61,0.15)",j.color="rgb(247,247,247)",j.margin="5px auto",j.textAlign="center",j.borderRadius="19px",j.height=0,j.overflow="hidden",j.pointerEvents="none",j.webkitTransition="0.3s all",j.mozTransition="0.3s all",j.msTransition="0.3s all",j.oTransition="0.3s all",j.transition="0.3s all"}return a.innerText=B,a},B.prototype.show=function(B){var a=this,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$j,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e3,$=this.createMessage(B);this.wrap.appendChild($),this._visibleCount||document.body.appendChild(this.container),
this._visibleCount++,$.style.backgroundColor=j===$j?"rgba(61,61,61,0.15)":"#FF7C7C",setTimeout(function(){$.style.height="38px",$.style.padding="8px 20px",a.hideLater($,E)},10)},B.prototype.hideLater=function(B,a){var j=this;setTimeout(function(){B.style.height=0,B.style.padding=0,setTimeout(function(){j.wrap.removeChild(B),j._cache.push(B),j._visibleCount--,j._visibleCount||document.body.removeChild(j.container)},500)},a)},B}();Ra.MessageView=rE;var GE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));E.editor=j;var $=E.dm=new ht.DataModel,K=E.gv=new ht.graph.GraphView($),C=E.rightFormPane=new ya,Z=E.splitView=new lj(K,C,"h",.6),h=E.targetNode=new ht.Node;h.setAnchor(0,0),h.p(0,0),h.s("2d.selectable",!1),K.dm().add(h),K.setEditable(!0),K.addBottomPainter(function(B){var a=this.getViewRect();B.fillStyle="#cbd3d8",B.fillRect(a.x,a.y,a.width,a.height);var j=h.getRect();B.fillStyle="#fff",B.fillRect(j.x,j.y,j.width,j.height)});var m=[{label:H("editor.ok"),action:function(){E.editor.dm.a("attachPoints",E.toPointsData()),E.hide()}},{label:H("editor.cancel"),action:function(){E.hide()}}];return E.setConfig({title:"\u5438\u9644\u70b9",content:Z,closable:!0,draggable:!0,maximizable:!0,resizeMode:"wh",buttons:m,width:Ra.config.attachPointsViewSize.width,height:Ra.config.attachPointsViewSize.height}),E.$81$(),$.md(function(B){if("position"===B.property&&B.data!==h){var a=B.data,j=a.a("offsetX"),E=a.a("offsetY"),$=B.newValue.x-j,H=B.newValue.y-E;a.a({x:parseFloat(($/h.getWidth()).toFixed(2)),y:parseFloat((H/h.getHeight()).toFixed(2))})}}),K.mp(function(B){if("zoom"===B.property){var a=1/K.getZoom();$.each(function(B){B!==h&&B.setScale(a,a)})}}),E}return ra(a,B),a.prototype.$81$=function(){var B=this,a=new ej(this.dm),j=this.tableView=window.tv=a.getTableView();j.isVisible=function(a){return a!==B.targetNode},j.setEditable(!0),a.getView().style.border=Ra.config.color_line+" solid 1px",a.addColumns([this.$74$("x","X",70,function(a,j,E,$){var H=B.targetNode.getWidth();a.setX(H*E+(a.a("offsetX")||0))}),this.$74$("y","Y",70,function(a,j,E,$){var H=B.targetNode.getHeight();a.setY(H*E+(a.a("offsetY")||0))}),this.$74$("offsetX","Offset X",70,function(a,j,E,$){a.a("offsetX",E);var H=B.targetNode.getWidth();a.setX(H*a.a("x")+E)}),this.$74$("offsetY","Offset Y",70,function(a,j,E,$){a.a("offsetY",E);var H=B.targetNode.getHeight();a.setY(H*a.a("y")+E)})]),this.rightFormPane.addRow([a],[.1],200),this.rightFormPane.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){B.add()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){B.remove()}}}],[20,20],20)},a.prototype.add=function(){var B=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,E=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,$=new ht.Node,H=1/this.gv.getZoom();$.setImage("editor.attachPoint"),$.setScale(H,H),$.a({x:B,y:a,offsetX:j,offsetY:E}),$.s({"2d.editable":!1});var K=this.targetNode.getWidth(),C=this.targetNode.getHeight();$.p(B*K+j,a*C+E),this.gv.dm().add($)},a.prototype.remove=function(){for(var B=this.dm.sm().getSelection().toArray(),a=B.length-1;a>=0;a--)this.dm.remove(B[a])},a.prototype.$74$=function(B,a,j,E){return{name:B,tag:B,width:j,displayName:a,align:"center",editable:!0,valueType:"number",getValue:function(a){return a.a(B)},setValue:E}},a.prototype.toPointsData=function(){var B=this,a=this.dm.toDatas(function(a){return a!==B.targetNode}).toArray();return a.map(function(B){var a={x:B.a("x"),y:B.a("y")};return B.a("offsetX")&&(a.offsetX=B.a("offsetX")),B.a("offsetY")&&(a.offsetY=B.a("offsetY")),a})},a.prototype.$49$=function(){this.hide()},a.prototype.createNodeByPointData=function(){var B=this,a=this.editor.dm.a("attachPoints");a&&a.forEach(function(a){B.add(a.x,a.y,a.offsetX,a.offsetY)})},a.prototype.show=function(a){this.dm.clear(),this.dm.add(this.targetNode),this.targetNode.setImage(a),this.createNodeByPointData(),B.prototype.show.call(this),this.gv.fitContent(!0)},a}(fa),fE=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E}return ra(a,B),a.prototype.init=function(){var B=this,a=this.formPane=new ya,j=24;a.setVPadding(2),a.setVGap(8),a.setHGap(0),a.addRow([{element:H("editor.size"),background:Ra.config.color_pane_dark}],[.1],j),a.addRow([H("editor.width"),{id:"width",type:"number",textField:{value:30}},H("editor.height"),{id:"height",type:"number",textField:{value:40}}],[64,.1,64,.1],j),a.addRow([{element:H("editor.content"),background:Ra.config.color_pane_dark}],[.1],j),a.addRow([{id:"uppercase",checkBox:{label:H("editor.uppercase"),selected:!0}},{id:"lowercase",checkBox:{label:H("editor.lowercase"),selected:!0}},{id:"number",checkBox:{label:H("editor.valuetype.number"),selected:!0}}],[.1,.1,.1],j),a.addRow([H("editor.custom"),{id:"content",textField:{}}],[64,.1],j);var E=[];E.push({label:H("editor.ok"),action:function(){B.ok()}}),E.push({label:H("editor.cancel"),action:function(){B.hide()}}),this.setConfig({closable:!0,draggable:!0,title:H("editor.converteroption"),width:320,height:240,contentPadding:6,resizeMode:"wh",maximizable:!0,content:a,buttons:E,buttonsAlign:"right"}),this._init=!0},a.prototype.ok=function(){var B=this.formPane,a=B.v("width"),j=B.v("height"),E=B.v("uppercase"),$=B.v("lowercase"),H=B.v("number"),K=B.v("content"),C="";E&&(C+="ABCDEFGHIJKLMNOPQRSTUVXWYZ"),$&&(C+="abcdefghijklmnopqrstuvxwyz"),H&&(C+="1234567890"),C+=K;var Z={width:a,height:j,texts:C};this.callback&&this.callback(Z),delete this.callback,this.hide()},a.prototype.open=function(B){this._init||this.init(),this.callback=B,this.show()},a}(fa),yE=function B(a,j){var E=this;Wa(this,B),this.editor=a,this.inspector=j,["isDataTitleVisible","isDataPropertyVisible","isCompTitleVisible","isCompPropertyVisible","isDisplayTitleVisible","isDisplayPropertyVisible","isSymbolTitleVisible","isSymbolPropertyVisible"].forEach(function(B){E[B]=function(){return!(Ra.config.detailFilter[B]&&!Ra.config.detailFilter[B].apply(j,arguments))&&!(a.inspectorCompact&&Ra.config.compactFilter[B]&&!Ra.config.compactFilter[B].apply(j,arguments))}})},YE=function(B){function a(j,E,$){var H=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Wa(this,a);var K=Ga(this,B.call(this));return K.setHPadding(8),K.global=H,K.editor=j,K.name=E,K.type=$,K.setVPadding(0),K.inspectorFilter=new yE(j,K),K.updateHandlers=[],K.propertyChangeHandlers=[],K.editor.fireEvent("inspectorInitializing",{inspector:K}),K.initForm(),K.editor.fireEvent("inspectorInitialized",{inspector:K}),K.$104$(),K.editor.fireEvent("inspectorCreated",{inspector:K}),K.$47$=K._rows,K}return ra(a,B),a.prototype.initForm=function(){},a.prototype.beginTransaction=function(){this.dataModel&&this.dataModel.beginTransaction()},a.prototype.endTransaction=function(){this.dataModel&&this.dataModel.endTransaction()},a.prototype.addUpdateHandler=function(B){this.updateHandlers.push(B)},a.prototype.removeUpdateHandler=function(B){K(this.updateHandlers,B)},a.prototype.addPropertyChangeHandler=function(B){this.propertyChangeHandlers.push(B)},a.prototype.removePropertyChangeHandler=function(B){K(this.propertyChangeHandlers,B)},a.prototype.$104$=function(){for(var B=this._rows,a=!0,j=B.length-1;j>=0;j--)B[j].title?a?this.removeRow(B[j]):a=!0:a=!1},a.prototype.isTitleVisible=function(B){return B.visible!==!1&&(!zB(B.visible)||B.visible(this)!==!1)},a.prototype.isPropertyVisible=function(B){var a=this.editor.inspectorInputFilter;if(a){if(!B.keys)return!1;a=a.toLowerCase();var j=B.keys.name;if(j&&j.toLowerCase().indexOf(a)>=0)return!0;var E=B.keys.displayName;return!!(E&&E.toLowerCase().indexOf(a)>=0)}return B.visible!==!1&&!(zB(B.visible)&&!B.visible(this))},a.prototype.makeItemsHidden=function(B){var a=this;B.hidden=!0,B.forEach(function(B){var j=a.getItemView(B);j&&(j.style.display="none")})},a.prototype.makeItemsVisible=function(B){var a=this;B.hidden=!1,B.forEach(function(B){var j=a.getItemView(B);j&&(j.style.display="block")})},a.prototype.filterPropertiesLater=function(){var B=this;this._filterPropertiesLater||(this._filterPropertiesLater=!0,requestAnimationFrame(function(){B.filterProperties()}))},a.prototype.isTitleExpanded=function(B){return!(B&&!this.editor.inspectorInputFilter)||Ra.config.expandedTitles[B]},a.prototype.filterProperties=function(){var B=this;this._filterPropertiesLater=!1;var a=[],j=void 0,E=!1;this.$47$.forEach(function($){var H=$.items;$.title?(B.isTitleVisible($)?(j=$.title,$.button.setIcon(B.isTitleExpanded(j)?"expandIcon":"collapseIcon"),!E&&a.length&&a[a.length-1].title&&B.makeItemsHidden(a.pop().items),a.push($),B.makeItemsVisible(H)):(j="HTISFUCKINGAWESOME",B.makeItemsHidden(H)),E=!1):(B.isTitleExpanded(j)&&B.isPropertyVisible($)?(a.push($),B.makeItemsVisible(H)):B.makeItemsHidden(H),!E&&B.isPropertyVisible($)&&(E=!0))}),!E&&a.length&&a[a.length-1].title&&this.makeItemsHidden(a.pop().items),this._rows=a,this.updateProperties(),this.iv()},a.prototype.addTitle=function(B,a){var j=this,E=this._oldTitle;this.editor.fireEvent("titleCreating",{oldTitle:E,title:B,inspector:this});var $=function(){Ra.config.expandedTitles[B]=!Ra.config.expandedTitles[B],j.filterProperties()},K=[],C=this.addButton(K,null,null,null,$,!0);C.setBorderColor(null);var Z=H("editor."+B.toLowerCase(),!0)||H(B);K.push({element:Z,font:Ra.config.boldFont}),a=a||{},a.title=B,a.background=Ra.config.color_pane_dark,a.button=C;var h=this.addRow(K,[20,.1],Ra.config.inspectorTitleHeight||null,a);return this._oldTitle=B,this.editor.fireEvent("titleCreated",{oldTitle:E,title:B,inspector:this}),h},a.prototype.$35$=function(B){var a=this;B&&(this.propertyChangeHandlers.forEach(function(j){j(B,a)}),this.$47$.forEach(function(j){j.onPropertyChanged&&j.onPropertyChanged(B,a)})),this._updatePropertiesLater||(this._updatePropertiesLater=!0,requestAnimationFrame(function(){a.updateProperties()}))},a.prototype.updateProperties=function(){this._updating=!0,this.updateHandlers.forEach(function(B){B()}),this.editor.fireEvent("propertiesUpdated",{inspector:this}),this._updating=!1,this._updatePropertiesLater=!1},a.prototype.eachSelection=function(B){this.dataModel&&(this.beginTransaction(),this.dataModel.sm().each(function(a){B(a)}),this.endTransaction())},a.prototype.getPropertyValue=function(B,a){var j=this.global?this.dataModel:this.data;if(j){if(a=this.fixAccessType(a),"s"===a)return j.s(B);if("a"===a)return j.a(B);if("p"===a){var E=ht.Default.getter(B);if(j[E])return j[E]()}}},a.prototype.setPropertyValue=function(B,a,j,E){if(!this._updating&&this.dataModel){j=this.fixAccessType(j);var $=void 0;this.global?$=[this.dataModel]:E?this.data&&($=[this.data]):$=this.dataModel.sm().toSelection().toArray(),$&&$.forEach(function(E){if("s"===j&&E.s(B,a),"a"===j&&E.a(B,a),"p"===j){var $=ht.Default.setter(B);E[$]&&E[$](a)}})}},a.prototype.getValue=function(B){if(this.dataModel)return this.global?B(this.dataModel):this.data?B(this.data):void 0},a.prototype.setValue=function(B,a,j){!this._updating&&this.dataModel&&(this.beginTransaction(),this.global?B(this.dataModel,j?j():a):B.once?this.data&&B(this.data):this.dataModel.sm().each(function(E){B(E,j?j():a)}),this.endTransaction())},a.prototype.addLabelArray=function(B,a,j,E,$){return this.addLabel(B,a,j,E),this.addArray(B,j,E,$)},a.prototype.addLabelTextArea=function(B,a,j,E){return this.addLabel(B,a,j,E),this.addTextArea(B,j,E)},a.prototype.addLabelMultiline=function(B,a,j,E){var $=this;this.addLabelInput(B,a,j,E),this.addButton(B,"...",null,null,function(B){var H=function(B){$.setValue(E,B)};$.editor.textView.open($.getValue(j),H,a)},!0)},a.prototype.addLabelInput=function(B,a,j,E,$,H,K){return this.addLabel(B,a,j,E,H),this.addInput(B,j,E,$,K)},a.prototype.addLabelRange=function(B,a,j,E,$,H,K,C){return this.addLabelInput(B,a,function(B){var a=j(B);return null==a?H:a},E?function(B,a){void 0!==H&&a>H&&(a=H),void 0!==$&&a<$&&(a=$),E(B,a)}:null,C,K)},a.prototype.addLabelColor=function(B,a,j,E){return this.addLabel(B,a,j,E),this.addColor(B,j,E)},a.prototype.addLabelCheckBox=function(B,a,j,E){return this.addLabel(B,a,j,E),this.addCheckBox(B,j,E)},a.prototype.addLabelFunction=function(B,a,j,E,$,H){return this.addLabel(B,a,j,E),this.addFunction(B,j,E,$,H)},a.prototype.addLabelObject=function(B,a,j,E,$){return this.addLabel(B,a,j,E),this.addObject(B,j,E,$)},a.prototype.addLabelComboBox=function(B,a,j,E,$,H,K){return this.addLabel(B,a,j,E),this.addComboBox(B,j,E,$,H,K)},a.prototype.addLabelURL=function(B,a,j,E,$){var H=this.addLabelInput(B,a,j,E,null,null,!1);return E&&!function(){var B=H.getElement();H.isDroppable=$||function(B,a){return!!a.view.draggingData},H.handleCrossDrag=function(a,j,E){"enter"===j?B.style.border="solid "+Ra.config.color_select_dark+" 2px":"exit"===j||"cancel"===j?B.style.border="":"over"===j||"drop"===j&&(B.style.border="",B.value=E.view.draggingData.uuid,H.setFocus(),H.handleChange())}}(),H},a.prototype.addLabelImage=function(B,a,j,E){var $=function(B,a){if(!a.view.draggingData)return!1;var j=a.view.draggingData.fileType;return j===qa||j===Da};return this.addLabelURL(B,a,j,E,$),this.addImage(B,j,E)},a.prototype.addLabelGradient=function(B,a,j,E,$){var H=this,K=[],C=function(){return H.data&&H.data.s($)||Ra.config.color_light},Z=function(){return H.data&&H.data.s(E)||Ra.config.color_select};Ra.consts.gradients.forEach(function(B){B?K.push({width:20,height:14,comps:[{type:"rect",rect:[0,0,20,14],gradient:B,gradientColor:{func:C},background:{func:Z}}]}):K.push({width:20,height:14,comps:[]})});var h=this.addLabelComboBox(B,a,function(B){return B.s(j)},function(B,a){B.s(j,a)},Ra.consts.gradients,null,K);this.updateHandlers.push(function(){if(!B.hidden){var a=C(),j=Z();h._lastGradientColor===a&&h._lastBackground===j||(h._lastGradientColor=a,h._lastBackground=j,h.iv())}})},a.prototype.addLabelFont=function(B,a,j,E){var $=this;this.addLabelInput(B,a,function(B){return j(B)||ht.Default.labelFont},E?function(B,a){E(B,a||void 0)}:null),this.addButton(B,"...",null,null,function(B){var H=function(B){$.setValue(E,B)};$.editor.fontView.open($.getValue(j),H,a)},!0)},a.prototype.addLabelRotation=function(B,a,j,E,$,H,K){return this.addLabelInput(B,a,function(B){var a=j(B);return null==a?H:180/Math.PI*j(B)},E?function(B,a){a=a*Math.PI/180,void 0!==H&&a>H&&(a=H),void 0!==$&&a<$&&(a=$),E(B,a)}:null,"number",K||1)},a.prototype.addLabelAlign=function(B,a,j,E){return this.addLabelComboBox(B,a,function(B){return j(B)||"center"},E,Ra.consts.aligns,Ra.consts.alignLabels)},a.prototype.addLabelVAlign=function(B,a,j,E){return this.addLabelComboBox(B,a,function(B){return j(B)||"bottom"},E,Ra.consts.vAligns,Ra.consts.vAlignLabels)},a.prototype.addLabelStretch=function(B,a,j,E){this.addLabelComboBox(B,a,function(B){return j(B)||"fill"},E,Ra.consts.stretchs,Ra.consts.stretchLabels)},a.prototype.addOrientation=function(B,a,j,E){return this.addLabelComboBox(B,a,function(B){return j(B)||"top"},E,Ra.consts.orientations,Ra.consts.orientationLabels)},a.prototype.addLabelLabel=function(B,a,j,E){this.addLabelInput(B,a,function(B){var a=j(B);return a&&a.replace&&(a=a.replace(/\n/g,"\\n")),a},E?function(B,a){a&&a.replace&&(a=a.replace(/\\n/g,"\n")),E(B,a)}:null)},a.prototype.toDisplayName=function(B){var a=B[0];if(a){if(kB(a))return a;if(kB(a.element))return a.element;if(a.element)return a.element.innerHTML}},a.prototype.addLabel=function(B,a,j,E,$){var H=this;if($&&E){var K=MB(a,B.length?"right":"left");B.push(K),K.style.cursor="ew-resize";var C=function(B){B.preventDefault(),H.beginTransaction();var a=H.getValue(j)||0,K=w(B).x,C=function(B){B.preventDefault();var j=a+(w(B).x-K)*$;H.setValue(E,j)};window.addEventListener("mousemove",C,!1),window.addEventListener("touchmove",C,!1);var Z=function(B){H.endTransaction(),B.preventDefault(),window.removeEventListener("mousemove",C,!1),window.removeEventListener("touchmove",C,!1),window.removeEventListener("mouseup",Z,!1),window.removeEventListener("touchend",Z,!1)};window.addEventListener("mouseup",Z,!1),window.addEventListener("touchend",Z,!1)};return K.addEventListener("mousedown",C,!1),K.addEventListener("touchstart",C,!1),K}var Z={element:a,align:B.length?"right":"left"};return B.push(Z),Z},a.prototype.createHandleChange=function(B,a,j){var E=this;return function(){var $=B.value;if("pattern"===j)if($=$.trim()){if($.indexOf("[")<0||$.indexOf("]")<0)return;if($=$.replace("[","").replace("]","").split(","),$.length){for(var H=[],K=0;K<$.length;K++){var C=parseFloat($[K]);if(isNaN(C))return;H.push(C)}$=H}else $=void 0}else $=void 0;else if("number"===j){if($=parseFloat($),isNaN($))return}else if("int"===j){if($=parseInt($),isNaN($))return}else $||($=void 0);E.setValue(a,$)}},a.prototype.createArrayIndexColumn=function(B,a,E,$){var K=this,C=B[a],Z="object"===$?v(C):C;return{name:a,width:50,align:"center",editable:!!E,sortable:!1,clickable:!1,getValueType:function(B){return $},getValue:function(B){return Z},setValue:function($,H,C,Z){K.setValue(E,void 0,function(){var E=B.slice();return E[a]=j(C),E})},isCellEditable:function(B,j,E,Z){if("object"===$){var h=H("editor.object")+" ["+a+"]";return K.editor.objectView.open(C,function(a){j.setValue(B,j,a,Z)},h),!1}return!0}}},a.prototype.addArray=function(B,a,j,E){var $=this,K=new ej;K.getTableHeader().setMovable(!1),K.getView().style.border=Ra.config.color_line+" solid 1px";var C=K.getTableView();return C.getDataModel().add(new ht.Data),this.updateHandlers.push(function(){if(!B.hidden){var Z=$.getValue(a);if(C.getColumnModel().clear(),K.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!!j,sortable:!1,clickable:!1,valueType:"int",getValue:function(B){return Z?Z.length:0},setValue:function(B,a,H,K){$.setValue(j,void 0,function(){if(H>=0){var B=LB(Z,H);return"number"===E||"int"===E?AB(B):"color"===E&&TB(B),B}})}}]),Z){for(var h=[],m=0;m<Z.length;m++)h.push($.createArrayIndexColumn(Z,m,j,E));K.addColumns(h)}}}),B.push(K),K},a.prototype.addTextArea=function(B,a,j){var E=this,$=new ht.widget.TextArea,H=$.getElement();return j?(H.onblur=function(){E.setValue(j,H.value)},H.forceOnblur=H.onblur):$.setEditable(!1),this.updateHandlers.push(function(){if(!B.hidden){var j=E.getValue(a);null==j&&(j=""),H.value!==j&&(H.value=j)}}),B.push($),$},a.prototype.addInput=function(B,a,j,$,H){var K=this,C=new ht.widget.TextField;"number"!==$&&"int"!==$||C.setType("number");var Z=C.getElement();return j?!function(){var B=K.createHandleChange(Z,j,$);C.handleChange=B,H?(Z.onkeyup=B,Z.onchange=B):(Z.onblur=B,Z.forceOnblur=Z.onblur,Z.onkeydown=function(a){c(a)&&B()})}():C.setEditable(!1),this.updateHandlers.push(function(){if(!B.hidden){var j=K.getValue(a);"pattern"===$?j=j?"["+j.join()+"]":"":"number"===$?j=E(parseFloat(j||0)):"int"===$?j=parseInt(j||0):null==j&&(j=""),Z.value!==j&&(kB(j)&&j.length>1e3&&j.startsWith("data:image")&&(j=j.substr(0,10)+"[...]"),Z.value=j)}}),B.push(C),C},a.prototype.addColor=function(B,a,j){var E=this,$=new ht.widget.ColorPicker;return j?($.setInstant(!0),$.onValueChanged=function(){E.setValue(j,$.getValue())},$.addViewListener(function(B){"open"===B.kind?E.beginTransaction():"close"===B.kind&&E.endTransaction()})):$.setDisabled(!0),this.updateHandlers.push(function(){if(!B.hidden){var j=E.getValue(a);void 0===j&&(j=null),$.getValue()!=j&&$.setValue(j)}}),B.push($),$},a.prototype.addImage=function(B,a,j){var E=this,$=new ht.widget.Image;$.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!B.hidden||B.forceToUpdate){var j=E.getValue(a);$.rawIcon=j,j=ht.Default.getImage(j),j&&j.snapshotURL?$.setIcon(j.snapshotURL):$.setIcon($.rawIcon)}});var H=$.getView();H.style.cursor="pointer";var K=function(B){B.preventDefault(),F(B)?E.editor.open($.rawIcon):E.editor.selectFileNode($.rawIcon)};return H.addEventListener("mousedown",K,!1),H.addEventListener("touchstart",K,!1),B.push($),$},a.prototype.addCheckBox=function(B,a,j){var E=this,$=new ht.widget.CheckBox;return j?$.onValueChanged=function(){E.setValue(j,$.getValue())}:$.setDisabled(!0),this.updateHandlers.push(function(){if(!B.hidden){var j=!!E.getValue(a);$.getValue()!==j&&$.setValue(j)}}),B.push($),$},a.prototype.addFunction=function(B,a,j,E,$){var K=this,C=function(){var B=H("editor.function")+" "+(E||""),C=function(B){K.setValue(j,B)};K.editor.functionView.open(K.getValue(a),C,B,$)},h=E||H("editor.function"),m=QB(h,null,null,C);return B.push(m),this.updateHandlers.push(function(){if(!B.hidden){var j=K.getValue(a);m.setLabel(Z(j)),m.setLabelColor(j?Ra.config.color_select:ht.Default.labelColor)}}),m},a.prototype.addObject=function(B,a,j,E){var $=this,K=function(){var B=H("editor.object")+" "+(E||""),K=function(B){$.setValue(j,B)};$.editor.objectView.open($.getValue(a),K,B)},C=QB("",null,null,K);return B.push(C),this.updateHandlers.push(function(){if(!B.hidden){var j=$.getValue(a);C.setLabel(v(j)),C.setLabelColor(void 0!==j?Ra.config.color_select:ht.Default.labelColor)}}),C},a.prototype.addComboBox=function(B,a,j,E,$,H){var K=this,C=new ht.widget.ComboBox;return C.setValues(E),C.setLabels($),C.setIcons(H),C.setDisabled(!j),j&&(C.onValueChanged=function(){K.setValue(j,C.getValue())}),this.updateHandlers.push(function(){if(!B.hidden){var j=K.getValue(a);C.getValue()!==j&&C.setValue(j)}}),H&&H[0].width&&C.setIndent(H[0].width+4),B.push(C),C},a.prototype.addButton=function(B,a,j,E,$,H){var K=this,C=function(){K.global||H?$():K.eachSelection($)},Z=QB(a,j,E,C);return B.push(Z),Z},a.prototype.addFuncRow=function(B,a,j,E){var $=this,H=E?this.getRowHeight()*E:null,K=void 0;if(!Ra.config.dataBindingsForSymbol.filter||Ra.config.dataBindingsForSymbol.filter(j||a,this)){var C=function(){$.dataModel&&$.editor.funcView.toggle(K,a,j,$)},Z=void 0;Z=Ra.config.dataBindingsForSymbol.getToolTip?Ra.config.dataBindingsForSymbol.getToolTip(j||a,this):(j||a)+": { func: ... }",K=this.addButton(B,null,Z,null,C,!0),this.updateHandlers.push(function(){if(!B.hidden){var j=!1;$.global?$.dataModel&&(j="clip"===a?zB($.dataModel.a(a)):!!$.dataModel.a(a+"_func")):$.data&&(j=!!$.data.a(a)),K.setIcon(j?"editor.bind.state":"editor.unbind.state")}})}var h=B.length,m=void 0;return 2===h?m=this.addRow(B,[Ra.config.indent,.1],H):3===h?m=this.addRow(B,[Ra.config.indent,.1,20],H):4===h?m=this.addRow(B,[Ra.config.indent,.1,20,20],H):5===h?m=this.addRow(B,[Ra.config.indent,.1,20,20,20],H):6===h&&(m=this.addRow(B,[Ra.config.indent,.1,20,20,20,20],H)),m.keys={name:j||a,displayName:this.toDisplayName(B)},!this.addingCustomProperties&&mj[this.type][j||a]&&this.removeRows([m]),m},a.prototype.addNameRow=function(B,a,j,E){var $=E?this.getRowHeight()*E:null,H=B.length,K=void 0;return 2===H?K=this.addRow(B,[Ra.config.indent,.1],$):3===H?K=this.addRow(B,[Ra.config.indent,.1,20],$):4===H?K=this.addRow(B,[Ra.config.indent,.1,20,20],$):5===H&&(K=this.addRow(B,[Ra.config.indent,.1,20,20,20],$)),K.keys={name:a,displayName:this.toDisplayName(B),accessType:j},a=(j?j+":":"")+a,!this.addingCustomProperties&&mj[this.type][a]&&this.removeRows([K]),K},a.prototype.$78$=function(){var B=this;this.addTitle("TitleGridsGuides");var a=[];this.addLabelInput(a,H("editor.gridblocksize"),function(B){return B.a("gridBlockSize")},function(B,a){a>0&&B.a("gridBlockSize",a)},"int",1),this.addNameRow(a,"gridBlockSize","a"),a=[],this.addLabelInput(a,H("editor.gridthicklinesevery"),function(B){return B.a("gridThickLinesEvery")},function(B,a){a>0&&B.a("gridThickLinesEvery",a)},"int",1),this.addNameRow(a,"gridThickLinesEvery","a"),a=[],this.addLabelColor(a,H("editor.gridthickcolor"),function(B){return B.a("gridThickColor")},function(B,a){B.a("gridThickColor",a)}),this.addNameRow(a,"gridThickColor","a"),a=[],this.addLabelColor(a,H("editor.gridlightcolor"),function(B){return B.a("gridLightColor")},function(B,a){B.a("gridLightColor",a)}),this.addNameRow(a,"gridLightColor","a"),a=[],this.addLabelInput(a,H("editor.gridangle"),function(B){return 180/Math.PI*B.a("gridAngle")},function(B,a){B.a("gridAngle",a*Math.PI/180)},"number",1),this.addNameRow(a,"gridAngle","a"),a=[],this.addLabelInput(a,H("editor.gridrotation"),function(B){return 180/Math.PI*B.a("gridRotation")},function(B,a){B.a("gridRotation",a*Math.PI/180)},"number",1),this.addNameRow(a,"gridRotation","a"),a=[],this.addLabelInput(a,H("editor.gridzoomthreshold"),function(B){return B.a("gridZoomThreshold")},function(B,a){a>0&&B.a("gridZoomThreshold",a)},"number",.01),this.addNameRow(a,"gridZoomThreshold","a"),a=[null],this.addButton(a,H("editor.skewgrid"),null,null,function(){B.editor.currentView&&B.editor.currentView.skewGrid&&B.editor.currentView.skewGrid()}),this.addButton(a,H("editor.reset"),null,null,function(){B.editor.currentView&&B.editor.currentView.resetGrid&&B.editor.currentView.resetGrid()}),this.addRow(a,[Ra.config.indent,.1,.1],this.getRowHeight())},a.prototype.$27$=function(){var B=this;this.addTitle("TitleEditingPoint");var a={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3};this.editingPointButtons=[];var j=function(j,E){var $=H("editor.editingpoint."+E.toLowerCase()),K="editor.point."+E.toLowerCase(),C=QB($,null,K,function(){B.editor.editInteractor.getSubModule("Curve").setCurrentSelectionStatus(C.statusValue)});C.setOrientation("v"),C.setTogglable(!0),C.setGroupId("editingPoint"),C.statusValue=a[E],B.editingPointButtons.push(C),j.push(C)},E=[];j(E,"Straight"),j(E,"Mirrored"),this.addRow(E,[.1,.1],60),E=[],j(E,"Disconnected"),j(E,"Asymmetric"),this.addRow(E,[.1,.1],60)},a.prototype.addCustomProperties=function(){var B=this,a=Ra.config.customProperties[this.type];a&&a.length&&(this.addTitle("TitleCustom"),a.forEach(function(a){B.addCustomProperty(a)}))},a.prototype.fixAccessType=function(B){return B=B||"a","symbol"===this.type?B="a":"comp"===this.type&&(B="s"),B},a.prototype.addEventProperties=function(){var B=this,a=[],j=function(){var a=B.global?B.dataModel:B.data;a&&(a=B.global?[B.dataModel]:B.dataModel.sm().getSelection().toArray()),B.editor.eventView.open(a,B.type)};this.addLabel(a,H("editor.events"));var E=this.addButton(a,H("editor.eventhandlers"),null,null,j,!0);"data"===this.type?(this.addCheckBox(a,function(B){return!!B&&B.s("interactive")},function(B,a){B&&B.s("interactive",a)}),this.addRow(a,[Ra.config.indent,.1,20]).keys={name:"eventHandlers"}):this.addRow(a,[Ra.config.indent,.1]).keys={name:"eventHandlers"},this.updateHandlers.push(function(){if(!a.hidden){var j=!1,$=B.global?B.dataModel:B.data;Na.forEach(function(a){j||(j="data"===B.type?$.s(a):$.a(a))}),E.setLabelColor(j?Ra.config.color_select:ht.Default.labelColor)}})},a.prototype.addCustomProperty=function(B){var a=B.name,j=B.valueType,E=B.editable!==!1,$=B.defaultValue,K=this.fixAccessType(B.accessType),C=B.dataBinding,Z=B.property;if(j=Ra.config.valueTypes[j],!j)return!1;this.addingCustomProperties=!0;var h=[],m=H(a)||Z,k=J(K,Z),s=O(K,Z),z=function(B){var a=k(B);return void 0===a&&(a=$),a},o=E?s:null,c=B.extraInfo,U=void 0,I=void 0,X=void 0;c&&c.enum&&(U=c.enum.values,I=c.enum.labels,X=c.enum.icons),U?this.addLabelComboBox(h,m,z,o,U,I,X):"int"===j.type||"number"===j.type?j.angle?this.addLabelRotation(h,m,z,o,j.min,j.max,j.step):this.addLabelRange(h,m,z,o,j.min,j.max,j.step,j.type):"color"===j.type?this.addLabelColor(h,m,z,o):"boolean"===j.type?this.addLabelCheckBox(h,m,z,o):"enum"===j.type?this.addLabelComboBox(h,m,z,o,j.values,j.labels,j.icons):"image"===j.type?this.addLabelImage(h,m,z,o):"url"===j.type?this.addLabelURL(h,m,z,o):"multiline"===j.type?this.addLabelMultiline(h,m,z,o):"colorArray"===j.type?this.addLabelArray(h,m,z,o,"color"):"numberArray"===j.type?this.addLabelArray(h,m,z,o,"number"):"stringArray"===j.type?this.addLabelArray(h,m,z,o,"string"):"objectArray"===j.type?this.addLabelArray(h,m,z,o,"object"):"function"===j.type?this.addLabelFunction(h,m,z,o,Z):"object"===j.type?this.addLabelObject(h,m,z,o,Z):"font"===j.type?this.addLabelFont(h,m,z,o):"custom"===j.type?j.buildUI(this,h,m,z,o):this.addLabelInput(h,m,z,o);var F=void 0;"display"!==this.type&&C?"data"===this.type?F=this.addDBRow(h,K,Z,null,j.rows):"symbol"!==this.type&&"comp"!==this.type||(F=this.addFuncRow(h,Z,null,j.rows)):F=this.addNameRow(h,K+":"+Z,K,j.rows),F&&c&&(F.visible=c.visible,F.onPropertyChanged=c.onPropertyChanged),this.addingCustomProperties=!1},a}(ya);Ra.Inspector=YE;var RE=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E,"display",!0))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.$78$(),this.$79$()},a.prototype.isTitleVisible=function(a){return!!this.inspectorFilter.isDisplayTitleVisible(this.editor,a.title)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){return!!this.inspectorFilter.isDisplayPropertyVisible(this.editor,a.keys&&a.keys.name)&&B.prototype.isPropertyVisible.call(this,a)},a.prototype.$12$=function(){this.addTitle("TitleBasic");var B=[];this.addLabelInput(B,H("editor.previewurl"),function(B){return B.a("previewURL")},function(B,a){B.a("previewURL",a)}),this.addNameRow(B,"previewURL","a"),B=[],this.addLabelImage(B,H("editor.snapshoturl"),function(B){return B.a("snapshotURL")},function(B,a){B.a("snapshotURL",a)}),this.addNameRow(B,"snapshotURL","a"),B=[],this.addLabelColor(B,H("editor.background"),function(B){return B.getBackground()},function(B,a){B.setBackground(a)}),this.addNameRow(B,"background","p"),B=[],this.addLabelInput(B,H("editor.width"),function(B){return B.a("width")},function(B,a){B.a("width",a)},"number",1),this.addNameRow(B,"width","a"),B=[],this.addLabelInput(B,H("editor.height"),function(B){return B.a("height")},function(B,a){B.a("height",a)},"number",1),this.addNameRow(B,"height","a"),B=[],this.addLabelInput(B,H("editor.datacount"),function(B){return B.size()}),this.addNameRow(B,"count"),B=[];var a=["json","dm","gv"];this.addLabelFunction(B,H("editor.onpredeserialize"),function(B){return B.a("onPreDeserialize")},function(B,a){B.a("onPreDeserialize",a)},"onPreDeserialize",a),this.addNameRow(B,"onPreDeserialize","a"),B=[],a=["json","dm","gv","datas"],this.addLabelFunction(B,H("editor.onpostdeserialize"),function(B){return B.a("onPostDeserialize")},function(B,a){B.a("onPostDeserialize",a)},"onPostDeserialize",a),this.addNameRow(B,"onPostDeserialize","a"),B=[],this.addLabelComboBox(B,H("editor.connectactiontype"),function(B){return B.a("connectActionType")},function(B,a){B.a("connectActionType",a)},Ra.consts.displayConnectActionTypes,Ra.consts.displayConnectActionTypeLabels),this.addNameRow(B,"connectActionType","a"),B=[],this.addLabelCheckBox(B,H("editor.rotateasclock"),function(B){return B.a("rotateAsClock")},function(B,a){B.a("rotateAsClock",a)}),this.addNameRow(B,"rotateAsClock","a"),B=[],this.addLabelCheckBox(B,H("editor.hierarchicalrendering"),function(B){return B.isHierarchicalRendering()},function(B,a){B.setHierarchicalRendering(a)}),this.addNameRow(B,"hierarchicalRendering","p"),B=[],this.addLabelCheckBox(B,H("editor.zoomable"),function(B){return null==B.a("zoomable")||B.a("zoomable")},function(B,a){B.a("zoomable",a)}),this.addNameRow(B,"zoomable","a"),B=[],this.addLabelCheckBox(B,H("editor.pannable"),function(B){return null==B.a("pannable")||B.a("pannable")},function(B,a){B.a("pannable",a)}),this.addNameRow(B,"pannable","a"),B=[],this.addLabelCheckBox(B,H("editor.rectSelectable"),function(B){return null==B.a("rectSelectable")||B.a("rectSelectable")},function(B,a){B.a("rectSelectable",a)}),this.addNameRow(B,"rectSelectable","a"),B=[],this.addLabelCheckBox(B,H("editor.fitContent"),function(B){return null!=B.a("fitContent")&&B.a("fitContent")},function(B,a){B.a("fitContent",a)}),this.addNameRow(B,"fitContent","a")},a.prototype.$79$=function(){this.addTitle("TitleLayout");var B=[];this.$80$(B,"circular"),this.$80$(B,"symmetric"),this.$80$(B,"hierarchical"),this.$80$(B,"towardnorth"),this.$80$(B,"towardsouth"),this.$80$(B,"towardeast"),this.$80$(B,"towardwest"),this.addRow(B,[.1,.1,.1,.1,.1,.1,.1]).keys={name:"layouts"}},a.prototype.$80$=function(B,a){var j=this,E=function(){j.dataModel&&j.dataModel.layout(a)};return this.addButton(B,null,H("editor.layout."+a),"editor.layout."+a+".state",E);
},a}(YE),NE={visible:"Boolean",selectable:"Boolean",movable:"Boolean",editable:"Boolean",opacity:"Opacity",clipPercentage:"Percentage",clipDirection:"ClipDirection",shadow:"Boolean",shadowColor:"Color",shadowBlur:"PositiveNumber",shadowOffsetX:"PositiveNumber",shadowOffsetY:"PositiveNumber",type:"String",background:"Color",repeatImage:"String",borderWidth:"PositiveNumber",borderColor:"Color",border3d:"Boolean",border3dColor:"Color",border3dAccuracy:"PositiveNumber",borderCap:"CapStyle",borderJoin:"JoinStyle",gradient:"Gradient",gradientColor:"Color",dash:"Boolean",dashOffset:"Number",dashColor:"Color",dashWidth:"PositiveNumber",dash3d:"Boolean",dash3dColor:"Color",dash3dAccuracy:"PositiveNumber",borderWidthAbsolute:"Boolean",fillClipPercentage:"Percentage",fillClipDirection:"ClipDirection",depth:"Number",cornerRadius:"PositiveNumber",polygonSide:"Int",arcFrom:"Number",arcTo:"Number",arcClose:"Boolean",arcOval:"Boolean",displayName:"String",scaleX:"Number",scaleY:"Number",anchorX:"Number",anchorY:"Number",rotation:"Number",color:"Color",width:"PositiveNumber",label:"Boolean",labelColor:"Color",labelFont:"String",minValue:"Number",maxValue:"Number",linePoint:"Boolean",lineWidth:"PositiveNumber",line3d:"Boolean",text:"String",align:"Align",vAlign:"VAlign",closePath:"Boolean",fillRule:"FillRule",name:"String",stretch:"Stretch",values:"NumberArray",colors:"ColorArray",hollow:"Boolean",layoutV:"String",layoutH:"String"},ME=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E,"symbol",!0))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addDataBindingProperties(),this.$78$()},a.prototype.isTitleVisible=function(a){return!!this.inspectorFilter.isSymbolTitleVisible(this.editor,a.title)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){return!!this.inspectorFilter.isSymbolPropertyVisible(this.editor,a.keys&&a.keys.name)&&B.prototype.isPropertyVisible.call(this,a)},a.prototype.$12$=function(){var B=this,a=void 0;this.addTitle("TitleBasic"),this.addEventProperties(),this.addHTMLProperties(),a=[],this.addLabelInput(a,H("editor.previewurl"),function(B){return B.a("previewURL")},function(B,a){B.a("previewURL",a)}),this.addRow(a,[Ra.config.indent,.1]).keys={name:"previewURL"},a=[],this.addLabelImage(a,H("editor.snapshoturl"),function(B){return B.a("snapshotURL")},function(B,a){B.a("snapshotURL",a)}),this.addRow(a,[Ra.config.indent,.1,20]).keys={name:"snapshotURL"},a=[],this.addLabelColor(a,H("editor.background"),function(B){return B.getBackground()},function(B,a){B.setBackground(a)}),this.addRow(a,[Ra.config.indent,.1]).keys={name:"background"},a=[],this.addLabelInput(a,H("editor.width"),function(B){return B.a("width")},function(B,a){B.a("width",a)},"number",1),this.addFuncRow(a,"width"),a=[],this.addLabelInput(a,H("editor.height"),function(B){return B.a("height")},function(B,a){B.a("height",a)},"number",1),this.addFuncRow(a,"height"),a=[],this.addLabelInput(a,H("editor.boundextend"),function(B){return B.a("boundExtend")},function(B,a){B.a("boundExtend",a)},"number",1),this.addFuncRow(a,"boundExtend"),a=[],this.addLabelComboBox(a,H("editor.connectactiontype"),function(B){return B.a("connectActionType")},function(B,a){B.a("connectActionType",a)},Ra.consts.symbolConnectActionTypes,Ra.consts.symbolConnectActionTypeLabels),this.addRow(a,[Ra.config.indent,.1]).keys={name:"connectActionType"},a=[],this.addLabelCheckBox(a,H("editor.rotateasclock"),function(B){return B.a("rotateAsClock")},function(B,a){B.a("rotateAsClock",a)}),this.addFuncRow(a,"rotateAsClock"),a=[],this.addLabelCheckBox(a,H("editor.fitsize"),function(B){return B.a("fitSize")},function(B,a){B.a("fitSize",a)}),this.addFuncRow(a,"fitSize"),a=[],this.addLabelCheckBox(a,H("editor.scrollable"),function(B){return B.a("scrollable")},function(B,a){B.a("scrollable",a)}),this.addFuncRow(a,"scrollable"),a=[],this.addLabelCheckBox(a,H("editor.interactive"),function(B){return B.a("interactive")},function(B,a){B.a("interactive",a)}),this.addFuncRow(a,"interactive"),a=[],this.addLabelCheckBox(a,H("editor.disableselectedborder"),function(B){return B.a("disableSelectedBorder")},function(B,a){B.a("disableSelectedBorder",a)}),this.addFuncRow(a,"disableSelectedBorder"),a=[],this.addLabelCheckBox(a,H("editor.pixelperfect"),function(B){return B.a("pixelPerfect")},function(B,a){B.a("pixelPerfect",a)}),this.addFuncRow(a,"pixelPerfect"),a=[],this.addLabelCheckBox(a,H("editor.visible"),function(B){return B.a("visible")},function(B,a){B.a("visible",a)}),this.addFuncRow(a,"visible"),a=[],this.addLabelCheckBox(a,H("editor.clip"),function(B){return B.a("clip")},function(B,a){B.a("clip",a)}).onValueChanged=function(a,j){B.dataModel&&(j?B.dataModel.a("clip")||B.dataModel.a("clip",!0):B.dataModel.a("clip",!1))},this.addFuncRow(a,"clip"),a=[],this.addLabelCheckBox(a,H("editor.cacherule"),function(B){return B.a("cacheRule")},function(B,a){B.a("cacheRule",a)}),this.addFuncRow(a,"cacheRule"),a=[],this.addLabelComboBox(a,H("editor.blendmode"),function(B){return B.a("blendMode")},function(B,a){B.a("blendMode",a)},["multiply","override","override_rgb","override_a"],[H("editor.blendmode.multiply"),H("editor.blendmode.override"),H("editor.blendmode.override_rgb"),H("editor.blendmode.override_a")]),this.addFuncRow(a,"blendMode"),this.addAttachPointsProperties(),a=[],this.addLabelInput(a,H("editor.compcount"),function(B){return B.size()}),this.addNameRow(a,"count")},a.prototype.addHTMLProperties=function(){var B=this,a=[],j=function(){B.editor.functionView.open(B.dataModel.a("renderHTML"),function(a){B.dataModel.a("renderHTML",a)},H("editor.renderhtml"),["data","gv","cache"])};this.addLabel(a,H("editor.html"));var E=this.addButton(a,H("editor.renderhtml"),null,null,j,!0);this.addRow(a,[Ra.config.indent,.1]).keys={name:"renderHTML"},this.updateHandlers.push(function(){if(!a.hidden){var j=B.dataModel.a("renderHTML");E.setLabelColor(j?Ra.config.color_select:ht.Default.labelColor)}})},a.prototype.addDataBindingProperties=function(){this.addTitle("TitleDataBinding"),this.$81$(),this.$82$()},a.prototype.$74$=function(B,a,j,E){var $=this;return{name:B,tag:B,width:j,displayName:a,align:"center",enum:E,editable:!0,getValue:function(a){return a.dataBinding[B]},setValue:function(a,j,E,H){a.dataBinding[B]!==E&&$.modifyDataBindings(function(){a.dataBinding[B]=E})}}},a.prototype.$75$=function(){var B=this,a=this.tableView.getColumnModel().getDataByTag("defaultValue");a.getEnumValues=function(B){var a=B?Ra.config.valueTypes[B.dataBinding.valueType]:null;return a&&"enum"===a.type?a.values:null},a.getEnumLabels=function(B){var a=B?Ra.config.valueTypes[B.dataBinding.valueType]:null;return a&&"enum"===a.type?a.labels:null},a.getEnumIcons=function(B){var a=B?Ra.config.valueTypes[B.dataBinding.valueType]:null;return a&&"enum"===a.type?a.icons:null},a.getEnumDropDownWidth=function(B){var a=B?Ra.config.valueTypes[B.dataBinding.valueType]:null;return a&&"enum"===a.type?a.dropDownWidth:null},a.getValueType=function(B){var a=B?Ra.config.valueTypes[B.dataBinding.valueType]:null;return a?a.type:null},a.isCellEditable=function(a,j,E,$){var K=Ra.config.valueTypes[a.dataBinding.valueType],C=K?K.type:null;if("function"===C){var Z=H("editor.function")+" "+(a.dataBinding.attr||"");return B.editor.functionView.open(a.dataBinding.defaultValue,function(j){B.modifyDataBindings(function(){a.dataBinding.defaultValue=j,B.tableView.redraw()})},Z),!1}if("multiline"===C)return B.editor.textView.open(a.dataBinding.defaultValue,function(j){B.modifyDataBindings(function(){a.dataBinding.defaultValue=j,B.tableView.redraw()})},a.dataBinding.attr||"&nbsp;"),!1;if("font"===C)return B.editor.fontView.open(a.dataBinding.defaultValue,function(j){B.modifyDataBindings(function(){a.dataBinding.defaultValue=j,B.tableView.redraw()})},a.dataBinding.attr||"&nbsp;"),!1;if("object"===C||"stringArray"===C||"custom"===C||"objectArray"===C||"numberArray"===C||"colorArray"===C){var h=H("editor.object")+" "+(a.dataBinding.attr||"");return B.editor.objectView.open(a.dataBinding.defaultValue,function(j){B.modifyDataBindings(function(){a.dataBinding.defaultValue=j,B.tableView.redraw()})},h),!1}return!0}},a.prototype.initExtraInfoColumn=function(){var B=this,a=this.tableView.getColumnModel().getDataByTag("extraInfo");a.isCellEditable=function(a,j,E,$){var K=H("editor.object")+" "+(a.dataBinding.attr||"");return B.editor.objectView.open(a.dataBinding.extraInfo,function(j){B.modifyDataBindings(function(){a.dataBinding.extraInfo=j,B.tableView.redraw()})},K),!1}},a.prototype.$81$=function(){var B=this,a=this.tableModel=new ht.DataModel,j=new ej(a),E=this.tableView=j.getTableView();E.setEditable(!0),j.getView().style.border=Ra.config.color_line+" solid 1px",j.addColumns([this.$74$("attr","Attr",90),this.$74$("valueType",H("editor.valuetype"),80,{values:Ra.consts.valueTypes,labels:Ra.consts.valueTypeLabels}),this.$74$("defaultValue",H("editor.defaultvalue"),90),this.$74$("name",H("editor.name"),80),this.$74$("group",H("editor.group"),80),this.$74$("description",H("editor.description"),120),this.$74$("extraInfo",H("editor.extrainfo"),100)]),this.$75$(),this.initExtraInfoColumn();var $=[j];this.addRow($,[.1],"120+0.1");var C=null;this.updateHandlers.push(function(){if(!$.hidden&&B.dataModel&&(!C||B.dataModel.dataBindings!==C)){C=B.dataModel.dataBindings;var j=a.sm().toSelection().toArray();a.clear(),B.dataModel.dataBindings&&B.dataModel.dataBindings.forEach(function(B){var E=new ht.Data;E.dataBinding=B,a.add(E);for(var $=0;$<j.length;$++)if(PB(j[$].dataBinding,B)){K(j,j[$]),a.sm().as(E);break}})}})},a.prototype.modifyDataBindings=function(B){var a=j(this.dataModel.dataBindings);B();var E=j(this.dataModel.dataBindings);this.dataModel.dataBindings=E,this.dataModel.fp("f:dataBindings",a,E)},a.prototype.$83$=function(B,a,j,E,$,H){var K=new ht.Data;K.dataBinding={attr:B||"",valueType:a||"String",defaultValue:j,name:E,description:$,extraInfo:H};var C={symbolView:this.editor.symbolView,dataBinding:K.dataBinding};if(this.editor.fireEvent("dataBindingAdding",C),C.preventDefault)return!1;K.dataBinding=C.dataBinding,this.dataModel.dataBindings||(this.dataModel.dataBindings=[]);var Z=this.tableModel.sm().ld();if(Z){var h=this.tableModel.getRoots().indexOf(Z);this.dataModel.dataBindings.splice(h+1,0,K.dataBinding)}else this.dataModel.dataBindings.push(K.dataBinding)},a.prototype.add=function(){var B=this;this.modifyDataBindings(function(){B.$83$()})},a.prototype.delete=function(){var B=this;this.tableView.sm().ld()&&this.modifyDataBindings(function(){B.tableView.sm().each(function(a){K(B.dataModel.dataBindings,a.dataBinding)})})},a.prototype.reorder=function(){var B=this;this.dataModel.dataBindings=[],this.tableModel.getRoots().each(function(a){B.dataModel.dataBindings.push(a.dataBinding)})},a.prototype.import=function(){var B=this;this.modifyDataBindings(function(){Ra.config.clearDataBindingsBeforeImporting&&(B.dataModel.dataBindings=[]);var a=B.editor.symbolView.content,j={};a.dataBindings&&a.dataBindings.forEach(function(B){j[B.attr]=!0}),a.comps.forEach(function(a){for(var E in a){var $=a[E];if(sB($))if(kB($.func)&&Kj.test($.func)){var H=$.func.slice(5);if(!j[H]){var K=void 0,C=void 0,Z=void 0,h=void 0,m=void 0;if(HB(a.type)){var J=ht.Default.getCompType(a.type);if(J){var O=J.properties[E];O?(K=O.valueType,Z=O.name,h=O.description,m=O.extraInfo):K=NE[E]}}else K=NE[E];B.$83$(H,K,C,Z,h,m),j[H]=!0}}else{var k={};aa($,k);for(var s in k)j[s]||B.$83$(s,NE[k[s]])}}})})},a.prototype.$82$=function(){var B=this,a=Ra.config.importDataBindingsButtonVisible?{button:{icon:"editor.import",toolTip:H("editor.import"),onClicked:function(){B.import()}}}:null;this.addRow([{button:{icon:"editor.add",toolTip:H("editor.add"),onClicked:function(){B.add()}}},{button:{icon:"editor.delete",toolTip:H("editor.delete"),onClicked:function(){B.delete()}}},a,null,{button:{icon:"editor.top",toolTip:H("editor.bringtofront"),onClicked:function(){B.tableView.sm().size()&&B.modifyDataBindings(function(){B.tableModel.moveSelectionToTop(),B.reorder()})}}},{button:{icon:"editor.up",toolTip:H("editor.bringforward"),onClicked:function(){B.tableView.sm().size()&&B.modifyDataBindings(function(){B.tableModel.moveSelectionUp(),B.reorder()})}}},{button:{icon:"editor.down",toolTip:H("editor.sendbackward"),onClicked:function(){B.tableView.sm().size()&&B.modifyDataBindings(function(){B.tableModel.moveSelectionDown(),B.reorder()})}}},{button:{icon:"editor.bottom",toolTip:H("editor.sendtoback"),onClicked:function(){B.tableView.sm().size()&&B.modifyDataBindings(function(){B.tableModel.moveSelectionToBottom(),B.reorder()})}}}],[20,20,20,.1,20,20,20,20])},a.prototype.addAttachPointsProperties=function(){var B=this,a=[],j=function(){B.editor.attachPointsView.show(B.editor.symbolView.content)};this.addLabel(a,H("editor.attach.points"));var E=this.addButton(a,H("editor.attach.edit"),null,null,j,!0);this.addFuncRow(a,"attachPoints"),this.updateHandlers.push(function(){if(!a.hidden){var j=B.dataModel.a("attachPoints");E.setLabelColor(j&&j.length?Ra.config.color_select:ht.Default.labelColor)}}),a=[],this.addLabelComboBox(a,H("editor.attach.style"),function(B){return B.a("attachStyle")||"close"},function(B,a){B.a("attachStyle",a)},["close","strict"],[H("editor.attach.close"),H("editor.attach.strict")]),this.addFuncRow(a,"attachStyle")},a}(YE),QE=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E,"data"))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$28$()},a.prototype.isTitleVisible=function(a){return!!this.inspectorFilter.isDataTitleVisible(this.editor,this.data,a.title)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){return!!this.inspectorFilter.isDataPropertyVisible(this.editor,this.data,a.keys&&a.keys.accessType,a.keys&&a.keys.name)&&B.prototype.isPropertyVisible.call(this,a)},a.prototype.addDBRow=function(B,a,j,E,$,K){var C=this,Z=$?this.getRowHeight()*$:null,h=B.length,m=void 0;return!Ra.config.dataBindings.onButtonClicked||Ra.config.dataBindings.filter&&!Ra.config.dataBindings.filter(a,j,K,this)?2===h?m=this.addRow(B,[Ra.config.indent,.1],Z,E):3===h?m=this.addRow(B,[Ra.config.indent,.1,20],Z,E):4===h?m=this.addRow(B,[Ra.config.indent,.1,20,20],Z,E):5===h&&(m=this.addRow(B,[Ra.config.indent,.1,20,20,20],Z,E)):!function(){var $=function(){Ra.config.dataBindings.onButtonClicked(C.data,a,j)},J=void 0;Ra.config.dataBindings.getToolTip?J=Ra.config.dataBindings.getToolTip(a,j,K,C):(J=a+":"+j,K&&H(K.description)&&(J+="<br>"+H(K.description)));var O=C.addButton(B,null,J,null,$,!0);C.updateHandlers.push(function(){if(!B.hidden&&C.data){var E=Ra.config.isDataBound(C.data,a,j);O.setIcon(E?"editor.bind.state":"editor.unbind.state")}}),2===h?m=C.addRow(B,[Ra.config.indent,.1,20],Z,E):3===h?m=C.addRow(B,[Ra.config.indent,.1,20,20],Z,E):4===h?m=C.addRow(B,[Ra.config.indent,.1,20,20,20],Z,E):5===h&&(m=C.addRow(B,[Ra.config.indent,.1,20,20,20,20],Z,E))}(),m.keys={name:j,displayName:this.toDisplayName(B),accessType:a},!this.addingCustomProperties&&mj[this.type][a+":"+j]&&this.removeRows([m]),m},a.prototype.addDBInput=function(B,a,j,E,$){var H=[];return this.addLabelInput(H,a,J(B,j),O(B,j),E,$),this.addDBRow(H,B,j)},a.prototype.addDBLabel=function(B,a,j){var E=[];return this.addLabelLabel(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBCheckBox=function(B,a,j){var E=[];return this.addLabelCheckBox(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBImage=function(B,a,j){var E=[];return this.addLabelImage(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBColor=function(B,a,j){var E=[];return this.addLabelColor(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBFont=function(B,a,j){var E=[];return this.addLabelFont(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBPattern=function(B,a,j){var E=[];return this.addLabelInput(E,a,J(B,j),O(B,j),"pattern"),this.addDBRow(E,B,j)},a.prototype.addDBRotation=function(B,a,j){var E=[];return this.addLabelRotation(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBAlign=function(B,a,j){var E=[];return this.addLabelAlign(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBVAlign=function(B,a,j){var E=[];return this.addLabelVAlign(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBOrientation=function(B,a,j){var E=[];return this.addOrientation(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBComboBox=function(B,a,j,E,$,H){var K=[];return this.addLabelComboBox(K,a,J(B,j),O(B,j),E,$,H),this.addDBRow(K,B,j)},a.prototype.addDBStretch=function(B,a,j){var E=[];return this.addLabelStretch(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.addDBZeroToOne=function(B,a,j){var E=[];return this.addLabelRange(E,a,J(B,j),O(B,j),0,1,.01,"number"),this.addDBRow(E,B,j)},a.prototype.addDBPosition=function(B,a,j){var E=[];return this.addLabelRange(E,a,J(B,j),O(B,j),1,55,1,"int"),this.addDBRow(E,B,j)},a.prototype.addDBRange=function(B,a,j,E,$,H,K){var C=[];return this.addLabelRange(C,a,J(B,j),O(B,j),E,$,H,K),this.addDBRow(C,B,j)},a.prototype.addDBGradient=function(B,a,j,E){var $=[];return this.addLabelGradient($,B,a,j,E),this.addDBRow($,"s",a)},a.prototype.addDBBodyColorProperty=function(){this.addDBColor("s",H("editor.bodycolor"),"body.color")},a.prototype.addDBOpacityProperty=function(){this.addDBZeroToOne("s",H("editor.opacity"),"opacity")},a.prototype.$84$=function(){var B=this,a=[];this.addLabel(a,H("editor.icons"));var j=function(){B.data&&B.editor.iconsView.toggle(E,B.data)},E=this.addButton(a,"Icons","s:icons",null,j,!0);return this.updateHandlers.push(function(){a.hidden||E.setLabelColor(B.data.s("icons")?Ra.config.color_select:ht.Default.labelColor)}),this.addDBRow(a,"s","icons")},a.prototype.addDBData=function(B,a,j,E){var $=this;E=E||O(B,j);var H=J(B,j),K=[],C=this.addLabelInput(K,a,function(B){var a=H(B);return a?a.toLabel()||a.getClassName():""}),Z=C.getElement();C.isDroppable=function(B,a){return a.view.draggingData&&$.dataModel===a.view.draggingData.getDataModel()},C.handleCrossDrag=function(B,a,j){"enter"===a?Z.style.border="solid "+Ra.config.color_select_dark+" 2px":"exit"===a||"cancel"===a?Z.style.border="":"over"===a||"drop"===a&&(Z.style.border="",$.setValue(E,j.view.draggingData),C.setFocus())},Z.onkeydown=function(B){I(B)&&$.setValue(E,null)};var h=new ht.widget.Image;return h.drawImage=function(B,a,j,E,H,K){var C=h.data,Z=$.editor.list;C&&Z&&Z.dm().contains(C)&&(a=Z.getIcon(C),a&&M(B,ht.Default.getImage(a),"centerUniform",j,E,H,K,C,Z))},this.updateHandlers.push(function(){if(!K.hidden){var B=h.data;h.data=$.getValue(H),h.fp("data",B,h.data)}}),K.push(h),this.addDBRow(K,B,j)},a.prototype.addDBMultiline=function(B,a,j){var E=[];return this.addLabelMultiline(E,a,J(B,j),O(B,j)),this.addDBRow(E,B,j)},a.prototype.$28$=function(){this.addTitle("TitleBasic"),this.addEventProperties();var B=[];this.addLabelInput(B,H("editor.class"),function(B){return B.getClassName()}),this.addRow(B,[Ra.config.indent,.1]).keys={accessType:"p",name:"className"},this.addDBInput("p",H("editor.name"),"displayName"),this.addDBInput("p",H("editor.tag"),"tag"),this.addDBImage("p",H("editor.icon"),"icon"),this.addDBData("p",H("editor.parent"),"parent")},a.prototype.$30$=function(){this.addTitle("TitleLabel"),this.addDBMultiline("s",H("editor.content"),"label"),this.addDBFont("s",H("editor.font"),"label.font"),this.addDBColor("s",H("editor.color"),"label.color"),this.addDBColor("s",H("editor.background"),"label.background"),this.addDBPosition("s",H("editor.position"),"label.position"),this.addDBInput("s",H("editor.offsetx"),"label.offset.x","number",1),this.addDBInput("s",H("editor.offsety"),"label.offset.y","number",1),this.addDBInput("s",H("editor.maxlength"),"label.max","number",1),this.addDBRotation("s",H("editor.rotation"),"label.rotation"),this.addDBZeroToOne("s",H("editor.opacity"),"label.opacity"),this.addDBRange("s",H("editor.scale"),"label.scale",.01,100,.1,"number"),this.addDBAlign("s",H("editor.align"),"label.align"),this.addDBCheckBox("s",H("editor.fixed"),"label.position.fixed")},a.prototype.$31$=function(){this.addTitle("TitleNote"),this.addDBMultiline("s",H("editor.content"),"note"),this.addDBFont("s",H("editor.font"),"note.font"),this.addDBColor("s",H("editor.color"),"note.color"),this.addDBColor("s",H("editor.background"),"note.background"),this.addDBInput("s",H("editor.borderwidth"),"note.border.width","number",1),this.addDBColor("s",H("editor.bordercolor"),"note.border.color"),this.addDBPosition("s",H("editor.position"),"note.position"),this.addDBInput("s",H("editor.offsetx"),"note.offset.x","number",1),this.addDBInput("s",H("editor.offsety"),"note.offset.y","number",1),this.addDBZeroToOne("s",H("editor.opacity"),"note.opacity"),this.addDBRange("s",H("editor.scale"),"note.scale",.01,100,.1,"number"),this.addDBInput("s",H("editor.maxlength"),"note.max","number",1),this.addDBAlign("s",H("editor.align"),"note.align"),this.addDBCheckBox("s",H("editor.toggleable"),"note.toggleable"),this.addDBCheckBox("s",H("editor.expanded"),"note.expanded")},a.prototype.addDBLayer=function(){var B=this,a=[],j=J("p","layer"),E=O("p","layer");this.addLabel(a,H("editor.layer"),j,E);var $=new ht.widget.ComboBox;$.onValueChanged=function(){B.setValue(E,$.getValue())},this.updateHandlers.push(function(){if(!a.hidden){$.setValues(B.editor.layerPane.layerNames);var E=B.getValue(j);$.getValue()!==E&&$.setValue(E)}}),a.push($);var K=this.addDBRow(a,"p","layer");return K.items.tag="layer",K},a.prototype.addDBGray=function(){this.addDBCheckBox("s",H("editor.gray"),"2d.gray")},a}(YE),uE={TitleShapeBackground:!0,TitleShapeBorder:!0,TitleShapeDash:!0},qE=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},a.prototype.$28$=function(){B.prototype.$28$.call(this),this.addDBGray(),this.addDBLayer(),this.addDBInput("p",H("editor.tooltip"),"toolTip"),this.addDBBodyColorProperty(),this.addDBOpacityProperty(),this.$84$()},a.prototype.$92$=function(){var B=this;this.addDBStretch("s",H("editor.stretch"),"image.stretch").items.tag="imageRelative",this.addDBComboBox("s",H("editor.shape"),"shape",Ra.consts.shapes,Ra.consts.shapeLabels,Ra.consts.shapeIcons);var a=[];a.forceToUpdate=!0,this.addLabelImage(a,H("editor.image"),function(a){var j=a.getImage(),E=ht.Default.getImage(j);return B.$86$(sB(E)?E.dataBindings:null,E),j},function(B,a){B.setImage&&(kB(a)&&a.endsWith("[...]")||B.setImage(a))}),this.addButton(a,null,H("editor.resetsize"),"editor.resetsize.state",function(B){B instanceof ht.Node&&B.setSize(-1,-1)}),this.imageRow=this.addDBRow(a,"p","image"),this.imageRow.items.tag="imageRelative"},a.prototype.addLayoutProperties=function(){var B=this;this.addTitle("TitleNodeLayout");var a=this.layoutGv=new ht.graph.GraphView,j=this.layoutNode=new ht.Node,E=!1;j.setImage("editor.layout.helper"),j.a("selectColor",Ra.config.color_select),a.dm().add(j),a.tx(50),a.ty(50),a.handleScroll=function(){},a.handlePinck=function(){},a.setScrollBarVisible(!1),a.setRectSelectable(!1),a.setPannable(!1),a.setMovableFunc(function(){return!1}),a.dm().md(function(a){E||(B.beginTransaction(),B.dataModel.sm().getSelection().each(function(B){"a:layout.v"===a.property?B.s("layout.v",a.newValue):"a:layout.h"===a.property&&B.s("layout.h",a.newValue)}),B.endTransaction())}),this.addRow(["",{element:a},""],[.1,100,.1],100),this.addUpdateHandler(function(){var a=B.data;E=!0,j.a({"layout.v":a.s("layout.v"),"layout.h":a.s("layout.h")}),E=!1}),this.addDBComboBox("s",H("editor.nodeLayout.h"),"layout.h",Ra.consts.hLayoutValues,Ra.consts.hLayoutLabels),this.addDBComboBox("s",H("editor.nodeLayout.v"),"layout.v",Ra.consts.vLayoutValues,Ra.consts.vLayoutLabels)},a.prototype.$23$=function(){this.addTitle("TitleNode"),this.addDBInput("p",H("editor.posx"),"x","number",1),this.addDBInput("p",H("editor.posy"),"y","number",1),this.addDBInput("p",H("editor.width"),"width","number",1),this.addDBInput("p",H("editor.height"),"height","number",1),this.addDBRotation("p",H("editor.rotation"),"rotation");var B=[];this.addLabelInput(B,H("editor.scalex"),J("p","scaleX"),O("p","scaleX"),"number",.01),this.addButton(B,null,H("editor.flipx"),"editor.flipx",function(B){B instanceof ht.Node&&B.setScaleX(-B.getScaleX())}),this.addDBRow(B,"p","scaleX"),B=[],this.addLabelInput(B,H("editor.scaley"),J("p","scaleY"),O("p","scaleY"),"number",.01),this.addButton(B,null,H("editor.flipy"),"editor.flipy",function(B){B instanceof ht.Node&&B.setScaleY(-B.getScaleY())}),this.addDBRow(B,"p","scaleY"),B=[],this.addLabelInput(B,H("editor.anchorx"),function(B){return B.getAnchor().x},function(B,a){B instanceof ht.Node&&B.setAnchor(a,B.getAnchor().y,!0)},"number",.01),this.addDBRow(B,"p","anchorX"),B=[],this.addLabelInput(B,H("editor.anchory"),function(B){return B.getAnchor().y},function(B,a){B instanceof ht.Node&&B.setAnchor(B.getAnchor().x,a,!0)},"number",.01),this.addDBRow(B,"p","anchorY"),this.$85$(),this.addDBData("p",H("editor.host"),"host",function(B,a){B instanceof ht.Node&&(null==a||a instanceof ht.Node)&&B.setHost(a)}),this.addDBComboBox("s",H("editor.fullscreen"),"fullscreen",Ra.consts.fullscreenValues,Ra.consts.fullscreenLabels);var a=this.addDBComboBox("s",H("editor.fullscreen.lock"),"fullscreen.lock",Ra.consts.fullscreenLockValues,Ra.consts.fullscreenLockLabels);a.items.tag="fullscreen",a=this.addDBInput("s",H("editor.fullscreen.gap"),"fullscreen.gap","number",1),a.items.tag="fullscreen",this.addDBComboBox("s",H("editor.movemode"),"2d.move.mode",[void 0,"x","y"],["",H("editor.horizontal"),H("editor.vertical")]),this.addDBCheckBox("s",H("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",H("editor.visible"),"2d.visible"),this.addDBCheckBox("s",H("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",H("editor.movable"),"2d.movable"),this.addDBCheckBox("s",H("editor.editable"),"2d.editable"),this.addDBCheckBox("s",H("editor.pixelperfect"),"pixelPerfect")},a.prototype.$85$=function(){this.addDBZeroToOne("s",H("editor.clippercentage"),"clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"clip.direction",Ra.consts.clipDirections,Ra.consts.clipDirectionLabels)},a.prototype.$29$=function(){this.$25$(),this.addShapeForegroundProperties(),this.$33$(),this.addShapeDashProperties()},a.prototype.$25$=function(){this.addTitle("TitleShapeBackground"),this.addDBColor("s",H("editor.background"),"shape.background"),this.addDBGradient(H("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"shape.gradient.color"),this.addDBImage("s",H("editor.repeatimage"),"shape.repeat.image"),this.addDBZeroToOne("s",H("editor.clippercentage"),"shape.fill.clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"shape.fill.clip.direction",Ra.consts.clipDirections,Ra.consts.clipDirectionLabels)},a.prototype.addShapeForegroundProperties=function(){this.addTitle("TitleShapeForeground"),this.addDBColor("s",H("editor.foreground"),"shape.foreground"),this.addDBGradient(H("editor.gradient"),"shape.foreground.gradient","shape.foreground","shape.foreground.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"shape.foreground.gradient.color"),this.addDBZeroToOne("s",H("editor.clippercentage"),"shape.foreground.clip.percentage"),this.addDBComboBox("s",H("editor.clipdirection"),"shape.foreground.clip.direction",Ra.consts.clipDirections,Ra.consts.clipDirectionLabels)},a.prototype.$33$=function(){this.addTitle("TitleShapeBorder"),this.addDBInput("s",H("editor.width"),"shape.border.width","number",1),this.addDBCheckBox("s",H("editor.widthabsolute"),"shape.border.width.absolute"),this.addDBPattern("s",H("editor.pattern"),"shape.border.pattern"),this.addDBColor("s",H("editor.color"),"shape.border.color"),this.addDBCheckBox("s",H("editor.threed"),"shape.border.3d"),this.addDBColor("s",H("editor.threedcolor"),"shape.border.3d.color"),this.addDBComboBox("s",H("editor.join"),"shape.border.join",Ra.consts.joins,Ra.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"shape.border.cap",Ra.consts.caps,Ra.consts.capLabels),this.$24$()},a.prototype.$24$=function(){this.addDBInput("s",H("editor.depth"),"shape.depth","int",1).items.tag="shapeDepth",this.addDBInput("s",H("editor.sides"),"shape.polygon.side","int",1).items.tag="shapeSide",this.addDBInput("s",H("editor.radius"),"shape.corner.radius","number",1).items.tag="shapeRadius",this.addDBCheckBox("s",H("editor.arcoval"),"shape.arc.oval").items.tag="shapeArc",this.addDBCheckBox("s",H("editor.closed"),"shape.arc.close").items.tag="shapeArc",this.addDBRotation("s",H("editor.arcfrom"),"shape.arc.from").items.tag="shapeArc",this.addDBRotation("s",H("editor.arcto"),"shape.arc.to").items.tag="shapeArc"},a.prototype.addShapeDashProperties=function(){this.addTitle("TitleShapeDash"),this.addDBPattern("s",H("editor.pattern"),"shape.dash.pattern"),this.addDBCheckBox("s",H("editor.dash"),"shape.dash"),this.addDBColor("s",H("editor.color"),"shape.dash.color"),this.addDBInput("s",H("editor.offset"),"shape.dash.offset","number",1),this.addDBInput("s",H("editor.width"),"shape.dash.width","number",1),this.addDBCheckBox("s",H("editor.threed"),"shape.dash.3d"),this.addDBColor("s",H("editor.threedcolor"),"shape.dash.3d.color")},a.prototype.$35$=function(a){if(a){if("s:shape"===a.property||"host"===a.property||"s:fullscreen"===a.property)return void this.filterPropertiesLater();if("s:select.type"===a.property&&("shadow"===a.oldValue||"shadow"===a.newValue))return void this.filterPropertiesLater()}B.prototype.$35$.call(this,a)},a.prototype.isTitleVisible=function(a){if(this.data){if(!(this.data instanceof ht.Shape)&&!this.data.s("shape")&&uE[a.title])return!1;if("TitleNodeLayout"===a.title&&!this.data.getHost())return!1}return B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){if(this.data){var j=a.items.tag;if(j)if("selectShadow"===j){if("shadow"!==this.data.s("select.type"))return!1}else if("shapeDepth"===j){if("rect"!==this.data.s("shape"))return!1}else if("shapeSide"===j){if("polygon"!==this.data.s("shape"))return!1}else if("shapeRadius"===j){if("roundRect"!==this.data.s("shape"))return!1}else if("shapeArc"===j){if("arc"!==this.data.s("shape"))return!1}else if("imageRelative"===j){if(this.data.s("shape"))return!1}else if("layer"===j){if(!this.editor.layerPane.layerNames.length)return!1}else if("fullscreen"===j&&!this.data.s("fullscreen"))return!1}return B.prototype.isPropertyVisible.call(this,a)},a.prototype.$86$=function(B,a){var j=this;this.dataBindings!==B&&(this.$46$=B,this.pendingImage=a,this._updateDataBindingsLater||(this._updateDataBindingsLater=!0,requestAnimationFrame(function(){j.$87$()})))},a.prototype.$87$=function(){var B=this;return this._updateDataBindingsLater=!1,this.dataBindings===this.$46$?(this.$46$=null,void(this.pendingImage=null)):(this._rows=this.$47$,this.removeRows(this.$45$),this.dataBindingHandlers&&this.dataBindingHandlers.length&&this.dataBindingHandlers.forEach(this.removeUpdateHandler,this),this.$45$=[],this.dataBindingHandlers=[],this.dataBindings=this.$46$,this.dataBindings&&!function(){var a=B.updateHandlers.length,j={},E={},$={};B.pendingImage.comps.forEach(function(B){if(HB(B.type)){var a=ht.Default.getCompType(B.type);if(a)for(var H in a.properties)j[H]=a.properties[H].defaultValue}aa(B,E,$)});for(var H in E)void 0===$[H]&&($[H]=j[E[H]]);var K=void 0,C=B._rows.indexOf(B.imageRow)+1;B.dataBindings.forEach(function(a){if(a.group&&K!==a.group){K=a.group;var j=B.addTitle(K,{index:C});j.items.tag="imageRelative",B.$45$.push(j),C++}B.$88$(a,C,$)&&C++}),B.dataBindingHandlers=B.updateHandlers.slice(a)}(),this.$47$=this._rows,void this.filterProperties())},a.prototype.$88$=function(B,a,j){var E=[],$=B.attr,K=Ra.config.valueTypes[B.valueType];if(!K)return this.editor.fireEvent("error",{message:"Wrong value type:"+B.valueType}),!1;var C=H(B.name)||$,Z=function(B){
var a=B.a($);return void 0===a&&(a=j[$]),a},h=function(B,a){B.a($,a)},m=B.extraInfo,J=void 0,O=void 0,k=void 0;m&&m.enum&&(J=m.enum.values,O=m.enum.labels,k=m.enum.icons),J?this.addLabelComboBox(E,C,Z,h,J,O,k):"int"===K.type||"number"===K.type?K.angle?this.addLabelRotation(E,C,Z,h,K.min,K.max,K.step):this.addLabelRange(E,C,Z,h,K.min,K.max,K.step,K.type):"color"===K.type?this.addLabelColor(E,C,Z,h):"boolean"===K.type?this.addLabelCheckBox(E,C,Z,h):"enum"===K.type?this.addLabelComboBox(E,C,Z,h,K.values,K.labels,K.icons):"multiline"===K.type?this.addLabelMultiline(E,C,Z,h):"font"===K.type?this.addLabelFont(E,C,Z,h):"image"===K.type?this.addLabelImage(E,C,Z,h):"url"===K.type?this.addLabelURL(E,C,Z,h):"colorArray"===K.type?this.addLabelArray(E,C,Z,h,"color"):"numberArray"===K.type?this.addLabelArray(E,C,Z,h,"number"):"stringArray"===K.type?this.addLabelArray(E,C,Z,h,"string"):"objectArray"===K.type?this.addLabelArray(E,C,Z,h,"object"):"function"===K.type?this.addLabelFunction(E,C,Z,h,$):"object"===K.type?this.addLabelObject(E,C,Z,h,$):"custom"===K.type?K.buildUI(this,E,C,Z,h):this.addLabelInput(E,C,Z,h);var s=this.addDBRow(E,"a",$,{index:a},K.rows,B);return m&&(s.visible=m.visible,s.onPropertyChanged=m.onPropertyChanged),this.$45$.push(s),E.tag="imageRelative",!0},a.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1),this.addDBInput("s",H("editor.padding"),"select.padding","number",1),this.addDBComboBox("s",H("editor.selecttype"),"select.type",Ra.consts.selectTypes,Ra.consts.selectTypeLabels,Ra.consts.selectTypeIcons),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1).items.tag="selectShadow",this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1).items.tag="selectShadow",this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1).items.tag="selectShadow"},a}(QE),DE={"h.v":!0,"v.h":!0,ortho:!0,flex:!0,"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,ortho2:!0,flex2:!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0,"v.h2":!0,"h.v2":!0},AE={"extend.east":!0,"extend.west":!0,"extend.north":!0,"extend.south":!0,"extend.north2":!0,"extend.south2":!0,"extend.west2":!0,"extend.east2":!0},TE=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.$27$(),B.prototype.initForm.call(this),this.addDBGray(),this.$89$(),this.$90$(),this.$91$(),this.$30$(),this.$31$(),this.$26$()},a.prototype.isTitleVisible=function(a){return!("TitleEditingPoint"===a.title&&!this.editor.pointsEditingMode)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.$35$=function(a){return!a||"s:edge.type"!==a.property&&"source"!==a.property&&"target"!==a.property?void B.prototype.$35$.call(this,a):void this.filterPropertiesLater()},a.prototype.isPropertyVisible=function(a){if(this.data){var j=a.items.tag;if(j){var E=this.data.s("edge.type");if("edgeRipple"===j){if("ripple"!==E)return!1}else if("edgeRadius"===j){if(!DE[E])return!1}else if("edgeOrtho"===j){if("ortho"!==E&&"ortho2"!==E)return!1}else if("edgeFlex"===j){if("flex"!==E&&"flex2"!==E)return!1}else if("edgeExtend"===j){if(!AE[E])return!1}else if("layer"===j){if(!this.editor.layerPane.layerNames.length)return!1}else{if("edgeSourceIsEdge"===j)return this.data.getSource()instanceof ht.Edge;if("edgeTargetIsEdge"===j)return this.data.getTarget()instanceof ht.Edge;if("edgeSourceIsNode"===j)return this.data.getSource()instanceof ht.Node;if("edgeTargetIsNode"===j)return this.data.getTarget()instanceof ht.Node}}}return B.prototype.isPropertyVisible.call(this,a)},a.prototype.$28$=function(){B.prototype.$28$.call(this),this.addDBLayer(),this.addDBInput("p",H("editor.tooltip"),"toolTip"),this.addDBOpacityProperty(),this.$84$()},a.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1);var B=[];this.addLabelCheckBox(B,H("editor.shadow"),function(B){return"shadow"===B.s("select.type")},function(B,a){B.s("select.type",a?"shadow":null)}),this.addDBRow(B,"s","select.type"),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1)},a.prototype.$89$=function(){this.addTitle("TitleEdgeBasic"),this.addDBInput("s",H("editor.width"),"edge.width","number",1),this.addDBCheckBox("s",H("editor.widthabsolute"),"edge.width.absolute"),this.addDBPattern("s",H("editor.pattern"),"edge.pattern"),this.addDBColor("s",H("editor.color"),"edge.color"),this.addDBCheckBox("s",H("editor.threed"),"edge.3d"),this.addDBColor("s",H("editor.threedcolor"),"edge.3d.color"),this.addDBComboBox("s",H("editor.join"),"edge.join",Ra.consts.joins,Ra.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"edge.cap",Ra.consts.caps,Ra.consts.capLabels),this.addDBInput("s",H("editor.group"),"edge.group"),this.addDBInput("s",H("editor.offset"),"edge.offset","number",1),this.addDBInput("s",H("editor.gap"),"edge.gap","number",1),this.addDBComboBox("s",H("editor.type"),"edge.type",Ra.consts.edgeTypes,Ra.consts.edgeTypes.map(function(B){var a=H("edgeType:"+B,!0);return a?a:B})),this.addDBInput("s",H("editor.radius"),"edge.corner.radius","number",1).items.tag="edgeRadius",this.addDBZeroToOne("s",H("editor.ortho"),"edge.ortho").items.tag="edgeOrtho",this.addDBInput("s",H("editor.flex"),"edge.flex","number",1).items.tag="edgeFlex",this.addDBInput("s",H("editor.extend"),"edge.extend","number",1).items.tag="edgeExtend",this.addDBInput("s",H("editor.ripplesize"),"edge.ripple.size","int",1).items.tag="edgeRipple",this.addDBInput("s",H("editor.ripplelength"),"edge.ripple.length","number",1).items.tag="edgeRipple",this.addDBInput("s",H("editor.rippleelevation"),"edge.ripple.elevation","number",1).items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.rippleboth"),"edge.ripple.both").items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.ripplestraight"),"edge.ripple.straight").items.tag="edgeRipple",this.addDBCheckBox("s",H("editor.center"),"edge.center"),this.addDBCheckBox("s",H("editor.ingroup"),"ingroup"),this.addDBCheckBox("s",H("editor.visible"),"2d.visible"),this.addDBCheckBox("s",H("editor.selectable"),"2d.selectable"),this.addDBCheckBox("s",H("editor.editable"),"2d.editable"),this.addDBCheckBox("s",H("editor.independent"),"edge.independent"),this.addDBCheckBox("s",H("editor.toggleable"),"edge.toggleable");var B=[],a=function(B,a){B instanceof ht.Edge&&B.toggle()};a.once=!0,this.addLabelCheckBox(B,H("editor.expanded"),function(B){return B.s("edge.expanded")},a),this.addDBRow(B,"s","edge.expanded")},a.prototype.$91$=function(){this.addTitle("TitleEdgeDash"),this.addDBCheckBox("s",H("editor.dash"),"edge.dash"),this.addDBPattern("s",H("editor.pattern"),"edge.dash.pattern"),this.addDBColor("s",H("editor.color"),"edge.dash.color"),this.addDBInput("s",H("editor.offset"),"edge.dash.offset","number",1),this.addDBInput("s",H("editor.width"),"edge.dash.width","number",1),this.addDBCheckBox("s",H("editor.threed"),"edge.dash.3d"),this.addDBColor("s",H("editor.threedcolor"),"edge.dash.3d.color")},a.prototype.$90$=function(){this.addTitle("TitleEdgeEndpoint"),this.addDBData("p",H("editor.sourcenode"),"source",function(B,a){B instanceof ht.Edge&&(null==a||a instanceof ht.Node||a instanceof ht.Edge)&&(B.setSource(a),B.s("edge.source.percent",.5))}),this.addDBData("p",H("editor.targetnode"),"target",function(B,a){B instanceof ht.Edge&&(null==a||a instanceof ht.Node||a instanceof ht.Edge)&&(B.setTarget(a),B.s("edge.target.percent",.5))});var B=void 0;B=this.addDBZeroToOne("s","\u8d77\u59cb\u767e\u5206\u6bd4","edge.source.percent"),B.items.tag="edgeSourceIsEdge",B=this.addDBRange("s","\u8d77\u59cb\u7ed3\u70b9","edge.source.index",0,1/0,1,"number"),B.items.tag="edgeSourceIsEdge",B=this.addDBPosition("s",H("editor.sourceposition"),"edge.source.position"),B.items.tag="edgeSourceIsNode",B=this.addDBInput("s",H("editor.sourceoffsetx"),"edge.source.offset.x","number",1),B.items.tag="edgeSourceIsNode",B=this.addDBInput("s",H("editor.sourceoffsety"),"edge.source.offset.y","number",1),B.items.tag="edgeSourceIsNode",B=this.addDBInput("s",H("editor.sourceanchorx"),"edge.source.anchor.x","number",.01),B.items.tag="edgeSourceIsNode",B=this.addDBInput("s",H("editor.sourceanchory"),"edge.source.anchor.y","number",.01),B.items.tag="edgeSourceIsNode",B=this.addDBZeroToOne("s","\u7ed3\u675f\u767e\u5206\u6bd4","edge.target.percent"),B.items.tag="edgeTargetIsEdge",B=this.addDBRange("s","\u7ed3\u675f\u7ed3\u70b9","edge.source.index",0,1/0,1,"number"),B.items.tag="edgeTargetIsEdge",B=this.addDBPosition("s",H("editor.targetposition"),"edge.target.position"),B.items.tag="edgeTargetIsNode",B=this.addDBInput("s",H("editor.targetoffsetx"),"edge.target.offset.x","number",1),B.items.tag="edgeTargetIsNode",B=this.addDBInput("s",H("editor.targetoffsety"),"edge.target.offset.y","number",1),B.items.tag="edgeTargetIsNode",B=this.addDBInput("s",H("editor.targetanchorx"),"edge.target.anchor.x","number",.01),B.items.tag="edgeTargetIsNode",B=this.addDBInput("s",H("editor.targetanchory"),"edge.target.anchor.y","number",.01),B.items.tag="edgeTargetIsNode"},a}(QE),LE=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.$92$(),this.addLayoutProperties(),this.$23$(),this.$32$(),this.$94$(),this.$93$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},a.prototype.$35$=function(a){return a&&"s:group.type"===a.property?void this.filterPropertiesLater():void B.prototype.$35$.call(this,a)},a.prototype.isTitleVisible=function(a){return(!this.data||!this.data.s("group.type")||"TitleGroupTitle"!==a.title)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){if(this.data){var j=a.items.tag;if(j&&"groupDepth"===j){var E=this.data.s("group.type");if(E&&"rect"!==E)return!1}}return B.prototype.isPropertyVisible.call(this,a)},a.prototype.$32$=function(){this.addTitle("TitleGroupBasic"),this.addDBComboBox("s",H("editor.type"),"group.type",[void 0,"rect","oval","circle","roundRect"],["",H("editor.grouptype.rect"),H("editor.grouptype.oval"),H("editor.grouptype.circle"),H("editor.grouptype.roundrect")]),this.addDBPosition("s",H("editor.position"),"group.position"),this.addDBColor("s",H("editor.background"),"group.background"),this.addDBGradient(H("editor.gradient"),"group.gradient","group.background","group.gradient.color"),this.addDBColor("s",H("editor.gradientcolor"),"group.gradient.color"),this.addDBImage("s",H("editor.image"),"group.image"),this.addDBStretch("s",H("editor.stretch"),"group.image.stretch"),this.addDBImage("s",H("editor.repeatimage"),"group.repeat.image"),this.addDBCheckBox("s",H("editor.toggleable"),"group.toggleable"),this.addDBCheckBox("p",H("editor.expanded"),"expanded"),this.addDBInput("s",H("editor.depth"),"group.depth","number",1).items.tag="groupDepth"},a.prototype.$94$=function(){this.addTitle("TitleGroupTitle"),this.addDBLabel("s",H("editor.content"),"label"),this.addDBFont("s",H("editor.font"),"group.title.font"),this.addDBColor("s",H("editor.color"),"group.title.color"),this.addDBColor("s",H("editor.background"),"group.title.background"),this.addDBAlign("s",H("editor.align"),"group.title.align"),this.addDBOrientation("s",H("editor.valuetype.orientation"),"group.title.orientation"),this.addDBCheckBox("s","\u5206\u5272\u7ebf","group.splitLine")},a.prototype.$93$=function(){this.addTitle("TitleGroupBorder"),this.addDBInput("s",H("editor.width"),"group.border.width","number",1),this.addDBPattern("s",H("editor.pattern"),"group.border.pattern"),this.addDBColor("s",H("editor.color"),"group.border.color"),this.addDBComboBox("s",H("editor.join"),"group.border.join",Ra.consts.joins,Ra.consts.joinLabels),this.addDBComboBox("s",H("editor.cap"),"group.border.cap",Ra.consts.caps,Ra.consts.capLabels),this.addDBInput("s",H("editor.radius"),"group.border.radius","number",1),this.addDBInput("s",H("editor.padding"),"group.padding","number",1),this.addDBInput("s",H("editor.paddingleft"),"group.padding.left","number",1),this.addDBInput("s",H("editor.paddingright"),"group.padding.right","number",1),this.addDBInput("s",H("editor.paddingtop"),"group.padding.top","number",1),this.addDBInput("s",H("editor.paddingbottom"),"group.padding.bottom","number",1)},a}(qE),B$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.$27$(),this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$23$(),this.$29$(),this.$30$(),this.$31$(),this.$26$()},a.prototype.isTitleVisible=function(a){return!("TitleEditingPoint"===a.title&&!this.editor.pointsEditingMode)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.$24$=function(){this.addDBCheckBox("p",H("editor.closed"),"closePath"),this.addDBColor("s",H("editor.outlinecolor"),"border.color"),this.addDBInput("s",H("editor.outlinewidth"),"border.width","number",1)},a.prototype.$25$=function(){B.prototype.$25$.call(this),this.addDBComboBox("s",H("editor.fillrule"),"shape.fill.rule",Ra.consts.fillRules,Ra.consts.fillRuleLabels)},a.prototype.$26$=function(){this.addTitle("TitleSelect"),this.addDBColor("s",H("editor.color"),"select.color"),this.addDBInput("s",H("editor.width"),"select.width","number",1);var B=[];this.addLabelCheckBox(B,H("editor.shadow"),function(B){return"shadow"===B.s("select.type")},function(B,a){B.s("select.type",a?"shadow":null)}),this.addDBRow(B,"s","select.type"),this.addDBInput("s",H("editor.shadowblur"),"shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"shadow.offset.y","number",1)},a}(qE),a$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.$23$=function(){B.prototype.$23$.call(this),this.addDBCheckBox("p",H("editor.clickthroughenabled"),"clickThroughEnabled");var a=[];this.addLabelCheckBox(a,H("editor.syncsize"),function(B){return B.isSyncSize()},function(B,a){B instanceof ht.Block&&(B.setSyncSize(a),B instanceof ht.RefGraph&&(B.p(0,0),B.setRotation(0),B.setAnchor(.5,.5),B.setScale(1,1),B.setSize(20,20),B.setRef(B.getRef())))}),this.addDBRow(a,"p","syncSize")},a.prototype.addDBGray=function(){},a.prototype.addDBBodyColorProperty=function(){},a.prototype.addDBOpacityProperty=function(){},a.prototype.$92$=function(){},a.prototype.$29$=function(){},a.prototype.$85$=function(){},a}(qE),j$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.$28$=function(){B.prototype.$28$.call(this),this.addDBRef()},a.prototype.addDBRef=function(){var B=this,a=[],j=function(B){return B.getRef()},E=function(B,a){B instanceof ht.RefGraph&&(B.p(0,0),B.setRotation(0),B.setAnchor(.5,.5),B.setScale(1,1),B.setSize(20,20),B.setRef(a))},$=function(a,j){var E=j.view.draggingData;return!!E&&(B.editor.url!==E.url&&E.fileType===Aa)};return this.addLabelURL(a,H("editor.ref"),j,E,$),this.addDBRow(a,"p","ref")},a.prototype.addDBGray=function(){},a}(a$),E$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$28$(),this.addLayoutProperties(),this.$22$(),this.$23$(),this.$26$()},a.prototype.$22$=function(){this.addTitle("TitleText"),this.addDBInput("s",H("editor.content"),"text"),this.addDBAlign("s",H("editor.align"),"text.align"),this.addDBVAlign("s",H("editor.valign"),"text.vAlign"),this.addDBColor("s",H("editor.color"),"text.color"),this.addDBFont("s",H("editor.font"),"text.font"),this.addDBCheckBox("s",H("editor.shadow"),"text.shadow"),this.addDBColor("s",H("editor.shadowcolor"),"text.shadow.color"),this.addDBInput("s",H("editor.shadowblur"),"text.shadow.blur","number",1),this.addDBInput("s",H("editor.shadowoffsetx"),"text.shadow.offset.x","number",1),this.addDBInput("s",H("editor.shadowoffsety"),"text.shadow.offset.y","number",1)},a}(qE),$$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E,"comp"))}return ra(a,B),a.prototype.initForm=function(){this.addCustomProperties(),this.$12$(),this.addLayoutProperties(),this.$20$()},a.prototype.isTitleVisible=function(a){return!!this.inspectorFilter.isCompTitleVisible(this.editor,this.data?this.data.compType:null,a.title)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){return!!this.inspectorFilter.isCompPropertyVisible(this.editor,this.data?this.data.compType:null,a.keys&&a.keys.name)&&B.prototype.isPropertyVisible.call(this,a)},a.prototype.$12$=function(){this.addTitle("TitleBasic"),this.addEventProperties(),this.$14$(),this.$15$(),this.addStyleInput(H("editor.prefix"),"prefix","prefix"),this.$13$(),this.$21$(),this.$16$(),this.$17$(),this.$18$(),this.$19$(),this.addStyleCheckBox(H("editor.visible"),"2d.visible","visible"),this.addStyleCheckBox(H("editor.selectable"),"2d.selectable","selectable"),this.addStyleCheckBox(H("editor.movable"),"2d.movable","movable"),this.addStyleCheckBox(H("editor.editable"),"2d.editable","editable"),this.addStyleCheckBox(H("editor.pixelperfect"),"pixelPerfect","pixelPerfect"),this.addStyleZeroToOne(H("editor.opacity"),"opacity","opacity")},a.prototype.$13$=function(){var B=[];this.addLabelInput(B,H("editor.area"),function(B){return"["+E(B.p().x-B.getWidth()*B.getAnchor().x)+","+E(B.p().y-B.getHeight()*B.getAnchor().y)+","+E(B.getWidth())+","+E(B.getHeight())+"]"}),this.addFuncRow(B,"rect")},a.prototype.$14$=function(){var B=[];this.addLabelInput(B,H("editor.type"),function(B){return B.compType}),this.addRow(B,[Ra.config.indent,.1]).keys={name:"type"}},a.prototype.$15$=function(){var B=[];this.addLabelInput(B,H("editor.name"),function(B){return B.getDisplayName()},function(B,a){B.setDisplayName(a)}),this.addFuncRow(B,"displayName")},a.prototype.$16$=function(){var B=[];this.addLabelInput(B,H("editor.rotation"),function(B){return 180/Math.PI*B.getRotation()},function(B,a){B instanceof ht.Node&&B.setRotation(a*Math.PI/180)},"number",1),this.addFuncRow(B,"rotation")},a.prototype.$17$=function(){var B=[];this.addLabelInput(B,H("editor.anchorx"),function(B){return B.getAnchor().x},function(B,a){B instanceof ht.Node&&B.setAnchor(a,B.getAnchor().y,!0)},"number",.01),this.addFuncRow(B,"anchorX"),B=[],this.addLabelInput(B,H("editor.anchory"),function(B){return B.getAnchor().y},function(B,a){B instanceof ht.Node&&B.setAnchor(B.getAnchor().x,a,!0)},"number",.01),this.addFuncRow(B,"anchorY")},a.prototype.$18$=function(){var B=[];this.addLabelInput(B,H("editor.scalex"),function(B){return B.getScale().x},function(B,a){B instanceof ht.Node&&B.setScale(a,B.getScale().y)},"number",.01),this.addFuncRow(B,"scaleX"),B=[],this.addLabelInput(B,H("editor.scaley"),function(B){return B.getScale().y},function(B,a){B instanceof ht.Node&&B.setScale(B.getScale().x,a)},"number",.01),this.addFuncRow(B,"scaleY")},a.prototype.$19$=function(){this.addStyleZeroToOne(H("editor.clippercentage"),"clip.percentage","clipPercentage"),this.addStyleComboBox(H("editor.clipdirection"),"clip.direction",Ra.consts.clipDirections,Ra.consts.clipDirectionLabels,null,"clipDirection")},a.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(H("editor.shadow"),"shadow","shadow"),this.addStyleColor(H("editor.shadowcolor"),"select.color","shadowColor"),this.addStyleInput(H("editor.shadowblur"),"shadow.blur","number",1,"shadowblur"),this.addStyleInput(H("editor.shadowoffsetx"),"shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(H("editor.shadowoffsety"),"shadow.offset.y","number",1,"shadowOffsetYs")},a.prototype.$21$=function(){var B=[];return this.addLabelInput(B,H("editor.posx"),function(B){return B.p().x},function(B,a){B instanceof ht.Node&&B.p(a,B.p().y)},"number",1),this.addLabelInput(B,H("editor.posy"),function(B){return B.p().y},function(B,a){B instanceof ht.Node&&B.p(B.p().x,a)},"number",1),this.addRow(B,[Ra.config.indent,.1,Ra.config.indent2,.1]).keys={name:"position"},B=[],this.addLabelInput(B,H("editor.width"),function(B){return B.getWidth()},function(B,a){B instanceof ht.Node&&B.setWidth(a)},"number",1),this.addLabelInput(B,H("editor.height"),function(B){return B.getHeight()},function(B,a){B instanceof ht.Node&&B.setHeight(a)},"number",1),this.addRow(B,[Ra.config.indent,.1,Ra.config.indent2,.1]).keys={name:"size"},B},a.prototype.addStyleColor=function(B,a,j){var E=[];return this.addLabelColor(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow(E,a,j)},a.prototype.addStyleFunction=function(B,a,j){var E=[];return this.addLabelFunction(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},j),this.addFuncRow(E,a,j)},a.prototype.addStyleObject=function(B,a,j){var E=[];return this.addLabelObject(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},j),this.addFuncRow(E,a,j)},a.prototype.addStyleLabel=function(B,a,j){var E=[];return this.addLabelInput(E,B,function(B){var j=B.s(a);return j&&j.replace&&(j=j.replace(/\n/g,"\\n")),j},function(B,j){j&&j.replace&&(j=j.replace(/\\n/g,"\n")),B.s(a,j)}),this.addFuncRow(E,a,j)},a.prototype.addStyleArray=function(B,a,j,E,$){var H=[];return this.addLabelArray(H,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},E),this.addFuncRow(H,a,j,$)},a.prototype.addStyleMultiline=function(B,a,j,E){var $=[];return this.addLabelMultiline($,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow($,a,j,E)},a.prototype.addStyleFont=function(B,a,j,E){var $=[];return this.addLabelFont($,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow($,a,j,E)},a.prototype.addStyleTextArea=function(B,a,j,E){var $=[];return this.addLabelTextArea($,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow($,a,E,j)},a.prototype.addStyleInput=function(B,a,j,E,$){var H=[];return this.addLabelInput(H,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},j,E),this.addFuncRow(H,a,$)},a.prototype.addStyleCheckBox=function(B,a,j){var E=[];return this.addLabelCheckBox(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow(E,a,j)},a.prototype.addStyleAlign=function(B,a,j){var E=[];return this.addLabelComboBox(E,B,function(B){return B.s(a)||"center"},function(B,j){B.s(a,j)},["left","center","right"],[H("editor.align.left"),H("editor.align.center"),H("editor.align.right")]),this.addFuncRow(E,a,j)},a.prototype.addStyleVAlign=function(B,a,j){var E=[];return this.addLabelComboBox(E,B,function(B){return B.s(a)||"bottom"},function(B,j){B.s(a,j)},["top","middle","bottom"],[H("editor.valign.top"),H("editor.valign.middle"),H("editor.valign.bottom")]),this.addFuncRow(E,a,j)},a.prototype.addStyleStretch=function(B,a,j){var E=[];return this.addLabelComboBox(E,B,function(B){return B.s(a)||"fill"},function(B,j){B.s(a,j)},["fill","uniform","centerUniform"],[H("editor.stretch.fill"),H("editor.stretch.uniform"),H("editor.stretch.centeruniform")]),this.addFuncRow(E,a,j)},a.prototype.addStyleComboBox=function(B,a,j,E,$,H){var K=[];return this.addLabelComboBox(K,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},j,E,$),this.addFuncRow(K,a,H)},a.prototype.addStyleImage=function(B,a,j){var E=[];return this.addLabelImage(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow(E,a,j)},a.prototype.addStyleURL=function(B,a,j){var E=[];return this.addLabelURL(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)}),this.addFuncRow(E,a,j)},a.prototype.addStylePattern=function(B,a,j){var E=[];return this.addLabelInput(E,B,function(B){return B.s(a)},function(B,j){B.s(a,j)},"pattern"),this.addFuncRow(E,a,j)},a.prototype.addStyleZeroToOne=function(B,a,j){return this.addStyleRange(B,a,0,1,.01,j)},a.prototype.addStylePosition=function(B,a,j){return this.addStyleRange(B,a,1,55,1,j)},a.prototype.addStyleRange=function(B,a,j,E,$,H){var K=[];return this.addLabelInput(K,B,function(B){var j=B.s(a);return null==j?E:j},function(B,$){void 0!==E&&$>E&&($=E),void 0!==j&&$<j&&($=j),B.s(a,$)},"number",$),this.addFuncRow(K,a,H)},a.prototype.addStyleRotation=function(B,a,j,E,$,H){var K=[];return this.addLabelInput(K,B,function(B){var j=B.s(a);return null==j?$:180/Math.PI*j},function(B,j){j=j*Math.PI/180,void 0!==$&&j>$&&(j=$),void 0!==E&&j<E&&(j=E),B.s(a,j)},"number",H||1),this.addFuncRow(K,a,j)},a.prototype.addStyleGradient=function(B,a,j,E,$){var H=[];return this.addLabelGradient(H,B,a,j,E),this.addFuncRow(H,a,$)},a.prototype.addLayoutProperties=function(){var B=this,a=this.addTitle("TitleNodeLayout");a.visible=function(B){return!!B.dataModel.a("fitSize")};var j=this.layoutGv=new ht.graph.GraphView,E=this.layoutNode=new ht.Node,$=!1;E.setImage("editor.layout.helper"),E.a("selectColor",Ra.config.color_select),j.dm().add(E),j.tx(50),j.ty(50),j.handleScroll=function(){},j.handlePinck=function(){},j.setScrollBarVisible(!1),j.setRectSelectable(!1),j.setPannable(!1),j.setMovableFunc(function(){return!1}),j.dm().md(function(a){$||(B.beginTransaction(),B.dataModel.sm().getSelection().each(function(B){"a:layout.v"===a.property?B.s("layout.v",a.newValue):"a:layout.h"===a.property&&B.s("layout.h",a.newValue)}),B.endTransaction())}),this.addRow(["",{element:j},""],[.1,100,.1],100),this.addUpdateHandler(function(a,j){var H=B.data;$=!0,E.a({"layout.v":H.s("layout.v"),"layout.h":H.s("layout.h")}),$=!1});var K=[];this.addLabelComboBox(K,H("editor.nodeLayout.h"),function(B){return B.s("layout.h")},function(B,a){B.s("layout.h",a)},Ra.consts.hLayoutValues,Ra.consts.hLayoutLabels),this.addFuncRow(K,"layout.h"),K=[],this.addLabelComboBox(K,H("editor.nodeLayout.v"),function(B){return B.s("layout.v")},function(B,a){B.s("layout.v",a)},Ra.consts.vLayoutValues,Ra.consts.vLayoutLabels),this.addFuncRow(K,"layout.v")},a}(YE),H$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.$35$=function(a){return a&&"s:shape"===a.property?void this.filterPropertiesLater():void B.prototype.$35$.call(this,a)},a.prototype.isTitleVisible=function(a){if(this.data){var j=this.data.s("shape");if("TitleArc"===a.title&&"arc"!==j)return!1}return B.prototype.isTitleVisible.call(this,a)},a.prototype.isPropertyVisible=function(a){if(this.data){var j=a.items.tag;if(j){var E=this.data.s("shape");if("shapeDepth"===j&&"rect"!==E)return!1;if("shapeCornerRadius"===j&&"roundRect"!==E)return!1;if("shapePolygonSide"===j&&"polygon"!==E)return!1}}return B.prototype.isPropertyVisible.call(this,a)},a.prototype.initForm=function(){B.prototype.initForm.call(this),this.$37$(),this.$38$(),this.addDashProperties(),this.addArcProperties()},a.prototype.$14$=function(){this.addStyleComboBox(H("editor.type"),"shape",Ra.consts.shapes.slice(1),Ra.consts.shapeLabels.slice(1),Ra.consts.shapeIcons.slice(1),"type")},a.prototype.$37$=function(){this.addTitle("TitleBackground"),this.addStyleColor(H("editor.background"),"shape.background","background"),this.addStyleImage(H("editor.repeatimage"),"shape.repeat.image","repeatImage"),this.addStyleGradient(H("editor.gradient"),"shape.gradient","shape.background","shape.gradient.color","gradient"),this.addStyleColor(H("editor.gradientcolor"),"shape.gradient.color","gradientColor"),this.addStyleZeroToOne(H("editor.clippercentage"),"shape.fill.clip.percentage","fillClipPercentage"),this.addStyleComboBox(H("editor.clipdirection"),"shape.fill.clip.direction",Ra.consts.clipDirections,Ra.consts.clipDirectionLabels,null,"fillClipDirection")},a.prototype.$38$=function(){this.addTitle("TitleBorder"),this.addStyleInput(H("editor.width"),"shape.border.width","number",1,"borderWidth"),this.addStyleCheckBox(H("editor.widthabsolute"),"shape.border.width.absolute","borderWidthAbsolute"),this.addStyleColor(H("editor.color"),"shape.border.color","borderColor"),this.addStylePattern(H("editor.pattern"),"shape.border.pattern","borderPattern"),this.addStyleCheckBox(H("editor.threed"),"shape.border.3d","border3d"),this.addStyleColor(H("editor.threedcolor"),"shape.border.3d.color","border3dColor"),this.addStyleComboBox(H("editor.cap"),"shape.border.cap",Ra.consts.caps,Ra.consts.capLabels,null,"borderCap"),this.addStyleComboBox(H("editor.join"),"shape.border.join",Ra.consts.joins,Ra.consts.joinLabels,null,"borderJoin"),this.addStyleInput(H("editor.depth"),"shape.depth","int",1,"depth").items.tag="shapeDepth",this.addStyleInput(H("editor.radius"),"shape.corner.radius","number",1,"cornerRadius").items.tag="shapeCornerRadius",this.addStyleInput(H("editor.sides"),"shape.polygon.side","int",1,"polygonSide").items.tag="shapePolygonSide"},a.prototype.addDashProperties=function(){this.addTitle("TitleDash"),this.addStyleCheckBox(H("editor.dash"),"shape.dash","dash"),this.addStylePattern(H("editor.pattern"),"shape.dash.pattern","dashPattern"),this.addStyleColor(H("editor.color"),"shape.dash.color","dashColor"),this.addStyleInput(H("editor.offset"),"shape.dash.offset","number",1,"dashOffset"),this.addStyleInput(H("editor.width"),"shape.dash.width","number",1,"dashWidth"),this.addStyleCheckBox(H("editor.threed"),"shape.dash.3d","dash3d"),this.addStyleColor(H("editor.threedcolor"),"shape.dash.3d.color","dash3dColor")},a.prototype.addArcProperties=function(){this.addTitle("TitleArc"),this.addStyleCheckBox(H("editor.arcoval"),"shape.arc.oval","arcOval"),this.addStyleCheckBox(H("editor.closed"),"shape.arc.close","arcClose"),this.addStyleRotation(H("editor.arcfrom"),"shape.arc.from","arcFrom"),this.addStyleRotation(H("editor.arcto"),"shape.arc.to","arcTo")},a}($$),K$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addTitle("TitleImage");var a=[];this.addLabelImage(a,H("editor.name"),function(B){return B.s("image")},function(B,a){kB(a)&&a.endsWith("[...]")||B.s("image",a)}),this.addButton(a,null,H("editor.resetsize"),"editor.resetsize.state",function(B){B instanceof ht.Node&&B.setSize(-1,-1)}),this.addFuncRow(a,"image","name"),this.addStyleColor(H("editor.color"),"body.color","color"),this.addStyleStretch(H("editor.stretch"),"image.stretch","stretch")},a}($$),C$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.$44$()},a.prototype.$44$=function(){this.addTitle("TitleBorder"),this.addStyleInput(H("editor.width"),"border_width","number",1,"border"),this.addStyleColor(H("editor.color"),"border_color","color")},a}($$),Z$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addBasicChartProperties()},a.prototype.addBasicChartProperties=function(){this.addTitle("TitleChart"),this.addStyleCheckBox(H("editor.text"),"chart.label","label"),this.addStyleColor(H("editor.color"),"chart.label.color","labelColor"),this.addStyleFont(H("editor.font"),"chart.label.font","labelFont")},a}($$),h$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addPieChartProperties()},a.prototype.addBasicChartProperties=function(){B.prototype.addBasicChartProperties.call(this),this.addStyleRotation(H("editor.rotation"),"chart.start.angle","startAngle"),this.addStyleCheckBox(H("editor.hollow"),"chart.hollow","hollow")},a.prototype.createChartIndexColumn=function(B){var a=this;return{name:B,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(B){return"chart.values"===B.getTag()?"number":"color"},getValue:function(j){if(a.data){var E=a.data.s(j.getTag());return E?E[B]:void 0}},setValue:function(j,E,$,H){var K=j.getTag(),C=function(a,j){var E=LB(a.s(K));E[B]=j,"chart.values"===K?AB(E):TB(E),a.s(K,E)};a.setValue(C,$)}}},a.prototype.addPieChartProperties=function(){var B=this,a=this.tableModel=new ht.DataModel,j=this.tablePane=new ej(a),E=this.tableView=j.getTableView();
j.getTableHeader().setMovable(!1),E.setEditable(!0),j.getView().style.border=Ra.config.color_line+" solid 1px";var $=[j];this.addRow($,[.1],ht.Default.widgetRowHeight+4*E.getRowHeight()).keys={name:"chartTable"};var K=new ht.Data,C=new ht.Data;K.setTag("chart.values"),C.setTag("chart.colors"),a.add(K),a.add(C),this.updateHandlers.push(function(){if(!$.hidden&&B.data){E.getColumnModel().clear(),j.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(a){if(!B.data)return 0;var j=B.data.s("chart.values");return j?j.length:0},setValue:function(a,j,E,$){var H=function(B,a){if(a>=0){var j=LB(B.s("chart.values"),a);AB(j),B.s("chart.values",j),j=LB(B.s("chart.colors"),a),TB(j),B.s("chart.colors",j)}};B.setValue(H,E)}},{tag:"binding",name:H("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(a,E,$,H){var K="chart.values"===a.getTag()?"values":"colors";return B.editor.funcView.toggle(j,a.getTag(),K,B),!1},drawCell:function(a,j,E,$,H,K,C,Z,h){var m=!!B.data.a(j.getTag()),J=ht.Default.getImage(m?"editor.bind":"editor.unbind"),O=m&&!E?Ra.config.color_select:Ra.config.color_dark;M(a,J,"centerUniform",H,K,C,Z,j,h,O)}}]);for(var a=B.data.s("chart.values"),K=a?a.length:0,C=0;C<K;C++)j.addColumns([B.createChartIndexColumn(C)])}})},a}(Z$),m$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addOneDimensionalProperties()},a.prototype.createChartIndexColumn=function(B){var a=this;return{name:B,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,getValueType:function(B){return"values"===B.getTag()?"number":"color"},getValue:function(j){if(a.data){var E=dB(a.data.s("chart.series"));if(E&&E[0]){var $=dB(E[0][j.getTag()]);return $?$[B]:void 0}}},setValue:function(E,$,H,K){var C=E.getTag(),Z=function(a,E){var $=a.s("chart.series");if($){var H=j($),K=dB(H);if(K[0]){var Z=dB(K[0][C]);Z&&Z[B]!==E&&(Z[B]=E,"values"===C?AB(Z):TB(Z),a.s("chart.series",H))}}};a.setValue(Z,H)}}},a.prototype.addOneDimensionalProperties=function(){var B=this,a=this.tableModel=new ht.DataModel,E=this.tablePane=new ej(a),$=this.tableView=E.getTableView();E.getTableHeader().setMovable(!1),$.setEditable(!0),E.getView().style.border=Ra.config.color_line+" solid 1px";var K=[E];this.addRow(K,[.1],ht.Default.widgetRowHeight+4*$.getRowHeight()).keys={name:"chartTable"};var C=new ht.Data,Z=new ht.Data;C.setTag("values"),Z.setTag("colors"),a.add(C),a.add(Z),this.updateHandlers.push(function(){if(!K.hidden&&B.data){$.getColumnModel().clear(),E.addColumns([{name:H("editor.length"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"int",getValue:function(a){if(!B.data)return 0;var j=dB(B.data.s("chart.series"));if(!j)return 0;if(!j[0])return 0;var E=dB(j[0].values);return E?E.length:0},setValue:function(a,E,$,H){var K=function(B,a){if(a>=0){var E=B.s("chart.series"),$=E?j(E):[],H=dB($);H[0]||(H[0]={});var K=H[0];K.values||(K.values=[]),K.colors||(K.colors=[]);var C=dB(K.values),Z=dB(K.colors);a===C.length&&a===Z.length||(C.length=a,Z.length=a,AB(C),TB(Z),B.s("chart.series",$))}};B.setValue(K,$)}},{tag:"binding",name:H("editor.binding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(a,$,H,K){var C=a.getTag(),Z=function(){return _a(B.data,C)},h=function(a){B.setValue(function(B,E){var $=B.s("chart.series");if($){var H=j($),K=dB(H);if(K[0]){var Z=dB(K[0][C]);K[0][C]=a?{value:Z,func:a}:Z,B.s("chart.series",H)}}},a)};return B.editor.funcView.toggle(E,C,C,B,Z,h),!1},drawCell:function(a,j,E,$,H,K,C,Z,h){var m=!!_a(B.data,j.getTag()),J=ht.Default.getImage(m?"editor.bind":"editor.unbind"),O=m&&!E?Ra.config.color_select:Ra.config.color_dark;M(a,J,"centerUniform",H,K,C,Z,j,h,O)}}]);for(var a=Pa(B.data,"values"),C=a?a.length:0,Z=0;Z<C;Z++)E.addColumns([B.createChartIndexColumn(Z)])}})},a}(Z$),J$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addSeriesChartProperties()},a.prototype.addSeriesChartProperties=function(){var B=this,a=[],E=function(B){var a=B.s("chart.series");return a?a.length:0},$=function(B,a){if(a>=0){var E=B.s("chart.series"),$=E?j(E):[],H=dB($);if(H.length!==a){H.length=a;for(var K=void 0,C=0;C<a;C++){H[C]||(H[C]={});var Z=H[C];Z.values||(Z.values=[]),Z.color||(Z.color=ht.Color.chart[C%ht.Color.chart.length]);var h=dB(Z.values);dB(Z.colors);0===C?K=h.length:h.length=K,AB(h)}B.s("chart.series",$)}}};this.addLabelInput(a,H("editor.series"),E,$,"int",1),E=function(B){var a=B.s("chart.series");if(a){var j=a[0];if(j){var E=dB(j.values);return E?E.length:0}}return 0},$=function(B,a){if(a>=0){var E=B.s("chart.series"),$=E?j(E):[],H=dB($);if(H.length){for(var K=0;K<H.length;K++){H[K]||(H[K]={});var C=H[K];C.values||(C.values=[]);var Z=dB(C.values);if(Z.length===a)return;C.color||(C.color=ht.Color.chart[K%ht.Color.chart.length]);dB(C.colors);Z.length=a,AB(Z)}B.s("chart.series",$)}}},this.addLabelInput(a,H("editor.length"),E,$,"int",1),this.addRow(a,[Ra.config.indent,.1,Ra.config.indent2,.1]).keys={name:"chartSeries"};var K=this.tableModel=new ht.DataModel,C=this.tablePane=new ej(K),Z=this.tableView=C.getTableView();C.getTableHeader().setMovable(!1),Z.setEditable(!0),C.getView().style.border=Ra.config.color_line+" solid 1px";var h=[C];this.addRow(h,[.1],160).keys={name:"chartTable"},this.updateHandlers.push(function(){if(!h.hidden&&B.data){K.clear(),Z.getColumnModel().clear();var a=B.data.s("chart.series");if(a)for(var E=0;E<a.length;E++){var $=new ht.Data;$.serie=a[E],$.index=E,K.add($)}if(C.addColumns([{name:H("editor.index"),width:50,align:"center",sortable:!1,clickable:!1,valueType:"int",getValue:function(B){return B.index}},{tag:"binding",name:H("editor.colorbinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(a,E,$,H){var K=a.index,Z=function(){return xB(a.serie.color)},h=function(a){B.setValue(function(B,E){var $=B.s("chart.series");if($){var H=j($),C=dB(H),Z=C[K];if(Z){var h=dB(Z.color);Z.color=a?{value:h,func:a}:h,B.s("chart.series",H)}}},a)};return B.editor.funcView.toggle(C,"values","values",B,Z,h),!1},drawCell:function(B,a,j,E,$,H,K,C,Z){var h=!!xB(a.serie.color),m=ht.Default.getImage(h?"editor.bind":"editor.unbind"),J=h&&!j?Ra.config.color_select:Ra.config.color_dark;M(B,m,"centerUniform",$,H,K,C,a,Z,J)}},{name:H("editor.color"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"color",getValue:function(B){return dB(B.serie.color)},setValue:function(a,E,$,H){var K=a.index,C=dB(a.serie.color);if($&&C!==$){var Z=function(B,a){var E=B.s("chart.series");if(E){var $=j(E),H=dB($),C=H[K];if(C){var Z=xB(C.color);C.color=Z?{value:a,func:Z}:a,B.s("chart.series",$)}}};B.setValue(Z,$)}}},{tag:"binding",name:H("editor.valuebinding"),width:50,align:"center",editable:!0,sortable:!1,clickable:!1,isCellEditable:function(a,E,$,H){var K=a.index,Z=function(){return xB(a.serie.values)},h=function(a){B.setValue(function(B,E){var $=B.s("chart.series");if($){var H=j($),C=dB(H),Z=C[K];if(Z){var h=dB(Z.values);Z.values=a?{value:h,func:a}:h,B.s("chart.series",H)}}},a)};return B.editor.funcView.toggle(C,"values","values",B,Z,h),!1},drawCell:function(B,a,j,E,$,H,K,C,Z){var h=!!xB(a.serie.values),m=ht.Default.getImage(h?"editor.bind":"editor.unbind"),J=h&&!j?Ra.config.color_select:Ra.config.color_dark;M(B,m,"centerUniform",$,H,K,C,a,Z,J)}}]),a){var m=a[0];if(m){var J=dB(m.values);if(J)for(var O=0;O<J.length;O++)C.addColumns([B.createChartIndexColumn(O)])}}}})},a.prototype.createChartIndexColumn=function(B){var a=this;return{name:B,width:50,align:"center",editable:!0,sortable:!1,clickable:!1,valueType:"number",getValue:function(a){var j=dB(a.serie.values);return j?j[B]:void 0},setValue:function(E,$,H,K){var C=E.index,Z=function(a,E){var $=a.s("chart.series");if($){var H=j($),K=dB(H);if(K[C]){var Z=dB(K[C].values);Z&&Z[B]!==E&&(Z[B]=E,a.s("chart.series",H))}}};a.setValue(Z,H)}}},a}(Z$),O$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.addBasicChartProperties=function(){B.prototype.addBasicChartProperties.call(this),this.addStyleComboBox(H("editor.type"),"chart.type",Ra.consts.columnChartTypes,Ra.consts.columnChartTypeLabels,null,"type")},a.prototype.$14$=function(){},a}(J$),k$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this)},a}(J$),s$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.$27$(),B.prototype.initForm.call(this)},a.prototype.isTitleVisible=function(a){return!("TitleEditingPoint"===a.title&&!this.editor.pointsEditingMode)&&B.prototype.isTitleVisible.call(this,a)},a.prototype.$14$=function(){var B=[];this.addLabelInput(B,H("editor.type"),function(B){return B.compType}),this.addRow(B,[Ra.config.indent,.1]).keys={name:"type"}},a.prototype.$37$=function(){B.prototype.$37$.call(this),this.addStyleComboBox(H("editor.fillrule"),"shape.fill.rule",Ra.consts.fillRules,Ra.consts.fillRuleLabels,null,"fillRule")},a.prototype.$38$=function(){B.prototype.$38$.call(this);var a=[];this.addLabelCheckBox(a,H("editor.closed"),function(B){return B.isClosePath()},function(B,a){B instanceof ht.Shape&&B.setClosePath(a)}),this.addFuncRow(a,"name")},a}(H$),z$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addTitle("TitleText"),this.addStyleLabel(H("editor.text"),"text","text"),this.addStyleAlign(H("editor.align"),"text.align","align"),this.addStyleVAlign(H("editor.valign"),"text.vAlign","vAlign"),this.addStyleColor(H("editor.color"),"text.color","color"),this.addStyleFont(H("editor.font"),"text.font","font")},a.prototype.$20$=function(){this.addTitle("TitleShadow"),this.addStyleCheckBox(H("editor.shadow"),"text.shadow","shadow"),this.addStyleColor(H("editor.shadowcolor"),"text.shadow.color","shadowColor"),this.addStyleInput(H("editor.shadowblur"),"text.shadow.blur","number",1,"shadowblur"),this.addStyleInput(H("editor.shadowoffsetx"),"text.shadow.offset.x","number",1,"shadowOffsetX"),this.addStyleInput(H("editor.shadowoffsety"),"text.shadow.offset.y","number",1,"shadowOffsetYs")},a}($$),o$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.$14$=function(){var B=[];this.addLabelInput(B,H("editor.type"),function(B){return"function"}),this.addFuncRow(B,"type")},a}($$),c$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){B.prototype.initForm.call(this),this.addComponent()},a.prototype.$14$=function(){},a.prototype.addComponent=function(){var B=this;this.addTitle("TitleComponent");var a=[];this.addLabelInput(a,H("editor.type"),function(a){var j=a.s("type");return B.$43$(a.properties),j},function(B,a){B.s("type",a)},null,null,!1);var j=new ht.widget.Image;j.vectorDataBindingDisabled=!0,this.updateHandlers.push(function(){if(!a.hidden){var E=B.data?B.data.s("type"):null;B.$43$(B.data.properties),j.setIcon(E?OB(E):null),j.compType=E}});var E=j.getView();E.style.cursor="pointer";var $=function(a){a.preventDefault(),F(a)?B.editor.open(j.compType):B.editor.selectFileNode(j.compType)};E.addEventListener("mousedown",$,!1),E.addEventListener("touchstart",$,!1),a.push(j),this.addFuncRow(a,"type")},a.prototype.$43$=function(B){var a=this;this.properties!==B&&(this.pendingProperties=B,this._updateComponentLater||(this._updateComponentLater=!0,requestAnimationFrame(function(){a.$61$()})))},a.prototype.$61$=function(){if(this._updateComponentLater=!1,this.properties===this.pendingProperties)return void(this.pendingProperties=null);if(this._rows=this.$47$,this.removeRows(this.$36$),this.$36$=[],this.properties=this.pendingProperties,this.properties)for(var B in this.properties)this.addProperty(B,this.properties[B]);this.$47$=this._rows,this.filterProperties()},a.prototype.addProperty=function(B,a){var j=Ra.config.valueTypes[a.valueType];if(!j)return this.editor.fireEvent("error",{message:"Wrong value type:"+a.valueType}),!1;var E=H(a.name)||B,$=void 0,K=void 0,C=void 0;if(a.extraInfo&&a.extraInfo.enum&&($=a.extraInfo.enum.values,K=a.extraInfo.enum.labels,C=a.extraInfo.enum.icons),$)this.addStyleComboBox(E,B,$,K,C,B);else if("int"===j.type||"number"===j.type){var Z=(j.max,j.min,function(a){return a.s(B)}),h=function(a,j){a.s(B,j)},m=[];j.angle?this.addLabelRotation(m,E,Z,h,j.min,j.max,j.step):this.addLabelRange(m,E,Z,h,j.min,j.max,j.step,j.type),this.addFuncRow(m,B,B)}else if("color"===j.type)this.addStyleColor(E,B,B);else if("boolean"===j.type)this.addStyleCheckBox(E,B,B);else if("enum"===j.type)this.addStyleComboBox(E,B,j.values,j.labels,j.icons,B);else if("multiline"===j.type)this.addStyleMultiline(E,B,B,j.rows);else if("font"===j.type)this.addStyleFont(E,B,B,j.rows);else if("image"===j.type)this.addStyleImage(E,B,B);else if("url"===j.type)this.addStyleURL(E,B,B);else if("colorArray"===j.type)this.addStyleArray(E,B,B,"color",j.rows);else if("numberArray"===j.type)this.addStyleArray(E,B,B,"number",j.rows);else if("stringArray"===j.type)this.addStyleArray(E,B,B,"string",j.rows);else if("objectArray"===j.type)this.addStyleArray(E,B,B,"object",j.rows);else if("function"===j.type)this.addStyleFunction(E,B,B);else if("custom"===j.type){var J=function(a){return a.s(B)},O=function(a,j){a.s(B,j)},k=[];j.buildUI(this,k,E,J,O),this.addFuncRow(k,B,B)}else"object"===j.type?this.addStyleObject(E,B,B):this.addStyleInput(E,B,null,null,B);return this.$36$.push(this._rows[this._rows.length-1]),!0},a}($$),U$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.$27$(),this.addTitle("TitleBasic"),this.$14$(),this.$15$()},a.prototype.isTitleVisible=function(a){return!("TitleEditingPoint"===a.title&&!this.editor.pointsEditingMode)&&B.prototype.isTitleVisible.call(this,a)},a}($$),I$=function(B){function a(j,E){return Wa(this,a),Ga(this,B.call(this,j,E))}return ra(a,B),a.prototype.initForm=function(){this.addTitle("TitleBasic"),this.$14$(),this.$15$()},a}($$),X$=function(B){function a(j){Wa(this,a);var E=Ga(this,B.call(this));return E.editor=j,E.getView().style.background=Ra.config.color_pane,E}return ra(a,B),a.prototype.handleDataModelPropertyChange=function(B){var a=this.inspector;a&&a.global&&a.$35$(B)},a.prototype.handleDataModelChange=function(B){var a=this.inspector;a&&a.global&&a.$35$()},a.prototype.handleDataPropertyChange=function(B){var a=this.inspector;a&&!a.global&&a.data===B.data&&a.$35$(B)},a.prototype.handleSelectionChange=function(B){this.updateInspector(),this.inspector&&this.inspector.updateProperties()},a.prototype.$42$=function(B){var a=this.inspector;a&&("pointsEditingMode"===B.property?a.filterPropertiesLater():"shapePointStatus"===B.property&&a.editingPointButtons&&a.editingPointButtons.forEach(function(a){a.setSelected(a.statusValue===B.newValue),a.setBorderColor(a.isSelected()?Ra.config.color_line:null)}))},a.prototype.$6$=function(B){this.dataModel&&(this.dataModel.removeDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.removePropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.removeDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ums(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().ump(this.$42$,this)),B?(this.currentView=B.getView(),this.dataModel=this.currentView.dm,this.dataModel.addDataModelChangeListener(this.handleDataModelChange,this),this.dataModel.addPropertyChangeListener(this.handleDataModelPropertyChange,this),this.dataModel.addDataPropertyChangeListener(this.handleDataPropertyChange,this),this.dataModel.sm().ms(this.handleSelectionChange,this),this.currentView.graphView.getEditInteractor().mp(this.$42$,this)):(this.currentView=null,this.dataModel=null),this.$95$()},a.prototype.$95$=function(){var B=this;this._updateInspectorLater||(this._updateInspectorLater=!0,requestAnimationFrame(function(){B.updateInspector()}))},a.prototype.updateInspector=function(){if(this._updateInspectorLater=!1,this.dataModel){var B=this.dataModel.sm().ld();if(B)if(this.currentView instanceof cE)if(B instanceof Ij)this.inspector=this.clipInspector;else if(B instanceof Xj)this.inspector=this.restoreInspector;else if(B instanceof zj)this.inspector=this.basicInspector;else if(B instanceof Lj)this.inspector=this.borderInspector;else if(B instanceof cj)this.inspector=this.imageInspector;else if(B instanceof BE)this.inspector=this.pieChartInspector;else if(B instanceof aE){var a=dB(B.s("chart.series"));a&&a.length<=1&&a[0].colors?this.inspector=this.oneDimensionalColumnChartInspector:this.inspector=this.columnChartInspector}else B instanceof jE?this.inspector=this.lineChartInspector:B instanceof oj?this.inspector=this.shapeInspector:B instanceof Uj?this.inspector=this.textInspector:B instanceof zE?this.inspector=this.funcTypeInspector:B instanceof Tj&&(this.inspector=this.compTypeInspector);else B instanceof ht.Shape?this.inspector=this.htShapeInspector:B instanceof ht.Edge?this.inspector=this.htEdgeInspector:B instanceof ht.Group?this.inspector=this.htGroupInspector:B instanceof ht.Text?this.inspector=this.htTextInspector:B instanceof ht.RefGraph?this.inspector=this.htRefGraphInspector:B instanceof ht.Block?this.inspector=this.htBlockInspector:B instanceof ht.Node?this.inspector=this.htNodeInspector:this.inspector=this.htDataInspector;else this.currentView instanceof cE?this.inspector=this.symbolInspector:this.inspector=this.displayInspector}else this.inspector=null},ta(a,[{key:"basicInspector",get:function(){return this._basicInspector||(this._basicInspector=new H$(this.editor,"basic")),this._basicInspector}},{key:"borderInspector",get:function(){return this._borderInspector||(this._borderInspector=new C$(this.editor,"border")),this._borderInspector}},{key:"clipInspector",get:function(){return this._clipInspector||(this._clipInspector=new U$(this.editor,"clip")),this._clipInspector}},{key:"restoreInspector",get:function(){return this._restoreInspector||(this._restoreInspector=new I$(this.editor,"restore")),this._restoreInspector}},{key:"imageInspector",get:function(){return this._imageInspector||(this._imageInspector=new K$(this.editor,"image")),this._imageInspector}},{key:"pieChartInspector",get:function(){return this._pieChartInspector||(this._pieChartInspector=new h$(this.editor,"pieChart")),this._pieChartInspector}},{key:"oneDimensionalColumnChartInspector",get:function(){return this._oneDimensionalColumnChartInspector||(this._oneDimensionalColumnChartInspector=new m$(this.editor,"oneDimensionalColumnChartInspector")),this._oneDimensionalColumnChartInspector}},{key:"columnChartInspector",get:function(){return this._columnChartInspector||(this._columnChartInspector=new O$(this.editor,"columnChart")),this._columnChartInspector}},{key:"lineChartInspector",get:function(){return this._lineChartInspector||(this._lineChartInspector=new k$(this.editor,"lineChart")),this._lineChartInspector}},{key:"shapeInspector",get:function(){return this._shapeInspector||(this._shapeInspector=new s$(this.editor,"shape")),this._shapeInspector}},{key:"textInspector",get:function(){return this._textInspector||(this._textInspector=new z$(this.editor,"text")),this._textInspector}},{key:"funcTypeInspector",get:function(){return this._funcTypeInspector||(this._funcTypeInspector=new o$(this.editor,"func")),this._funcTypeInspector}},{key:"compTypeInspector",get:function(){return this._compTypeInspector||(this._compTypeInspector=new c$(this.editor,"comp")),this._compTypeInspector}},{key:"htShapeInspector",get:function(){return this._htShapeInspector||(this._htShapeInspector=new B$(this.editor,"Shape")),this._htShapeInspector}},{key:"htBlockInspector",get:function(){return this._htBlockInspector||(this._htBlockInspector=new a$(this.editor,"Block")),this._htBlockInspector}},{key:"htRefGraphInspector",get:function(){return this._htRefGraphInspector||(this._htRefGraphInspector=new j$(this.editor,"RefGraph")),this._htRefGraphInspector}},{key:"htGroupInspector",get:function(){return this._htGroupInspector||(this._htGroupInspector=new LE(this.editor,"Group")),this._htGroupInspector}},{key:"htEdgeInspector",get:function(){return this._htEdgeInspector||(this._htEdgeInspector=new TE(this.editor,"Edge")),this._htEdgeInspector}},{key:"htNodeInspector",get:function(){return this._htNodeInspector||(this._htNodeInspector=new qE(this.editor,"Node")),this._htNodeInspector}},{key:"htTextInspector",get:function(){return this._htTextInspector||(this._htTextInspector=new E$(this.editor,"Text")),this._htTextInspector}},{key:"htDataInspector",get:function(){return this._htDataInspector||(this._htDataInspector=new QE(this.editor,"Data")),this._htDataInspector}},{key:"displayInspector",get:function(){return this._displayInspector||(this._displayInspector=new RE(this.editor,"display")),this._displayInspector}},{key:"symbolInspector",get:function(){return this._symbolInspector||(this._symbolInspector=new ME(this.editor,"symbol")),this._symbolInspector}},{key:"inspector",get:function(){return this.getCenterView()},set:function(B){var a=this.getCenterView();B?(B.dataModel=this.dataModel,this.dataModel&&(B.data=this.dataModel.sm().ld()),this.getCenterView()!==B&&this.setCenterView(B),B.filterPropertiesLater()):this.setCenterView(null),B===a||null==B&&null==a||this.editor.fireEvent("inspectorUpdated",{inspector:B,oldInspector:a})}}]),a}(Fj),F$=function(){function B(a){Wa(this,B),this.editor=a}return B.prototype.showTip=function(B,a){this.tip.innerHTML=B,this.tip.parentNode!==document.body&&ht.Default.appendToScreen(this.tip);var j=_(a);this.tip.style.left=j.x+15+"px",this.tip.style.top=j.y+"px"},B.prototype.hideTip=function(){W(this.tip)},B.prototype.clearDropView=function(B,a){this._dropView&&(this._dropView.handleCrossDrag(B,"exit",a),this._dropView=null)},B.prototype.crossDrag=function(B,a){var j=this._dropView,E=this.$96$(B,a);j!==E?(j&&j.handleCrossDrag(B,"exit",a),E&&E.handleCrossDrag(B,"enter",a)):E&&E.handleCrossDrag(B,"over",a),this._dropView=E},B.prototype.crossDrop=function(B,a){this._dropView&&(this._dropView.handleCrossDrag(B,"drop",a),this._dropView=null)},B.prototype.crossCancel=function(B,a){this._dropView&&(this._dropView.handleCrossDrag(B,"cancel",a),this._dropView=null)},B.prototype.$96$=function(B,a){for(var j=P(B);j&&!(j._ht&&j._ht.isDroppable&&j._ht.isDroppable(B,a));)j=j.parentNode;return j?j._ht:null},ta(B,[{key:"tip",get:function(){if(!this._tip){this._tip=Y(),this._tip.className="ht-editor-dnd-tip";var B=this._tip.style;B.whiteSpace="nowrap",B.color=Ra.config.color_light,B.background=Ra.config.color_transparent,B.font=ht.Default.labelFont,B.padding="4px",B.borderRadius="4px",B.position="absolute",B.zIndex=1e4}return this._tip}}]),B}();Ra.DND=F$;var V$=function(){function B(a,j){Wa(this,B),this.editor=a,this.dnd=a.dnd,this._dragInfo={view:this},j&&(j.addEventListener("dragenter",this.handle_dragenter.bind(this),!1),j.addEventListener("dragover",this.handle_dragover.bind(this),!1),j.addEventListener("dragleave",this.handle_dragleave.bind(this),!1),j.addEventListener("drop",this.handle_drop.bind(this),!1),j.addEventListener("dragexit",this.handle_dragexit.bind(this),!1),j.addEventListener("dragend",this.handle_dragend.bind(this),!1)),this.isDroppableToDisplayView=!0,this.isDroppableToSymbolView=!0}return B.prototype.handle_dragenter=function(B){A(B),B.stopPropagation(),this.dnd.crossDrag(B,this._dragInfo)},B.prototype.handle_dragover=function(B){A(B),B.stopPropagation(),this.dnd.crossDrag(B,this._dragInfo)},B.prototype.handle_dragleave=function(B){A(B),B.stopPropagation(),this.dnd.crossCancel(B,this._dragInfo)},B.prototype.handle_dragexit=function(B){A(B),B.stopPropagation(),this.dnd.crossCancel(B,this._dragInfo)},B.prototype.handle_dragend=function(B){A(B),B.stopPropagation(),this.dnd.crossCancel(B,this._dragInfo)},B.prototype.handle_drop=function(B){A(B),B.stopPropagation(),this.dnd.crossDrop(B,this._dragInfo)},B}();Ra.DNDFromOutside=V$;var w$=function(){function B(a){Wa(this,B),this.params=a||{},this.$39$=this.params.$39$,this._eventNotifier=new ht.Notifier;var j=ht.Default.getClass(Ra.config.serviceClass)||vj;this.$40$=new j(this.handleServiceEvent.bind(this),this),this.emptyFunc=function(){}}return B.prototype.addEventListener=function(B,a,j){this._eventNotifier.add(B,a,j)},B.prototype.removeEventListener=function(B,a){this._eventNotifier.remove(B,a)},B.prototype.fireEvent=function(B,a){a=a||{},Ra.config.handleEvent&&Ra.config.handleEvent(this,B,a);var j="on"+B.charAt(0).toUpperCase()+B.slice(1);Ra.config[j]&&Ra.config[j](this,a),this.params&&this.params[j]&&this.params[j](this,a),this._eventNotifier.fire({editor:this,type:B,params:a})},B.prototype.handleServiceEvent=function(B){if("connected"===B.type)this.init&&(this.init(),this.init=null);else if("fileChanged"===B.type){var a=B.path;b(a)&&this.$101$(),T(a)?this.requestDisplays():L(a)?this.requestSymbols():BB(a)?this.requestComponents():aB(a)?this.requestScenes():jB(a)?this.requestModels():EB(a)&&this.requestAssets()}else"download"===B.type?this.downloadFile(B.path):"confirm"===B.type&&this.requestImport(B.path);this.fireEvent(B.type,B)},B.prototype.onPropertyChanged=function(B){"rulerEnabled"!==B.property&&"gridEnabled"!==B.property||this.rightToolbar.iv()},B.prototype.init=function(){this._inspectorCompact=!C(Ra.config.compactFilter),this.menus=[],this.cloneInfo={type:null,funcArray:[],jsonArray:[]},this.initSID(),this.$7$(),this.requestDisplays(),this.requestSymbols(),this.requestComponents(),this.requestScenes(),this.requestModels(),this.requestAssets(),this.$39$&&this.$39$.addEventListener("keydown",this.handleKeydown.bind(this),!1),this.dnd=new F$(this),this.dndFromOutside=new V$(this,this.$39$),this.fireEvent("editorCreated"),this.fireEvent("mainMenuCreated"),this.fireEvent("mainToolbarCreated"),this.fireEvent("rightToolbarCreated");var B=this.params.open||a("hteditor");B&&(HB(B)?this._pendingOpenJSON=B:"newdisplay"===B?this.newDisplayView():"newsymbol"===B?this.newSymbolView():"newcomponent"===B&&this.newComponent())},B.prototype.$7$=function(){this.mainTabView=new UE(this),this.funcView=new bE(this),this.eventView=new SE(this),this.functionView=new vE(this),this.objectView=new gE(this),this.textView=new iE(this),this.fontView=new dE(this),this.iconsView=new tE(this),this.componentView=new lE(this),this.messageView=new rE(this),this.attachPointsView=new GE(this),this.fontConverterOptionView=new fE(this),this.$8$(),this.$9$(),this.$11$(),this.$10$(),this.leftSplitView=new lj(this.leftTopTabView,this.mainTabView,"h",Ra.config.leftSplitViewPosition),this.rightSplitView=new lj(this.rightTopBorderPane,this.rightBottomTabView,"v",Ra.config.rightSplitViewPosition),this.mainSplitView=new lj(this.leftSplitView,this.rightSplitView,"h",Ra.config.mainSplitViewPosition),this.mainPane=new Fj,this.mainPane.setTopView(this.topBorderPane),this.mainPane.setCenterView(this.mainSplitView),DB(this.mainPane,this.$39$),this.mainPane.validateImpl()},B.prototype.initSID=function(){var B=window.location.href.match("sid=([0-9a-z-]*)");B&&(this.sid=B[1])},B.prototype.$8$=function(){var B=this;this.mainToolbar=new PE(this),this.rightToolbar=new _E(this),this.topBorderPane=new Fj,this.topBorderPane.setCenterView(this.mainToolbar),this.topBorderPane.setRightView(this.rightToolbar),this.topBorderPane.setHeight(28),this.rightToolbar.onSumWidthChanged=function(){B.topBorderPane.setRightWidth(B.rightToolbar.getSumWidth())}},B.prototype.$9$=function(){this.displays=new Yj(this,Ra.config.displaysEditable),this.symbols=new Rj(this,Ra.config.symbolsEditable),this.components=new Nj(this,Ra.config.componentsEditable),this.scenes=new Mj(this,Ra.config.scenesEditable),this.models=new Qj(this,Ra.config.modelsEditable),this.assets=new uj(this,Ra.config.assetsEditable),this.leftTopTabView=new nj,this.displaysTab=this.leftTopTabView.add(H("editor.displays"),this.displays,!1,Ra.config.displaysVisible),this.symbolsTab=this.leftTopTabView.add(H("editor.symbols"),this.symbols,!1,Ra.config.symbolsVisible),this.componentsTab=this.leftTopTabView.add(H("editor.components"),this.components,!1,Ra.config.componentsVisible),this.scenesTab=this.leftTopTabView.add(H("editor.scenes"),this.scenes,!1,Ra.config.scenesVisible),this.modelsTab=this.leftTopTabView.add(H("editor.models"),this.models,!1,Ra.config.modelsVisible),this.assetsTab=this.leftTopTabView.add(H("editor.assets"),this.assets,!1,Ra.config.assetsVisible),this.leftTopTabView.selectByIndex(0)},B.prototype.$10$=function(){this.inspectorTool=new IE(this),this.inspectorPane=new X$(this),this.rightTopBorderPane=new Fj,this.rightTopBorderPane.setTopView(this.inspectorTool),this.rightTopBorderPane.setCenterView(this.inspectorPane),this.rightTopBorderPane.setTopHeight(ht.Default.widgetHeaderHeight+6)},B.prototype.$11$=function(){var B=this;this.listPane=new FE(this),this.layerPane=new VE(this),this.overview=new qj(this),this.dataView=new XE(this),this.rightBottomTabView=new nj,this.listPaneTab=this.rightBottomTabView.add(H("editor.list"),this.listPane,!0),this.layerTab=this.rightBottomTabView.add(H("editor.layer"),this.layerPane),this.overviewTab=this.rightBottomTabView.add(H("editor.overview"),this.overview),this.dataViewTab=this.rightBottomTabView.add(H("editor.data"),this.dataView);var a=this.rightBottomTabView.getTabModel().sm();a.ms(function(){var j=a.ld();B.dataView.visible=j.getView()===B.dataView,B.overview.setAutoUpdate(j.getView()===B.overview)})},B.prototype.newFolder=function(B){var a=this,j=this.explorer;j&&!function(){var E=B.sm().ld();B!==B.explorer.list||E&&E.fileType===ua||(E=B.explorer.tree.sm().ld()),E&&!j.isAccordionMode()||(E=B.explorer.rootNode);var $=H("editor.inputnewfoldername");YB($,"",{nullable:!1,trim:!0,maxLength:Ra.config.maxFileNameLength,checkFunc:Ra.config.checkFileName},function(B,j){if("ok"===j){var $=E.url+"/"+B;if(a.getFileNode($))return void RB(H("editor.filenameconflict"),$,function(){});a.request("mkdir",$,function(B){})}})}()},B.prototype.getFileNode=function(B){for(var a=this.leftTopTabView.getTabModel().getDatas(),j=0;j<a.size();j++){var E=a.get(j);if(E.getView()instanceof yj){var $=E.getView().dataModel.getDataById(B);if($)return $}}return null},B.prototype.selectFileNode=function(B){for(var a=this,j=this.leftTopTabView.getTabModel().getDatas(),E=0;E<j.size();E++){var $=j.get(E);if($.getView()instanceof yj){var H=function(){var j=$.getView(),E=j.dataModel.getDataById(B);if(E)return a.leftTopTabView.getTabModel().sm().ss($),j.isAccordionMode()?(E.fileType===ua?j.accordion.sm().ss(E):(E.getParent().expanded=!0,j.accordion.sm().ss(E)),j.accordion.ivm()):E.fileType===ua?(j.tree.sm().ss(E),setTimeout(function(){j.tree.makeVisible(E)},500)):(j.tree.sm().ss(E.getParent()),j.list.sm().ss(E),setTimeout(function(){j.tree.makeVisible(E.getParent()),j.list.makeVisible(E)},500)),delete a._pendingSelectURL,{v:void 0}}();if("object"==typeof H)return H.v}}this._pendingSelectURL=B},B.prototype.renameFile=function(B,a,j){var E=this;if(!B||B.$34$||!a)return!1;var $=a;HB(B.getName())&&!HB(a)&&(a+=".json");var K=B.path+"/"+a;if(a=Ra.config.checkFileName(a,K),!a)return RB(H("editor.invalidinput"),$,function(){}),!1;if(a.length>Ra.config.maxFileNameLength+5)return RB(H("editor.inputmax"),a,function(){}),!1;if(B.getName()===a)return!1;if(this.getFileNode(K))return RB(H("editor.filenameconflict"),K,function(){}),!1;B.$34$=K;var C={old:B.url,new:B.$34$,fileType:B.fileType};HB(C.old)&&this.request("rename",{old:OB(C.old),new:OB(C.new),fileType:qa},function(B){}),this.request("rename",C,function($){return $?(E.mainTabView.getTabModel().each(function(j){j.getTag()===B.url&&(j.setTag(B.$34$),
j.getView().url=B.$34$,j.setName(i(a)))}),j(),!0):(delete B.$34$,!1)})},B.prototype.moveFile=function(B,a){if(B&&a&&!B.$34$&&!a.$34$){var j={data:B,url:B.url,parent:a};if(this.fireEvent("fileMoving",j),!j.preventDefault){var E=B.getParent();if(B.setParent(a),E!==B.getParent()){B.$34$=a.url+"/"+B.getName();var $={old:B.url,new:B.$34$};HB($.old)&&this.request("rename",{old:OB($.old),new:OB($.new)},function(B){}),this.request("rename",$,function(B){})}}}},B.prototype.removeFiles=function(B){var a=this;B.forEach(function(B){if(!B.$34$){var j=B.url||B;HB(j)&&a.request("remove",OB(j),function(B){}),a.request("remove",j,function(B){})}})},B.prototype.requestBase64=function(B,a){this.request("source",{url:B,encoding:"base64",prefix:"data:;base64,"},a)},B.prototype.request=function(B,a,j,E){var $=this;j=j||this.emptyFunc,E?setTimeout(function(){$.$40$.request(B,a,j)},E):this.$40$.request(B,a,j)},B.prototype.requestDisplays=function(){var B=this;this._requestingDisplays||(this.request("explore","/displays",function(a){B._requestingDisplays=!1,B.displays.parse(a),B._pendingOpenJSON&&T(B._pendingOpenJSON)&&(B.displays.dataModel.getDataById(B._pendingOpenJSON)?(B.open(B._pendingOpenJSON),B.selectFileNode(B._pendingOpenJSON)):Ra.config.newIfFailToOpen&&(B.newDisplayView(),B.save(null,B._pendingOpenJSON)),delete B._pendingOpenJSON),B._pendingSelectURL&&T(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingDisplays=!0)},B.prototype.requestSymbols=function(){var B=this;this._requestingSymbols||(this.request("explore","/symbols",function(a){B._requestingSymbols=!1,B.symbols.parse(a),B._pendingOpenJSON&&L(B._pendingOpenJSON)&&(B.symbols.dataModel.getDataById(B._pendingOpenJSON)?(B.open(B._pendingOpenJSON),B.selectFileNode(B._pendingOpenJSON)):Ra.config.newIfFailToOpen&&(B.newSymbolView(),B.save(null,B._pendingOpenJSON)),delete B._pendingOpenJSON),B._pendingSelectURL&&L(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingSymbols=!0)},B.prototype.requestComponents=function(){var B=this;this._requestingComponents||(this.request("explore","/components",function(a){B._requestingComponents=!1,B.components.parse(a),B._pendingOpenJSON&&BB(B._pendingOpenJSON)&&(B.components.dataModel.getDataById(B._pendingOpenJSON)?B.open(B._pendingOpenJSON):Ra.config.newIfFailToOpen&&B.newComponent(),delete B._pendingOpenJSON),B._pendingSelectURL&&BB(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingComponents=!0)},B.prototype.requestScenes=function(){var B=this;this._requestingScenes||(this.request("explore","/scenes",function(a){B._requestingScenes=!1,B.scenes.parse(a),B._pendingOpenJSON&&aB(B._pendingOpenJSON)&&(B.open(B._pendingOpenJSON),delete B._pendingOpenJSON),B._pendingSelectURL&&isScenes(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingScenes=!0)},B.prototype.requestModels=function(){var B=this;this._requestingModels||(this.request("explore","/models",function(a){B._requestingModels=!1,B.models.parse(a),B._pendingOpenJSON&&jB(B._pendingOpenJSON)&&(B.open(B._pendingOpenJSON),delete B._pendingOpenJSON),B._pendingSelectURL&&jB(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingModels=!0)},B.prototype.requestAssets=function(){var B=this;this._requestingAssets||(this.request("explore","/assets",function(a){B._requestingAssets=!1,B.assets.parse(a),B._pendingOpenJSON&&EB(B._pendingOpenJSON)&&(B.open(B._pendingOpenJSON),delete B._pendingOpenJSON),B._pendingSelectURL&&EB(B._pendingSelectURL)&&B.selectFileNode(B._pendingSelectURL)},Ra.config.requestDelay),this._requestingAssets=!0)},B.prototype.requestImport=function(B){var a=this;Ra.config.importConfirm?RB("",H("editor.importconfirm"),function(){a.request("import",{path:B,move:!0})},function(){a.request("import",{path:B,move:!1})}):this.request("import",{path:B,move:!0})},B.prototype.downloadFile=function(B){try{var a=document.createElement("iframe");a.src=B,a.style.display="none",document.body.appendChild(a)}catch(B){}},B.prototype.$6$=function(B){var a=this._currentTab;this._currentTab=B,this.inspectorPane.$6$(B),this.listPane.$6$(B),this.overview.$6$(B),this.dataView.$6$(B),this.layerPane.$6$(B),this.mainToolbar.$6$(B),this.rightToolbar.$6$(B),this.inspectorTool.$6$(B),this.fireEvent("tabUpdated",{tab:B,oldTab:a})},B.prototype.beginTransaction=function(){this.dm&&this.dm.beginTransaction()},B.prototype.endTransaction=function(){this.dm&&this.dm.endTransaction()},B.prototype.$101$=function(){this.mainTabView.$101$()},B.prototype.dropLocalFileOnGraphView=function(B){var a={event:B};if(this.displayView?(a.displayView=this.displayView,this.fireEvent("displayViewOutsideDropping",a)):this.symbolView&&(a.symbolView=this.symbolView,this.fireEvent("symbolViewOutsideDropping",a)),!a.preventDefault)for(var j=B.dataTransfer.files,E=0;E<j.length;E++){var $=j[E],H=$.name;$B(H)&&!hB(H)?this.insertLocalImageFile(B,$):HB(H)&&this.insertLocalJSONFile(B,$)}},B.prototype.insertLocalImageFile=function(B,a){var j=this,E=this.gv.lp(B);qB(a,function(B){if(j.displayView){var $=new ht.Node;$.setImage(B),$.p(E),$.setDisplayName(p(a.name)),j.displayView.addData($)}else if(j.symbolView){var H=new cj({type:"image",name:B,rect:[E.x,E.y,-1,-1]});H.setDisplayName(p(a.name)),j.symbolView.addData(H)}},!0)},B.prototype.insertLocalJSONFile=function(B,a){var j=this;qB(a,function(a){j.$99$(a,j.currentView.graphView.lp(B))})},B.prototype.dropLocalFileOnDir=function(B,a){for(var j=B.dataTransfer.files,E=a.url,$=0;$<j.length;$++){var K=j[$].name;if(!Ra.config.checkFileName(K,E+"/"+K))return void RB(H("editor.invalidfilename"),K,function(){})}for(var C=0;C<j.length;C++)this.uploadLocalFile(j[C],E)},B.prototype.uploadLocalFile=function(B,a){var j=this,E=Ra.config.checkFileName(B.name,a+"/"+B.name);if(E){var $=Ra.config.uploadExpandName;$&&/.*zip$/.test(E)?this.request($,{path:a+"/"+E,file:B}):qB(B,function(B){var $={path:a+"/"+E,content:B};j.request("upload",$)},!0)}},B.prototype.addTab=function(B,a){this.mainTabView.add(B),this.fireEvent("tabCreated",{tab:B}),a&&this.mainTabView.getTabModel().sm().ss(B),this.mainTabView.validate()},B.prototype.openByJSON=function(B,a,j,E,$){this.mainTabView.getTabModel();if(B===Aa){var H=this.mainTabView.getTabModel().getDataByTag(a);H||(H=new ht.Tab,H.setTag(a),H.setIcon("editor.display"),H.setClosable(!0),H.setName(j),new mE(this,H,a,E),this.addTab(H)),this.mainTabView.getTabModel().sm().ss(H)}else if(B===Da){var K=this.mainTabView.getTabModel().getDataByTag(a);K||(K=new ht.Tab,K.setTag(a),K.setIcon("editor.symbol"),K.setClosable(!0),K.setName(j),new cE(this,K,a,E),this.addTab(K)),this.mainTabView.getTabModel().sm().ss(K)}else B===Ta&&this.componentView.update(a,$,j,E)},B.prototype.isOpenable=function(B){return!Ra.config.isOpenable||Ra.config.isOpenable(B)},B.prototype.open=function(B,a){var j=this;kB(B)&&(B=this.getFileNode(B)),B&&!B.$34$&&this.isOpenable(B)&&(B.fileType===Aa?this.mainTabView.open(B):B.fileType===Da?this.mainTabView.open(B):B.fileType===Ta?this.componentView.open(B):B.fileType===qa&&(ZB(B.url)?t(B.url,function(E){var $=ht.Default.svgToShape(E,{segments:Ra.config.svgSegments});setTimeout(function(){var E=i(B.getName());a?j.newSymbolView(E,!1):j.newDisplayView(E),$.output.comps.forEach(function(B){delete B.repeatImage}),j.beginTransaction();var H=Ra.toDatas($.output.comps,a);H.forEach(function(B){j.currentView.addData(B,!0)}),a&&($.output.width&&j.dm.a("width",$.output.width),$.output.height&&j.dm.a("height",$.output.height)),j.zoomToFit(),j.endTransaction()},600)}):hB(B.url)?t(B.url,function(E){var $=i(B.getName()),H=ht.Default.cadToShape(E),K={},C=Object.keys(H.blockDef).length,Z=function(){a?j.newSymbolView($,!1):j.newDisplayView($),j.beginTransaction(),H.comps.forEach(function(B){"image"===B.type&&K[B.name]&&(B.name=K[B.name])});var B=Ra.toDatas(H.comps,a);B.forEach(function(B){j.currentView.addData(B,!0)}),a&&(H.width&&j.dm.a("width",H.width),H.height&&j.dm.a("height",H.height)),j.zoomToFit(),j.endTransaction()};C?!function(){var a=function(){C--,0===C&&Z()},E="symbols/"+B.path.substr("assets/".length)+"/"+$+"/";for(var h in H.blockDef){H.blockDef[h].comps.forEach(function(B){"image"===B.type&&(B.name=E+B.name+".json")});var m={path:K[h]=E+h+".json",content:v(H.blockDef[h])};j.request("upload",m,a)}}():Z()}):(mB(B.url)||JB(B.url))&&t(B.url,function(a){j.fontConverterOptionView.open(function(E){ht.Default.fontToShape(a,E,function(a){var E=i(B.getName());j.newSymbolView(E,!1),j.beginTransaction(),j.currentView.update(ht.Default.stringify(a)),j.endTransaction(),j.currentView.dirty=!0})})},{responseType:"arraybuffer"})))},B.prototype.$99$=function(B,a){var j=this;if(B){if(this.beginTransaction(),B=g(B),this.displayView&&oB(B.d)){var E=this.displayView.graphView,$=E.dm().deserialize(B,E.getCurrentSubGraph(),{justDatas:!0,disableOnPreDeserialize:!0,disableOnPostDeserialize:!0});if(E.sm().ss($.toList(E.isSelectable,E)),$.each(function(B){j.displayView.addData(B,!0,!0)}),a){var H=E.getUnionNodeRect($.toArray());E.moveDatas($,a.x-H.x-H.width/2,a.y-H.y-H.height/2)}}else this.symbolView&&oB(B.comps)&&B.comps.forEach(function(B){Va(B,j.symbolView)});this.gv.setFocus(),this.endTransaction()}},B.prototype.$100$=function(B,a){var j=this;if(B){if(!this.tab)return void this.open(B);if(!hB(B.url)){if(B.fileType===Aa)return void(this.displayView&&(Ra.config.insertDisplayViewAsRefGraph?!function(){var E=new ht.RefGraph;E.setRef(B.uuid),E.onPendingUpdated=function(){E.onPendingUpdated=null,E.p(a)},E.setDisplayName(p(B.url)),j.displayView.addData(E)}():t(B.url,function(B){j.$99$(B,a)})));if(this.url!==B.url)if(B.fileType!==Ta){if(B.fileType!==Da&&B.fileType!==qa)return B.fileType===Bj?void(this.displayView&&Ra.config.handleInsertSceneFileToGraphView&&Ra.config.handleInsertSceneFileToGraphView(this.displayView,B,a)):void(B.fileType===La&&this.displayView&&Ra.config.handleInsertModelFileToGraphView&&Ra.config.handleInsertModelFileToGraphView(this.displayView,B,a));if(this.displayView){var E=new ht.Node;if(E.setImage(B.uuid),a)E.p(a.x,a.y);else{var $=this.gv.getViewRect();$&&E.p($.x+$.width/2,$.y+$.height/2)}E.setDisplayName(p(B.url)),this.displayView.addData(E)}else if(this.symbolView){var H=ht.Default.getImage(B.uuid),K=H?H.width:-1,C=H?H.height:-1,Z=a?a.x:(this.dm.a("width")||0)/2,h=a?a.y:(this.dm.a("height")||0)/2,m=new cj({type:"image",name:B.uuid,rect:[Z-(K>0?K/2:0),h-(C>0?C/2:0),K,C]});m.setDisplayName(p(B.url)),this.symbolView.addData(m)}}else if(this.symbolView){var J=new Tj({type:B.uuid,rect:[a?a.x:(this.dm.a("width")||0)/2,a?a.y:(this.dm.a("height")||0)/2,-1,-1]});J.setDisplayName(p(B.url)),this.symbolView.addData(J)}}}},B.prototype.newDisplayView=function(B){return this.mainTabView.newDisplayView(B)},B.prototype.newSymbolView=function(B,a){return this.mainTabView.newSymbolView(B,a)},B.prototype.newComponent=function(){this.componentView.open()},B.prototype.save=function(B,a){this.mainTabView.save(B,a)},B.prototype.saveAll=function(B){this.mainTabView.saveAll(B)},B.prototype.reload=function(){this.mainTabView.reload()},B.prototype.preview=function(){this.mainTabView.preview()},B.prototype.closeTab=function(B,a,j){this.mainTabView.closeTab(B,a,j)},B.prototype.closeOtherTabs=function(B,a){this.mainTabView.closeOtherTabs(B,a)},B.prototype.closeTabsToTheRight=function(B,a){this.mainTabView.closeTabsToTheRight(B,a)},B.prototype.closeAllTabs=function(B,a){this.mainTabView.closeAllTabs(B,a)},B.prototype.filterProperties=function(){this.inspector&&this.inspector.filterPropertiesLater()},B.prototype.isRulerEnabled=function(){return this._rulerEnabled},B.prototype.setRulerEnabled=function(B){var a=this._rulerEnabled;a!==B&&(this._rulerEnabled=B,this.tabs.forEach(function(a){a.getView().setRulerEnabled(B)}),this.fp("rulerEnabled",a,B))},B.prototype.toggleRulerEnabled=function(){this.setRulerEnabled(!this.isRulerEnabled())},B.prototype.isGridEnabled=function(){return this._gridEnabled},B.prototype.setGridEnabled=function(B){var a=this._gridEnabled;a!==B&&(this._gridEnabled=B,this.tabs.forEach(function(a){a.getView().graphView.getEditInteractor().gridEnabled=B}),this.fp("gridEnabled",a,B))},B.prototype.toggleGridEnabled=function(){this.setGridEnabled(!this.isGridEnabled())},B.prototype.toggleLeft=function(){"normal"===this.leftSplitView.getStatus()?this.leftSplitView.setStatus("cl"):this.leftSplitView.setStatus("normal")},B.prototype.toggleRight=function(){"normal"===this.mainSplitView.getStatus()?this.mainSplitView.setStatus("cr"):this.mainSplitView.setStatus("normal")},B.prototype.toggleBoth=function(){"normal"===this.mainSplitView.getStatus()||"normal"===this.leftSplitView.getStatus()?(this.mainSplitView.setStatus("cr"),this.leftSplitView.setStatus("cl")):(this.mainSplitView.setStatus("normal"),this.leftSplitView.setStatus("normal"))},B.prototype.zoomIn=function(){this.gv&&this.gv.zoomIn(Ra.config.animate)},B.prototype.zoomOut=function(){this.gv&&this.gv.zoomOut(Ra.config.animate)},B.prototype.zoomReset=function(){this.gv&&this.gv.zoomReset(Ra.config.animate)},B.prototype.zoomToFit=function(){this.gv&&this.gv.fitContent(Ra.config.animate,Ra.config.fitPadding)},B.prototype.delete=function(){this.gv&&this.gv.removeSelection()},B.prototype.copyFiles=function(){this.explorer.copyFiles()},B.prototype.pasteFiles=function(){this.explorer.pasteFiles()},B.prototype.copy=function(){var B=this;if(this.ld){var a=this.cloneInfo;if(a.funcArray.length=0,a.jsonArray.length=0,a.offset={x:0,y:0},a.lastCheck=null,a.lastView=this.gv,this.displayView)a.type="display";else{if(!this.symbolView)return void(a.type=null);a.type="symbol"}var j={};this.selection.forEach(function(B){B._refGraph||(j[B._id]=B,B instanceof ht.Block&&!(B instanceof ht.RefGraph)&&D(B,j))});var E=[],$=void 0;this.gv.each(function(B){j[B._id]&&(E.push(B),B instanceof ht.Node&&($=$?ht.Default.unionRect($,B.getRect()):B.getRect()))}),a.rect=$,this.gv.copyMap=j,E.forEach(function(j){var E=B.gv.isSelected(j),$=j.$51$(B.gv);if(0!==$.length){a.funcArray.push([j._id,E].concat($));var H=Xa(j);H&&a.jsonArray.push([E,H])}}),this.fireEvent("copy",{datas:E,info:a}),this.gv.copyMap=null}},B.prototype.hasCopyInfo=function(){return this.cloneInfo.funcArray.length>0},B.prototype.paste=function(B,a){var j=this,E=this.gv,$=this.cloneInfo;if($.funcArray.length&&E){var H=[],K=[];if(this.beginTransaction(),ht.Default.setIsolating(!0),"display"===$.type&&this.displayView||"symbol"===$.type&&this.symbolView?!function(){var B={},a=[];$.funcArray.forEach(function($){var C=$[0],Z=$[1],h=$[2],m=$[3],J=m(h,E);j.currentView.addData(J,!0),B[C]=J,H.push(J),a.push(h),Z&&K.push(J)});for(var C=0;C<H.length;C++)H[C].$50$(a[C],E,B)}():$.jsonArray.length&&$.jsonArray.forEach(function(B){var a=B[0],$=B[1],C=Fa($,!!j.symbolView);C&&(C.setParent(E.getCurrentSubGraph()),j.currentView.addData(C,!0),H.push(C),a&&K.push(C))}),ht.Default.setIsolating(!1),K.length&&this.sm.ss(K),$.lastView!==E&&($.offset.x=-Ra.config.pasteOffset,$.offset.y=-Ra.config.pasteOffset),!B&&H.length){if(a){var C=$.rect;$.offset.x=a.x-C.x-C.width/2,$.offset.y=a.y-C.y-C.height/2}else $.offset.x+=Ra.config.pasteOffset,$.offset.y+=Ra.config.pasteOffset;E.moveDatas(H,$.offset.x,$.offset.y);var Z=E.$64$(H);Z&&($.offset.x+=Z.x,$.offset.y+=Z.y,$.lastCheck||(E.moveDatas(H,-Ra.config.pasteOffset,-Ra.config.pasteOffset),$.offset.x-=Ra.config.pasteOffset,$.offset.y-=Ra.config.pasteOffset)),$.lastCheck=Z}$.lastView=E,this.fireEvent("paste",{datas:H,info:$}),E.setFocus(),this.endTransaction()}},B.prototype.block=function(){var B=this;if(this.displayView){var a=this.selection;a.length&&!function(){B.beginTransaction();var j=new ht.Block;a.forEach(function(B){B.setParent(j)}),B.displayView.addData(j),B.endTransaction()}()}},B.prototype.unblock=function(){var B=this;if(this.displayView){this.beginTransaction();var a=[];this.selection.forEach(function(j){j instanceof ht.Block&&!(j instanceof ht.RefGraph)&&!function(){var E=j.getParent();j.getChildren().toArray().forEach(function(B){B.setParent(E),a.push(B)}),B.dm.remove(j)}()}),a.length&&(this.sm.ss(a),this.gv.setFocus()),this.endTransaction()}},B.prototype.bringForward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionDown():this.dm.bringSelectionForward())},B.prototype.bringToFront=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToBottom():this.dm.bringSelectionToFront())},B.prototype.sendBackward=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionUp():this.dm.sendSelectionBackward())},B.prototype.sendToBack=function(){this.dm&&(this.dm.isHierarchicalRendering()?this.dm.moveSelectionToTop():this.dm.sendSelectionToBack())},B.prototype.undo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canUndo()&&(this.dm.undo(),this.fireEvent("undo",{}))},B.prototype.redo=function(){this.dm&&this.dm.getHistoryManager()&&this.dm.getHistoryManager().canRedo()&&(this.dm.redo(),this.fireEvent("redo",{}))},B.prototype.distributeHorizontal=function(){this.inspectorTool.distributeHorizontal()},B.prototype.distributeVertical=function(){this.inspectorTool.distributeVertical()},B.prototype.alignLeft=function(){this.inspectorTool.alignLeft()},B.prototype.alignHorizontal=function(){this.inspectorTool.alignHorizontal()},B.prototype.alignRight=function(){this.inspectorTool.alignRight()},B.prototype.alignTop=function(){this.inspectorTool.alignTop()},B.prototype.alignVertical=function(){this.inspectorTool.alignVertical()},B.prototype.alignBottom=function(){this.inspectorTool.alignBottom()},B.prototype.folder=function B(){if(this.displayView){this.beginTransaction();var B=new ht.Data;B.s("editor.folder",!0),this.dm.add(B);var a=this.list.getTopRowOrderSelection();a.each(function(a){B.addChild(a)}),this.sm.ss(B),this.endTransaction()}},B.prototype.unfolder=function(){var B=this;if(this.displayView){this.beginTransaction();var a=this.sm.toSelection(function(B){return B.s("editor.folder")});a.forEach(function(B){B.toChildren().forEach(function(a){a.setParent(B.getParent())})}),a.forEach(function(a){B.dm.remove(a)}),this.endTransaction()}},B.prototype.locate=function(B){B&&this.request("locate",B.url||B)},B.prototype.saveImage=function(B,a,j){var E=this,$=function(){var $={path:a,content:Ba(B)};E.request("upload",$,j)};kB(B)&&!ht.Default.getImage(B)?/.json$/.test(B)?ht.Default.xhrLoad(B,function(a){a&&(ht.Default.setImage(B,ht.Default.parse(a)),$())}):!function(){var a=new window.Image;a.onload=function(){ht.Default.setImage(B,a),$()},a.src=B}():$()},B.prototype.handleKeydown=function(B){var a=B.keyCode;if(G(B)&&83===a&&B.preventDefault(),Zj.length){if((B.target._ignore||!yB(B.target))&&!ht.Default.popup){var j=Zj[Zj.length-1];U(B)&&j.$49$?j.$49$():c(B)&&j.$48$&&j.$48$()}}else{var E={event:B};if(this.fireEvent("keydown",E),!E.preventDefault){if(G(B)&&83===a)return void this.save();if(!yB(B.target)){if(B.preventDefault(),U(B)){for(var $=0;$<this.menus.length;$++)if(this.menus[$].isShowing())return void this.menus[$].hide();if(this.funcView.smartClose&&this.funcView.getView().parentNode)return void this.funcView.hide();if(this.iconsView.getView().parentNode)return void this.iconsView.hide();if(this.tab){var H=this.tab.getView().graphView.getInteractors();H&&H.each(function(a){a.$49$&&a.$49$(B)})}}80===a?this.preview():187===a?this.zoomIn():189===a?this.zoomOut():48===a?this.zoomToFit():57===a?this.zoomReset():G(B)&&67===a?this.copy():G(B)&&86===a?this.paste():G(B)&&r(B)&&90===a?this.redo():G(B)&&90===a?this.undo():B.altKey&&G(B)&&221===a?this.bringToFront():B.altKey&&G(B)&&219===a?this.sendToBack():G(B)&&221===a?this.bringForward():G(B)&&219===a&&this.sendBackward()}}}},B.prototype.createDisplayItem=function(B,a,j,E,$){var H=this,K=function(){return H.displayView&&H.displayView.$4$()===B},C=NB(B,a,j,K);return C.visible=function(){return!!H.displayView},C.action=function(){H.displayView&&H.displayView.$5$(B,E,$)},C},B.prototype.createSymbolItem=function(B,a,j,E,$){var H=this,K=function(){return H.symbolView&&H.symbolView.$4$()===B},C=NB(B,a,j,K);return C.visible=function(){return!!H.symbolView},C.action=function(){H.symbolView&&H.symbolView.$5$(B,E,$)},C},B.prototype.showMessage=function(B,a,j){this.messageView.show(B,a,j)},ta(B,[{key:"dm",get:function(){return this.gv?this.gv.dm():null}},{key:"gv",get:function(){var B=this.mainTabView.getTabModel().sm().ld();return B?B.getView().graphView:null}},{key:"editInteractor",get:function(){return this.gv?this.gv.getEditInteractor():null}},{key:"pointsEditingMode",get:function(){return!!this.editInteractor&&this.editInteractor.pointsEditingMode},set:function(B){this.editInteractor&&(this.editInteractor.pointsEditingMode=B)}},{key:"anchorVisible",get:function(){return!!this.editInteractor&&this.editInteractor.getStyle("anchorVisible")},set:function(B){this.editInteractor&&this.editInteractor.setStyle("anchorVisible",B)}},{key:"sm",get:function(){return this.gv?this.gv.sm():null}},{key:"ld",get:function(){return this.sm?this.sm.ld():null}},{key:"selection",get:function(){var B=this,a=[];return this.gv&&this.gv.each(function(j){B.gv.isSelected(j)&&a.push(j)}),a}},{key:"tabs",get:function(){return this.mainTabView.tabs}},{key:"inspector",get:function(){return this.inspectorPane.inspector}},{key:"list",get:function(){return this.listPane.list}},{key:"tab",get:function(){return this.mainTabView.currentTab}},{key:"url",get:function(){return this.tab?this.tab.getTag():null}},{key:"explorer",get:function(){return this.leftTopTabView.getCurrentTab().getView()}},{key:"dir",get:function(){return this.explorer?this.explorer.tree.getSelectionModel().getLastData():null}},{key:"file",get:function(){return this.explorer?this.explorer.getFileListView().getSelectionModel().getLastData():null}},{key:"currentLayer",get:function(){return this.layerPane.currentLayer}},{key:"currentView",get:function(){var B=this.tab;return B?B.getView():null}},{key:"displayTree",get:function(){return this.displayView?this.displayView.displayTree:null}},{key:"displayView",get:function(){var B=this.currentView;return B instanceof mE?B:null}},{key:"symbolList",get:function(){return this.symbolView?this.symbolView.symbolList:null}},{key:"symbolView",get:function(){var B=this.currentView;return B instanceof cE?B:null}},{key:"inspectorCompact",get:function(){return this._inspectorCompact},set:function(B){this._inspectorCompact=B,this.filterProperties(),this.inspectorTool.iv()}},{key:"inspectorInputFilter",get:function(){return this.inspectorTool.searchField.getValue()},set:function(B){this.inspectorTool.searchField.setValue(B),this.filterProperties()}}]),B}();q(w$,{ms_fire:1,_rulerEnabled:Ra.config.rulerEnabled,_gridEnabled:Ra.config.gridEnabled}),Ra.Editor=w$;var P$=function(){function B(a,j){var E=this;Wa(this,B),this.editor=j,this.handler=a,this.cookie=0,this.callbacks={},this.cmds={},this.fileChangeVersion=String((new Date).getTime());var $=Ra.config.host||window.location.hostname,H=Ra.config.port||window.location.port,K=this.url=window.location.protocol+"//"+$+":"+H;setTimeout(function(){E.handler({type:"connected",message:K})},1),Ra.config.checkForFileChanges&&Ra.config.checkForFileChangesInterval&&this.fileChangedEvent()}return B.prototype.request=function(B,a,j){var E=++this.cookie;this.callbacks[E]=j,this.cmds[E]=B;var $=this.editor.sid;this[B](E,a,$?$:null,j);var H=B;a&&(kB(a)?H=B+": "+a:a.path&&(H=B+": "+a.path)),this.handler({type:"request",message:H,cmd:B,data:a})},B.prototype.fileChangedEvent=function(){var B=this,a=this.url+"/fileVersion";a+="/"+B.fileChangeVersion,a+="?sid="+this.editor.sid,B.send("GET",a,null,function(a){B.fileChangeVersion=String((new Date).getTime());var j=a.target.response;if(j){j=JSON.parse(j);var E=Object.keys(j);E.forEach(function(a){B.handler({type:"fileChanged",path:a})})}}),setTimeout(function(){B.fileChangedEvent()},Ra.config.checkForFileChangesInterval)},B.prototype.export=function(B,a,j){var E=this,$=new ht.Request,H={},K=new FormData,C=this.url+"/export";C+="?sid="+j,K.append("dir",a),H.url=encodeURI(C),H.method="POST",H.data=K,$.setResponseType("blob"),$.onload=function(a){var j=a.target;if(200==j.status||0===j.status){var $=j.response,H=j.getResponseHeader("Content-Disposition").split(";"),K=H[1].split("=")[1],C=new Blob([$],{type:"application/zip"}),Z=document.createElement("a");Z.href=window.URL.createObjectURL(C),Z.download=decodeURI(K),Z.click(),E.handleRespone(B,!0)}},$.send(H)},B.prototype.mkdir=function(B,a,j){var E=this,$=new ht.Request,H={},K=new FormData,C=this.url+"/mkdir";C+="?sid="+j,K.append("path",a),H.url=encodeURI(C),H.method="POST",H.data=K,$.onload=function(j){var $=j.target;if(200==$.status||0===$.status){var H=$.response||$.responseText;E.handleRespone(B,"true"===H),E.handler({type:"fileChanged",path:a})}},$.send(H)},B.prototype.explore=function(B,a,j){var E=this,$=new ht.Request,H={},K=this.url+"/explore";K+="/"+a,K+="?sid="+j,H.url=encodeURI(K),$.onload=function(a){var j=a.target;if(200==j.status||0===j.status){var $=j.response||j.responseText;E.handleRespone(B,JSON.parse($))}},$.send(H)},B.prototype.upload=function(B,a,j){var E=this,$=new FormData,H=this.url+"/upload",K=a.path;H+="?sid="+j,$.append("path",a.path),$.append("content",a.content),E.send("POST",H,$,function(a){var j=a.target;if(200==j.status||0===j.status){var $=j.response;if(E.handleRespone(B,!0),$){var H=JSON.parse($);E.handler({type:"confirm",path:H.tempName,datas:H.paths})}else E.handler({type:"fileChanged",path:K})}})},B.prototype.rename=function(B,a,j){var E=this,$=new FormData,H=a.new,K=a.old,C=this.url+"/rename";C+="?sid="+j,$.append("newPath",H),$.append("oldPath",K),E.send("POST",C,$,function(a){var j=a.target;if(200==j.status||0===j.status){var $=j.response||j.responseText;E.handleRespone(B,"true"===$),"true"===$&&(E.handler({type:"fileChanged",path:H}),E.handler({type:"fileChanged",path:K}))}})},B.prototype.remove=function(B,a,j){var E=this,$=new FormData,H=this.url+"/remove";H+="?sid="+j,$.append("path",a),E.send("POST",H,$,function(j){var $=j.target;if(200==$.status||0===$.status){var H=$.response||$.responseText;E.handleRespone(B,"true"===H),"true"===H&&E.handler({type:"fileChanged",path:a})}})},B.prototype.locate=function(B,a,j){var E=this,$=this.url+"/locate";$+="?dir="+a,$+="&sid="+j,E.send("GET",$,null,function(a){var j=a.target;200!=j.status&&0!=j.status||E.handleRespone(B,!0)})},B.prototype.open=function(B,a,j){var E=this,$=this.url+"/open";$+="?url="+a,$+="&sid="+j,E.send("GET",$,null,function(a){var j=a.target;200!=j.status&&0!=j.status||E.handleRespone(B,!0)})},B.prototype.source=function(B,a,j){var E=this,$=new FormData,H=this.url+"/source";H+="?sid="+j,$.append("url",a.url),$.append("encoding",a.encoding),$.append("prefix",a.prefix),E.send("POST",H,$,function(a){var j=a.target;if(200==j.status||0===j.status){var $=j.response||j.responseText;E.handleRespone(B,$)}})},B.prototype.import=function(B,a,j){var E=this,$=new FormData,H=this.url+"/import";H+="?sid="+j,$.append("path",a.path),$.append("move",a.move),E.send("POST",H,$,function(a){var j=a.target;200!=j.status&&0!==j.status||E.handleRespone(B,!0)})},B.prototype.send=function(B,a,j,E){var $=new ht.Request,H={};H.url=encodeURI(a),H.method=B,H.data=j,E&&($.onload=E),$.send(H)},B.prototype.handleRespone=function(B,a){var j=this.callbacks[B],E=this.cmds[B];delete this.callbacks[B],delete this.cmds[B],j&&j(a),this.handler({type:"response",message:E,cmd:E,data:a})},B}();return console.log("HT Editor v"+kj+" powered by HT for Web v"+ht.Default.getVersion()+" from www.hightopo.com"),!window.onbeforeunload&&Ra.config.promptBeforeClosing&&(window.onbeforeunload=function(B){return B.returnValue=H("editor.closetip"),B.returnValue}),Ra.version=kj,Ra.getString=H,Ra.stringifyFunction=Z,Ra.parseFunction=m,Ra.createButton=QB,Ra.createItem=NB,Ra.layoutMainView=DB,Ra.msClass=q,Ra.initContext=u,Ra.getInput=YB,Ra.trimExtension=i,Ra.fileNameToDisplayName=p,Ra.isJSON=HB,Ra.getter=J,Ra.setter=O,Ra.snapshot=Ba,Ra.CodeEditor=Ya,Ra.WebSocketService=vj,Ra.HTTPService=P$,Ra.createEditor=function(B){if(window.location.host.indexOf("hightopo")>=0){var a="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cdiv style='display:none'%3E%3Cspan id='cnzz_stat_icon_1000279011'%3E%3C/span%3E%3Cscript src='"+a+"s23.cnzz.com/z_stat.php%3Fid%3D1000279011%26show%3Dpic' type='text/javascript'%3E%3C/script%3E%3C/div%3E")),document.body.style.margin="0px",document.body.style.padding="0px"}B&&(ht.Default.isString(B)?B={container:B}:B.tagName&&B.appendChild&&(B={container:B})),B=B||{};var j=void 0,E=void 0===B.container?Ra.config.container:B.container;return null===E?j=null:E?ht.Default.isString(E)?j=document.getElementById(E):E.length?(j=ht.Default.createDiv(),j.style.left=E[0]+"px",j.style.top=E[1]+"px",j.style.width=E[2]+"px",j.style.height=E[3]+"px",document.body.appendChild(j)):j=E:j=document.body,B.$39$=j,new w$(B)},Ra.init=function(){Ra.consts||(na(),ea(),la())},Ra}();